(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function i(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(e){if(e.ep)return;e.ep=!0;const s=i(e);fetch(e.href,s)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Au(n){const r=Object.create(null);for(const i of n.split(","))r[i]=1;return i=>i in r}const nt={},yr=[],Vn=()=>{},cv=()=>!1,Ya=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),_u=n=>n.startsWith("onUpdate:"),Ht=Object.assign,bu=(n,r)=>{const i=n.indexOf(r);i>-1&&n.splice(i,1)},fv=Object.prototype.hasOwnProperty,$e=(n,r)=>fv.call(n,r),Te=Array.isArray,Ar=n=>Cs(n)==="[object Map]",Uh=n=>Cs(n)==="[object Set]",hv=n=>Cs(n)==="[object RegExp]",De=n=>typeof n=="function",ut=n=>typeof n=="string",ki=n=>typeof n=="symbol",ft=n=>n!==null&&typeof n=="object",Hh=n=>(ft(n)||De(n))&&De(n.then)&&De(n.catch),Vh=Object.prototype.toString,Cs=n=>Vh.call(n),dv=n=>Cs(n).slice(8,-1),jh=n=>Cs(n)==="[object Object]",Su=n=>ut(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,$r=Au(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qa=n=>{const r=Object.create(null);return i=>r[i]||(r[i]=n(i))},pv=/-(\w)/g,En=Qa(n=>n.replace(pv,(r,i)=>i?i.toUpperCase():"")),gv=/\B([A-Z])/g,Ii=Qa(n=>n.replace(gv,"-$1").toLowerCase()),Wa=Qa(n=>n.charAt(0).toUpperCase()+n.slice(1)),Lo=Qa(n=>n?`on${Wa(n)}`:""),_i=(n,r)=>!Object.is(n,r),_r=(n,...r)=>{for(let i=0;i<n.length;i++)n[i](...r)},Pl=(n,r,i,t=!1)=>{Object.defineProperty(n,r,{configurable:!0,enumerable:!1,writable:t,value:i})},xl=n=>{const r=parseFloat(n);return isNaN(r)?n:r};let pc;const Xa=()=>pc||(pc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ts(n){if(Te(n)){const r={};for(let i=0;i<n.length;i++){const t=n[i],e=ut(t)?Av(t):Ts(t);if(e)for(const s in e)r[s]=e[s]}return r}else if(ut(n)||ft(n))return n}const vv=/;(?![^(]*\))/g,mv=/:([^]+)/,yv=/\/\*[^]*?\*\//g;function Av(n){const r={};return n.replace(yv,"").split(vv).forEach(i=>{if(i){const t=i.split(mv);t.length>1&&(r[t[0].trim()]=t[1].trim())}}),r}function _v(n){if(!n)return"";if(ut(n))return n;let r="";for(const i in n){const t=n[i];if(ut(t)||typeof t=="number"){const e=i.startsWith("--")?i:Ii(i);r+=`${e}:${t};`}}return r}function wi(n){let r="";if(ut(n))r=n;else if(Te(n))for(let i=0;i<n.length;i++){const t=wi(n[i]);t&&(r+=t+" ")}else if(ft(n))for(const i in n)n[i]&&(r+=i+" ");return r.trim()}const bv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Sv=Au(bv);function Gh(n){return!!n||n===""}const zh=n=>!!(n&&n.__v_isRef===!0),He=n=>ut(n)?n:n==null?"":Te(n)||ft(n)&&(n.toString===Vh||!De(n.toString))?zh(n)?He(n.value):JSON.stringify(n,Kh,2):String(n),Kh=(n,r)=>zh(r)?Kh(n,r.value):Ar(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((i,[t,e],s)=>(i[Bo(t,s)+" =>"]=e,i),{})}:Uh(r)?{[`Set(${r.size})`]:[...r.values()].map(i=>Bo(i))}:ki(r)?Bo(r):ft(r)&&!Te(r)&&!jh(r)?String(r):r,Bo=(n,r="")=>{var i;return ki(n)?`Symbol(${(i=n.description)!=null?i:r})`:n};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zt;class Yh{constructor(r=!1){this.detached=r,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Zt,!r&&Zt&&(this.index=(Zt.scopes||(Zt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let r,i;if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].pause();for(r=0,i=this.effects.length;r<i;r++)this.effects[r].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let r,i;if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].resume();for(r=0,i=this.effects.length;r<i;r++)this.effects[r].resume()}}run(r){if(this._active){const i=Zt;try{return Zt=this,r()}finally{Zt=i}}}on(){++this._on===1&&(this.prevScope=Zt,Zt=this)}off(){this._on>0&&--this._on===0&&(Zt=this.prevScope,this.prevScope=void 0)}stop(r){if(this._active){this._active=!1;let i,t;for(i=0,t=this.effects.length;i<t;i++)this.effects[i].stop();for(this.effects.length=0,i=0,t=this.cleanups.length;i<t;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,t=this.scopes.length;i<t;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!r){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}function Ev(n){return new Yh(n)}function wv(){return Zt}let ot;const Mo=new WeakSet;class Qh{constructor(r){this.fn=r,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Zt&&Zt.active&&Zt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Mo.has(this)&&(Mo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Xh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,gc(this),qh(this);const r=ot,i=Tn;ot=this,Tn=!0;try{return this.fn()}finally{Jh(this),ot=r,Tn=i,this.flags&=-3}}stop(){if(this.flags&1){for(let r=this.deps;r;r=r.nextDep)Cu(r);this.deps=this.depsTail=void 0,gc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Mo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Dl(this)&&this.run()}get dirty(){return Dl(this)}}let Wh=0,es,ts;function Xh(n,r=!1){if(n.flags|=8,r){n.next=ts,ts=n;return}n.next=es,es=n}function Eu(){Wh++}function wu(){if(--Wh>0)return;if(ts){let r=ts;for(ts=void 0;r;){const i=r.next;r.next=void 0,r.flags&=-9,r=i}}let n;for(;es;){let r=es;for(es=void 0;r;){const i=r.next;if(r.next=void 0,r.flags&=-9,r.flags&1)try{r.trigger()}catch(t){n||(n=t)}r=i}}if(n)throw n}function qh(n){for(let r=n.deps;r;r=r.nextDep)r.version=-1,r.prevActiveLink=r.dep.activeLink,r.dep.activeLink=r}function Jh(n){let r,i=n.depsTail,t=i;for(;t;){const e=t.prevDep;t.version===-1?(t===i&&(i=e),Cu(t),Cv(t)):r=t,t.dep.activeLink=t.prevActiveLink,t.prevActiveLink=void 0,t=e}n.deps=r,n.depsTail=i}function Dl(n){for(let r=n.deps;r;r=r.nextDep)if(r.dep.version!==r.version||r.dep.computed&&(Zh(r.dep.computed)||r.dep.version!==r.version))return!0;return!!n._dirty}function Zh(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===cs)||(n.globalVersion=cs,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!Dl(n))))return;n.flags|=2;const r=n.dep,i=ot,t=Tn;ot=n,Tn=!0;try{qh(n);const e=n.fn(n._value);(r.version===0||_i(e,n._value))&&(n.flags|=128,n._value=e,r.version++)}catch(e){throw r.version++,e}finally{ot=i,Tn=t,Jh(n),n.flags&=-3}}function Cu(n,r=!1){const{dep:i,prevSub:t,nextSub:e}=n;if(t&&(t.nextSub=e,n.prevSub=void 0),e&&(e.prevSub=t,n.nextSub=void 0),i.subs===n&&(i.subs=t,!t&&i.computed)){i.computed.flags&=-5;for(let s=i.computed.deps;s;s=s.nextDep)Cu(s,!0)}!r&&!--i.sc&&i.map&&i.map.delete(i.key)}function Cv(n){const{prevDep:r,nextDep:i}=n;r&&(r.nextDep=i,n.prevDep=void 0),i&&(i.prevDep=r,n.nextDep=void 0)}let Tn=!0;const $h=[];function ni(){$h.push(Tn),Tn=!1}function ii(){const n=$h.pop();Tn=n===void 0?!0:n}function gc(n){const{cleanup:r}=n;if(n.cleanup=void 0,r){const i=ot;ot=void 0;try{r()}finally{ot=i}}}let cs=0;class Tv{constructor(r,i){this.sub=r,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Tu{constructor(r){this.computed=r,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(r){if(!ot||!Tn||ot===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==ot)i=this.activeLink=new Tv(ot,this),ot.deps?(i.prevDep=ot.depsTail,ot.depsTail.nextDep=i,ot.depsTail=i):ot.deps=ot.depsTail=i,ed(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const t=i.nextDep;t.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=t),i.prevDep=ot.depsTail,i.nextDep=void 0,ot.depsTail.nextDep=i,ot.depsTail=i,ot.deps===i&&(ot.deps=t)}return i}trigger(r){this.version++,cs++,this.notify(r)}notify(r){Eu();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{wu()}}}function ed(n){if(n.dep.sc++,n.sub.flags&4){const r=n.dep.computed;if(r&&!n.dep.subs){r.flags|=20;for(let t=r.deps;t;t=t.nextDep)ed(t)}const i=n.dep.subs;i!==n&&(n.prevSub=i,i&&(i.nextSub=n)),n.dep.subs=n}}const Ol=new WeakMap,Ui=Symbol(""),Ll=Symbol(""),fs=Symbol("");function Ft(n,r,i){if(Tn&&ot){let t=Ol.get(n);t||Ol.set(n,t=new Map);let e=t.get(i);e||(t.set(i,e=new Tu),e.map=t,e.key=i),e.track()}}function qn(n,r,i,t,e,s){const a=Ol.get(n);if(!a){cs++;return}const o=l=>{l&&l.trigger()};if(Eu(),r==="clear")a.forEach(o);else{const l=Te(n),u=l&&Su(i);if(l&&i==="length"){const c=Number(t);a.forEach((f,h)=>{(h==="length"||h===fs||!ki(h)&&h>=c)&&o(f)})}else switch((i!==void 0||a.has(void 0))&&o(a.get(i)),u&&o(a.get(fs)),r){case"add":l?u&&o(a.get("length")):(o(a.get(Ui)),Ar(n)&&o(a.get(Ll)));break;case"delete":l||(o(a.get(Ui)),Ar(n)&&o(a.get(Ll)));break;case"set":Ar(n)&&o(a.get(Ui));break}}wu()}function er(n){const r=Ze(n);return r===n?r:(Ft(r,"iterate",fs),bn(n)?r:r.map(Rt))}function qa(n){return Ft(n=Ze(n),"iterate",fs),n}const kv={__proto__:null,[Symbol.iterator](){return Fo(this,Symbol.iterator,Rt)},concat(...n){return er(this).concat(...n.map(r=>Te(r)?er(r):r))},entries(){return Fo(this,"entries",n=>(n[1]=Rt(n[1]),n))},every(n,r){return Yn(this,"every",n,r,void 0,arguments)},filter(n,r){return Yn(this,"filter",n,r,i=>i.map(Rt),arguments)},find(n,r){return Yn(this,"find",n,r,Rt,arguments)},findIndex(n,r){return Yn(this,"findIndex",n,r,void 0,arguments)},findLast(n,r){return Yn(this,"findLast",n,r,Rt,arguments)},findLastIndex(n,r){return Yn(this,"findLastIndex",n,r,void 0,arguments)},forEach(n,r){return Yn(this,"forEach",n,r,void 0,arguments)},includes(...n){return No(this,"includes",n)},indexOf(...n){return No(this,"indexOf",n)},join(n){return er(this).join(n)},lastIndexOf(...n){return No(this,"lastIndexOf",n)},map(n,r){return Yn(this,"map",n,r,void 0,arguments)},pop(){return Vr(this,"pop")},push(...n){return Vr(this,"push",n)},reduce(n,...r){return vc(this,"reduce",n,r)},reduceRight(n,...r){return vc(this,"reduceRight",n,r)},shift(){return Vr(this,"shift")},some(n,r){return Yn(this,"some",n,r,void 0,arguments)},splice(...n){return Vr(this,"splice",n)},toReversed(){return er(this).toReversed()},toSorted(n){return er(this).toSorted(n)},toSpliced(...n){return er(this).toSpliced(...n)},unshift(...n){return Vr(this,"unshift",n)},values(){return Fo(this,"values",Rt)}};function Fo(n,r,i){const t=qa(n),e=t[r]();return t!==n&&!bn(n)&&(e._next=e.next,e.next=()=>{const s=e._next();return s.value&&(s.value=i(s.value)),s}),e}const Iv=Array.prototype;function Yn(n,r,i,t,e,s){const a=qa(n),o=a!==n&&!bn(n),l=a[r];if(l!==Iv[r]){const f=l.apply(n,s);return o?Rt(f):f}let u=i;a!==n&&(o?u=function(f,h){return i.call(this,Rt(f),h,n)}:i.length>2&&(u=function(f,h){return i.call(this,f,h,n)}));const c=l.call(a,u,t);return o&&e?e(c):c}function vc(n,r,i,t){const e=qa(n);let s=i;return e!==n&&(bn(n)?i.length>3&&(s=function(a,o,l){return i.call(this,a,o,l,n)}):s=function(a,o,l){return i.call(this,a,Rt(o),l,n)}),e[r](s,...t)}function No(n,r,i){const t=Ze(n);Ft(t,"iterate",fs);const e=t[r](...i);return(e===-1||e===!1)&&Ru(i[0])?(i[0]=Ze(i[0]),t[r](...i)):e}function Vr(n,r,i=[]){ni(),Eu();const t=Ze(n)[r].apply(n,i);return wu(),ii(),t}const Rv=Au("__proto__,__v_isRef,__isVue"),td=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(ki));function Pv(n){ki(n)||(n=String(n));const r=Ze(this);return Ft(r,"has",n),r.hasOwnProperty(n)}class nd{constructor(r=!1,i=!1){this._isReadonly=r,this._isShallow=i}get(r,i,t){if(i==="__v_skip")return r.__v_skip;const e=this._isReadonly,s=this._isShallow;if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return s;if(i==="__v_raw")return t===(e?s?Hv:ad:s?sd:rd).get(r)||Object.getPrototypeOf(r)===Object.getPrototypeOf(t)?r:void 0;const a=Te(r);if(!e){let l;if(a&&(l=kv[i]))return l;if(i==="hasOwnProperty")return Pv}const o=Reflect.get(r,i,Dt(r)?r:t);return(ki(i)?td.has(i):Rv(i))||(e||Ft(r,"get",i),s)?o:Dt(o)?a&&Su(i)?o:o.value:ft(o)?e?ld(o):pn(o):o}}class id extends nd{constructor(r=!1){super(!1,r)}set(r,i,t,e){let s=r[i];if(!this._isShallow){const l=Ci(s);if(!bn(t)&&!Ci(t)&&(s=Ze(s),t=Ze(t)),!Te(r)&&Dt(s)&&!Dt(t))return l?!1:(s.value=t,!0)}const a=Te(r)&&Su(i)?Number(i)<r.length:$e(r,i),o=Reflect.set(r,i,t,Dt(r)?r:e);return r===Ze(e)&&(a?_i(t,s)&&qn(r,"set",i,t):qn(r,"add",i,t)),o}deleteProperty(r,i){const t=$e(r,i);r[i];const e=Reflect.deleteProperty(r,i);return e&&t&&qn(r,"delete",i,void 0),e}has(r,i){const t=Reflect.has(r,i);return(!ki(i)||!td.has(i))&&Ft(r,"has",i),t}ownKeys(r){return Ft(r,"iterate",Te(r)?"length":Ui),Reflect.ownKeys(r)}}class xv extends nd{constructor(r=!1){super(!0,r)}set(r,i){return!0}deleteProperty(r,i){return!0}}const Dv=new id,Ov=new xv,Lv=new id(!0);const Bl=n=>n,Gs=n=>Reflect.getPrototypeOf(n);function Bv(n,r,i){return function(...t){const e=this.__v_raw,s=Ze(e),a=Ar(s),o=n==="entries"||n===Symbol.iterator&&a,l=n==="keys"&&a,u=e[n](...t),c=i?Bl:r?Sa:Rt;return!r&&Ft(s,"iterate",l?Ll:Ui),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:o?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function zs(n){return function(...r){return n==="delete"?!1:n==="clear"?void 0:this}}function Mv(n,r){const i={get(e){const s=this.__v_raw,a=Ze(s),o=Ze(e);n||(_i(e,o)&&Ft(a,"get",e),Ft(a,"get",o));const{has:l}=Gs(a),u=r?Bl:n?Sa:Rt;if(l.call(a,e))return u(s.get(e));if(l.call(a,o))return u(s.get(o));s!==a&&s.get(e)},get size(){const e=this.__v_raw;return!n&&Ft(Ze(e),"iterate",Ui),Reflect.get(e,"size",e)},has(e){const s=this.__v_raw,a=Ze(s),o=Ze(e);return n||(_i(e,o)&&Ft(a,"has",e),Ft(a,"has",o)),e===o?s.has(e):s.has(e)||s.has(o)},forEach(e,s){const a=this,o=a.__v_raw,l=Ze(o),u=r?Bl:n?Sa:Rt;return!n&&Ft(l,"iterate",Ui),o.forEach((c,f)=>e.call(s,u(c),u(f),a))}};return Ht(i,n?{add:zs("add"),set:zs("set"),delete:zs("delete"),clear:zs("clear")}:{add(e){!r&&!bn(e)&&!Ci(e)&&(e=Ze(e));const s=Ze(this);return Gs(s).has.call(s,e)||(s.add(e),qn(s,"add",e,e)),this},set(e,s){!r&&!bn(s)&&!Ci(s)&&(s=Ze(s));const a=Ze(this),{has:o,get:l}=Gs(a);let u=o.call(a,e);u||(e=Ze(e),u=o.call(a,e));const c=l.call(a,e);return a.set(e,s),u?_i(s,c)&&qn(a,"set",e,s):qn(a,"add",e,s),this},delete(e){const s=Ze(this),{has:a,get:o}=Gs(s);let l=a.call(s,e);l||(e=Ze(e),l=a.call(s,e)),o&&o.call(s,e);const u=s.delete(e);return l&&qn(s,"delete",e,void 0),u},clear(){const e=Ze(this),s=e.size!==0,a=e.clear();return s&&qn(e,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(e=>{i[e]=Bv(e,n,r)}),i}function ku(n,r){const i=Mv(n,r);return(t,e,s)=>e==="__v_isReactive"?!n:e==="__v_isReadonly"?n:e==="__v_raw"?t:Reflect.get($e(i,e)&&e in t?i:t,e,s)}const Fv={get:ku(!1,!1)},Nv={get:ku(!1,!0)},Uv={get:ku(!0,!1)};const rd=new WeakMap,sd=new WeakMap,ad=new WeakMap,Hv=new WeakMap;function Vv(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function jv(n){return n.__v_skip||!Object.isExtensible(n)?0:Vv(dv(n))}function pn(n){return Ci(n)?n:Iu(n,!1,Dv,Fv,rd)}function od(n){return Iu(n,!1,Lv,Nv,sd)}function ld(n){return Iu(n,!0,Ov,Uv,ad)}function Iu(n,r,i,t,e){if(!ft(n)||n.__v_raw&&!(r&&n.__v_isReactive))return n;const s=jv(n);if(s===0)return n;const a=e.get(n);if(a)return a;const o=new Proxy(n,s===2?t:i);return e.set(n,o),o}function br(n){return Ci(n)?br(n.__v_raw):!!(n&&n.__v_isReactive)}function Ci(n){return!!(n&&n.__v_isReadonly)}function bn(n){return!!(n&&n.__v_isShallow)}function Ru(n){return n?!!n.__v_raw:!1}function Ze(n){const r=n&&n.__v_raw;return r?Ze(r):n}function ud(n){return!$e(n,"__v_skip")&&Object.isExtensible(n)&&Pl(n,"__v_skip",!0),n}const Rt=n=>ft(n)?pn(n):n,Sa=n=>ft(n)?ld(n):n;function Dt(n){return n?n.__v_isRef===!0:!1}function ne(n){return cd(n,!1)}function Gv(n){return cd(n,!0)}function cd(n,r){return Dt(n)?n:new zv(n,r)}class zv{constructor(r,i){this.dep=new Tu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?r:Ze(r),this._value=i?r:Rt(r),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(r){const i=this._rawValue,t=this.__v_isShallow||bn(r)||Ci(r);r=t?r:Ze(r),_i(r,i)&&(this._rawValue=r,this._value=t?r:Rt(r),this.dep.trigger())}}function At(n){return Dt(n)?n.value:n}const Kv={get:(n,r,i)=>r==="__v_raw"?n:At(Reflect.get(n,r,i)),set:(n,r,i,t)=>{const e=n[r];return Dt(e)&&!Dt(i)?(e.value=i,!0):Reflect.set(n,r,i,t)}};function fd(n){return br(n)?n:new Proxy(n,Kv)}class Yv{constructor(r,i,t){this.fn=r,this.setter=i,this._value=void 0,this.dep=new Tu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=cs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=t}notify(){if(this.flags|=16,!(this.flags&8)&&ot!==this)return Xh(this,!0),!0}get value(){const r=this.dep.track();return Zh(this),r&&(r.version=this.dep.version),this._value}set value(r){this.setter&&this.setter(r)}}function Qv(n,r,i=!1){let t,e;return De(n)?t=n:(t=n.get,e=n.set),new Yv(t,e,i)}const Ks={},Ea=new WeakMap;let Bi;function Wv(n,r=!1,i=Bi){if(i){let t=Ea.get(i);t||Ea.set(i,t=[]),t.push(n)}}function Xv(n,r,i=nt){const{immediate:t,deep:e,once:s,scheduler:a,augmentJob:o,call:l}=i,u=m=>e?m:bn(m)||e===!1||e===0?Jn(m,1):Jn(m);let c,f,h,d,p=!1,v=!1;if(Dt(n)?(f=()=>n.value,p=bn(n)):br(n)?(f=()=>u(n),p=!0):Te(n)?(v=!0,p=n.some(m=>br(m)||bn(m)),f=()=>n.map(m=>{if(Dt(m))return m.value;if(br(m))return u(m);if(De(m))return l?l(m,2):m()})):De(n)?r?f=l?()=>l(n,2):n:f=()=>{if(h){ni();try{h()}finally{ii()}}const m=Bi;Bi=c;try{return l?l(n,3,[d]):n(d)}finally{Bi=m}}:f=Vn,r&&e){const m=f,S=e===!0?1/0:e;f=()=>Jn(m(),S)}const g=wv(),_=()=>{c.stop(),g&&g.active&&bu(g.effects,c)};if(s&&r){const m=r;r=(...S)=>{m(...S),_()}}let b=v?new Array(n.length).fill(Ks):Ks;const y=m=>{if(!(!(c.flags&1)||!c.dirty&&!m))if(r){const S=c.run();if(e||p||(v?S.some((I,R)=>_i(I,b[R])):_i(S,b))){h&&h();const I=Bi;Bi=c;try{const R=[S,b===Ks?void 0:v&&b[0]===Ks?[]:b,d];b=S,l?l(r,3,R):r(...R)}finally{Bi=I}}}else c.run()};return o&&o(y),c=new Qh(f),c.scheduler=a?()=>a(y,!1):y,d=m=>Wv(m,!1,c),h=c.onStop=()=>{const m=Ea.get(c);if(m){if(l)l(m,4);else for(const S of m)S();Ea.delete(c)}},r?t?y(!0):b=c.run():a?a(y.bind(null,!0),!0):c.run(),_.pause=c.pause.bind(c),_.resume=c.resume.bind(c),_.stop=_,_}function Jn(n,r=1/0,i){if(r<=0||!ft(n)||n.__v_skip||(i=i||new Set,i.has(n)))return n;if(i.add(n),r--,Dt(n))Jn(n.value,r,i);else if(Te(n))for(let t=0;t<n.length;t++)Jn(n[t],r,i);else if(Uh(n)||Ar(n))n.forEach(t=>{Jn(t,r,i)});else if(jh(n)){for(const t in n)Jn(n[t],r,i);for(const t of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,t)&&Jn(n[t],r,i)}return n}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ks(n,r,i,t){try{return t?n(...t):n()}catch(e){Ja(e,r,i)}}function Gn(n,r,i,t){if(De(n)){const e=ks(n,r,i,t);return e&&Hh(e)&&e.catch(s=>{Ja(s,r,i)}),e}if(Te(n)){const e=[];for(let s=0;s<n.length;s++)e.push(Gn(n[s],r,i,t));return e}}function Ja(n,r,i,t=!0){const e=r?r.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=r&&r.appContext.config||nt;if(r){let o=r.parent;const l=r.proxy,u=`https://vuejs.org/error-reference/#runtime-${i}`;for(;o;){const c=o.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](n,l,u)===!1)return}o=o.parent}if(s){ni(),ks(s,null,10,[n,l,u]),ii();return}}qv(n,i,e,t,a)}function qv(n,r,i,t=!0,e=!1){if(e)throw n;console.error(n)}const zt=[];let Bn=-1;const Sr=[];let vi=null,fr=0;const hd=Promise.resolve();let wa=null;function wt(n){const r=wa||hd;return n?r.then(this?n.bind(this):n):r}function Jv(n){let r=Bn+1,i=zt.length;for(;r<i;){const t=r+i>>>1,e=zt[t],s=hs(e);s<n||s===n&&e.flags&2?r=t+1:i=t}return r}function Pu(n){if(!(n.flags&1)){const r=hs(n),i=zt[zt.length-1];!i||!(n.flags&2)&&r>=hs(i)?zt.push(n):zt.splice(Jv(r),0,n),n.flags|=1,dd()}}function dd(){wa||(wa=hd.then(gd))}function Zv(n){Te(n)?Sr.push(...n):vi&&n.id===-1?vi.splice(fr+1,0,n):n.flags&1||(Sr.push(n),n.flags|=1),dd()}function mc(n,r,i=Bn+1){for(;i<zt.length;i++){const t=zt[i];if(t&&t.flags&2){if(n&&t.id!==n.uid)continue;zt.splice(i,1),i--,t.flags&4&&(t.flags&=-2),t(),t.flags&4||(t.flags&=-2)}}}function pd(n){if(Sr.length){const r=[...new Set(Sr)].sort((i,t)=>hs(i)-hs(t));if(Sr.length=0,vi){vi.push(...r);return}for(vi=r,fr=0;fr<vi.length;fr++){const i=vi[fr];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}vi=null,fr=0}}const hs=n=>n.id==null?n.flags&2?-1:1/0:n.id;function gd(n){try{for(Bn=0;Bn<zt.length;Bn++){const r=zt[Bn];r&&!(r.flags&8)&&(r.flags&4&&(r.flags&=-2),ks(r,r.i,r.i?15:14),r.flags&4||(r.flags&=-2))}}finally{for(;Bn<zt.length;Bn++){const r=zt[Bn];r&&(r.flags&=-2)}Bn=-1,zt.length=0,pd(),wa=null,(zt.length||Sr.length)&&gd()}}let tn=null,vd=null;function Ca(n){const r=tn;return tn=n,vd=n&&n.type.__scopeId||null,r}function be(n,r=tn,i){if(!r||n._n)return n;const t=(...e)=>{t._d&&Rc(-1);const s=Ca(r);let a;try{a=n(...e)}finally{Ca(s),t._d&&Rc(1)}return a};return t._n=!0,t._c=!0,t._d=!0,t}function Sn(n,r){if(tn===null)return n;const i=ro(tn),t=n.dirs||(n.dirs=[]);for(let e=0;e<r.length;e++){let[s,a,o,l=nt]=r[e];s&&(De(s)&&(s={mounted:s,updated:s}),s.deep&&Jn(a),t.push({dir:s,instance:i,value:a,oldValue:void 0,arg:o,modifiers:l}))}return n}function xi(n,r,i,t){const e=n.dirs,s=r&&r.dirs;for(let a=0;a<e.length;a++){const o=e[a];s&&(o.oldValue=s[a].value);let l=o.dir[t];l&&(ni(),Gn(l,i,8,[n.el,o,n,r]),ii())}}const md=Symbol("_vte"),$v=n=>n.__isTeleport,ns=n=>n&&(n.disabled||n.disabled===""),yc=n=>n&&(n.defer||n.defer===""),Ac=n=>typeof SVGElement<"u"&&n instanceof SVGElement,_c=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,Ml=(n,r)=>{const i=n&&n.to;return ut(i)?r?r(i):null:i},yd={name:"Teleport",__isTeleport:!0,process(n,r,i,t,e,s,a,o,l,u){const{mc:c,pc:f,pbc:h,o:{insert:d,querySelector:p,createText:v,createComment:g}}=u,_=ns(r.props);let{shapeFlag:b,children:y,dynamicChildren:m}=r;if(n==null){const S=r.el=v(""),I=r.anchor=v("");d(S,i,t),d(I,i,t);const R=(G,H)=>{b&16&&(e&&e.isCE&&(e.ce._teleportTarget=G),c(y,G,H,e,s,a,o,l))},N=()=>{const G=r.target=Ml(r.props,p),H=Ad(G,r,v,d);G&&(a!=="svg"&&Ac(G)?a="svg":a!=="mathml"&&_c(G)&&(a="mathml"),_||(R(G,H),ca(r,!1)))};_&&(R(i,I),ca(r,!0)),yc(r.props)?(r.el.__isMounted=!1,St(()=>{N(),delete r.el.__isMounted},s)):N()}else{if(yc(r.props)&&n.el.__isMounted===!1){St(()=>{yd.process(n,r,i,t,e,s,a,o,l,u)},s);return}r.el=n.el,r.targetStart=n.targetStart;const S=r.anchor=n.anchor,I=r.target=n.target,R=r.targetAnchor=n.targetAnchor,N=ns(n.props),G=N?i:I,H=N?S:R;if(a==="svg"||Ac(I)?a="svg":(a==="mathml"||_c(I))&&(a="mathml"),m?(h(n.dynamicChildren,m,G,e,s,a,o),Nu(n,r,!0)):l||f(n,r,G,H,e,s,a,o,!1),_)N?r.props&&n.props&&r.props.to!==n.props.to&&(r.props.to=n.props.to):Ys(r,i,S,u,1);else if((r.props&&r.props.to)!==(n.props&&n.props.to)){const ie=r.target=Ml(r.props,p);ie&&Ys(r,ie,null,u,0)}else N&&Ys(r,I,R,u,1);ca(r,_)}},remove(n,r,i,{um:t,o:{remove:e}},s){const{shapeFlag:a,children:o,anchor:l,targetStart:u,targetAnchor:c,target:f,props:h}=n;if(f&&(e(u),e(c)),s&&e(l),a&16){const d=s||!ns(h);for(let p=0;p<o.length;p++){const v=o[p];t(v,r,i,d,!!v.dynamicChildren)}}},move:Ys,hydrate:em};function Ys(n,r,i,{o:{insert:t},m:e},s=2){s===0&&t(n.targetAnchor,r,i);const{el:a,anchor:o,shapeFlag:l,children:u,props:c}=n,f=s===2;if(f&&t(a,r,i),(!f||ns(c))&&l&16)for(let h=0;h<u.length;h++)e(u[h],r,i,2);f&&t(o,r,i)}function em(n,r,i,t,e,s,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:u,createText:c}},f){const h=r.target=Ml(r.props,l);if(h){const d=ns(r.props),p=h._lpa||h.firstChild;if(r.shapeFlag&16)if(d)r.anchor=f(a(n),r,o(n),i,t,e,s),r.targetStart=p,r.targetAnchor=p&&a(p);else{r.anchor=a(n);let v=p;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")r.targetStart=v;else if(v.data==="teleport anchor"){r.targetAnchor=v,h._lpa=r.targetAnchor&&a(r.targetAnchor);break}}v=a(v)}r.targetAnchor||Ad(h,r,c,u),f(p&&a(p),r,h,i,t,e,s)}ca(r,d)}return r.anchor&&a(r.anchor)}const tm=yd;function ca(n,r){const i=n.ctx;if(i&&i.ut){let t,e;for(r?(t=n.el,e=n.anchor):(t=n.targetStart,e=n.targetAnchor);t&&t!==e;)t.nodeType===1&&t.setAttribute("data-v-owner",i.uid),t=t.nextSibling;i.ut()}}function Ad(n,r,i,t){const e=r.targetStart=i(""),s=r.targetAnchor=i("");return e[md]=s,n&&(t(e,n),t(s,n)),s}function Za(n,r){n.shapeFlag&6&&n.component?(n.transition=r,Za(n.component.subTree,r)):n.shapeFlag&128?(n.ssContent.transition=r.clone(n.ssContent),n.ssFallback.transition=r.clone(n.ssFallback)):n.transition=r}/*! #__NO_SIDE_EFFECTS__ */function Fe(n,r){return De(n)?Ht({name:n.name},r,{setup:n}):n}function _d(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function is(n,r,i,t,e=!1){if(Te(n)){n.forEach((p,v)=>is(p,r&&(Te(r)?r[v]:r),i,t,e));return}if(Er(t)&&!e){t.shapeFlag&512&&t.type.__asyncResolved&&t.component.subTree.component&&is(n,r,i,t.component.subTree);return}const s=t.shapeFlag&4?ro(t.component):t.el,a=e?null:s,{i:o,r:l}=n,u=r&&r.r,c=o.refs===nt?o.refs={}:o.refs,f=o.setupState,h=Ze(f),d=f===nt?()=>!1:p=>$e(h,p);if(u!=null&&u!==l&&(ut(u)?(c[u]=null,d(u)&&(f[u]=null)):Dt(u)&&(u.value=null)),De(l))ks(l,o,12,[a,c]);else{const p=ut(l),v=Dt(l);if(p||v){const g=()=>{if(n.f){const _=p?d(l)?f[l]:c[l]:l.value;e?Te(_)&&bu(_,s):Te(_)?_.includes(s)||_.push(s):p?(c[l]=[s],d(l)&&(f[l]=c[l])):(l.value=[s],n.k&&(c[n.k]=l.value))}else p?(c[l]=a,d(l)&&(f[l]=a)):v&&(l.value=a,n.k&&(c[n.k]=a))};a?(g.id=-1,St(g,i)):g()}}}Xa().requestIdleCallback;Xa().cancelIdleCallback;const Er=n=>!!n.type.__asyncLoader,bd=n=>n.type.__isKeepAlive,nm={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:r}){const i=ui(),t=i.ctx;if(!t.renderer)return()=>{const b=r.default&&r.default();return b&&b.length===1?b[0]:b};const e=new Map,s=new Set;let a=null;const o=i.suspense,{renderer:{p:l,m:u,um:c,o:{createElement:f}}}=t,h=f("div");t.activate=(b,y,m,S,I)=>{const R=b.component;u(b,y,m,0,o),l(R.vnode,b,y,m,R,o,S,b.slotScopeIds,I),St(()=>{R.isDeactivated=!1,R.a&&_r(R.a);const N=b.props&&b.props.onVnodeMounted;N&&mn(N,R.parent,b)},o)},t.deactivate=b=>{const y=b.component;ka(y.m),ka(y.a),u(b,h,null,1,o),St(()=>{y.da&&_r(y.da);const m=b.props&&b.props.onVnodeUnmounted;m&&mn(m,y.parent,b),y.isDeactivated=!0},o)};function d(b){Uo(b),c(b,i,o,!0)}function p(b){e.forEach((y,m)=>{const S=jl(y.type);S&&!b(S)&&v(m)})}function v(b){const y=e.get(b);y&&(!a||!hr(y,a))?d(y):a&&Uo(a),e.delete(b),s.delete(b)}it(()=>[n.include,n.exclude],([b,y])=>{b&&p(m=>Xr(b,m)),y&&p(m=>!Xr(y,m))},{flush:"post",deep:!0});let g=null;const _=()=>{g!=null&&(Ia(i.subTree.type)?St(()=>{e.set(g,Qs(i.subTree))},i.subTree.suspense):e.set(g,Qs(i.subTree)))};return Tt(_),Du(_),Wi(()=>{e.forEach(b=>{const{subTree:y,suspense:m}=i,S=Qs(y);if(b.type===S.type&&b.key===S.key){Uo(S);const I=S.component.da;I&&St(I,m);return}d(b)})}),()=>{if(g=null,!r.default)return a=null;const b=r.default(),y=b[0];if(b.length>1)return a=null,b;if(!Tr(y)||!(y.shapeFlag&4)&&!(y.shapeFlag&128))return a=null,y;let m=Qs(y);if(m.type===ri)return a=null,m;const S=m.type,I=jl(Er(m)?m.type.__asyncResolved||{}:S),{include:R,exclude:N,max:G}=n;if(R&&(!I||!Xr(R,I))||N&&I&&Xr(N,I))return m.shapeFlag&=-257,a=m,y;const H=m.key==null?S:m.key,ie=e.get(H);return m.el&&(m=Gi(m),y.shapeFlag&128&&(y.ssContent=m)),g=H,ie?(m.el=ie.el,m.component=ie.component,m.transition&&Za(m,m.transition),m.shapeFlag|=512,s.delete(H),s.add(H)):(s.add(H),G&&s.size>parseInt(G,10)&&v(s.values().next().value)),m.shapeFlag|=256,a=m,Ia(y.type)?y:m}}},xu=nm;function Xr(n,r){return Te(n)?n.some(i=>Xr(i,r)):ut(n)?n.split(",").includes(r):hv(n)?(n.lastIndex=0,n.test(r)):!1}function Is(n,r){Sd(n,"a",r)}function $a(n,r){Sd(n,"da",r)}function Sd(n,r,i=Pt){const t=n.__wdc||(n.__wdc=()=>{let e=i;for(;e;){if(e.isDeactivated)return;e=e.parent}return n()});if(eo(r,t,i),i){let e=i.parent;for(;e&&e.parent;)bd(e.parent.vnode)&&im(t,r,i,e),e=e.parent}}function im(n,r,i,t){const e=eo(r,n,t,!0);to(()=>{bu(t[r],e)},i)}function Uo(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function Qs(n){return n.shapeFlag&128?n.ssContent:n}function eo(n,r,i=Pt,t=!1){if(i){const e=i[n]||(i[n]=[]),s=r.__weh||(r.__weh=(...a)=>{ni();const o=Rs(i),l=Gn(r,i,n,a);return o(),ii(),l});return t?e.unshift(s):e.push(s),s}}const oi=n=>(r,i=Pt)=>{(!ps||n==="sp")&&eo(n,(...t)=>r(...t),i)},rm=oi("bm"),Tt=oi("m"),Ed=oi("bu"),Du=oi("u"),Wi=oi("bum"),to=oi("um"),sm=oi("sp"),am=oi("rtg"),om=oi("rtc");function lm(n,r=Pt){eo("ec",n,r)}const Ou="components",um="directives";function li(n,r){return Bu(Ou,n,!0,r)||n}const wd=Symbol.for("v-ndc");function Lu(n){return ut(n)?Bu(Ou,n,!1)||n:n||wd}function cm(n){return Bu(um,n)}function Bu(n,r,i=!0,t=!1){const e=tn||Pt;if(e){const s=e.type;if(n===Ou){const o=jl(s,!1);if(o&&(o===r||o===En(r)||o===Wa(En(r))))return s}const a=bc(e[n]||s[n],r)||bc(e.appContext[n],r);return!a&&t?s:a}}function bc(n,r){return n&&(n[r]||n[En(r)]||n[Wa(En(r))])}function Ot(n,r,i,t){let e;const s=i,a=Te(n);if(a||ut(n)){const o=a&&br(n);let l=!1,u=!1;o&&(l=!bn(n),u=Ci(n),n=qa(n)),e=new Array(n.length);for(let c=0,f=n.length;c<f;c++)e[c]=r(l?u?Sa(Rt(n[c])):Rt(n[c]):n[c],c,void 0,s)}else if(typeof n=="number"){e=new Array(n);for(let o=0;o<n;o++)e[o]=r(o+1,o,void 0,s)}else if(ft(n))if(n[Symbol.iterator])e=Array.from(n,(o,l)=>r(o,l,void 0,s));else{const o=Object.keys(n);e=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const c=o[l];e[l]=r(n[c],c,l,s)}}else e=[];return e}const Fl=n=>n?Vd(n)?ro(n):Fl(n.parent):null,rs=Ht(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Fl(n.parent),$root:n=>Fl(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Td(n),$forceUpdate:n=>n.f||(n.f=()=>{Pu(n.update)}),$nextTick:n=>n.n||(n.n=wt.bind(n.proxy)),$watch:n=>Dm.bind(n)}),Ho=(n,r)=>n!==nt&&!n.__isScriptSetup&&$e(n,r),fm={get({_:n},r){if(r==="__v_skip")return!0;const{ctx:i,setupState:t,data:e,props:s,accessCache:a,type:o,appContext:l}=n;let u;if(r[0]!=="$"){const d=a[r];if(d!==void 0)switch(d){case 1:return t[r];case 2:return e[r];case 4:return i[r];case 3:return s[r]}else{if(Ho(t,r))return a[r]=1,t[r];if(e!==nt&&$e(e,r))return a[r]=2,e[r];if((u=n.propsOptions[0])&&$e(u,r))return a[r]=3,s[r];if(i!==nt&&$e(i,r))return a[r]=4,i[r];Nl&&(a[r]=0)}}const c=rs[r];let f,h;if(c)return r==="$attrs"&&Ft(n.attrs,"get",""),c(n);if((f=o.__cssModules)&&(f=f[r]))return f;if(i!==nt&&$e(i,r))return a[r]=4,i[r];if(h=l.config.globalProperties,$e(h,r))return h[r]},set({_:n},r,i){const{data:t,setupState:e,ctx:s}=n;return Ho(e,r)?(e[r]=i,!0):t!==nt&&$e(t,r)?(t[r]=i,!0):$e(n.props,r)||r[0]==="$"&&r.slice(1)in n?!1:(s[r]=i,!0)},has({_:{data:n,setupState:r,accessCache:i,ctx:t,appContext:e,propsOptions:s}},a){let o;return!!i[a]||n!==nt&&$e(n,a)||Ho(r,a)||(o=s[0])&&$e(o,a)||$e(t,a)||$e(rs,a)||$e(e.config.globalProperties,a)},defineProperty(n,r,i){return i.get!=null?n._.accessCache[r]=0:$e(i,"value")&&this.set(n,r,i.value,null),Reflect.defineProperty(n,r,i)}};function Sc(n){return Te(n)?n.reduce((r,i)=>(r[i]=null,r),{}):n}let Nl=!0;function hm(n){const r=Td(n),i=n.proxy,t=n.ctx;Nl=!1,r.beforeCreate&&Ec(r.beforeCreate,n,"bc");const{data:e,computed:s,methods:a,watch:o,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:v,deactivated:g,beforeDestroy:_,beforeUnmount:b,destroyed:y,unmounted:m,render:S,renderTracked:I,renderTriggered:R,errorCaptured:N,serverPrefetch:G,expose:H,inheritAttrs:ie,components:E,directives:T,filters:P}=r;if(u&&dm(u,t,null),a)for(const z in a){const q=a[z];De(q)&&(t[z]=q.bind(i))}if(e){const z=e.call(i,i);ft(z)&&(n.data=pn(z))}if(Nl=!0,s)for(const z in s){const q=s[z],pe=De(q)?q.bind(i,i):De(q.get)?q.get.bind(i,i):Vn,ye=!De(q)&&De(q.set)?q.set.bind(i):Vn,U=Ce({get:pe,set:ye});Object.defineProperty(t,z,{enumerable:!0,configurable:!0,get:()=>U.value,set:ge=>U.value=ge})}if(o)for(const z in o)Cd(o[z],t,i,z);if(l){const z=De(l)?l.call(i):l;Reflect.ownKeys(z).forEach(q=>{Hi(q,z[q])})}c&&Ec(c,n,"c");function O(z,q){Te(q)?q.forEach(pe=>z(pe.bind(i))):q&&z(q.bind(i))}if(O(rm,f),O(Tt,h),O(Ed,d),O(Du,p),O(Is,v),O($a,g),O(lm,N),O(om,I),O(am,R),O(Wi,b),O(to,m),O(sm,G),Te(H))if(H.length){const z=n.exposed||(n.exposed={});H.forEach(q=>{Object.defineProperty(z,q,{get:()=>i[q],set:pe=>i[q]=pe})})}else n.exposed||(n.exposed={});S&&n.render===Vn&&(n.render=S),ie!=null&&(n.inheritAttrs=ie),E&&(n.components=E),T&&(n.directives=T),G&&_d(n)}function dm(n,r,i=Vn){Te(n)&&(n=Ul(n));for(const t in n){const e=n[t];let s;ft(e)?"default"in e?s=Kt(e.from||t,e.default,!0):s=Kt(e.from||t):s=Kt(e),Dt(s)?Object.defineProperty(r,t,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):r[t]=s}}function Ec(n,r,i){Gn(Te(n)?n.map(t=>t.bind(r.proxy)):n.bind(r.proxy),r,i)}function Cd(n,r,i,t){let e=t.includes(".")?Fd(i,t):()=>i[t];if(ut(n)){const s=r[n];De(s)&&it(e,s)}else if(De(n))it(e,n.bind(i));else if(ft(n))if(Te(n))n.forEach(s=>Cd(s,r,i,t));else{const s=De(n.handler)?n.handler.bind(i):r[n.handler];De(s)&&it(e,s,n)}}function Td(n){const r=n.type,{mixins:i,extends:t}=r,{mixins:e,optionsCache:s,config:{optionMergeStrategies:a}}=n.appContext,o=s.get(r);let l;return o?l=o:!e.length&&!i&&!t?l=r:(l={},e.length&&e.forEach(u=>Ta(l,u,a,!0)),Ta(l,r,a)),ft(r)&&s.set(r,l),l}function Ta(n,r,i,t=!1){const{mixins:e,extends:s}=r;s&&Ta(n,s,i,!0),e&&e.forEach(a=>Ta(n,a,i,!0));for(const a in r)if(!(t&&a==="expose")){const o=pm[a]||i&&i[a];n[a]=o?o(n[a],r[a]):r[a]}return n}const pm={data:wc,props:Cc,emits:Cc,methods:qr,computed:qr,beforeCreate:jt,created:jt,beforeMount:jt,mounted:jt,beforeUpdate:jt,updated:jt,beforeDestroy:jt,beforeUnmount:jt,destroyed:jt,unmounted:jt,activated:jt,deactivated:jt,errorCaptured:jt,serverPrefetch:jt,components:qr,directives:qr,watch:vm,provide:wc,inject:gm};function wc(n,r){return r?n?function(){return Ht(De(n)?n.call(this,this):n,De(r)?r.call(this,this):r)}:r:n}function gm(n,r){return qr(Ul(n),Ul(r))}function Ul(n){if(Te(n)){const r={};for(let i=0;i<n.length;i++)r[n[i]]=n[i];return r}return n}function jt(n,r){return n?[...new Set([].concat(n,r))]:r}function qr(n,r){return n?Ht(Object.create(null),n,r):r}function Cc(n,r){return n?Te(n)&&Te(r)?[...new Set([...n,...r])]:Ht(Object.create(null),Sc(n),Sc(r??{})):r}function vm(n,r){if(!n)return r;if(!r)return n;const i=Ht(Object.create(null),n);for(const t in r)i[t]=jt(n[t],r[t]);return i}function kd(){return{app:null,config:{isNativeTag:cv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let mm=0;function ym(n,r){return function(t,e=null){De(t)||(t=Ht({},t)),e!=null&&!ft(e)&&(e=null);const s=kd(),a=new WeakSet,o=[];let l=!1;const u=s.app={_uid:mm++,_component:t,_props:e,_container:null,_context:s,_instance:null,version:Zm,get config(){return s.config},set config(c){},use(c,...f){return a.has(c)||(c&&De(c.install)?(a.add(c),c.install(u,...f)):De(c)&&(a.add(c),c(u,...f))),u},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),u},component(c,f){return f?(s.components[c]=f,u):s.components[c]},directive(c,f){return f?(s.directives[c]=f,u):s.directives[c]},mount(c,f,h){if(!l){const d=u._ceVNode||B(t,e);return d.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),n(d,c,h),l=!0,u._container=c,c.__vue_app__=u,ro(d.component)}},onUnmount(c){o.push(c)},unmount(){l&&(Gn(o,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(c,f){return s.provides[c]=f,u},runWithContext(c){const f=wr;wr=u;try{return c()}finally{wr=f}}};return u}}let wr=null;function Hi(n,r){if(Pt){let i=Pt.provides;const t=Pt.parent&&Pt.parent.provides;t===i&&(i=Pt.provides=Object.create(t)),i[n]=r}}function Kt(n,r,i=!1){const t=Pt||tn;if(t||wr){let e=wr?wr._context.provides:t?t.parent==null||t.ce?t.vnode.appContext&&t.vnode.appContext.provides:t.parent.provides:void 0;if(e&&n in e)return e[n];if(arguments.length>1)return i&&De(r)?r.call(t&&t.proxy):r}}const Id={},Rd=()=>Object.create(Id),Pd=n=>Object.getPrototypeOf(n)===Id;function Am(n,r,i,t=!1){const e={},s=Rd();n.propsDefaults=Object.create(null),xd(n,r,e,s);for(const a in n.propsOptions[0])a in e||(e[a]=void 0);i?n.props=t?e:od(e):n.type.props?n.props=e:n.props=s,n.attrs=s}function _m(n,r,i,t){const{props:e,attrs:s,vnode:{patchFlag:a}}=n,o=Ze(e),[l]=n.propsOptions;let u=!1;if((t||a>0)&&!(a&16)){if(a&8){const c=n.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(no(n.emitsOptions,h))continue;const d=r[h];if(l)if($e(s,h))d!==s[h]&&(s[h]=d,u=!0);else{const p=En(h);e[p]=Hl(l,o,p,d,n,!1)}else d!==s[h]&&(s[h]=d,u=!0)}}}else{xd(n,r,e,s)&&(u=!0);let c;for(const f in o)(!r||!$e(r,f)&&((c=Ii(f))===f||!$e(r,c)))&&(l?i&&(i[f]!==void 0||i[c]!==void 0)&&(e[f]=Hl(l,o,f,void 0,n,!0)):delete e[f]);if(s!==o)for(const f in s)(!r||!$e(r,f))&&(delete s[f],u=!0)}u&&qn(n.attrs,"set","")}function xd(n,r,i,t){const[e,s]=n.propsOptions;let a=!1,o;if(r)for(let l in r){if($r(l))continue;const u=r[l];let c;e&&$e(e,c=En(l))?!s||!s.includes(c)?i[c]=u:(o||(o={}))[c]=u:no(n.emitsOptions,l)||(!(l in t)||u!==t[l])&&(t[l]=u,a=!0)}if(s){const l=Ze(i),u=o||nt;for(let c=0;c<s.length;c++){const f=s[c];i[f]=Hl(e,l,f,u[f],n,!$e(u,f))}}return a}function Hl(n,r,i,t,e,s){const a=n[i];if(a!=null){const o=$e(a,"default");if(o&&t===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&De(l)){const{propsDefaults:u}=e;if(i in u)t=u[i];else{const c=Rs(e);t=u[i]=l.call(null,r),c()}}else t=l;e.ce&&e.ce._setProp(i,t)}a[0]&&(s&&!o?t=!1:a[1]&&(t===""||t===Ii(i))&&(t=!0))}return t}const bm=new WeakMap;function Dd(n,r,i=!1){const t=i?bm:r.propsCache,e=t.get(n);if(e)return e;const s=n.props,a={},o=[];let l=!1;if(!De(n)){const c=f=>{l=!0;const[h,d]=Dd(f,r,!0);Ht(a,h),d&&o.push(...d)};!i&&r.mixins.length&&r.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}if(!s&&!l)return ft(n)&&t.set(n,yr),yr;if(Te(s))for(let c=0;c<s.length;c++){const f=En(s[c]);Tc(f)&&(a[f]=nt)}else if(s)for(const c in s){const f=En(c);if(Tc(f)){const h=s[c],d=a[f]=Te(h)||De(h)?{type:h}:Ht({},h),p=d.type;let v=!1,g=!0;if(Te(p))for(let _=0;_<p.length;++_){const b=p[_],y=De(b)&&b.name;if(y==="Boolean"){v=!0;break}else y==="String"&&(g=!1)}else v=De(p)&&p.name==="Boolean";d[0]=v,d[1]=g,(v||$e(d,"default"))&&o.push(f)}}const u=[a,o];return ft(n)&&t.set(n,u),u}function Tc(n){return n[0]!=="$"&&!$r(n)}const Mu=n=>n[0]==="_"||n==="$stable",Fu=n=>Te(n)?n.map(Nn):[Nn(n)],Sm=(n,r,i)=>{if(r._n)return r;const t=be((...e)=>Fu(r(...e)),i);return t._c=!1,t},Od=(n,r,i)=>{const t=n._ctx;for(const e in n){if(Mu(e))continue;const s=n[e];if(De(s))r[e]=Sm(e,s,t);else if(s!=null){const a=Fu(s);r[e]=()=>a}}},Ld=(n,r)=>{const i=Fu(r);n.slots.default=()=>i},Bd=(n,r,i)=>{for(const t in r)(i||!Mu(t))&&(n[t]=r[t])},Em=(n,r,i)=>{const t=n.slots=Rd();if(n.vnode.shapeFlag&32){const e=r.__;e&&Pl(t,"__",e,!0);const s=r._;s?(Bd(t,r,i),i&&Pl(t,"_",s,!0)):Od(r,t)}else r&&Ld(n,r)},wm=(n,r,i)=>{const{vnode:t,slots:e}=n;let s=!0,a=nt;if(t.shapeFlag&32){const o=r._;o?i&&o===1?s=!1:Bd(e,r,i):(s=!r.$stable,Od(r,e)),a=r}else r&&(Ld(n,r),a={default:1});if(s)for(const o in e)!Mu(o)&&a[o]==null&&delete e[o]},St=Um;function Cm(n){return Tm(n)}function Tm(n,r){const i=Xa();i.__VUE__=!0;const{insert:t,remove:e,patchProp:s,createElement:a,createText:o,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=Vn,insertStaticContent:p}=n,v=(C,k,x,K=null,Q=null,Y=null,re=void 0,te=null,ae=!!k.dynamicChildren)=>{if(C===k)return;C&&!hr(C,k)&&(K=L(C),ge(C,Q,Y,!0),C=null),k.patchFlag===-2&&(ae=!1,k.dynamicChildren=null);const{type:$,ref:Se,shapeFlag:ce}=k;switch($){case io:g(C,k,x,K);break;case ri:_(C,k,x,K);break;case fa:C==null&&b(k,x,K,re);break;case Xe:E(C,k,x,K,Q,Y,re,te,ae);break;default:ce&1?S(C,k,x,K,Q,Y,re,te,ae):ce&6?T(C,k,x,K,Q,Y,re,te,ae):(ce&64||ce&128)&&$.process(C,k,x,K,Q,Y,re,te,ae,oe)}Se!=null&&Q?is(Se,C&&C.ref,Y,k||C,!k):Se==null&&C&&C.ref!=null&&is(C.ref,null,Y,C,!0)},g=(C,k,x,K)=>{if(C==null)t(k.el=o(k.children),x,K);else{const Q=k.el=C.el;k.children!==C.children&&u(Q,k.children)}},_=(C,k,x,K)=>{C==null?t(k.el=l(k.children||""),x,K):k.el=C.el},b=(C,k,x,K)=>{[C.el,C.anchor]=p(C.children,k,x,K,C.el,C.anchor)},y=({el:C,anchor:k},x,K)=>{let Q;for(;C&&C!==k;)Q=h(C),t(C,x,K),C=Q;t(k,x,K)},m=({el:C,anchor:k})=>{let x;for(;C&&C!==k;)x=h(C),e(C),C=x;e(k)},S=(C,k,x,K,Q,Y,re,te,ae)=>{k.type==="svg"?re="svg":k.type==="math"&&(re="mathml"),C==null?I(k,x,K,Q,Y,re,te,ae):G(C,k,Q,Y,re,te,ae)},I=(C,k,x,K,Q,Y,re,te)=>{let ae,$;const{props:Se,shapeFlag:ce,transition:Ae,dirs:Re}=C;if(ae=C.el=a(C.type,Y,Se&&Se.is,Se),ce&8?c(ae,C.children):ce&16&&N(C.children,ae,null,K,Q,Vo(C,Y),re,te),Re&&xi(C,null,K,"created"),R(ae,C,C.scopeId,re,K),Se){for(const rt in Se)rt!=="value"&&!$r(rt)&&s(ae,rt,null,Se[rt],Y,K);"value"in Se&&s(ae,"value",null,Se.value,Y),($=Se.onVnodeBeforeMount)&&mn($,K,C)}Re&&xi(C,null,K,"beforeMount");const ze=km(Q,Ae);ze&&Ae.beforeEnter(ae),t(ae,k,x),(($=Se&&Se.onVnodeMounted)||ze||Re)&&St(()=>{$&&mn($,K,C),ze&&Ae.enter(ae),Re&&xi(C,null,K,"mounted")},Q)},R=(C,k,x,K,Q)=>{if(x&&d(C,x),K)for(let Y=0;Y<K.length;Y++)d(C,K[Y]);if(Q){let Y=Q.subTree;if(k===Y||Ia(Y.type)&&(Y.ssContent===k||Y.ssFallback===k)){const re=Q.vnode;R(C,re,re.scopeId,re.slotScopeIds,Q.parent)}}},N=(C,k,x,K,Q,Y,re,te,ae=0)=>{for(let $=ae;$<C.length;$++){const Se=C[$]=te?mi(C[$]):Nn(C[$]);v(null,Se,k,x,K,Q,Y,re,te)}},G=(C,k,x,K,Q,Y,re)=>{const te=k.el=C.el;let{patchFlag:ae,dynamicChildren:$,dirs:Se}=k;ae|=C.patchFlag&16;const ce=C.props||nt,Ae=k.props||nt;let Re;if(x&&Di(x,!1),(Re=Ae.onVnodeBeforeUpdate)&&mn(Re,x,k,C),Se&&xi(k,C,x,"beforeUpdate"),x&&Di(x,!0),(ce.innerHTML&&Ae.innerHTML==null||ce.textContent&&Ae.textContent==null)&&c(te,""),$?H(C.dynamicChildren,$,te,x,K,Vo(k,Q),Y):re||q(C,k,te,null,x,K,Vo(k,Q),Y,!1),ae>0){if(ae&16)ie(te,ce,Ae,x,Q);else if(ae&2&&ce.class!==Ae.class&&s(te,"class",null,Ae.class,Q),ae&4&&s(te,"style",ce.style,Ae.style,Q),ae&8){const ze=k.dynamicProps;for(let rt=0;rt<ze.length;rt++){const et=ze[rt],Wt=ce[et],Xt=Ae[et];(Xt!==Wt||et==="value")&&s(te,et,Wt,Xt,Q,x)}}ae&1&&C.children!==k.children&&c(te,k.children)}else!re&&$==null&&ie(te,ce,Ae,x,Q);((Re=Ae.onVnodeUpdated)||Se)&&St(()=>{Re&&mn(Re,x,k,C),Se&&xi(k,C,x,"updated")},K)},H=(C,k,x,K,Q,Y,re)=>{for(let te=0;te<k.length;te++){const ae=C[te],$=k[te],Se=ae.el&&(ae.type===Xe||!hr(ae,$)||ae.shapeFlag&198)?f(ae.el):x;v(ae,$,Se,null,K,Q,Y,re,!0)}},ie=(C,k,x,K,Q)=>{if(k!==x){if(k!==nt)for(const Y in k)!$r(Y)&&!(Y in x)&&s(C,Y,k[Y],null,Q,K);for(const Y in x){if($r(Y))continue;const re=x[Y],te=k[Y];re!==te&&Y!=="value"&&s(C,Y,te,re,Q,K)}"value"in x&&s(C,"value",k.value,x.value,Q)}},E=(C,k,x,K,Q,Y,re,te,ae)=>{const $=k.el=C?C.el:o(""),Se=k.anchor=C?C.anchor:o("");let{patchFlag:ce,dynamicChildren:Ae,slotScopeIds:Re}=k;Re&&(te=te?te.concat(Re):Re),C==null?(t($,x,K),t(Se,x,K),N(k.children||[],x,Se,Q,Y,re,te,ae)):ce>0&&ce&64&&Ae&&C.dynamicChildren?(H(C.dynamicChildren,Ae,x,Q,Y,re,te),(k.key!=null||Q&&k===Q.subTree)&&Nu(C,k,!0)):q(C,k,x,Se,Q,Y,re,te,ae)},T=(C,k,x,K,Q,Y,re,te,ae)=>{k.slotScopeIds=te,C==null?k.shapeFlag&512?Q.ctx.activate(k,x,K,re,ae):P(k,x,K,Q,Y,re,ae):V(C,k,ae)},P=(C,k,x,K,Q,Y,re)=>{const te=C.component=Ym(C,K,Q);if(bd(C)&&(te.ctx.renderer=oe),Qm(te,!1,re),te.asyncDep){if(Q&&Q.registerDep(te,O,re),!C.el){const ae=te.subTree=B(ri);_(null,ae,k,x)}}else O(te,C,k,x,Q,Y,re)},V=(C,k,x)=>{const K=k.component=C.component;if(Fm(C,k,x))if(K.asyncDep&&!K.asyncResolved){z(K,k,x);return}else K.next=k,K.update();else k.el=C.el,K.vnode=k},O=(C,k,x,K,Q,Y,re)=>{const te=()=>{if(C.isMounted){let{next:ce,bu:Ae,u:Re,parent:ze,vnode:rt}=C;{const xn=Md(C);if(xn){ce&&(ce.el=rt.el,z(C,ce,re)),xn.asyncDep.then(()=>{C.isUnmounted||te()});return}}let et=ce,Wt;Di(C,!1),ce?(ce.el=rt.el,z(C,ce,re)):ce=rt,Ae&&_r(Ae),(Wt=ce.props&&ce.props.onVnodeBeforeUpdate)&&mn(Wt,ze,ce,rt),Di(C,!0);const Xt=kc(C),Pn=C.subTree;C.subTree=Xt,v(Pn,Xt,f(Pn.el),L(Pn),C,Q,Y),ce.el=Xt.el,et===null&&Nm(C,Xt.el),Re&&St(Re,Q),(Wt=ce.props&&ce.props.onVnodeUpdated)&&St(()=>mn(Wt,ze,ce,rt),Q)}else{let ce;const{el:Ae,props:Re}=k,{bm:ze,m:rt,parent:et,root:Wt,type:Xt}=C,Pn=Er(k);Di(C,!1),ze&&_r(ze),!Pn&&(ce=Re&&Re.onVnodeBeforeMount)&&mn(ce,et,k),Di(C,!0);{Wt.ce&&Wt.ce._def.shadowRoot!==!1&&Wt.ce._injectChildStyle(Xt);const xn=C.subTree=kc(C);v(null,xn,x,K,C,Q,Y),k.el=xn.el}if(rt&&St(rt,Q),!Pn&&(ce=Re&&Re.onVnodeMounted)){const xn=k;St(()=>mn(ce,et,xn),Q)}(k.shapeFlag&256||et&&Er(et.vnode)&&et.vnode.shapeFlag&256)&&C.a&&St(C.a,Q),C.isMounted=!0,k=x=K=null}};C.scope.on();const ae=C.effect=new Qh(te);C.scope.off();const $=C.update=ae.run.bind(ae),Se=C.job=ae.runIfDirty.bind(ae);Se.i=C,Se.id=C.uid,ae.scheduler=()=>Pu(Se),Di(C,!0),$()},z=(C,k,x)=>{k.component=C;const K=C.vnode.props;C.vnode=k,C.next=null,_m(C,k.props,K,x),wm(C,k.children,x),ni(),mc(C),ii()},q=(C,k,x,K,Q,Y,re,te,ae=!1)=>{const $=C&&C.children,Se=C?C.shapeFlag:0,ce=k.children,{patchFlag:Ae,shapeFlag:Re}=k;if(Ae>0){if(Ae&128){ye($,ce,x,K,Q,Y,re,te,ae);return}else if(Ae&256){pe($,ce,x,K,Q,Y,re,te,ae);return}}Re&8?(Se&16&&fe($,Q,Y),ce!==$&&c(x,ce)):Se&16?Re&16?ye($,ce,x,K,Q,Y,re,te,ae):fe($,Q,Y,!0):(Se&8&&c(x,""),Re&16&&N(ce,x,K,Q,Y,re,te,ae))},pe=(C,k,x,K,Q,Y,re,te,ae)=>{C=C||yr,k=k||yr;const $=C.length,Se=k.length,ce=Math.min($,Se);let Ae;for(Ae=0;Ae<ce;Ae++){const Re=k[Ae]=ae?mi(k[Ae]):Nn(k[Ae]);v(C[Ae],Re,x,null,Q,Y,re,te,ae)}$>Se?fe(C,Q,Y,!0,!1,ce):N(k,x,K,Q,Y,re,te,ae,ce)},ye=(C,k,x,K,Q,Y,re,te,ae)=>{let $=0;const Se=k.length;let ce=C.length-1,Ae=Se-1;for(;$<=ce&&$<=Ae;){const Re=C[$],ze=k[$]=ae?mi(k[$]):Nn(k[$]);if(hr(Re,ze))v(Re,ze,x,null,Q,Y,re,te,ae);else break;$++}for(;$<=ce&&$<=Ae;){const Re=C[ce],ze=k[Ae]=ae?mi(k[Ae]):Nn(k[Ae]);if(hr(Re,ze))v(Re,ze,x,null,Q,Y,re,te,ae);else break;ce--,Ae--}if($>ce){if($<=Ae){const Re=Ae+1,ze=Re<Se?k[Re].el:K;for(;$<=Ae;)v(null,k[$]=ae?mi(k[$]):Nn(k[$]),x,ze,Q,Y,re,te,ae),$++}}else if($>Ae)for(;$<=ce;)ge(C[$],Q,Y,!0),$++;else{const Re=$,ze=$,rt=new Map;for($=ze;$<=Ae;$++){const on=k[$]=ae?mi(k[$]):Nn(k[$]);on.key!=null&&rt.set(on.key,$)}let et,Wt=0;const Xt=Ae-ze+1;let Pn=!1,xn=0;const Hr=new Array(Xt);for($=0;$<Xt;$++)Hr[$]=0;for($=Re;$<=ce;$++){const on=C[$];if(Wt>=Xt){ge(on,Q,Y,!0);continue}let Dn;if(on.key!=null)Dn=rt.get(on.key);else for(et=ze;et<=Ae;et++)if(Hr[et-ze]===0&&hr(on,k[et])){Dn=et;break}Dn===void 0?ge(on,Q,Y,!0):(Hr[Dn-ze]=$+1,Dn>=xn?xn=Dn:Pn=!0,v(on,k[Dn],x,null,Q,Y,re,te,ae),Wt++)}const hc=Pn?Im(Hr):yr;for(et=hc.length-1,$=Xt-1;$>=0;$--){const on=ze+$,Dn=k[on],dc=on+1<Se?k[on+1].el:K;Hr[$]===0?v(null,Dn,x,dc,Q,Y,re,te,ae):Pn&&(et<0||$!==hc[et]?U(Dn,x,dc,2):et--)}}},U=(C,k,x,K,Q=null)=>{const{el:Y,type:re,transition:te,children:ae,shapeFlag:$}=C;if($&6){U(C.component.subTree,k,x,K);return}if($&128){C.suspense.move(k,x,K);return}if($&64){re.move(C,k,x,oe);return}if(re===Xe){t(Y,k,x);for(let ce=0;ce<ae.length;ce++)U(ae[ce],k,x,K);t(C.anchor,k,x);return}if(re===fa){y(C,k,x);return}if(K!==2&&$&1&&te)if(K===0)te.beforeEnter(Y),t(Y,k,x),St(()=>te.enter(Y),Q);else{const{leave:ce,delayLeave:Ae,afterLeave:Re}=te,ze=()=>{C.ctx.isUnmounted?e(Y):t(Y,k,x)},rt=()=>{ce(Y,()=>{ze(),Re&&Re()})};Ae?Ae(Y,ze,rt):rt()}else t(Y,k,x)},ge=(C,k,x,K=!1,Q=!1)=>{const{type:Y,props:re,ref:te,children:ae,dynamicChildren:$,shapeFlag:Se,patchFlag:ce,dirs:Ae,cacheIndex:Re}=C;if(ce===-2&&(Q=!1),te!=null&&(ni(),is(te,null,x,C,!0),ii()),Re!=null&&(k.renderCache[Re]=void 0),Se&256){k.ctx.deactivate(C);return}const ze=Se&1&&Ae,rt=!Er(C);let et;if(rt&&(et=re&&re.onVnodeBeforeUnmount)&&mn(et,k,C),Se&6)se(C.component,x,K);else{if(Se&128){C.suspense.unmount(x,K);return}ze&&xi(C,null,k,"beforeUnmount"),Se&64?C.type.remove(C,k,x,oe,K):$&&!$.hasOnce&&(Y!==Xe||ce>0&&ce&64)?fe($,k,x,!1,!0):(Y===Xe&&ce&384||!Q&&Se&16)&&fe(ae,k,x),K&&ue(C)}(rt&&(et=re&&re.onVnodeUnmounted)||ze)&&St(()=>{et&&mn(et,k,C),ze&&xi(C,null,k,"unmounted")},x)},ue=C=>{const{type:k,el:x,anchor:K,transition:Q}=C;if(k===Xe){Ve(x,K);return}if(k===fa){m(C);return}const Y=()=>{e(x),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(C.shapeFlag&1&&Q&&!Q.persisted){const{leave:re,delayLeave:te}=Q,ae=()=>re(x,Y);te?te(C.el,Y,ae):ae()}else Y()},Ve=(C,k)=>{let x;for(;C!==k;)x=h(C),e(C),C=x;e(k)},se=(C,k,x)=>{const{bum:K,scope:Q,job:Y,subTree:re,um:te,m:ae,a:$,parent:Se,slots:{__:ce}}=C;ka(ae),ka($),K&&_r(K),Se&&Te(ce)&&ce.forEach(Ae=>{Se.renderCache[Ae]=void 0}),Q.stop(),Y&&(Y.flags|=8,ge(re,C,k,x)),te&&St(te,k),St(()=>{C.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},fe=(C,k,x,K=!1,Q=!1,Y=0)=>{for(let re=Y;re<C.length;re++)ge(C[re],k,x,K,Q)},L=C=>{if(C.shapeFlag&6)return L(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const k=h(C.anchor||C.el),x=k&&k[md];return x?h(x):k};let Z=!1;const J=(C,k,x)=>{C==null?k._vnode&&ge(k._vnode,null,null,!0):v(k._vnode||null,C,k,null,null,null,x),k._vnode=C,Z||(Z=!0,mc(),pd(),Z=!1)},oe={p:v,um:ge,m:U,r:ue,mt:P,mc:N,pc:q,pbc:H,n:L,o:n};return{render:J,hydrate:void 0,createApp:ym(J)}}function Vo({type:n,props:r},i){return i==="svg"&&n==="foreignObject"||i==="mathml"&&n==="annotation-xml"&&r&&r.encoding&&r.encoding.includes("html")?void 0:i}function Di({effect:n,job:r},i){i?(n.flags|=32,r.flags|=4):(n.flags&=-33,r.flags&=-5)}function km(n,r){return(!n||n&&!n.pendingBranch)&&r&&!r.persisted}function Nu(n,r,i=!1){const t=n.children,e=r.children;if(Te(t)&&Te(e))for(let s=0;s<t.length;s++){const a=t[s];let o=e[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=e[s]=mi(e[s]),o.el=a.el),!i&&o.patchFlag!==-2&&Nu(a,o)),o.type===io&&(o.el=a.el),o.type===ri&&!o.el&&(o.el=a.el)}}function Im(n){const r=n.slice(),i=[0];let t,e,s,a,o;const l=n.length;for(t=0;t<l;t++){const u=n[t];if(u!==0){if(e=i[i.length-1],n[e]<u){r[t]=e,i.push(t);continue}for(s=0,a=i.length-1;s<a;)o=s+a>>1,n[i[o]]<u?s=o+1:a=o;u<n[i[s]]&&(s>0&&(r[t]=i[s-1]),i[s]=t)}}for(s=i.length,a=i[s-1];s-- >0;)i[s]=a,a=r[a];return i}function Md(n){const r=n.subTree.component;if(r)return r.asyncDep&&!r.asyncResolved?r:Md(r)}function ka(n){if(n)for(let r=0;r<n.length;r++)n[r].flags|=8}const Rm=Symbol.for("v-scx"),Pm=()=>Kt(Rm);function xm(n,r){return Uu(n,null,r)}function it(n,r,i){return Uu(n,r,i)}function Uu(n,r,i=nt){const{immediate:t,deep:e,flush:s,once:a}=i,o=Ht({},i),l=r&&t||!r&&s!=="post";let u;if(ps){if(s==="sync"){const d=Pm();u=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=Vn,d.resume=Vn,d.pause=Vn,d}}const c=Pt;o.call=(d,p,v)=>Gn(d,c,p,v);let f=!1;s==="post"?o.scheduler=d=>{St(d,c&&c.suspense)}:s!=="sync"&&(f=!0,o.scheduler=(d,p)=>{p?d():Pu(d)}),o.augmentJob=d=>{r&&(d.flags|=4),f&&(d.flags|=2,c&&(d.id=c.uid,d.i=c))};const h=Xv(n,r,o);return ps&&(u?u.push(h):l&&h()),h}function Dm(n,r,i){const t=this.proxy,e=ut(n)?n.includes(".")?Fd(t,n):()=>t[n]:n.bind(t,t);let s;De(r)?s=r:(s=r.handler,i=r);const a=Rs(this),o=Uu(e,s.bind(t),i);return a(),o}function Fd(n,r){const i=r.split(".");return()=>{let t=n;for(let e=0;e<i.length&&t;e++)t=t[i[e]];return t}}const Om=(n,r)=>r==="modelValue"||r==="model-value"?n.modelModifiers:n[`${r}Modifiers`]||n[`${En(r)}Modifiers`]||n[`${Ii(r)}Modifiers`];function Lm(n,r,...i){if(n.isUnmounted)return;const t=n.vnode.props||nt;let e=i;const s=r.startsWith("update:"),a=s&&Om(t,r.slice(7));a&&(a.trim&&(e=i.map(c=>ut(c)?c.trim():c)),a.number&&(e=i.map(xl)));let o,l=t[o=Lo(r)]||t[o=Lo(En(r))];!l&&s&&(l=t[o=Lo(Ii(r))]),l&&Gn(l,n,6,e);const u=t[o+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[o])return;n.emitted[o]=!0,Gn(u,n,6,e)}}function Nd(n,r,i=!1){const t=r.emitsCache,e=t.get(n);if(e!==void 0)return e;const s=n.emits;let a={},o=!1;if(!De(n)){const l=u=>{const c=Nd(u,r,!0);c&&(o=!0,Ht(a,c))};!i&&r.mixins.length&&r.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!o?(ft(n)&&t.set(n,null),null):(Te(s)?s.forEach(l=>a[l]=null):Ht(a,s),ft(n)&&t.set(n,a),a)}function no(n,r){return!n||!Ya(r)?!1:(r=r.slice(2).replace(/Once$/,""),$e(n,r[0].toLowerCase()+r.slice(1))||$e(n,Ii(r))||$e(n,r))}function kc(n){const{type:r,vnode:i,proxy:t,withProxy:e,propsOptions:[s],slots:a,attrs:o,emit:l,render:u,renderCache:c,props:f,data:h,setupState:d,ctx:p,inheritAttrs:v}=n,g=Ca(n);let _,b;try{if(i.shapeFlag&4){const m=e||t,S=m;_=Nn(u.call(S,m,c,f,d,h,p)),b=o}else{const m=r;_=Nn(m.length>1?m(f,{attrs:o,slots:a,emit:l}):m(f,null)),b=r.props?o:Bm(o)}}catch(m){ss.length=0,Ja(m,n,1),_=B(ri)}let y=_;if(b&&v!==!1){const m=Object.keys(b),{shapeFlag:S}=y;m.length&&S&7&&(s&&m.some(_u)&&(b=Mm(b,s)),y=Gi(y,b,!1,!0))}return i.dirs&&(y=Gi(y,null,!1,!0),y.dirs=y.dirs?y.dirs.concat(i.dirs):i.dirs),i.transition&&Za(y,i.transition),_=y,Ca(g),_}const Bm=n=>{let r;for(const i in n)(i==="class"||i==="style"||Ya(i))&&((r||(r={}))[i]=n[i]);return r},Mm=(n,r)=>{const i={};for(const t in n)(!_u(t)||!(t.slice(9)in r))&&(i[t]=n[t]);return i};function Fm(n,r,i){const{props:t,children:e,component:s}=n,{props:a,children:o,patchFlag:l}=r,u=s.emitsOptions;if(r.dirs||r.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return t?Ic(t,a,u):!!a;if(l&8){const c=r.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(a[h]!==t[h]&&!no(u,h))return!0}}}else return(e||o)&&(!o||!o.$stable)?!0:t===a?!1:t?a?Ic(t,a,u):!0:!!a;return!1}function Ic(n,r,i){const t=Object.keys(r);if(t.length!==Object.keys(n).length)return!0;for(let e=0;e<t.length;e++){const s=t[e];if(r[s]!==n[s]&&!no(i,s))return!0}return!1}function Nm({vnode:n,parent:r},i){for(;r;){const t=r.subTree;if(t.suspense&&t.suspense.activeBranch===n&&(t.el=n.el),t===n)(n=r.vnode).el=i,r=r.parent;else break}}const Ia=n=>n.__isSuspense;function Um(n,r){r&&r.pendingBranch?Te(n)?r.effects.push(...n):r.effects.push(n):Zv(n)}const Xe=Symbol.for("v-fgt"),io=Symbol.for("v-txt"),ri=Symbol.for("v-cmt"),fa=Symbol.for("v-stc"),ss=[];let fn=null;function le(n=!1){ss.push(fn=n?null:[])}function Hm(){ss.pop(),fn=ss[ss.length-1]||null}let ds=1;function Rc(n,r=!1){ds+=n,n<0&&fn&&r&&(fn.hasOnce=!0)}function Ud(n){return n.dynamicChildren=ds>0?fn||yr:null,Hm(),ds>0&&fn&&fn.push(n),n}function we(n,r,i,t,e,s){return Ud(w(n,r,i,t,e,s,!0))}function vt(n,r,i,t,e){return Ud(B(n,r,i,t,e,!0))}function Tr(n){return n?n.__v_isVNode===!0:!1}function hr(n,r){return n.type===r.type&&n.key===r.key}const Hd=({key:n})=>n??null,ha=({ref:n,ref_key:r,ref_for:i})=>(typeof n=="number"&&(n=""+n),n!=null?ut(n)||Dt(n)||De(n)?{i:tn,r:n,k:r,f:!!i}:n:null);function w(n,r=null,i=null,t=0,e=null,s=n===Xe?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:r,key:r&&Hd(r),ref:r&&ha(r),scopeId:vd,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:t,dynamicProps:e,dynamicChildren:null,appContext:null,ctx:tn};return o?(Hu(l,i),s&128&&n.normalize(l)):i&&(l.shapeFlag|=ut(i)?8:16),ds>0&&!a&&fn&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&fn.push(l),l}const B=Vm;function Vm(n,r=null,i=null,t=0,e=null,s=!1){if((!n||n===wd)&&(n=ri),Tr(n)){const o=Gi(n,r,!0);return i&&Hu(o,i),ds>0&&!s&&fn&&(o.shapeFlag&6?fn[fn.indexOf(n)]=o:fn.push(o)),o.patchFlag=-2,o}if(Jm(n)&&(n=n.__vccOpts),r){r=jm(r);let{class:o,style:l}=r;o&&!ut(o)&&(r.class=wi(o)),ft(l)&&(Ru(l)&&!Te(l)&&(l=Ht({},l)),r.style=Ts(l))}const a=ut(n)?1:Ia(n)?128:$v(n)?64:ft(n)?4:De(n)?2:0;return w(n,r,i,t,e,a,s,!0)}function jm(n){return n?Ru(n)||Pd(n)?Ht({},n):n:null}function Gi(n,r,i=!1,t=!1){const{props:e,ref:s,patchFlag:a,children:o,transition:l}=n,u=r?kr(e||{},r):e,c={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&Hd(u),ref:r&&r.ref?i&&s?Te(s)?s.concat(ha(r)):[s,ha(r)]:ha(r):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:r&&n.type!==Xe?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Gi(n.ssContent),ssFallback:n.ssFallback&&Gi(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&t&&Za(c,l.clone(c)),c}function bi(n=" ",r=0){return B(io,null,n,r)}function Gm(n,r){const i=B(fa,null,n);return i.staticCount=r,i}function An(n="",r=!1){return r?(le(),vt(ri,null,n)):B(ri,null,n)}function Nn(n){return n==null||typeof n=="boolean"?B(ri):Te(n)?B(Xe,null,n.slice()):Tr(n)?mi(n):B(io,null,String(n))}function mi(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Gi(n)}function Hu(n,r){let i=0;const{shapeFlag:t}=n;if(r==null)r=null;else if(Te(r))i=16;else if(typeof r=="object")if(t&65){const e=r.default;e&&(e._c&&(e._d=!1),Hu(n,e()),e._c&&(e._d=!0));return}else{i=32;const e=r._;!e&&!Pd(r)?r._ctx=tn:e===3&&tn&&(tn.slots._===1?r._=1:(r._=2,n.patchFlag|=1024))}else De(r)?(r={default:r,_ctx:tn},i=32):(r=String(r),t&64?(i=16,r=[bi(r)]):i=8);n.children=r,n.shapeFlag|=i}function kr(...n){const r={};for(let i=0;i<n.length;i++){const t=n[i];for(const e in t)if(e==="class")r.class!==t.class&&(r.class=wi([r.class,t.class]));else if(e==="style")r.style=Ts([r.style,t.style]);else if(Ya(e)){const s=r[e],a=t[e];a&&s!==a&&!(Te(s)&&s.includes(a))&&(r[e]=s?[].concat(s,a):a)}else e!==""&&(r[e]=t[e])}return r}function mn(n,r,i,t=null){Gn(n,r,7,[i,t])}const zm=kd();let Km=0;function Ym(n,r,i){const t=n.type,e=(r?r.appContext:n.appContext)||zm,s={uid:Km++,vnode:n,type:t,parent:r,appContext:e,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Yh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(e.provides),ids:r?r.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Dd(t,e),emitsOptions:Nd(t,e),emit:null,emitted:null,propsDefaults:nt,inheritAttrs:t.inheritAttrs,ctx:nt,data:nt,props:nt,attrs:nt,slots:nt,refs:nt,setupState:nt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=r?r.root:s,s.emit=Lm.bind(null,s),n.ce&&n.ce(s),s}let Pt=null;const ui=()=>Pt||tn;let Ra,Vl;{const n=Xa(),r=(i,t)=>{let e;return(e=n[i])||(e=n[i]=[]),e.push(t),s=>{e.length>1?e.forEach(a=>a(s)):e[0](s)}};Ra=r("__VUE_INSTANCE_SETTERS__",i=>Pt=i),Vl=r("__VUE_SSR_SETTERS__",i=>ps=i)}const Rs=n=>{const r=Pt;return Ra(n),n.scope.on(),()=>{n.scope.off(),Ra(r)}},Pc=()=>{Pt&&Pt.scope.off(),Ra(null)};function Vd(n){return n.vnode.shapeFlag&4}let ps=!1;function Qm(n,r=!1,i=!1){r&&Vl(r);const{props:t,children:e}=n.vnode,s=Vd(n);Am(n,t,s,r),Em(n,e,i||r);const a=s?Wm(n,r):void 0;return r&&Vl(!1),a}function Wm(n,r){const i=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,fm);const{setup:t}=i;if(t){ni();const e=n.setupContext=t.length>1?qm(n):null,s=Rs(n),a=ks(t,n,0,[n.props,e]),o=Hh(a);if(ii(),s(),(o||n.sp)&&!Er(n)&&_d(n),o){if(a.then(Pc,Pc),r)return a.then(l=>{xc(n,l)}).catch(l=>{Ja(l,n,0)});n.asyncDep=a}else xc(n,a)}else jd(n)}function xc(n,r,i){De(r)?n.type.__ssrInlineRender?n.ssrRender=r:n.render=r:ft(r)&&(n.setupState=fd(r)),jd(n)}function jd(n,r,i){const t=n.type;n.render||(n.render=t.render||Vn);{const e=Rs(n);ni();try{hm(n)}finally{ii(),e()}}}const Xm={get(n,r){return Ft(n,"get",""),n[r]}};function qm(n){const r=i=>{n.exposed=i||{}};return{attrs:new Proxy(n.attrs,Xm),slots:n.slots,emit:n.emit,expose:r}}function ro(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(fd(ud(n.exposed)),{get(r,i){if(i in r)return r[i];if(i in rs)return rs[i](n)},has(r,i){return i in r||i in rs}})):n.proxy}function jl(n,r=!0){return De(n)?n.displayName||n.name:n.name||r&&n.__name}function Jm(n){return De(n)&&"__vccOpts"in n}const Ce=(n,r)=>Qv(n,r,ps);function Gd(n,r,i){const t=arguments.length;return t===2?ft(r)&&!Te(r)?Tr(r)?B(n,null,[r]):B(n,r):B(n,null,r):(t>3?i=Array.prototype.slice.call(arguments,2):t===3&&Tr(i)&&(i=[i]),B(n,r,i))}const Zm="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Gl;const Dc=typeof window<"u"&&window.trustedTypes;if(Dc)try{Gl=Dc.createPolicy("vue",{createHTML:n=>n})}catch{}const zd=Gl?n=>Gl.createHTML(n):n=>n,$m="http://www.w3.org/2000/svg",ey="http://www.w3.org/1998/Math/MathML",Xn=typeof document<"u"?document:null,Oc=Xn&&Xn.createElement("template"),ty={insert:(n,r,i)=>{r.insertBefore(n,i||null)},remove:n=>{const r=n.parentNode;r&&r.removeChild(n)},createElement:(n,r,i,t)=>{const e=r==="svg"?Xn.createElementNS($m,n):r==="mathml"?Xn.createElementNS(ey,n):i?Xn.createElement(n,{is:i}):Xn.createElement(n);return n==="select"&&t&&t.multiple!=null&&e.setAttribute("multiple",t.multiple),e},createText:n=>Xn.createTextNode(n),createComment:n=>Xn.createComment(n),setText:(n,r)=>{n.nodeValue=r},setElementText:(n,r)=>{n.textContent=r},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Xn.querySelector(n),setScopeId(n,r){n.setAttribute(r,"")},insertStaticContent(n,r,i,t,e,s){const a=i?i.previousSibling:r.lastChild;if(e&&(e===s||e.nextSibling))for(;r.insertBefore(e.cloneNode(!0),i),!(e===s||!(e=e.nextSibling)););else{Oc.innerHTML=zd(t==="svg"?`<svg>${n}</svg>`:t==="mathml"?`<math>${n}</math>`:n);const o=Oc.content;if(t==="svg"||t==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}r.insertBefore(o,i)}return[a?a.nextSibling:r.firstChild,i?i.previousSibling:r.lastChild]}},ny=Symbol("_vtc");function iy(n,r,i){const t=n[ny];t&&(r=(r?[r,...t]:[...t]).join(" ")),r==null?n.removeAttribute("class"):i?n.setAttribute("class",r):n.className=r}const Pa=Symbol("_vod"),Kd=Symbol("_vsh"),jn={beforeMount(n,{value:r},{transition:i}){n[Pa]=n.style.display==="none"?"":n.style.display,i&&r?i.beforeEnter(n):jr(n,r)},mounted(n,{value:r},{transition:i}){i&&r&&i.enter(n)},updated(n,{value:r,oldValue:i},{transition:t}){!r!=!i&&(t?r?(t.beforeEnter(n),jr(n,!0),t.enter(n)):t.leave(n,()=>{jr(n,!1)}):jr(n,r))},beforeUnmount(n,{value:r}){jr(n,r)}};function jr(n,r){n.style.display=r?n[Pa]:"none",n[Kd]=!r}const ry=Symbol(""),sy=/(^|;)\s*display\s*:/;function ay(n,r,i){const t=n.style,e=ut(i);let s=!1;if(i&&!e){if(r)if(ut(r))for(const a of r.split(";")){const o=a.slice(0,a.indexOf(":")).trim();i[o]==null&&da(t,o,"")}else for(const a in r)i[a]==null&&da(t,a,"");for(const a in i)a==="display"&&(s=!0),da(t,a,i[a])}else if(e){if(r!==i){const a=t[ry];a&&(i+=";"+a),t.cssText=i,s=sy.test(i)}}else r&&n.removeAttribute("style");Pa in n&&(n[Pa]=s?t.display:"",n[Kd]&&(t.display="none"))}const Lc=/\s*!important$/;function da(n,r,i){if(Te(i))i.forEach(t=>da(n,r,t));else if(i==null&&(i=""),r.startsWith("--"))n.setProperty(r,i);else{const t=oy(n,r);Lc.test(i)?n.setProperty(Ii(t),i.replace(Lc,""),"important"):n[t]=i}}const Bc=["Webkit","Moz","ms"],jo={};function oy(n,r){const i=jo[r];if(i)return i;let t=En(r);if(t!=="filter"&&t in n)return jo[r]=t;t=Wa(t);for(let e=0;e<Bc.length;e++){const s=Bc[e]+t;if(s in n)return jo[r]=s}return r}const Mc="http://www.w3.org/1999/xlink";function Fc(n,r,i,t,e,s=Sv(r)){t&&r.startsWith("xlink:")?i==null?n.removeAttributeNS(Mc,r.slice(6,r.length)):n.setAttributeNS(Mc,r,i):i==null||s&&!Gh(i)?n.removeAttribute(r):n.setAttribute(r,s?"":ki(i)?String(i):i)}function Nc(n,r,i,t,e){if(r==="innerHTML"||r==="textContent"){i!=null&&(n[r]=r==="innerHTML"?zd(i):i);return}const s=n.tagName;if(r==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?n.getAttribute("value")||"":n.value,l=i==null?n.type==="checkbox"?"on":"":String(i);(o!==l||!("_value"in n))&&(n.value=l),i==null&&n.removeAttribute(r),n._value=i;return}let a=!1;if(i===""||i==null){const o=typeof n[r];o==="boolean"?i=Gh(i):i==null&&o==="string"?(i="",a=!0):o==="number"&&(i=0,a=!0)}try{n[r]=i}catch{}a&&n.removeAttribute(e||r)}function dr(n,r,i,t){n.addEventListener(r,i,t)}function ly(n,r,i,t){n.removeEventListener(r,i,t)}const Uc=Symbol("_vei");function uy(n,r,i,t,e=null){const s=n[Uc]||(n[Uc]={}),a=s[r];if(t&&a)a.value=t;else{const[o,l]=cy(r);if(t){const u=s[r]=dy(t,e);dr(n,o,u,l)}else a&&(ly(n,o,a,l),s[r]=void 0)}}const Hc=/(?:Once|Passive|Capture)$/;function cy(n){let r;if(Hc.test(n)){r={};let t;for(;t=n.match(Hc);)n=n.slice(0,n.length-t[0].length),r[t[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Ii(n.slice(2)),r]}let Go=0;const fy=Promise.resolve(),hy=()=>Go||(fy.then(()=>Go=0),Go=Date.now());function dy(n,r){const i=t=>{if(!t._vts)t._vts=Date.now();else if(t._vts<=i.attached)return;Gn(py(t,i.value),r,5,[t])};return i.value=n,i.attached=hy(),i}function py(n,r){if(Te(r)){const i=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{i.call(n),n._stopped=!0},r.map(t=>e=>!e._stopped&&t&&t(e))}else return r}const Vc=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,gy=(n,r,i,t,e,s)=>{const a=e==="svg";r==="class"?iy(n,t,a):r==="style"?ay(n,i,t):Ya(r)?_u(r)||uy(n,r,i,t,s):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):vy(n,r,t,a))?(Nc(n,r,t),!n.tagName.includes("-")&&(r==="value"||r==="checked"||r==="selected")&&Fc(n,r,t,a,s,r!=="value")):n._isVueCE&&(/[A-Z]/.test(r)||!ut(t))?Nc(n,En(r),t,s,r):(r==="true-value"?n._trueValue=t:r==="false-value"&&(n._falseValue=t),Fc(n,r,t,a))};function vy(n,r,i,t){if(t)return!!(r==="innerHTML"||r==="textContent"||r in n&&Vc(r)&&De(i));if(r==="spellcheck"||r==="draggable"||r==="translate"||r==="autocorrect"||r==="form"||r==="list"&&n.tagName==="INPUT"||r==="type"&&n.tagName==="TEXTAREA")return!1;if(r==="width"||r==="height"){const e=n.tagName;if(e==="IMG"||e==="VIDEO"||e==="CANVAS"||e==="SOURCE")return!1}return Vc(r)&&ut(i)?!1:r in n}const jc=n=>{const r=n.props["onUpdate:modelValue"]||!1;return Te(r)?i=>_r(r,i):r};function my(n){n.target.composing=!0}function Gc(n){const r=n.target;r.composing&&(r.composing=!1,r.dispatchEvent(new Event("input")))}const zo=Symbol("_assign"),yy={created(n,{modifiers:{lazy:r,trim:i,number:t}},e){n[zo]=jc(e);const s=t||e.props&&e.props.type==="number";dr(n,r?"change":"input",a=>{if(a.target.composing)return;let o=n.value;i&&(o=o.trim()),s&&(o=xl(o)),n[zo](o)}),i&&dr(n,"change",()=>{n.value=n.value.trim()}),r||(dr(n,"compositionstart",my),dr(n,"compositionend",Gc),dr(n,"change",Gc))},mounted(n,{value:r}){n.value=r??""},beforeUpdate(n,{value:r,oldValue:i,modifiers:{lazy:t,trim:e,number:s}},a){if(n[zo]=jc(a),n.composing)return;const o=(s||n.type==="number")&&!/^0\d/.test(n.value)?xl(n.value):n.value,l=r??"";o!==l&&(document.activeElement===n&&n.type!=="range"&&(t&&r===i||e&&n.value.trim()===l)||(n.value=l))}},Ay=["ctrl","shift","alt","meta"],_y={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,r)=>Ay.some(i=>n[`${i}Key`]&&!r.includes(i))},by=(n,r)=>{const i=n._withMods||(n._withMods={}),t=r.join(".");return i[t]||(i[t]=(e,...s)=>{for(let a=0;a<r.length;a++){const o=_y[r[a]];if(o&&o(e,r))return}return n(e,...s)})},Sy=Ht({patchProp:gy},ty);let zc;function Ey(){return zc||(zc=Cm(Sy))}const wy=(...n)=>{const r=Ey().createApp(...n),{mount:i}=r;return r.mount=t=>{const e=Ty(t);if(!e)return;const s=r._component;!De(s)&&!s.render&&!s.template&&(s.template=e.innerHTML),e.nodeType===1&&(e.textContent="");const a=i(e,!1,Cy(e));return e instanceof Element&&(e.removeAttribute("v-cloak"),e.setAttribute("data-v-app","")),a},r};function Cy(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Ty(n){return ut(n)?document.querySelector(n):n}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const ky=Symbol();var Kc;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Kc||(Kc={}));function Iy(){const n=Ev(!0),r=n.run(()=>ne({}));let i=[],t=[];const e=ud({install(s){e._a=s,s.provide(ky,e),s.config.globalProperties.$pinia=e,t.forEach(a=>i.push(a)),t=[]},use(s){return this._a?i.push(s):t.push(s),this},_p:i,_a:null,_e:n,_s:new Map,state:r});return e}const pt=(n,r)=>{const i=n.__vccOpts||n;for(const[t,e]of r)i[t]=e;return i},Ry={},Py={class:"index-body flex_auto"};function xy(n,r){const i=li("RouterView");return le(),we("div",Py,[B(i,null,{default:be(({Component:t})=>[(le(),vt(xu,{exclude:"PlayView,LoginTG,SearchView"},[(le(),vt(Lu(t)))],1024))]),_:1})])}const Dy=pt(Ry,[["render",xy],["__scopeId","data-v-2e00941e"]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const pr=typeof document<"u";function Yd(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Oy(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&Yd(n.default)}const Je=Object.assign;function Ko(n,r){const i={};for(const t in r){const e=r[t];i[t]=In(e)?e.map(n):n(e)}return i}const as=()=>{},In=Array.isArray,Qd=/#/g,Ly=/&/g,By=/\//g,My=/=/g,Fy=/\?/g,Wd=/\+/g,Ny=/%5B/g,Uy=/%5D/g,Xd=/%5E/g,Hy=/%60/g,qd=/%7B/g,Vy=/%7C/g,Jd=/%7D/g,jy=/%20/g;function Vu(n){return encodeURI(""+n).replace(Vy,"|").replace(Ny,"[").replace(Uy,"]")}function Gy(n){return Vu(n).replace(qd,"{").replace(Jd,"}").replace(Xd,"^")}function zl(n){return Vu(n).replace(Wd,"%2B").replace(jy,"+").replace(Qd,"%23").replace(Ly,"%26").replace(Hy,"`").replace(qd,"{").replace(Jd,"}").replace(Xd,"^")}function zy(n){return zl(n).replace(My,"%3D")}function Ky(n){return Vu(n).replace(Qd,"%23").replace(Fy,"%3F")}function Yy(n){return n==null?"":Ky(n).replace(By,"%2F")}function gs(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const Qy=/\/$/,Wy=n=>n.replace(Qy,"");function Yo(n,r,i="/"){let t,e={},s="",a="";const o=r.indexOf("#");let l=r.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(t=r.slice(0,l),s=r.slice(l+1,o>-1?o:r.length),e=n(s)),o>-1&&(t=t||r.slice(0,o),a=r.slice(o,r.length)),t=Zy(t??r,i),{fullPath:t+(s&&"?")+s+a,path:t,query:e,hash:gs(a)}}function Xy(n,r){const i=r.query?n(r.query):"";return r.path+(i&&"?")+i+(r.hash||"")}function Yc(n,r){return!r||!n.toLowerCase().startsWith(r.toLowerCase())?n:n.slice(r.length)||"/"}function qy(n,r,i){const t=r.matched.length-1,e=i.matched.length-1;return t>-1&&t===e&&Ir(r.matched[t],i.matched[e])&&Zd(r.params,i.params)&&n(r.query)===n(i.query)&&r.hash===i.hash}function Ir(n,r){return(n.aliasOf||n)===(r.aliasOf||r)}function Zd(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const i in n)if(!Jy(n[i],r[i]))return!1;return!0}function Jy(n,r){return In(n)?Qc(n,r):In(r)?Qc(r,n):n===r}function Qc(n,r){return In(r)?n.length===r.length&&n.every((i,t)=>i===r[t]):n.length===1&&n[0]===r}function Zy(n,r){if(n.startsWith("/"))return n;if(!n)return r;const i=r.split("/"),t=n.split("/"),e=t[t.length-1];(e===".."||e===".")&&t.push("");let s=i.length-1,a,o;for(a=0;a<t.length;a++)if(o=t[a],o!==".")if(o==="..")s>1&&s--;else break;return i.slice(0,s).join("/")+"/"+t.slice(a).join("/")}const fi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var vs;(function(n){n.pop="pop",n.push="push"})(vs||(vs={}));var os;(function(n){n.back="back",n.forward="forward",n.unknown=""})(os||(os={}));function $y(n){if(!n)if(pr){const r=document.querySelector("base");n=r&&r.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),Wy(n)}const e0=/^[^#]+#/;function t0(n,r){return n.replace(e0,"#")+r}function n0(n,r){const i=document.documentElement.getBoundingClientRect(),t=n.getBoundingClientRect();return{behavior:r.behavior,left:t.left-i.left-(r.left||0),top:t.top-i.top-(r.top||0)}}const so=()=>({left:window.scrollX,top:window.scrollY});function i0(n){let r;if("el"in n){const i=n.el,t=typeof i=="string"&&i.startsWith("#"),e=typeof i=="string"?t?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!e)return;r=n0(e,n)}else r=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(r):window.scrollTo(r.left!=null?r.left:window.scrollX,r.top!=null?r.top:window.scrollY)}function Wc(n,r){return(history.state?history.state.position-r:-1)+n}const Kl=new Map;function r0(n,r){Kl.set(n,r)}function s0(n){const r=Kl.get(n);return Kl.delete(n),r}let a0=()=>location.protocol+"//"+location.host;function $d(n,r){const{pathname:i,search:t,hash:e}=r,s=n.indexOf("#");if(s>-1){let o=e.includes(n.slice(s))?n.slice(s).length:1,l=e.slice(o);return l[0]!=="/"&&(l="/"+l),Yc(l,"")}return Yc(i,n)+t+e}function o0(n,r,i,t){let e=[],s=[],a=null;const o=({state:h})=>{const d=$d(n,location),p=i.value,v=r.value;let g=0;if(h){if(i.value=d,r.value=h,a&&a===p){a=null;return}g=v?h.position-v.position:0}else t(d);e.forEach(_=>{_(i.value,p,{delta:g,type:vs.pop,direction:g?g>0?os.forward:os.back:os.unknown})})};function l(){a=i.value}function u(h){e.push(h);const d=()=>{const p=e.indexOf(h);p>-1&&e.splice(p,1)};return s.push(d),d}function c(){const{history:h}=window;h.state&&h.replaceState(Je({},h.state,{scroll:so()}),"")}function f(){for(const h of s)h();s=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:f}}function Xc(n,r,i,t=!1,e=!1){return{back:n,current:r,forward:i,replaced:t,position:window.history.length,scroll:e?so():null}}function l0(n){const{history:r,location:i}=window,t={value:$d(n,i)},e={value:r.state};e.value||s(t.value,{back:null,current:t.value,forward:null,position:r.length-1,replaced:!0,scroll:null},!0);function s(l,u,c){const f=n.indexOf("#"),h=f>-1?(i.host&&document.querySelector("base")?n:n.slice(f))+l:a0()+n+l;try{r[c?"replaceState":"pushState"](u,"",h),e.value=u}catch(d){console.error(d),i[c?"replace":"assign"](h)}}function a(l,u){const c=Je({},r.state,Xc(e.value.back,l,e.value.forward,!0),u,{position:e.value.position});s(l,c,!0),t.value=l}function o(l,u){const c=Je({},e.value,r.state,{forward:l,scroll:so()});s(c.current,c,!0);const f=Je({},Xc(t.value,l,null),{position:c.position+1},u);s(l,f,!1),t.value=l}return{location:t,state:e,push:o,replace:a}}function u0(n){n=$y(n);const r=l0(n),i=o0(n,r.state,r.location,r.replace);function t(s,a=!0){a||i.pauseListeners(),history.go(s)}const e=Je({location:"",base:n,go:t,createHref:t0.bind(null,n)},r,i);return Object.defineProperty(e,"location",{enumerable:!0,get:()=>r.location.value}),Object.defineProperty(e,"state",{enumerable:!0,get:()=>r.state.value}),e}function c0(n){return typeof n=="string"||n&&typeof n=="object"}function ep(n){return typeof n=="string"||typeof n=="symbol"}const tp=Symbol("");var qc;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(qc||(qc={}));function Rr(n,r){return Je(new Error,{type:n,[tp]:!0},r)}function Qn(n,r){return n instanceof Error&&tp in n&&(r==null||!!(n.type&r))}const Jc="[^/]+?",f0={sensitive:!1,strict:!1,start:!0,end:!0},h0=/[.+*?^${}()[\]/\\]/g;function d0(n,r){const i=Je({},f0,r),t=[];let e=i.start?"^":"";const s=[];for(const u of n){const c=u.length?[]:[90];i.strict&&!u.length&&(e+="/");for(let f=0;f<u.length;f++){const h=u[f];let d=40+(i.sensitive?.25:0);if(h.type===0)f||(e+="/"),e+=h.value.replace(h0,"\\$&"),d+=40;else if(h.type===1){const{value:p,repeatable:v,optional:g,regexp:_}=h;s.push({name:p,repeatable:v,optional:g});const b=_||Jc;if(b!==Jc){d+=10;try{new RegExp(`(${b})`)}catch(m){throw new Error(`Invalid custom RegExp for param "${p}" (${b}): `+m.message)}}let y=v?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;f||(y=g&&u.length<2?`(?:/${y})`:"/"+y),g&&(y+="?"),e+=y,d+=20,g&&(d+=-8),v&&(d+=-20),b===".*"&&(d+=-50)}c.push(d)}t.push(c)}if(i.strict&&i.end){const u=t.length-1;t[u][t[u].length-1]+=.7000000000000001}i.strict||(e+="/?"),i.end?e+="$":i.strict&&!e.endsWith("/")&&(e+="(?:/|$)");const a=new RegExp(e,i.sensitive?"":"i");function o(u){const c=u.match(a),f={};if(!c)return null;for(let h=1;h<c.length;h++){const d=c[h]||"",p=s[h-1];f[p.name]=d&&p.repeatable?d.split("/"):d}return f}function l(u){let c="",f=!1;for(const h of n){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const d of h)if(d.type===0)c+=d.value;else if(d.type===1){const{value:p,repeatable:v,optional:g}=d,_=p in u?u[p]:"";if(In(_)&&!v)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const b=In(_)?_.join("/"):_;if(!b)if(g)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);c+=b}}return c||"/"}return{re:a,score:t,keys:s,parse:o,stringify:l}}function p0(n,r){let i=0;for(;i<n.length&&i<r.length;){const t=r[i]-n[i];if(t)return t;i++}return n.length<r.length?n.length===1&&n[0]===80?-1:1:n.length>r.length?r.length===1&&r[0]===80?1:-1:0}function np(n,r){let i=0;const t=n.score,e=r.score;for(;i<t.length&&i<e.length;){const s=p0(t[i],e[i]);if(s)return s;i++}if(Math.abs(e.length-t.length)===1){if(Zc(t))return 1;if(Zc(e))return-1}return e.length-t.length}function Zc(n){const r=n[n.length-1];return n.length>0&&r[r.length-1]<0}const g0={type:0,value:""},v0=/[a-zA-Z0-9_]/;function m0(n){if(!n)return[[]];if(n==="/")return[[g0]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function r(d){throw new Error(`ERR (${i})/"${u}": ${d}`)}let i=0,t=i;const e=[];let s;function a(){s&&e.push(s),s=[]}let o=0,l,u="",c="";function f(){u&&(i===0?s.push({type:0,value:u}):i===1||i===2||i===3?(s.length>1&&(l==="*"||l==="+")&&r(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):r("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;o<n.length;){if(l=n[o++],l==="\\"&&i!==2){t=i,i=4;continue}switch(i){case 0:l==="/"?(u&&f(),a()):l===":"?(f(),i=1):h();break;case 4:h(),i=t;break;case 1:l==="("?i=2:v0.test(l)?h():(f(),i=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:i=3:c+=l;break;case 3:f(),i=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,c="";break;default:r("Unknown state");break}}return i===2&&r(`Unfinished custom RegExp for param "${u}"`),f(),a(),e}function y0(n,r,i){const t=d0(m0(n.path),i),e=Je(t,{record:n,parent:r,children:[],alias:[]});return r&&!e.record.aliasOf==!r.record.aliasOf&&r.children.push(e),e}function A0(n,r){const i=[],t=new Map;r=nf({strict:!1,end:!0,sensitive:!1},r);function e(f){return t.get(f)}function s(f,h,d){const p=!d,v=ef(f);v.aliasOf=d&&d.record;const g=nf(r,f),_=[v];if("alias"in f){const m=typeof f.alias=="string"?[f.alias]:f.alias;for(const S of m)_.push(ef(Je({},v,{components:d?d.record.components:v.components,path:S,aliasOf:d?d.record:v})))}let b,y;for(const m of _){const{path:S}=m;if(h&&S[0]!=="/"){const I=h.record.path,R=I[I.length-1]==="/"?"":"/";m.path=h.record.path+(S&&R+S)}if(b=y0(m,h,g),d?d.alias.push(b):(y=y||b,y!==b&&y.alias.push(b),p&&f.name&&!tf(b)&&a(f.name)),ip(b)&&l(b),v.children){const I=v.children;for(let R=0;R<I.length;R++)s(I[R],b,d&&d.children[R])}d=d||b}return y?()=>{a(y)}:as}function a(f){if(ep(f)){const h=t.get(f);h&&(t.delete(f),i.splice(i.indexOf(h),1),h.children.forEach(a),h.alias.forEach(a))}else{const h=i.indexOf(f);h>-1&&(i.splice(h,1),f.record.name&&t.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function o(){return i}function l(f){const h=S0(f,i);i.splice(h,0,f),f.record.name&&!tf(f)&&t.set(f.record.name,f)}function u(f,h){let d,p={},v,g;if("name"in f&&f.name){if(d=t.get(f.name),!d)throw Rr(1,{location:f});g=d.record.name,p=Je($c(h.params,d.keys.filter(y=>!y.optional).concat(d.parent?d.parent.keys.filter(y=>y.optional):[]).map(y=>y.name)),f.params&&$c(f.params,d.keys.map(y=>y.name))),v=d.stringify(p)}else if(f.path!=null)v=f.path,d=i.find(y=>y.re.test(v)),d&&(p=d.parse(v),g=d.record.name);else{if(d=h.name?t.get(h.name):i.find(y=>y.re.test(h.path)),!d)throw Rr(1,{location:f,currentLocation:h});g=d.record.name,p=Je({},h.params,f.params),v=d.stringify(p)}const _=[];let b=d;for(;b;)_.unshift(b.record),b=b.parent;return{name:g,path:v,params:p,matched:_,meta:b0(_)}}n.forEach(f=>s(f));function c(){i.length=0,t.clear()}return{addRoute:s,resolve:u,removeRoute:a,clearRoutes:c,getRoutes:o,getRecordMatcher:e}}function $c(n,r){const i={};for(const t of r)t in n&&(i[t]=n[t]);return i}function ef(n){const r={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:_0(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(r,"mods",{value:{}}),r}function _0(n){const r={},i=n.props||!1;if("component"in n)r.default=i;else for(const t in n.components)r[t]=typeof i=="object"?i[t]:i;return r}function tf(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function b0(n){return n.reduce((r,i)=>Je(r,i.meta),{})}function nf(n,r){const i={};for(const t in n)i[t]=t in r?r[t]:n[t];return i}function S0(n,r){let i=0,t=r.length;for(;i!==t;){const s=i+t>>1;np(n,r[s])<0?t=s:i=s+1}const e=E0(n);return e&&(t=r.lastIndexOf(e,t-1)),t}function E0(n){let r=n;for(;r=r.parent;)if(ip(r)&&np(n,r)===0)return r}function ip({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function w0(n){const r={};if(n===""||n==="?")return r;const t=(n[0]==="?"?n.slice(1):n).split("&");for(let e=0;e<t.length;++e){const s=t[e].replace(Wd," "),a=s.indexOf("="),o=gs(a<0?s:s.slice(0,a)),l=a<0?null:gs(s.slice(a+1));if(o in r){let u=r[o];In(u)||(u=r[o]=[u]),u.push(l)}else r[o]=l}return r}function rf(n){let r="";for(let i in n){const t=n[i];if(i=zy(i),t==null){t!==void 0&&(r+=(r.length?"&":"")+i);continue}(In(t)?t.map(s=>s&&zl(s)):[t&&zl(t)]).forEach(s=>{s!==void 0&&(r+=(r.length?"&":"")+i,s!=null&&(r+="="+s))})}return r}function C0(n){const r={};for(const i in n){const t=n[i];t!==void 0&&(r[i]=In(t)?t.map(e=>e==null?null:""+e):t==null?t:""+t)}return r}const T0=Symbol(""),sf=Symbol(""),ao=Symbol(""),ju=Symbol(""),Yl=Symbol("");function Gr(){let n=[];function r(t){return n.push(t),()=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)}}function i(){n=[]}return{add:r,list:()=>n.slice(),reset:i}}function yi(n,r,i,t,e,s=a=>a()){const a=t&&(t.enterCallbacks[e]=t.enterCallbacks[e]||[]);return()=>new Promise((o,l)=>{const u=h=>{h===!1?l(Rr(4,{from:i,to:r})):h instanceof Error?l(h):c0(h)?l(Rr(2,{from:r,to:h})):(a&&t.enterCallbacks[e]===a&&typeof h=="function"&&a.push(h),o())},c=s(()=>n.call(t&&t.instances[e],r,i,u));let f=Promise.resolve(c);n.length<3&&(f=f.then(u)),f.catch(h=>l(h))})}function Qo(n,r,i,t,e=s=>s()){const s=[];for(const a of n)for(const o in a.components){let l=a.components[o];if(!(r!=="beforeRouteEnter"&&!a.instances[o]))if(Yd(l)){const c=(l.__vccOpts||l)[r];c&&s.push(yi(c,i,t,a,o,e))}else{let u=l();s.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const f=Oy(c)?c.default:c;a.mods[o]=c,a.components[o]=f;const d=(f.__vccOpts||f)[r];return d&&yi(d,i,t,a,o,e)()}))}}return s}function af(n){const r=Kt(ao),i=Kt(ju),t=Ce(()=>{const l=At(n.to);return r.resolve(l)}),e=Ce(()=>{const{matched:l}=t.value,{length:u}=l,c=l[u-1],f=i.matched;if(!c||!f.length)return-1;const h=f.findIndex(Ir.bind(null,c));if(h>-1)return h;const d=of(l[u-2]);return u>1&&of(c)===d&&f[f.length-1].path!==d?f.findIndex(Ir.bind(null,l[u-2])):h}),s=Ce(()=>e.value>-1&&x0(i.params,t.value.params)),a=Ce(()=>e.value>-1&&e.value===i.matched.length-1&&Zd(i.params,t.value.params));function o(l={}){if(P0(l)){const u=r[At(n.replace)?"replace":"push"](At(n.to)).catch(as);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:t,href:Ce(()=>t.value.href),isActive:s,isExactActive:a,navigate:o}}function k0(n){return n.length===1?n[0]:n}const I0=Fe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:af,setup(n,{slots:r}){const i=pn(af(n)),{options:t}=Kt(ao),e=Ce(()=>({[lf(n.activeClass,t.linkActiveClass,"router-link-active")]:i.isActive,[lf(n.exactActiveClass,t.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const s=r.default&&k0(r.default(i));return n.custom?s:Gd("a",{"aria-current":i.isExactActive?n.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:e.value},s)}}}),R0=I0;function P0(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const r=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(r))return}return n.preventDefault&&n.preventDefault(),!0}}function x0(n,r){for(const i in r){const t=r[i],e=n[i];if(typeof t=="string"){if(t!==e)return!1}else if(!In(e)||e.length!==t.length||t.some((s,a)=>s!==e[a]))return!1}return!0}function of(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const lf=(n,r,i)=>n??r??i,D0=Fe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:r,slots:i}){const t=Kt(Yl),e=Ce(()=>n.route||t.value),s=Kt(sf,0),a=Ce(()=>{let u=At(s);const{matched:c}=e.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),o=Ce(()=>e.value.matched[a.value]);Hi(sf,Ce(()=>a.value+1)),Hi(T0,o),Hi(Yl,e);const l=ne();return it(()=>[l.value,o.value,n.name],([u,c,f],[h,d,p])=>{c&&(c.instances[f]=u,d&&d!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),u&&c&&(!d||!Ir(c,d)||!h)&&(c.enterCallbacks[f]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=e.value,c=n.name,f=o.value,h=f&&f.components[c];if(!h)return uf(i.default,{Component:h,route:u});const d=f.props[c],p=d?d===!0?u.params:typeof d=="function"?d(u):d:null,g=Gd(h,Je({},p,r,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return uf(i.default,{Component:g,route:u})||g}}});function uf(n,r){if(!n)return null;const i=n(r);return i.length===1?i[0]:i}const O0=D0;function L0(n){const r=A0(n.routes,n),i=n.parseQuery||w0,t=n.stringifyQuery||rf,e=n.history,s=Gr(),a=Gr(),o=Gr(),l=Gv(fi);let u=fi;pr&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Ko.bind(null,L=>""+L),f=Ko.bind(null,Yy),h=Ko.bind(null,gs);function d(L,Z){let J,oe;return ep(L)?(J=r.getRecordMatcher(L),oe=Z):oe=L,r.addRoute(oe,J)}function p(L){const Z=r.getRecordMatcher(L);Z&&r.removeRoute(Z)}function v(){return r.getRoutes().map(L=>L.record)}function g(L){return!!r.getRecordMatcher(L)}function _(L,Z){if(Z=Je({},Z||l.value),typeof L=="string"){const x=Yo(i,L,Z.path),K=r.resolve({path:x.path},Z),Q=e.createHref(x.fullPath);return Je(x,K,{params:h(K.params),hash:gs(x.hash),redirectedFrom:void 0,href:Q})}let J;if(L.path!=null)J=Je({},L,{path:Yo(i,L.path,Z.path).path});else{const x=Je({},L.params);for(const K in x)x[K]==null&&delete x[K];J=Je({},L,{params:f(x)}),Z.params=f(Z.params)}const oe=r.resolve(J,Z),Ue=L.hash||"";oe.params=c(h(oe.params));const C=Xy(t,Je({},L,{hash:Gy(Ue),path:oe.path})),k=e.createHref(C);return Je({fullPath:C,hash:Ue,query:t===rf?C0(L.query):L.query||{}},oe,{redirectedFrom:void 0,href:k})}function b(L){return typeof L=="string"?Yo(i,L,l.value.path):Je({},L)}function y(L,Z){if(u!==L)return Rr(8,{from:Z,to:L})}function m(L){return R(L)}function S(L){return m(Je(b(L),{replace:!0}))}function I(L){const Z=L.matched[L.matched.length-1];if(Z&&Z.redirect){const{redirect:J}=Z;let oe=typeof J=="function"?J(L):J;return typeof oe=="string"&&(oe=oe.includes("?")||oe.includes("#")?oe=b(oe):{path:oe},oe.params={}),Je({query:L.query,hash:L.hash,params:oe.path!=null?{}:L.params},oe)}}function R(L,Z){const J=u=_(L),oe=l.value,Ue=L.state,C=L.force,k=L.replace===!0,x=I(J);if(x)return R(Je(b(x),{state:typeof x=="object"?Je({},Ue,x.state):Ue,force:C,replace:k}),Z||J);const K=J;K.redirectedFrom=Z;let Q;return!C&&qy(t,oe,J)&&(Q=Rr(16,{to:K,from:oe}),U(oe,oe,!0,!1)),(Q?Promise.resolve(Q):H(K,oe)).catch(Y=>Qn(Y)?Qn(Y,2)?Y:ye(Y):q(Y,K,oe)).then(Y=>{if(Y){if(Qn(Y,2))return R(Je({replace:k},b(Y.to),{state:typeof Y.to=="object"?Je({},Ue,Y.to.state):Ue,force:C}),Z||K)}else Y=E(K,oe,!0,k,Ue);return ie(K,oe,Y),Y})}function N(L,Z){const J=y(L,Z);return J?Promise.reject(J):Promise.resolve()}function G(L){const Z=Ve.values().next().value;return Z&&typeof Z.runWithContext=="function"?Z.runWithContext(L):L()}function H(L,Z){let J;const[oe,Ue,C]=B0(L,Z);J=Qo(oe.reverse(),"beforeRouteLeave",L,Z);for(const x of oe)x.leaveGuards.forEach(K=>{J.push(yi(K,L,Z))});const k=N.bind(null,L,Z);return J.push(k),fe(J).then(()=>{J=[];for(const x of s.list())J.push(yi(x,L,Z));return J.push(k),fe(J)}).then(()=>{J=Qo(Ue,"beforeRouteUpdate",L,Z);for(const x of Ue)x.updateGuards.forEach(K=>{J.push(yi(K,L,Z))});return J.push(k),fe(J)}).then(()=>{J=[];for(const x of C)if(x.beforeEnter)if(In(x.beforeEnter))for(const K of x.beforeEnter)J.push(yi(K,L,Z));else J.push(yi(x.beforeEnter,L,Z));return J.push(k),fe(J)}).then(()=>(L.matched.forEach(x=>x.enterCallbacks={}),J=Qo(C,"beforeRouteEnter",L,Z,G),J.push(k),fe(J))).then(()=>{J=[];for(const x of a.list())J.push(yi(x,L,Z));return J.push(k),fe(J)}).catch(x=>Qn(x,8)?x:Promise.reject(x))}function ie(L,Z,J){o.list().forEach(oe=>G(()=>oe(L,Z,J)))}function E(L,Z,J,oe,Ue){const C=y(L,Z);if(C)return C;const k=Z===fi,x=pr?history.state:{};J&&(oe||k?e.replace(L.fullPath,Je({scroll:k&&x&&x.scroll},Ue)):e.push(L.fullPath,Ue)),l.value=L,U(L,Z,J,k),ye()}let T;function P(){T||(T=e.listen((L,Z,J)=>{if(!se.listening)return;const oe=_(L),Ue=I(oe);if(Ue){R(Je(Ue,{replace:!0,force:!0}),oe).catch(as);return}u=oe;const C=l.value;pr&&r0(Wc(C.fullPath,J.delta),so()),H(oe,C).catch(k=>Qn(k,12)?k:Qn(k,2)?(R(Je(b(k.to),{force:!0}),oe).then(x=>{Qn(x,20)&&!J.delta&&J.type===vs.pop&&e.go(-1,!1)}).catch(as),Promise.reject()):(J.delta&&e.go(-J.delta,!1),q(k,oe,C))).then(k=>{k=k||E(oe,C,!1),k&&(J.delta&&!Qn(k,8)?e.go(-J.delta,!1):J.type===vs.pop&&Qn(k,20)&&e.go(-1,!1)),ie(oe,C,k)}).catch(as)}))}let V=Gr(),O=Gr(),z;function q(L,Z,J){ye(L);const oe=O.list();return oe.length?oe.forEach(Ue=>Ue(L,Z,J)):console.error(L),Promise.reject(L)}function pe(){return z&&l.value!==fi?Promise.resolve():new Promise((L,Z)=>{V.add([L,Z])})}function ye(L){return z||(z=!L,P(),V.list().forEach(([Z,J])=>L?J(L):Z()),V.reset()),L}function U(L,Z,J,oe){const{scrollBehavior:Ue}=n;if(!pr||!Ue)return Promise.resolve();const C=!J&&s0(Wc(L.fullPath,0))||(oe||!J)&&history.state&&history.state.scroll||null;return wt().then(()=>Ue(L,Z,C)).then(k=>k&&i0(k)).catch(k=>q(k,L,Z))}const ge=L=>e.go(L);let ue;const Ve=new Set,se={currentRoute:l,listening:!0,addRoute:d,removeRoute:p,clearRoutes:r.clearRoutes,hasRoute:g,getRoutes:v,resolve:_,options:n,push:m,replace:S,go:ge,back:()=>ge(-1),forward:()=>ge(1),beforeEach:s.add,beforeResolve:a.add,afterEach:o.add,onError:O.add,isReady:pe,install(L){const Z=this;L.component("RouterLink",R0),L.component("RouterView",O0),L.config.globalProperties.$router=Z,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>At(l)}),pr&&!ue&&l.value===fi&&(ue=!0,m(e.location).catch(Ue=>{}));const J={};for(const Ue in fi)Object.defineProperty(J,Ue,{get:()=>l.value[Ue],enumerable:!0});L.provide(ao,Z),L.provide(ju,od(J)),L.provide(Yl,l);const oe=L.unmount;Ve.add(L),L.unmount=function(){Ve.delete(L),Ve.size<1&&(u=fi,T&&T(),T=null,l.value=fi,ue=!1,z=!1),oe()}}};function fe(L){return L.reduce((Z,J)=>Z.then(()=>G(J)),Promise.resolve())}return se}function B0(n,r){const i=[],t=[],e=[],s=Math.max(r.matched.length,n.matched.length);for(let a=0;a<s;a++){const o=r.matched[a];o&&(n.matched.find(u=>Ir(u,o))?t.push(o):i.push(o));const l=n.matched[a];l&&(r.matched.find(u=>Ir(u,l))||e.push(l))}return[i,t,e]}function Ri(){return Kt(ao)}function Ps(n){return Kt(ju)}function M0(){}const Xi=Object.assign,oo=typeof window<"u",lo=n=>n!==null&&typeof n=="object",hn=n=>n!=null,Ql=n=>typeof n=="function",F0=n=>lo(n)&&Ql(n.then)&&Ql(n.catch),rp=n=>typeof n=="number"||/^\d+(\.\d+)?$/.test(n),N0=()=>oo?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function cf(n,r){const i=r.split(".");let t=n;return i.forEach(e=>{var s;t=lo(t)&&(s=t[e])!=null?s:""}),t}function ff(n,r,i){return r.reduce((t,e)=>(t[e]=n[e],t),{})}const pa=null,tt=[Number,String],Ct={type:Boolean,default:!0},Wo=n=>({type:n,required:!0}),xt=n=>({type:tt,default:n}),wn=n=>({type:String,default:n});var Or=typeof window<"u";function Pr(n){return Or?requestAnimationFrame(n):-1}function sp(n){Or&&cancelAnimationFrame(n)}function Mi(n){Pr(()=>Pr(n))}var U0=n=>n===window,hf=(n,r)=>({top:0,left:0,right:n,bottom:r,width:n,height:r}),_n=n=>{const r=At(n);if(U0(r)){const i=r.innerWidth,t=r.innerHeight;return hf(i,t)}return r?.getBoundingClientRect?r.getBoundingClientRect():hf(0,0)};function uo(n){const r=Kt(n,null);if(r){const i=ui(),{link:t,unlink:e,internalChildren:s}=r;t(i),to(()=>e(i));const a=Ce(()=>s.indexOf(i));return{parent:r,index:a}}return{parent:null,index:ne(-1)}}function H0(n){const r=[],i=t=>{Array.isArray(t)&&t.forEach(e=>{var s;Tr(e)&&(r.push(e),(s=e.component)!=null&&s.subTree&&(r.push(e.component.subTree),i(e.component.subTree.children)),e.children&&i(e.children))})};return i(n),r}var df=(n,r)=>{const i=n.indexOf(r);return i===-1?n.findIndex(t=>r.key!==void 0&&r.key!==null&&t.type===r.type&&t.key===r.key):i};function V0(n,r,i){const t=H0(n.subTree.children);i.sort((s,a)=>df(t,s.vnode)-df(t,a.vnode));const e=i.map(s=>s.proxy);r.sort((s,a)=>{const o=e.indexOf(s),l=e.indexOf(a);return o-l})}function co(n){const r=pn([]),i=pn([]),t=ui();return{children:r,linkChildren:s=>{Hi(n,Object.assign({link:l=>{l.proxy&&(i.push(l),r.push(l.proxy),V0(t,r,i))},unlink:l=>{const u=i.indexOf(l);r.splice(u,1),i.splice(u,1)},children:r,internalChildren:i},s))}}}function fo(n){let r;Tt(()=>{n(),wt(()=>{r=!0})}),Is(()=>{r&&n()})}function Lr(n,r,i={}){if(!Or)return;const{target:t=window,passive:e=!1,capture:s=!1}=i;let a=!1,o;const l=f=>{if(a)return;const h=At(f);h&&!o&&(h.addEventListener(n,r,{capture:s,passive:e}),o=!0)},u=f=>{if(a)return;const h=At(f);h&&o&&(h.removeEventListener(n,r,s),o=!1)};to(()=>u(t)),$a(()=>u(t)),fo(()=>l(t));let c;return Dt(t)&&(c=it(t,(f,h)=>{u(h),l(f)})),()=>{c?.(),u(t),a=!0}}var Ws,Xo;function j0(){if(!Ws&&(Ws=ne(0),Xo=ne(0),Or)){const n=()=>{Ws.value=window.innerWidth,Xo.value=window.innerHeight};n(),window.addEventListener("resize",n,{passive:!0}),window.addEventListener("orientationchange",n,{passive:!0})}return{width:Ws,height:Xo}}var G0=/scroll|auto|overlay/i,ap=Or?window:void 0;function z0(n){return n.tagName!=="HTML"&&n.tagName!=="BODY"&&n.nodeType===1}function K0(n,r=ap){let i=n;for(;i&&i!==r&&z0(i);){const{overflowY:t}=window.getComputedStyle(i);if(G0.test(t))return i;i=i.parentNode}return r}function ho(n,r=ap){const i=ne();return Tt(()=>{n.value&&(i.value=K0(n.value,r))}),i}var Xs;function Y0(){if(!Xs&&(Xs=ne("visible"),Or)){const n=()=>{Xs.value=document.hidden?"hidden":"visible"};n(),window.addEventListener("visibilitychange",n)}return Xs}function po(n){const r="scrollTop"in n?n.scrollTop:n.pageYOffset;return Math.max(r,0)}function Wl(n,r){"scrollTop"in n?n.scrollTop=r:n.scrollTo(n.scrollX,r)}function Q0(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function W0(n){Wl(window,n),Wl(document.body,n)}function pf(n,r){if(n===window)return 0;const i=r?po(r):Q0();return _n(n).top+i}N0();const X0=n=>n.stopPropagation();function op(n,r){(typeof n.cancelable!="boolean"||n.cancelable)&&n.preventDefault(),r&&X0(n)}function xr(n){const r=At(n);if(!r)return!1;const i=window.getComputedStyle(r),t=i.display==="none",e=r.offsetParent===null&&i.position!=="fixed";return t||e}const{width:xs,height:go}=j0();function Nt(n){if(hn(n))return rp(n)?`${n}px`:String(n)}function q0(n){if(hn(n)){if(Array.isArray(n))return{width:Nt(n[0]),height:Nt(n[1])};const r=Nt(n);return{width:r,height:r}}}function Gu(n){const r={};return n!==void 0&&(r.zIndex=+n),r}let qo;function J0(){if(!qo){const n=document.documentElement,r=n.style.fontSize||window.getComputedStyle(n).fontSize;qo=parseFloat(r)}return qo}function Z0(n){return n=n.replace(/rem/g,""),+n*J0()}function $0(n){return n=n.replace(/vw/g,""),+n*xs.value/100}function eA(n){return n=n.replace(/vh/g,""),+n*go.value/100}function lp(n){if(typeof n=="number")return n;if(oo){if(n.includes("rem"))return Z0(n);if(n.includes("vw"))return $0(n);if(n.includes("vh"))return eA(n)}return parseFloat(n)}const tA=/-(\w)/g,up=n=>n.replace(tA,(r,i)=>i.toUpperCase()),Jo=(n,r,i)=>Math.min(Math.max(n,r),i),{hasOwnProperty:nA}=Object.prototype;function iA(n,r,i){const t=r[i];hn(t)&&(!nA.call(n,i)||!lo(t)?n[i]=t:n[i]=cp(Object(n[i]),t))}function cp(n,r){return Object.keys(r).forEach(i=>{iA(n,r,i)}),n}var rA={name:"",tel:"",save:"",clear:"",cancel:"",confirm:"",delete:"",loading:"...",noCoupon:"",nameEmpty:"",addContact:"",telInvalid:"",vanCalendar:{end:"",start:"",title:"",weekdays:["","","","","","",""],monthTitle:(n,r)=>`${n}${r}`,rangePrompt:n=>` ${n} `},vanCascader:{select:""},vanPagination:{prev:"",next:""},vanPullRefresh:{pulling:"...",loosing:"..."},vanSubmitBar:{label:":"},vanCoupon:{unlimited:"",discount:n=>`${n}`,condition:n=>`${n}`},vanCouponCell:{title:"",count:n=>`${n}`},vanCouponList:{exchange:"",close:"",enable:"",disabled:"",placeholder:""},vanAddressEdit:{area:"",areaEmpty:"",addressEmpty:"",addressDetail:"",defaultAddress:""},vanAddressList:{add:""}};const gf=ne("zh-CN"),vf=pn({"zh-CN":rA}),sA={messages(){return vf[gf.value]},use(n,r){gf.value=n,this.add({[n]:r})},add(n={}){cp(vf,n)}};var aA=sA;function oA(n){const r=up(n)+".";return(i,...t)=>{const e=aA.messages(),s=cf(e,r+i)||cf(e,i);return Ql(s)?s(...t):s}}function Xl(n,r){return r?typeof r=="string"?` ${n}--${r}`:Array.isArray(r)?r.reduce((i,t)=>i+Xl(n,t),""):Object.keys(r).reduce((i,t)=>i+(r[t]?Xl(n,t):""),""):""}function lA(n){return(r,i)=>(r&&typeof r!="string"&&(i=r,r=""),r=r?`${n}__${r}`:n,`${r}${Xl(r,i)}`)}function yt(n){const r=`van-${n}`;return[r,lA(r),oA(r)]}const fp="van-hairline",uA=`${fp}--bottom`,hp=`${fp}--top-bottom`,mf="van-haptics-feedback",yf=5;function dp(n,{args:r=[],done:i,canceled:t,error:e}){if(n){const s=n.apply(null,r);F0(s)?s.then(a=>{a?i():t&&t()}).catch(e||M0):s?i():t&&t()}else i()}function kt(n){return n.install=r=>{const{name:i}=n;i&&(r.component(i,n),r.component(up(`-${i}`),n))},n}const cA=Symbol();function vo(n){const r=Kt(cA,null);r&&it(r,i=>{i&&n()})}const fA=(n,r)=>{const i=ne(),t=()=>{i.value=_n(n).height};return Tt(()=>{wt(t);for(let e=1;e<=3;e++)setTimeout(t,100*e)}),vo(()=>wt(t)),it([xs,go],t),i};function pp(n,r){const i=fA(n);return t=>B("div",{class:r("placeholder"),style:{height:i.value?`${i.value}px`:void 0}},[t()])}function qi(n){const r=ui();r&&Xi(r.proxy,n)}const zu={to:[String,Object],url:String,replace:Boolean};function gp({to:n,url:r,replace:i,$router:t}){n&&t?t[i?"replace":"push"](n):r&&(i?location.replace(r):location.href=r)}function vp(){const n=ui().proxy;return()=>gp(n)}const[hA,Af]=yt("badge"),dA={dot:Boolean,max:tt,tag:wn("div"),color:String,offset:Array,content:tt,showZero:Ct,position:wn("top-right")};var pA=Fe({name:hA,props:dA,setup(n,{slots:r}){const i=()=>{if(r.content)return!0;const{content:o,showZero:l}=n;return hn(o)&&o!==""&&(l||o!==0&&o!=="0")},t=()=>{const{dot:o,max:l,content:u}=n;if(!o&&i())return r.content?r.content():hn(l)&&rp(u)&&+u>+l?`${l}+`:u},e=o=>o.startsWith("-")?o.replace("-",""):`-${o}`,s=Ce(()=>{const o={background:n.color};if(n.offset){const[l,u]=n.offset,{position:c}=n,[f,h]=c.split("-");r.default?(typeof u=="number"?o[f]=Nt(f==="top"?u:-u):o[f]=f==="top"?Nt(u):e(u),typeof l=="number"?o[h]=Nt(h==="left"?l:-l):o[h]=h==="left"?Nt(l):e(l)):(o.marginTop=Nt(u),o.marginLeft=Nt(l))}return o}),a=()=>{if(i()||n.dot)return B("div",{class:Af([n.position,{dot:n.dot,fixed:!!r.default}]),style:s.value},[t()])};return()=>{if(r.default){const{tag:o}=n;return B(o,{class:Af("wrapper")},{default:()=>[r.default(),a()]})}return a()}}});const Ku=kt(pA),[gA,V2]=yt("config-provider"),vA=Symbol(gA),[mA,_f]=yt("icon"),yA=n=>n?.includes("/"),AA={dot:Boolean,tag:wn("i"),name:String,size:tt,badge:tt,color:String,badgeProps:Object,classPrefix:String};var _A=Fe({name:mA,props:AA,setup(n,{slots:r}){const i=Kt(vA,null),t=Ce(()=>n.classPrefix||i?.iconPrefix||_f());return()=>{const{tag:e,dot:s,name:a,size:o,badge:l,color:u}=n,c=yA(a);return B(Ku,kr({dot:s,tag:e,class:[t.value,c?"":`${t.value}-${a}`],style:{color:u,fontSize:Nt(o)},content:l},n.badgeProps),{default:()=>{var f;return[(f=r.default)==null?void 0:f.call(r),c&&B("img",{class:_f("image"),src:a},null)]}})}}});const zi=kt(_A),[bA,ls]=yt("loading"),SA=Array(12).fill(null).map((n,r)=>B("i",{class:ls("line",String(r+1))},null)),EA=B("svg",{class:ls("circular"),viewBox:"25 25 50 50"},[B("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),wA={size:tt,type:wn("circular"),color:String,vertical:Boolean,textSize:tt,textColor:String};var CA=Fe({name:bA,props:wA,setup(n,{slots:r}){const i=Ce(()=>Xi({color:n.color},q0(n.size))),t=()=>{const s=n.type==="spinner"?SA:EA;return B("span",{class:ls("spinner",n.type),style:i.value},[r.icon?r.icon():s])},e=()=>{var s;if(r.default)return B("span",{class:ls("text"),style:{fontSize:Nt(n.textSize),color:(s=n.textColor)!=null?s:n.color}},[r.default()])};return()=>{const{type:s,vertical:a}=n;return B("div",{class:ls([s,{vertical:a}]),"aria-live":"polite","aria-busy":!0},[t(),e()])}}});const mp=kt(CA);function TA(n,r){return n>r?"horizontal":r>n?"vertical":""}function yp(){const n=ne(0),r=ne(0),i=ne(0),t=ne(0),e=ne(0),s=ne(0),a=ne(""),o=ne(!0),l=()=>a.value==="vertical",u=()=>a.value==="horizontal",c=()=>{i.value=0,t.value=0,e.value=0,s.value=0,a.value="",o.value=!0};return{move:d=>{const p=d.touches[0];i.value=(p.clientX<0?0:p.clientX)-n.value,t.value=p.clientY-r.value,e.value=Math.abs(i.value),s.value=Math.abs(t.value);const v=10;(!a.value||e.value<v&&s.value<v)&&(a.value=TA(e.value,s.value)),o.value&&(e.value>yf||s.value>yf)&&(o.value=!1)},start:d=>{c(),n.value=d.touches[0].clientX,r.value=d.touches[0].clientY},reset:c,startX:n,startY:r,deltaX:i,deltaY:t,offsetX:e,offsetY:s,direction:a,isVertical:l,isHorizontal:u,isTap:o}}function kA(n,r,i){let t,e=0;const s=n.scrollLeft,a=i===0?1:Math.round(i*1e3/16);let o=s;function l(){sp(t)}function u(){o+=(r-s)/a,n.scrollLeft=o,++e<a&&(t=Pr(u))}return u(),l}function IA(n,r,i,t){let e,s=po(n);const a=s<r,o=i===0?1:Math.round(i*1e3/16),l=(r-s)/o;function u(){sp(e)}function c(){s+=l,(a&&s>r||!a&&s<r)&&(s=r),Wl(n,s),a&&s<r||!a&&s>r?e=Pr(c):t&&(e=Pr(t))}return c(),u}let RA=0;function Ap(){const n=ui(),{name:r="unknown"}=n?.type||{};return`${r}-${++RA}`}function PA(){const n=ne([]),r=[];return Ed(()=>{n.value=[]}),[n,t=>(r[t]||(r[t]=e=>{n.value[t]=e}),r[t])]}function _p(n,r){if(!oo||!window.IntersectionObserver)return;const i=new IntersectionObserver(s=>{r(s[0].intersectionRatio>0)},{root:document.body}),t=()=>{n.value&&i.observe(n.value)},e=()=>{n.value&&i.unobserve(n.value)};$a(e),Wi(e),fo(t)}const[xA,DA]=yt("sticky"),OA={zIndex:tt,position:wn("top"),container:Object,offsetTop:xt(0),offsetBottom:xt(0)};var LA=Fe({name:xA,props:OA,emits:["scroll","change"],setup(n,{emit:r,slots:i}){const t=ne(),e=ho(t),s=pn({fixed:!1,width:0,height:0,transform:0}),a=ne(!1),o=Ce(()=>lp(n.position==="top"?n.offsetTop:n.offsetBottom)),l=Ce(()=>{if(a.value)return;const{fixed:h,height:d,width:p}=s;if(h)return{width:`${p}px`,height:`${d}px`}}),u=Ce(()=>{if(!s.fixed||a.value)return;const h=Xi(Gu(n.zIndex),{width:`${s.width}px`,height:`${s.height}px`,[n.position]:`${o.value}px`});return s.transform&&(h.transform=`translate3d(0, ${s.transform}px, 0)`),h}),c=h=>r("scroll",{scrollTop:h,isFixed:s.fixed}),f=()=>{if(!t.value||xr(t))return;const{container:h,position:d}=n,p=_n(t),v=po(window);if(s.width=p.width,s.height=p.height,d==="top")if(h){const g=_n(h),_=g.bottom-o.value-s.height;s.fixed=o.value>p.top&&g.bottom>0,s.transform=_<0?_:0}else s.fixed=o.value>p.top;else{const{clientHeight:g}=document.documentElement;if(h){const _=_n(h),b=g-_.top-o.value-s.height;s.fixed=g-o.value<p.bottom&&g>_.top,s.transform=b<0?-b:0}else s.fixed=g-o.value<p.bottom}c(v)};return it(()=>s.fixed,h=>r("change",h)),Lr("scroll",f,{target:e,passive:!0}),_p(t,f),it([xs,go],()=>{!t.value||xr(t)||!s.fixed||(a.value=!0,wt(()=>{const h=_n(t);s.width=h.width,s.height=h.height,a.value=!1}))}),()=>{var h;return B("div",{ref:t,style:l.value},[B("div",{class:DA({fixed:s.fixed&&!a.value}),style:u.value},[(h=i.default)==null?void 0:h.call(i)])])}}});const BA=kt(LA),[bp,qs]=yt("swipe"),MA={loop:Ct,width:tt,height:tt,vertical:Boolean,autoplay:xt(0),duration:xt(500),touchable:Ct,lazyRender:Boolean,initialSwipe:xt(0),indicatorColor:String,showIndicators:Ct,stopPropagation:Ct},Sp=Symbol(bp);var FA=Fe({name:bp,props:MA,emits:["change","dragStart","dragEnd"],setup(n,{emit:r,slots:i}){const t=ne(),e=ne(),s=pn({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let a=!1;const o=yp(),{children:l,linkChildren:u}=co(Sp),c=Ce(()=>l.length),f=Ce(()=>s[n.vertical?"height":"width"]),h=Ce(()=>n.vertical?o.deltaY.value:o.deltaX.value),d=Ce(()=>s.rect?(n.vertical?s.rect.height:s.rect.width)-f.value*c.value:0),p=Ce(()=>f.value?Math.ceil(Math.abs(d.value)/f.value):c.value),v=Ce(()=>c.value*f.value),g=Ce(()=>(s.active+c.value)%c.value),_=Ce(()=>{const U=n.vertical?"vertical":"horizontal";return o.direction.value===U}),b=Ce(()=>{const U={transitionDuration:`${s.swiping?0:n.duration}ms`,transform:`translate${n.vertical?"Y":"X"}(${+s.offset.toFixed(2)}px)`};if(f.value){const ge=n.vertical?"height":"width",ue=n.vertical?"width":"height";U[ge]=`${v.value}px`,U[ue]=n[ue]?`${n[ue]}px`:""}return U}),y=U=>{const{active:ge}=s;return U?n.loop?Jo(ge+U,-1,c.value):Jo(ge+U,0,p.value):ge},m=(U,ge=0)=>{let ue=U*f.value;n.loop||(ue=Math.min(ue,-d.value));let Ve=ge-ue;return n.loop||(Ve=Jo(Ve,d.value,0)),Ve},S=({pace:U=0,offset:ge=0,emitChange:ue})=>{if(c.value<=1)return;const{active:Ve}=s,se=y(U),fe=m(se,ge);if(n.loop){if(l[0]&&fe!==d.value){const L=fe<d.value;l[0].setOffset(L?v.value:0)}if(l[c.value-1]&&fe!==0){const L=fe>0;l[c.value-1].setOffset(L?-v.value:0)}}s.active=se,s.offset=fe,ue&&se!==Ve&&r("change",g.value)},I=()=>{s.swiping=!0,s.active<=-1?S({pace:c.value}):s.active>=c.value&&S({pace:-c.value})},R=()=>{I(),o.reset(),Mi(()=>{s.swiping=!1,S({pace:-1,emitChange:!0})})},N=()=>{I(),o.reset(),Mi(()=>{s.swiping=!1,S({pace:1,emitChange:!0})})};let G;const H=()=>clearTimeout(G),ie=()=>{H(),+n.autoplay>0&&c.value>1&&(G=setTimeout(()=>{N(),ie()},+n.autoplay))},E=(U=+n.initialSwipe)=>{if(!t.value)return;const ge=()=>{var ue,Ve;if(!xr(t)){const se={width:t.value.offsetWidth,height:t.value.offsetHeight};s.rect=se,s.width=+((ue=n.width)!=null?ue:se.width),s.height=+((Ve=n.height)!=null?Ve:se.height)}c.value&&(U=Math.min(c.value-1,U),U===-1&&(U=c.value-1)),s.active=U,s.swiping=!0,s.offset=m(U),l.forEach(se=>{se.setOffset(0)}),ie()};xr(t)?wt().then(ge):ge()},T=()=>E(s.active);let P;const V=U=>{!n.touchable||U.touches.length>1||(o.start(U),a=!1,P=Date.now(),H(),I())},O=U=>{n.touchable&&s.swiping&&(o.move(U),_.value&&(!n.loop&&(s.active===0&&h.value>0||s.active===c.value-1&&h.value<0)||(op(U,n.stopPropagation),S({offset:h.value}),a||(r("dragStart",{index:g.value}),a=!0))))},z=()=>{if(!n.touchable||!s.swiping)return;const U=Date.now()-P,ge=h.value/U;if((Math.abs(ge)>.25||Math.abs(h.value)>f.value/2)&&_.value){const Ve=n.vertical?o.offsetY.value:o.offsetX.value;let se=0;n.loop?se=Ve>0?h.value>0?-1:1:0:se=-Math[h.value>0?"ceil":"floor"](h.value/f.value),S({pace:se,emitChange:!0})}else h.value&&S({pace:0});a=!1,s.swiping=!1,r("dragEnd",{index:g.value}),ie()},q=(U,ge={})=>{I(),o.reset(),Mi(()=>{let ue;n.loop&&U===c.value?ue=s.active===0?0:U:ue=U%c.value,ge.immediate?Mi(()=>{s.swiping=!1}):s.swiping=!1,S({pace:ue-s.active,emitChange:!0})})},pe=(U,ge)=>{const ue=ge===g.value,Ve=ue?{backgroundColor:n.indicatorColor}:void 0;return B("i",{style:Ve,class:qs("indicator",{active:ue})},null)},ye=()=>{if(i.indicator)return i.indicator({active:g.value,total:c.value});if(n.showIndicators&&c.value>1)return B("div",{class:qs("indicators",{vertical:n.vertical})},[Array(c.value).fill("").map(pe)])};return qi({prev:R,next:N,state:s,resize:T,swipeTo:q}),u({size:f,props:n,count:c,activeIndicator:g}),it(()=>n.initialSwipe,U=>E(+U)),it(c,()=>E(s.active)),it(()=>n.autoplay,ie),it([xs,go,()=>n.width,()=>n.height],T),it(Y0(),U=>{U==="visible"?ie():H()}),Tt(E),Is(()=>E(s.active)),vo(()=>E(s.active)),$a(H),Wi(H),Lr("touchmove",O,{target:e}),()=>{var U;return B("div",{ref:t,class:qs()},[B("div",{ref:e,style:b.value,class:qs("track",{vertical:n.vertical}),onTouchstartPassive:V,onTouchend:z,onTouchcancel:z},[(U=i.default)==null?void 0:U.call(i)]),ye()])}}});const Ds=kt(FA),[NA,bf]=yt("tabs");var UA=Fe({name:NA,props:{count:Wo(Number),inited:Boolean,animated:Boolean,duration:Wo(tt),swipeable:Boolean,lazyRender:Boolean,currentIndex:Wo(Number)},emits:["change"],setup(n,{emit:r,slots:i}){const t=ne(),e=o=>r("change",o),s=()=>{var o;const l=(o=i.default)==null?void 0:o.call(i);return n.animated||n.swipeable?B(Ds,{ref:t,loop:!1,class:bf("track"),duration:+n.duration*1e3,touchable:n.swipeable,lazyRender:n.lazyRender,showIndicators:!1,onChange:e},{default:()=>[l]}):l},a=o=>{const l=t.value;l&&l.state.active!==o&&l.swipeTo(o,{immediate:!n.inited})};return it(()=>n.currentIndex,a),Tt(()=>{a(n.currentIndex)}),qi({swipeRef:t}),()=>B("div",{class:bf("content",{animated:n.animated||n.swipeable})},[s()])}});const[Ep,Js]=yt("tabs"),HA={type:wn("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:xt(0),duration:xt(.3),animated:Boolean,ellipsis:Ct,swipeable:Boolean,scrollspy:Boolean,offsetTop:xt(0),background:String,lazyRender:Ct,showHeader:Ct,lineWidth:tt,lineHeight:tt,beforeChange:Function,swipeThreshold:xt(5),titleActiveColor:String,titleInactiveColor:String},wp=Symbol(Ep);var VA=Fe({name:Ep,props:HA,emits:["change","scroll","rendered","clickTab","update:active"],setup(n,{emit:r,slots:i}){let t,e,s,a,o;const l=ne(),u=ne(),c=ne(),f=ne(),h=Ap(),d=ho(l),[p,v]=PA(),{children:g,linkChildren:_}=co(wp),b=pn({inited:!1,position:"",lineStyle:{},currentIndex:-1}),y=Ce(()=>g.length>+n.swipeThreshold||!n.ellipsis||n.shrink),m=Ce(()=>({borderColor:n.color,background:n.background})),S=(se,fe)=>{var L;return(L=se.name)!=null?L:fe},I=Ce(()=>{const se=g[b.currentIndex];if(se)return S(se,b.currentIndex)}),R=Ce(()=>lp(n.offsetTop)),N=Ce(()=>n.sticky?R.value+t:0),G=se=>{const fe=u.value,L=p.value;if(!y.value||!fe||!L||!L[b.currentIndex])return;const Z=L[b.currentIndex].$el,J=Z.offsetLeft-(fe.offsetWidth-Z.offsetWidth)/2;a&&a(),a=kA(fe,J,se?0:+n.duration)},H=()=>{const se=b.inited;wt(()=>{const fe=p.value;if(!fe||!fe[b.currentIndex]||n.type!=="line"||xr(l.value))return;const L=fe[b.currentIndex].$el,{lineWidth:Z,lineHeight:J}=n,oe=L.offsetLeft+L.offsetWidth/2,Ue={width:Nt(Z),backgroundColor:n.color,transform:`translateX(${oe}px) translateX(-50%)`};if(se&&(Ue.transitionDuration=`${n.duration}s`),hn(J)){const C=Nt(J);Ue.height=C,Ue.borderRadius=C}b.lineStyle=Ue})},ie=se=>{const fe=se<b.currentIndex?-1:1;for(;se>=0&&se<g.length;){if(!g[se].disabled)return se;se+=fe}},E=(se,fe)=>{const L=ie(se);if(!hn(L))return;const Z=g[L],J=S(Z,L),oe=b.currentIndex!==null;b.currentIndex!==L&&(b.currentIndex=L,fe||G(),H()),J!==n.active&&(r("update:active",J),oe&&r("change",J,Z.title)),s&&!n.scrollspy&&W0(Math.ceil(pf(l.value)-R.value))},T=(se,fe)=>{const L=g.findIndex((Z,J)=>S(Z,J)===se);E(L===-1?0:L,fe)},P=(se=!1)=>{if(n.scrollspy){const fe=g[b.currentIndex].$el;if(fe&&d.value){const L=pf(fe,d.value)-N.value;e=!0,o&&o(),o=IA(d.value,L,se?0:+n.duration,()=>{e=!1})}}},V=(se,fe,L)=>{const{title:Z,disabled:J}=g[fe],oe=S(g[fe],fe);J||(dp(n.beforeChange,{args:[oe],done:()=>{E(fe),P()}}),gp(se)),r("clickTab",{name:oe,title:Z,event:L,disabled:J})},O=se=>{s=se.isFixed,r("scroll",se)},z=se=>{wt(()=>{T(se),P(!0)})},q=()=>{for(let se=0;se<g.length;se++){const{top:fe}=_n(g[se].$el);if(fe>N.value)return se===0?0:se-1}return g.length-1},pe=()=>{if(n.scrollspy&&!e){const se=q();E(se)}},ye=()=>{if(n.type==="line"&&g.length)return B("div",{class:Js("line"),style:b.lineStyle},null)},U=()=>{var se,fe,L;const{type:Z,border:J,sticky:oe}=n,Ue=[B("div",{ref:oe?void 0:c,class:[Js("wrap"),{[hp]:Z==="line"&&J}]},[B("div",{ref:u,role:"tablist",class:Js("nav",[Z,{shrink:n.shrink,complete:y.value}]),style:m.value,"aria-orientation":"horizontal"},[(se=i["nav-left"])==null?void 0:se.call(i),g.map(C=>C.renderTitle(V)),ye(),(fe=i["nav-right"])==null?void 0:fe.call(i)])]),(L=i["nav-bottom"])==null?void 0:L.call(i)];return oe?B("div",{ref:c},[Ue]):Ue},ge=()=>{H(),wt(()=>{var se,fe;G(!0),(fe=(se=f.value)==null?void 0:se.swipeRef.value)==null||fe.resize()})};it(()=>[n.color,n.duration,n.lineWidth,n.lineHeight],H),it(xs,ge),it(()=>n.active,se=>{se!==I.value&&T(se)}),it(()=>g.length,()=>{b.inited&&(T(n.active),H(),wt(()=>{G(!0)}))});const ue=()=>{T(n.active,!0),wt(()=>{b.inited=!0,c.value&&(t=_n(c.value).height),G(!0)})},Ve=(se,fe)=>r("rendered",se,fe);return qi({resize:ge,scrollTo:z}),Is(H),vo(H),fo(ue),_p(l,H),Lr("scroll",pe,{target:d,passive:!0}),_({id:h,props:n,setLine:H,scrollable:y,onRendered:Ve,currentName:I,setTitleRefs:v,scrollIntoView:G}),()=>B("div",{ref:l,class:Js([n.type])},[n.showHeader?n.sticky?B(BA,{container:l.value,offsetTop:R.value,onScroll:O},{default:()=>[U()]}):U():null,B(UA,{ref:f,count:g.length,inited:b.inited,animated:n.animated,duration:n.duration,swipeable:n.swipeable,lazyRender:n.lazyRender,currentIndex:b.currentIndex,onChange:E},{default:()=>{var se;return[(se=i.default)==null?void 0:se.call(i)]}})])}});const jA=Symbol(),Cp=Symbol(),Tp=()=>Kt(Cp,null),GA=n=>{const r=Tp();Hi(jA,n),Hi(Cp,Ce(()=>(r==null||r.value)&&n.value))},[zA,Sf]=yt("tab"),KA=Fe({name:zA,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:tt,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:Ct},setup(n,{slots:r}){const i=Ce(()=>{const e={},{type:s,color:a,disabled:o,isActive:l,activeColor:u,inactiveColor:c}=n;a&&s==="card"&&(e.borderColor=a,o||(l?e.backgroundColor=a:e.color=a));const h=l?u:c;return h&&(e.color=h),e}),t=()=>{const e=B("span",{class:Sf("text",{ellipsis:!n.scrollable})},[r.title?r.title():n.title]);return n.dot||hn(n.badge)&&n.badge!==""?B(Ku,{dot:n.dot,content:n.badge,showZero:n.showZeroBadge},{default:()=>[e]}):e};return()=>B("div",{id:n.id,role:"tab",class:[Sf([n.type,{grow:n.scrollable&&!n.shrink,shrink:n.shrink,active:n.isActive,disabled:n.disabled}])],style:i.value,tabindex:n.disabled?void 0:n.isActive?0:-1,"aria-selected":n.isActive,"aria-disabled":n.disabled||void 0,"aria-controls":n.controls,"data-allow-mismatch":"attribute"},[t()])}}),[YA,QA]=yt("swipe-item");var WA=Fe({name:YA,setup(n,{slots:r}){let i;const t=pn({offset:0,inited:!1,mounted:!1}),{parent:e,index:s}=uo(Sp);if(!e)return;const a=Ce(()=>{const u={},{vertical:c}=e.props;return e.size.value&&(u[c?"height":"width"]=`${e.size.value}px`),t.offset&&(u.transform=`translate${c?"Y":"X"}(${t.offset}px)`),u}),o=Ce(()=>{const{loop:u,lazyRender:c}=e.props;if(!c||i)return!0;if(!t.mounted)return!1;const f=e.activeIndicator.value,h=e.count.value-1,d=f===0&&u?h:f-1,p=f===h&&u?0:f+1;return i=s.value===f||s.value===d||s.value===p,i}),l=u=>{t.offset=u};return Tt(()=>{wt(()=>{t.mounted=!0})}),qi({setOffset:l}),()=>{var u;return B("div",{class:QA(),style:a.value},[o.value?(u=r.default)==null?void 0:u.call(r):null])}}});const Os=kt(WA),[XA,Zo]=yt("tab"),qA=Xi({},zu,{dot:Boolean,name:tt,badge:tt,title:String,disabled:Boolean,titleClass:pa,titleStyle:[String,Object],showZeroBadge:Ct});var JA=Fe({name:XA,props:qA,setup(n,{slots:r}){const i=Ap(),t=ne(!1),e=ui(),{parent:s,index:a}=uo(wp);if(!s)return;const o=()=>{var p;return(p=n.name)!=null?p:a.value},l=()=>{t.value=!0,s.props.lazyRender&&wt(()=>{s.onRendered(o(),n.title)})},u=Ce(()=>{const p=o()===s.currentName.value;return p&&!t.value&&l(),p}),c=ne(""),f=ne("");xm(()=>{const{titleClass:p,titleStyle:v}=n;c.value=p?wi(p):"",f.value=v&&typeof v!="string"?_v(Ts(v)):v});const h=p=>B(KA,kr({key:i,id:`${s.id}-${a.value}`,ref:s.setTitleRefs(a.value),style:f.value,class:c.value,isActive:u.value,controls:i,scrollable:s.scrollable.value,activeColor:s.props.titleActiveColor,inactiveColor:s.props.titleInactiveColor,onClick:v=>p(e.proxy,a.value,v)},ff(s.props,["type","color","shrink"]),ff(n,["dot","badge","title","disabled","showZeroBadge"])),{title:r.title}),d=ne(!u.value);return it(u,p=>{p?d.value=!1:Mi(()=>{d.value=!0})}),it(()=>n.title,()=>{s.setLine(),s.scrollIntoView()}),GA(u),qi({id:i,renderTitle:h}),()=>{var p;const v=`${s.id}-${a.value}`,{animated:g,swipeable:_,scrollspy:b,lazyRender:y}=s.props;if(!r.default&&!g)return;const m=b||u.value;if(g||_)return B(Os,{id:i,role:"tabpanel",class:Zo("panel-wrapper",{inactive:d.value}),tabindex:u.value?0:-1,"aria-hidden":!u.value,"aria-labelledby":v,"data-allow-mismatch":"attribute"},{default:()=>{var R;return[B("div",{class:Zo("panel")},[(R=r.default)==null?void 0:R.call(r)])]}});const I=t.value||b||!y?(p=r.default)==null?void 0:p.call(r):null;return Sn(B("div",{id:i,role:"tabpanel",class:Zo("panel"),tabindex:m?0:-1,"aria-labelledby":v,"data-allow-mismatch":"attribute"},[I]),[[jn,m]])}}});const mo=kt(JA),yo=kt(VA),[ZA,tr]=yt("cell"),$A={tag:wn("div"),icon:String,size:String,title:tt,value:tt,label:tt,center:Boolean,isLink:Boolean,border:Ct,iconPrefix:String,valueClass:pa,labelClass:pa,titleClass:pa,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},e_=Xi({},$A,zu);var t_=Fe({name:ZA,props:e_,setup(n,{slots:r}){const i=vp(),t=()=>{if(r.label||hn(n.label))return B("div",{class:[tr("label"),n.labelClass]},[r.label?r.label():n.label])},e=()=>{var l;if(r.title||hn(n.title)){const u=(l=r.title)==null?void 0:l.call(r);return Array.isArray(u)&&u.length===0?void 0:B("div",{class:[tr("title"),n.titleClass],style:n.titleStyle},[u||B("span",null,[n.title]),t()])}},s=()=>{const l=r.value||r.default;if(l||hn(n.value))return B("div",{class:[tr("value"),n.valueClass]},[l?l():B("span",null,[n.value])])},a=()=>{if(r.icon)return r.icon();if(n.icon)return B(zi,{name:n.icon,class:tr("left-icon"),classPrefix:n.iconPrefix},null)},o=()=>{if(r["right-icon"])return r["right-icon"]();if(n.isLink){const l=n.arrowDirection&&n.arrowDirection!=="right"?`arrow-${n.arrowDirection}`:"arrow";return B(zi,{name:l,class:tr("right-icon")},null)}};return()=>{var l;const{tag:u,size:c,center:f,border:h,isLink:d,required:p}=n,v=(l=n.clickable)!=null?l:d,g={center:f,required:!!p,clickable:v,borderless:!h};return c&&(g[c]=!!c),B(u,{class:tr(g),role:v?"button":void 0,tabindex:v?0:void 0,onClick:i},{default:()=>{var _;return[a(),e(),s(),o(),(_=r.extra)==null?void 0:_.call(r)]}})}}});const n_=kt(t_),[i_,nr]=yt("image"),r_={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:tt,height:tt,radius:tt,lazyLoad:Boolean,iconSize:tt,showError:Ct,errorIcon:wn("photo-fail"),iconPrefix:String,showLoading:Ct,loadingIcon:wn("photo"),crossorigin:String,referrerpolicy:String,decoding:String};var s_=Fe({name:i_,props:r_,emits:["load","error"],setup(n,{emit:r,slots:i}){const t=ne(!1),e=ne(!0),s=ne(),{$Lazyload:a}=ui().proxy,o=Ce(()=>{const g={width:Nt(n.width),height:Nt(n.height)};return hn(n.radius)&&(g.overflow="hidden",g.borderRadius=Nt(n.radius)),g});it(()=>n.src,()=>{t.value=!1,e.value=!0});const l=g=>{e.value&&(e.value=!1,r("load",g))},u=()=>{const g=new Event("load");Object.defineProperty(g,"target",{value:s.value,enumerable:!0}),l(g)},c=g=>{t.value=!0,e.value=!1,r("error",g)},f=(g,_,b)=>b?b():B(zi,{name:g,size:n.iconSize,class:_,classPrefix:n.iconPrefix},null),h=()=>{if(e.value&&n.showLoading)return B("div",{class:nr("loading")},[f(n.loadingIcon,nr("loading-icon"),i.loading)]);if(t.value&&n.showError)return B("div",{class:nr("error")},[f(n.errorIcon,nr("error-icon"),i.error)])},d=()=>{if(t.value||!n.src)return;const g={alt:n.alt,class:nr("img"),decoding:n.decoding,style:{objectFit:n.fit,objectPosition:n.position},crossorigin:n.crossorigin,referrerpolicy:n.referrerpolicy};return n.lazyLoad?Sn(B("img",kr({ref:s},g),null),[[cm("lazy"),n.src]]):B("img",kr({ref:s,src:n.src,onLoad:l,onError:c},g),null)},p=({el:g})=>{const _=()=>{g===s.value&&e.value&&u()};s.value?_():wt(_)},v=({el:g})=>{g===s.value&&!t.value&&c()};return a&&oo&&(a.$on("loaded",p),a.$on("error",v),Wi(()=>{a.$off("loaded",p),a.$off("error",v)})),Tt(()=>{wt(()=>{var g;(g=s.value)!=null&&g.complete&&!n.lazyLoad&&u()})}),()=>{var g;return B("div",{class:nr({round:n.round,block:n.block}),style:o.value},[d(),h(),(g=i.default)==null?void 0:g.call(i)])}}});const kp=kt(s_),[Ip,a_]=yt("row"),Rp=Symbol(Ip),o_={tag:wn("div"),wrap:Ct,align:String,gutter:{type:[String,Number,Array],default:0},justify:String};var l_=Fe({name:Ip,props:o_,setup(n,{slots:r}){const{children:i,linkChildren:t}=co(Rp),e=Ce(()=>{const o=[[]];let l=0;return i.forEach((u,c)=>{l+=Number(u.span),l>24?(o.push([c]),l-=24):o[o.length-1].push(c)}),o}),s=Ce(()=>{let o=0;Array.isArray(n.gutter)?o=Number(n.gutter[0])||0:o=Number(n.gutter);const l=[];return o&&e.value.forEach(u=>{const c=o*(u.length-1)/u.length;u.forEach((f,h)=>{if(h===0)l.push({right:c});else{const d=o-l[f-1].right,p=c-d;l.push({left:d,right:p})}})}),l}),a=Ce(()=>{const{gutter:o}=n,l=[];if(Array.isArray(o)&&o.length>1){const u=Number(o[1])||0;if(u<=0)return l;e.value.forEach((c,f)=>{f!==e.value.length-1&&c.forEach(()=>{l.push({bottom:u})})})}return l});return t({spaces:s,verticalSpaces:a}),()=>{const{tag:o,wrap:l,align:u,justify:c}=n;return B(o,{class:a_({[`align-${u}`]:u,[`justify-${c}`]:c,nowrap:!l})},{default:()=>{var f;return[(f=r.default)==null?void 0:f.call(r)]}})}}});const[u_,c_]=yt("col"),f_={tag:wn("div"),span:xt(0),offset:tt};var h_=Fe({name:u_,props:f_,setup(n,{slots:r}){const{parent:i,index:t}=uo(Rp),e=Ce(()=>{if(!i)return;const{spaces:s,verticalSpaces:a}=i;let o={};if(s&&s.value&&s.value[t.value]){const{left:u,right:c}=s.value[t.value];o={paddingLeft:u?`${u}px`:null,paddingRight:c?`${c}px`:null}}const{bottom:l}=a.value[t.value]||{};return Xi(o,{marginBottom:l?`${l}px`:null})});return()=>{const{tag:s,span:a,offset:o}=n;return B(s,{style:e.value,class:c_({[a]:a,[`offset-${o}`]:o})},{default:()=>{var l;return[(l=r.default)==null?void 0:l.call(r)]}})}}});const Pp=kt(h_),[d_,ir,p_]=yt("list"),g_={error:Boolean,offset:xt(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:wn("down"),loadingText:String,finishedText:String,immediateCheck:Ct};var v_=Fe({name:d_,props:g_,emits:["load","update:error","update:loading"],setup(n,{emit:r,slots:i}){const t=ne(n.loading),e=ne(),s=ne(),a=Tp(),o=ho(e),l=Ce(()=>n.scroller||o.value),u=()=>{wt(()=>{if(t.value||n.finished||n.disabled||n.error||a?.value===!1)return;const{direction:p}=n,v=+n.offset,g=_n(l);if(!g.height||xr(e))return;let _=!1;const b=_n(s);p==="up"?_=g.top-b.top<=v:_=b.bottom-g.bottom<=v,_&&(t.value=!0,r("update:loading",!0),r("load"))})},c=()=>{if(n.finished){const p=i.finished?i.finished():n.finishedText;if(p)return B("div",{class:ir("finished-text")},[p])}},f=()=>{r("update:error",!1),u()},h=()=>{if(n.error){const p=i.error?i.error():n.errorText;if(p)return B("div",{role:"button",class:ir("error-text"),tabindex:0,onClick:f},[p])}},d=()=>{if(t.value&&!n.finished&&!n.disabled)return B("div",{class:ir("loading")},[i.loading?i.loading():B(mp,{class:ir("loading-icon")},{default:()=>[n.loadingText||p_("loading")]})])};return it(()=>[n.loading,n.finished,n.error],u),a&&it(a,p=>{p&&u()}),Du(()=>{t.value=n.loading}),Tt(()=>{n.immediateCheck&&u()}),qi({check:u}),Lr("scroll",u,{target:l,passive:!0}),()=>{var p;const v=(p=i.default)==null?void 0:p.call(i),g=B("div",{ref:s,class:ir("placeholder")},null);return B("div",{ref:e,role:"feed",class:ir(),"aria-busy":t.value},[n.direction==="down"?v:g,d(),c(),h(),n.direction==="up"?v:g])}}});const Yu=kt(v_),[m_,Wn]=yt("nav-bar"),y_={title:String,fixed:Boolean,zIndex:tt,border:Ct,leftText:String,rightText:String,leftDisabled:Boolean,rightDisabled:Boolean,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:Ct};var A_=Fe({name:m_,props:y_,emits:["clickLeft","clickRight"],setup(n,{emit:r,slots:i}){const t=ne(),e=pp(t,Wn),s=c=>{n.leftDisabled||r("clickLeft",c)},a=c=>{n.rightDisabled||r("clickRight",c)},o=()=>i.left?i.left():[n.leftArrow&&B(zi,{class:Wn("arrow"),name:"arrow-left"},null),n.leftText&&B("span",{class:Wn("text")},[n.leftText])],l=()=>i.right?i.right():B("span",{class:Wn("text")},[n.rightText]),u=()=>{const{title:c,fixed:f,border:h,zIndex:d}=n,p=Gu(d),v=n.leftArrow||n.leftText||i.left,g=n.rightText||i.right;return B("div",{ref:t,style:p,class:[Wn({fixed:f}),{[uA]:h,"van-safe-area-top":n.safeAreaInsetTop}]},[B("div",{class:Wn("content")},[v&&B("div",{class:[Wn("left",{disabled:n.leftDisabled}),n.clickable&&!n.leftDisabled?mf:""],onClick:s},[o()]),B("div",{class:[Wn("title"),"van-ellipsis"]},[i.title?i.title():c]),g&&B("div",{class:[Wn("right",{disabled:n.rightDisabled}),n.clickable&&!n.rightDisabled?mf:""],onClick:a},[l()])])])};return()=>n.fixed&&n.placeholder?e(u):u()}});const xp=kt(A_),[__,zr]=yt("notice-bar"),b_={text:String,mode:String,color:String,delay:xt(1),speed:xt(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var S_=Fe({name:__,props:b_,emits:["close","replay"],setup(n,{emit:r,slots:i}){let t=0,e=0,s;const a=ne(),o=ne(),l=pn({show:!0,offset:0,duration:0}),u=()=>{if(i["left-icon"])return i["left-icon"]();if(n.leftIcon)return B(zi,{class:zr("left-icon"),name:n.leftIcon},null)},c=()=>{if(n.mode==="closeable")return"cross";if(n.mode==="link")return"arrow"},f=g=>{n.mode==="closeable"&&(l.show=!1,r("close",g))},h=()=>{if(i["right-icon"])return i["right-icon"]();const g=c();if(g)return B(zi,{name:g,class:zr("right-icon"),onClick:f},null)},d=()=>{l.offset=t,l.duration=0,Pr(()=>{Mi(()=>{l.offset=-e,l.duration=(e+t)/+n.speed,r("replay")})})},p=()=>{const g=n.scrollable===!1&&!n.wrapable,_={transform:l.offset?`translateX(${l.offset}px)`:"",transitionDuration:`${l.duration}s`};return B("div",{ref:a,role:"marquee",class:zr("wrap")},[B("div",{ref:o,style:_,class:[zr("content"),{"van-ellipsis":g}],onTransitionend:d},[i.default?i.default():n.text])])},v=()=>{const{delay:g,speed:_,scrollable:b}=n,y=hn(g)?+g*1e3:0;t=0,e=0,l.offset=0,l.duration=0,clearTimeout(s),s=setTimeout(()=>{if(!a.value||!o.value||b===!1)return;const m=_n(a).width,S=_n(o).width;(b||S>m)&&Mi(()=>{t=m,e=S,l.offset=-e,l.duration=e/+_})},y)};return vo(v),fo(v),Lr("pageshow",v),qi({reset:v}),it(()=>[n.text,n.scrollable],v),()=>{const{color:g,wrapable:_,background:b}=n;return Sn(B("div",{role:"alert",class:zr({wrapable:_}),style:{color:g,background:b}},[u(),p(),h()]),[[jn,l.show]])}}});const Dp=kt(S_),[E_,Kr,w_]=yt("pull-refresh"),Op=50,C_=["pulling","loosing","success"],T_={disabled:Boolean,modelValue:Boolean,headHeight:xt(Op),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:tt,successDuration:xt(500),animationDuration:xt(300)};var k_=Fe({name:E_,props:T_,emits:["change","refresh","update:modelValue"],setup(n,{emit:r,slots:i}){let t;const e=ne(),s=ne(),a=ho(e),o=pn({status:"normal",distance:0,duration:0}),l=yp(),u=()=>{if(n.headHeight!==Op)return{height:`${n.headHeight}px`}},c=()=>o.status!=="loading"&&o.status!=="success"&&!n.disabled,f=m=>{const S=+(n.pullDistance||n.headHeight);return m>S&&(m<S*2?m=S+(m-S)/2:m=S*1.5+(m-S*2)/4),Math.round(m)},h=(m,S)=>{const I=+(n.pullDistance||n.headHeight);o.distance=m,S?o.status="loading":m===0?o.status="normal":m<I?o.status="pulling":o.status="loosing",r("change",{status:o.status,distance:m})},d=()=>{const{status:m}=o;return m==="normal"?"":n[`${m}Text`]||w_(m)},p=()=>{const{status:m,distance:S}=o;if(i[m])return i[m]({distance:S});const I=[];return C_.includes(m)&&I.push(B("div",{class:Kr("text")},[d()])),m==="loading"&&I.push(B(mp,{class:Kr("loading")},{default:d})),I},v=()=>{o.status="success",setTimeout(()=>{h(0)},+n.successDuration)},g=m=>{t=po(a.value)===0,t&&(o.duration=0,l.start(m))},_=m=>{c()&&g(m)},b=m=>{if(c()){t||g(m);const{deltaY:S}=l;l.move(m),t&&S.value>=0&&l.isVertical()&&(op(m),h(f(S.value)))}},y=()=>{t&&l.deltaY.value&&c()&&(o.duration=+n.animationDuration,o.status==="loosing"?(h(+n.headHeight,!0),r("update:modelValue",!0),wt(()=>r("refresh"))):h(0))};return it(()=>n.modelValue,m=>{o.duration=+n.animationDuration,m?h(+n.headHeight,!0):i.success||n.successText?v():h(0,!1)}),Lr("touchmove",b,{target:s}),()=>{var m;const S={transitionDuration:`${o.duration}ms`,transform:o.distance?`translate3d(0,${o.distance}px, 0)`:""};return B("div",{ref:e,class:Kr()},[B("div",{ref:s,class:Kr("track"),style:S,onTouchstartPassive:_,onTouchend:y,onTouchcancel:y},[B("div",{class:Kr("head"),style:u()},[p()]),(m=i.default)==null?void 0:m.call(i)])])}}});const Ls=kt(k_),Lp=kt(l_),[Bp,Ef]=yt("tabbar"),I_={route:Boolean,fixed:Ct,border:Ct,zIndex:tt,placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,modelValue:xt(0),safeAreaInsetBottom:{type:Boolean,default:null}},Mp=Symbol(Bp);var R_=Fe({name:Bp,props:I_,emits:["change","update:modelValue"],setup(n,{emit:r,slots:i}){const t=ne(),{linkChildren:e}=co(Mp),s=pp(t,Ef),a=()=>{var u;return(u=n.safeAreaInsetBottom)!=null?u:n.fixed},o=()=>{var u;const{fixed:c,zIndex:f,border:h}=n;return B("div",{ref:t,role:"tablist",style:Gu(f),class:[Ef({fixed:c}),{[hp]:h,"van-safe-area-bottom":a()}]},[(u=i.default)==null?void 0:u.call(i)])};return e({props:n,setActive:(u,c)=>{dp(n.beforeChange,{args:[u],done(){r("update:modelValue",u),r("change",u),c()}})}}),()=>n.fixed&&n.placeholder?s(o):o()}});const P_=kt(R_),[x_,$o]=yt("tabbar-item"),D_=Xi({},zu,{dot:Boolean,icon:String,name:tt,badge:tt,badgeProps:Object,iconPrefix:String});var O_=Fe({name:x_,props:D_,emits:["click"],setup(n,{emit:r,slots:i}){const t=vp(),e=ui().proxy,{parent:s,index:a}=uo(Mp);if(!s)return;const o=Ce(()=>{var c;const{route:f,modelValue:h}=s.props;if(f&&"$route"in e){const{$route:d}=e,{to:p}=n,v=lo(p)?p:{path:p};return d.matched.some(g=>{const _="path"in v&&v.path===g.path,b="name"in v&&v.name===g.name;return _||b})}return((c=n.name)!=null?c:a.value)===h}),l=c=>{var f;o.value||s.setActive((f=n.name)!=null?f:a.value,t),r("click",c)},u=()=>{if(i.icon)return i.icon({active:o.value});if(n.icon)return B(zi,{name:n.icon,classPrefix:n.iconPrefix},null)};return()=>{var c;const{dot:f,badge:h}=n,{activeColor:d,inactiveColor:p}=s.props,v=o.value?d:p;return B("div",{role:"tab",class:$o({active:o.value}),style:{color:v},tabindex:0,"aria-selected":o.value,onClick:l},[B(Ku,kr({dot:f,class:$o("icon"),content:h},n.badgeProps),{default:u}),B("div",{class:$o("text")},[(c=i.default)==null?void 0:c.call(i,{active:o.value})])])}}});const L_=kt(O_),B_={class:"swipe-container"},M_={class:"my-image"},F_={class:"describe"},N_={class:"custom-indicator"},U_=["onClick"],H_=Fe({__name:"SwineComp",props:{HomeBanners:{default:()=>[]}},setup(n){const r=ne(0),i=ne();console.log(n.HomeBanners);const e=s=>{r.value=s,i.value?.swipeTo(s)};return(s,a)=>{const o=kp,l=li("RouterLink"),u=Os,c=Ds;return le(),we("div",B_,[B(c,{ref_key:"swipeRef",ref:i,active:r.value,"onUpdate:active":a[0]||(a[0]=f=>r.value=f),class:"image-carousel",autoplay:5e3,"indicator-color":"white","lazy-render":!1},{indicator:be(({active:f,total:h})=>[w("ul",N_,[(le(!0),we(Xe,null,Ot(h,(d,p)=>(le(),we("li",{key:p,class:wi({"is-active":p===f}),onClick:v=>e(p)},a[1]||(a[1]=[w("div",{class:"indicator-line"},null,-1)]),10,U_))),128))])]),default:be(()=>[(le(!0),we(Xe,null,Ot(s.HomeBanners,(f,h)=>(le(),vt(u,{key:f.id},{default:be(()=>[B(l,{to:f.shortId?{name:"play",params:{id:f.shortId}}:"",onClick:d=>e(h)},{default:be(()=>[w("div",M_,[B(o,{src:f.showURL,fit:"cover","show-error":"","show-loading":""},null,8,["src"])]),w("div",F_,[w("p",null,He(f.title),1)])]),_:2},1032,["to","onClick"])]),_:2},1024))),128))]),_:1},8,["active"])])}}}),V_=pt(H_,[["__scopeId","data-v-48c98bff"]]),j_={class:"screen-bar"},G_=Fe({__name:"ScreenComp",props:{catInfo:Object},setup(n){return(r,i)=>{const t=li("RouterLink");return le(),we("ul",j_,[B(t,{to:{name:"list",params:{id:n.catInfo?.categoryId},query:{channeid:n.catInfo?.id,ids:"0,0,0,0,0"}}},{default:be(()=>i[0]||(i[0]=[w("div",null,[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAZtJREFUWEftlb8rxHEYx1/PoeiIkgHJYDFgECVyd36k25TV5g8wW/yabFJmZZDRYJEM53vdJCWFwSg6yik6WbhHd0Xpvj+e4cTw/dR3+j7v5/P6vOt5P8IfH/nj+/lnACmtp46oyZU8MCkPpdojbaSBWpOumg8G5PGr9qcDjq6hLJgaQYGEVJVqU7qDMGvU3ZCQziCAU+Cb0qXxCBB1AcgARW+8zgSQDQaIkCQmh55tjvUc6CkDKNDDuFx66hzNoeRDgNCB0AGLA+sUuPAcJ2EVpb1sDJVFhDufHNgEcsEAtkj7lSQcRhmw3Y+SkOKLwNEplG6TLsILMdl2j2JTh8oW/VxGae1D6TVfEWMXESWlQ0ToMureiMue1zJaQVk2NgKlhjF5x9EtlDmj7p6EtAYBbCN4LxVlHugoAxA2wGcKlCXgNRhAmCYu+z7b8AQYdAHoJy5nPrps6V+gAyFA6EDogOAAt57jpCSBZpcgOkB48tHNAM/BY2iMtMonYVpbgOJnOzG5KhVmtI0CTSaR8M6oXP/TbWh6QmWLPgEowYQwL8OowAAAAABJRU5ErkJggg==",alt:""})],-1),w("p",null,"",-1)])),_:1,__:[0]},8,["to"]),B(t,{to:{name:"list",params:{id:n.catInfo?.categoryId},query:{channeid:n.catInfo?.id,ids:"0,0,0,0,0"}}},{default:be(()=>i[1]||(i[1]=[w("div",null,[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAActJREFUWEftlsFLFHEUxz9vdoNoFesPiCIIBMHTIuymMy62KoSQB2/iTRACrytdslshHTp08Bbh2UNIUWSzo6wS7rHwpnbvsiyGsLpPml1pk6Lf7EwtyMzvNPDmfT/vO7/3+z2hw490WJ8YIJwDH/UeCRI48rrdX9k+gKvjwBrir8l2IdoDcLUXYRu42qy8ipIlJ5+DOhEcYFOvccIn4DZwjKAoSeAAZYCcfAsCEQxANYHHWyCP8gyLKV9MWQEeInikyJOWmilEMABPn6PMI7zBZoIN9n0hm5t4rAL3EZZxZC56AFfTCDvALjUy5KWCp199IUdu4GoXFiWUfiwGsaVkAmHuQFmv8J0CykscaVTeCtB4v44yS5IlBqUaLcDvsp0HMFE8F2PuQAwQO/BfHPB0lCNKjMmh0YYO2gXvNMVl7uDI+7P8P7ugqBlgC2WBnDz9JwCuFhCeAFmG5cdl1jIRbegIdT4gPMaRRUOAL82TsM8wfhHlERZ3sWU9PMCm3vKFh2SvMwBGqi1BnkbswMUEwB8uXgUtzjB+Bpj+0yZ0qFM0TBQuzGIYW7xfu6Csl6jyAIuecNn/8nWdCt28OBvbwl3HEZDGAB134BRBvLsh0ppcDQAAAABJRU5ErkJggg==",alt:""})],-1),w("p",null,"",-1)])),_:1,__:[1]},8,["to"]),B(t,{to:{name:"list",params:{id:n.catInfo?.categoryId},query:{channeid:n.catInfo?.id,ids:"1,0,0,0,0"}}},{default:be(()=>i[2]||(i[2]=[w("div",null,[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAvlJREFUWEft11uIVXUUx/HPmqkpR8UeoggpKgjEIimKoNE558xIVEKGQQ9hCYYkkWUPBWFog5FSkBVBYFHQVbpiUhAJZ86JLoQPSUVEBBXRbYogLCqds2IfZyw7Zy42TFK4Xjbs/+L//64f67f2f4fDHHGYzzd9ANU8C4t1/q3E9IVSvDj6dvoAarlT6m+rcFiiFK8Wa9MHUM15Qp8Q0lzcgqOaQGmVSjwyvQCjpdfzXMNeFuYKv0jd/x5ALZdJj2MmtgpfSxumBvBhdnnOPndEY1wHDeZtwp1SNuUvxxbVvF3Y+M8BqnmtcD++Fy5Rio9aIArAIQ/jGuEnw67SF6808woo7sJK5Xhs8j2QGWo241YUlXfgS8MW6o/PD0BU83jhJSzEZ8JlSvH+X9ZPFW7UYZPeGJocwI7sNtsTWNasfP/zaqzCJ/ZZZHF8q57zpR3S6Xjb0S7XE9+1KFTLCx1ntwXx88QA9TxJ2i6dL32syxI98anMDnXPSFfiPWGTtBVz8LS5Vjojfms5/I28wLB3cI9yFGqOMwfqefZIRaegqtMVFsWPBzZ9NrucYDsuHnlXNNsG5dg4ZnPW8iLptaYjynHd2AC1vFTahtnCo2Za7bzY27Lxruy2R9FMC3RYpzdeGNcZkwKo5w0atggdGtapRNF8k4tqHiuVVLwu2th0QoBa3ifd1JxYDStU4vnJnTySNZjFuL272ajlKNxwcIwLsCvn2OMHDOmwVG+8e0iH7/f5ANYLK5SimICHAFCk1vIce33VtFW7KCyUTmxbXZFfzwGNqQBMVHItd0tnmmVG26acsgITAQxmMXrnSTNU4teW9P82QD17NDypYbm+eLOtGNOqQD3Xjvh/rVIUX7zWOAJwRIH/twKDuQYPSGtU4sExXPAB5pvlmDEm4XoMSMtV4qmWPerZr2EnHlKO64v1P39MittPw83SvSrxTVuAei417OQxAWt5mrRap80HXV5GN3srZ/hdcTPeNnpXnL4/o4nG+sj6YQf4A8satjD8Tj6dAAAAAElFTkSuQmCC",alt:""})],-1),w("p",null,"",-1)])),_:1,__:[2]},8,["to"]),B(t,{to:{name:"list",params:{id:n.catInfo?.categoryId},query:{channeid:n.catInfo?.id,ids:"2,0,0,0,0"}}},{default:be(()=>i[3]||(i[3]=[w("div",null,[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABB9JREFUWEfdlntoVnUYxz/fs2Z5y4Ia3qBwGeg/mUnO23vOW9aWXTS0jKKk0j8q/4i0cIQR0YUW/ZURkZlR1FzkHypl0bb3vE4HYpTYyLyEmlZmLAk13d6dJ35nF9z2bu+FLOj57/wuz/M5z++5if9YVLT9tC0k4i3gGBkWMlc/FqOrOIBGG4/YCwzvMtpEoDn/HkBor2GsRGzCOAfcg8dcEqovFKJwD3xmlzKUI4hRGDMo5Q8ytCDq8VV54QFS9jRQg0jjy48NpuxjxGIibiSpXYVAFOaBzTaMkRwERuNRRUJfxMbSNpmIPYjN+Fpw4QBSVg28DOwg0KxehtL2ERH3AbMI1JwvRHYP7LJhnKaciHLgGsREYDIwHVGCMbufke1WTlscCycQtYjdiP1kOEzAcSTLBtUbIG0+xuvA9RhevwviL4wXCeS80F8a7QkU37+416ZoA45iNJHhGebqePd+b4DQ3MaVGAcRh4HDGIdQ/L2XU7QwTy7tBpZGuwyPBMYUiD13NTAOKOuqG+sI9Gh2gJTtjy8YD5JUbb7vmNe5lD2OWAO8ja/HBvLArRhbut65mkA1eSkf7JCZCHkVcOnr6sdsfP2UHcCtNlqA+AS4Io6HpFYWDVFnJZTxDvAw8B1DqGKmjp2vL3sWhDYR48v4OVxQ+UVAPG8eAR8A9wPNGPNI6mTfnxm4EHU2nBCYgFiKr3cL8kRor2CscnWSy7mD63Q6dxr2PdHpia+BNkYwhmlqzwvC1YQM+4BvifBJ6tRA93KX4tBqMRbTzlXcoiN5ATRYJR5bMZaR1NrB7uQGSNlG4G48ykjoRF4ATVZBhmbEKny5DBhQcgOE5rrbJBKMGKic9tO+00Zzhl+AtQRaVjxAZyT/idiHr6n9FO2woZwkylodU+a8dYBAM4oH2GbX0sEPwHoCuVzulEarQDyFcReiA49P43Sdo909Z1Lm0ngmvzGKe9VRXBCG9hDG+4jl+HqT0FyTegm4DTiD2ApUYIwFDGMjHqvx9T0pewFYTcQUbjoPrA/J4DEQ2hsYy/FYRMR8xANdM+AajBqS+p06G8JolhDxHDAeyCBczWjA2AA8QqD3ivNAylwZXYqIYgXGhxjPktTR+Hu3DaeVcySVwcVDG08iqjFGQnzHi0c1X3XFAYQ2CWNT3Bc8FpCQq4ydss0m0BEPHS34quhZb7KxZFgBcUvezglWFB8D3VpdR6unjFLK8LUnXm6w2/HYEv9poJIegLRN5SIOMVOtg0V/917uOtB9MmUHuvrCDfj6JitA2m4m4ivETnxN/6cB3FhVipiPr01ZAVLmUnUd8CuBxvzvAM7Gw6ZxJ0ltyeqB0JZgrAd+JpCbA3NKITHgxrNpnGURVWolbZVEccdzaXhJbGmHjaM9zv3P8eUKVk75G2xHhTAphyS1AAAAAElFTkSuQmCC",alt:""})],-1),w("p",null,"",-1)])),_:1,__:[3]},8,["to"])])}}}),z_=pt(G_,[["__scopeId","data-v-e0c41839"]]),K_={class:"preview"},Y_={class:"my-image"},Q_={key:0,class:"episodes-num"},W_={class:"video-info"},X_={class:"score visbile"},q_={class:"info-b"},J_={class:"hot-num notranslate"},Z_={key:0,class:"update flex_auto"},$_={class:"name"},eb={class:"type"},tb=Fe({__name:"CoverComp",props:{MvItem:{}},setup(n){return(r,i)=>{const t=kp,e=li("RouterLink");return le(),vt(e,{to:{name:"play",params:{id:r.MvItem.shortId}},class:"vertical-video vertical-video"},{default:be(()=>[w("div",K_,[w("div",Y_,[B(t,{src:r.MvItem.coverUrl,fit:"fill","show-error":"","show-loading":""},null,8,["src"])]),r.MvItem.upCount>0?(le(),we("span",Q_,He(r.MvItem.upCount),1)):An("",!0),w("div",W_,[w("div",X_,He(r.MvItem.score),1),w("div",q_,[w("div",J_,[i[0]||(i[0]=w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAVRJREFUOE+tlE8rRGEUxn9PNuzYKRtRysa/hQVZSCzJSpEllj6ED6BZ+ASKrKhZiNJMKRaaUrKwmI8wUbKh8eid7mjmNfdyy9ndes7vnPec81zxT6Esju15IGhKkpylTQXZ7gF2gW6gCpxIek+DZYFWgMmWxAA7klTvBOsIsj0OrHZIKEsq/wlkewjYALo6JHwABWAauJP02tS0dWS7D9gGwnzS4hwYBWqSimmgTWD4l4t4SQqFjvclvQX9d0e2B4CtnGdVlFSJQQvAXE7QvaSzGLSWvD0PqyrpMAatAyN5KMCTpOMYtAjMRqBgixLQtEpc50rSdQzqB3ZaFwDUJe3ZngGWIsoncCCp1gYKH7ZjWzxLKtgO2w2+622B3Uq6SLujcBth6M1Z3Ui6TIosA1NJ4gNwKil01YgfXkuqBwsMJuKG421PAGNARdJjPKzM/1GeDX4BSUZuE+FkCTEAAAAASUVORK5CYII=",alt:""},null,-1)),w("span",null,He(r.MvItem.playCount<1e4?r.MvItem.playCount:(r.MvItem.playCount/1e4).toFixed(1)+" "),1)]),r.MvItem.isSerial?(le(),we("div",Z_,He(r.MvItem.upStatus),1)):An("",!0)])])]),w("div",$_,[w("h3",null,He(r.MvItem.title),1),w("p",eb,He(r.MvItem.cidMapper),1)])]),_:1},8,["to"])}}}),Fp=pt(tb,[["__scopeId","data-v-f2185536"]]);function Np(n,r){return function(){return n.apply(r,arguments)}}const{toString:nb}=Object.prototype,{getPrototypeOf:Qu}=Object,{iterator:Ao,toStringTag:Up}=Symbol,_o=(n=>r=>{const i=nb.call(r);return n[i]||(n[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Rn=n=>(n=n.toLowerCase(),r=>_o(r)===n),bo=n=>r=>typeof r===n,{isArray:Br}=Array,ms=bo("undefined");function Bs(n){return n!==null&&!ms(n)&&n.constructor!==null&&!ms(n.constructor)&&nn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Hp=Rn("ArrayBuffer");function ib(n){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(n):r=n&&n.buffer&&Hp(n.buffer),r}const rb=bo("string"),nn=bo("function"),Vp=bo("number"),Ms=n=>n!==null&&typeof n=="object",sb=n=>n===!0||n===!1,ga=n=>{if(_o(n)!=="object")return!1;const r=Qu(n);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Up in n)&&!(Ao in n)},ab=n=>{if(!Ms(n)||Bs(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},ob=Rn("Date"),lb=Rn("File"),ub=Rn("Blob"),cb=Rn("FileList"),fb=n=>Ms(n)&&nn(n.pipe),hb=n=>{let r;return n&&(typeof FormData=="function"&&n instanceof FormData||nn(n.append)&&((r=_o(n))==="formdata"||r==="object"&&nn(n.toString)&&n.toString()==="[object FormData]"))},db=Rn("URLSearchParams"),[pb,gb,vb,mb]=["ReadableStream","Request","Response","Headers"].map(Rn),yb=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Fs(n,r,{allOwnKeys:i=!1}={}){if(n===null||typeof n>"u")return;let t,e;if(typeof n!="object"&&(n=[n]),Br(n))for(t=0,e=n.length;t<e;t++)r.call(null,n[t],t,n);else{if(Bs(n))return;const s=i?Object.getOwnPropertyNames(n):Object.keys(n),a=s.length;let o;for(t=0;t<a;t++)o=s[t],r.call(null,n[o],o,n)}}function jp(n,r){if(Bs(n))return null;r=r.toLowerCase();const i=Object.keys(n);let t=i.length,e;for(;t-- >0;)if(e=i[t],r===e.toLowerCase())return e;return null}const Fi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Gp=n=>!ms(n)&&n!==Fi;function ql(){const{caseless:n}=Gp(this)&&this||{},r={},i=(t,e)=>{const s=n&&jp(r,e)||e;ga(r[s])&&ga(t)?r[s]=ql(r[s],t):ga(t)?r[s]=ql({},t):Br(t)?r[s]=t.slice():r[s]=t};for(let t=0,e=arguments.length;t<e;t++)arguments[t]&&Fs(arguments[t],i);return r}const Ab=(n,r,i,{allOwnKeys:t}={})=>(Fs(r,(e,s)=>{i&&nn(e)?n[s]=Np(e,i):n[s]=e},{allOwnKeys:t}),n),_b=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),bb=(n,r,i,t)=>{n.prototype=Object.create(r.prototype,t),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:r.prototype}),i&&Object.assign(n.prototype,i)},Sb=(n,r,i,t)=>{let e,s,a;const o={};if(r=r||{},n==null)return r;do{for(e=Object.getOwnPropertyNames(n),s=e.length;s-- >0;)a=e[s],(!t||t(a,n,r))&&!o[a]&&(r[a]=n[a],o[a]=!0);n=i!==!1&&Qu(n)}while(n&&(!i||i(n,r))&&n!==Object.prototype);return r},Eb=(n,r,i)=>{n=String(n),(i===void 0||i>n.length)&&(i=n.length),i-=r.length;const t=n.indexOf(r,i);return t!==-1&&t===i},wb=n=>{if(!n)return null;if(Br(n))return n;let r=n.length;if(!Vp(r))return null;const i=new Array(r);for(;r-- >0;)i[r]=n[r];return i},Cb=(n=>r=>n&&r instanceof n)(typeof Uint8Array<"u"&&Qu(Uint8Array)),Tb=(n,r)=>{const t=(n&&n[Ao]).call(n);let e;for(;(e=t.next())&&!e.done;){const s=e.value;r.call(n,s[0],s[1])}},kb=(n,r)=>{let i;const t=[];for(;(i=n.exec(r))!==null;)t.push(i);return t},Ib=Rn("HTMLFormElement"),Rb=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,t,e){return t.toUpperCase()+e}),wf=(({hasOwnProperty:n})=>(r,i)=>n.call(r,i))(Object.prototype),Pb=Rn("RegExp"),zp=(n,r)=>{const i=Object.getOwnPropertyDescriptors(n),t={};Fs(i,(e,s)=>{let a;(a=r(e,s,n))!==!1&&(t[s]=a||e)}),Object.defineProperties(n,t)},xb=n=>{zp(n,(r,i)=>{if(nn(n)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const t=n[i];if(nn(t)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Db=(n,r)=>{const i={},t=e=>{e.forEach(s=>{i[s]=!0})};return Br(n)?t(n):t(String(n).split(r)),i},Ob=()=>{},Lb=(n,r)=>n!=null&&Number.isFinite(n=+n)?n:r;function Bb(n){return!!(n&&nn(n.append)&&n[Up]==="FormData"&&n[Ao])}const Mb=n=>{const r=new Array(10),i=(t,e)=>{if(Ms(t)){if(r.indexOf(t)>=0)return;if(Bs(t))return t;if(!("toJSON"in t)){r[e]=t;const s=Br(t)?[]:{};return Fs(t,(a,o)=>{const l=i(a,e+1);!ms(l)&&(s[o]=l)}),r[e]=void 0,s}}return t};return i(n,0)},Fb=Rn("AsyncFunction"),Nb=n=>n&&(Ms(n)||nn(n))&&nn(n.then)&&nn(n.catch),Kp=((n,r)=>n?setImmediate:r?((i,t)=>(Fi.addEventListener("message",({source:e,data:s})=>{e===Fi&&s===i&&t.length&&t.shift()()},!1),e=>{t.push(e),Fi.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",nn(Fi.postMessage)),Ub=typeof queueMicrotask<"u"?queueMicrotask.bind(Fi):typeof process<"u"&&process.nextTick||Kp,Hb=n=>n!=null&&nn(n[Ao]),F={isArray:Br,isArrayBuffer:Hp,isBuffer:Bs,isFormData:hb,isArrayBufferView:ib,isString:rb,isNumber:Vp,isBoolean:sb,isObject:Ms,isPlainObject:ga,isEmptyObject:ab,isReadableStream:pb,isRequest:gb,isResponse:vb,isHeaders:mb,isUndefined:ms,isDate:ob,isFile:lb,isBlob:ub,isRegExp:Pb,isFunction:nn,isStream:fb,isURLSearchParams:db,isTypedArray:Cb,isFileList:cb,forEach:Fs,merge:ql,extend:Ab,trim:yb,stripBOM:_b,inherits:bb,toFlatObject:Sb,kindOf:_o,kindOfTest:Rn,endsWith:Eb,toArray:wb,forEachEntry:Tb,matchAll:kb,isHTMLForm:Ib,hasOwnProperty:wf,hasOwnProp:wf,reduceDescriptors:zp,freezeMethods:xb,toObjectSet:Db,toCamelCase:Rb,noop:Ob,toFiniteNumber:Lb,findKey:jp,global:Fi,isContextDefined:Gp,isSpecCompliantForm:Bb,toJSONObject:Mb,isAsyncFn:Fb,isThenable:Nb,setImmediate:Kp,asap:Ub,isIterable:Hb};function Le(n,r,i,t,e){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",r&&(this.code=r),i&&(this.config=i),t&&(this.request=t),e&&(this.response=e,this.status=e.status?e.status:null)}F.inherits(Le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:F.toJSONObject(this.config),code:this.code,status:this.status}}});const Yp=Le.prototype,Qp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Qp[n]={value:n}});Object.defineProperties(Le,Qp);Object.defineProperty(Yp,"isAxiosError",{value:!0});Le.from=(n,r,i,t,e,s)=>{const a=Object.create(Yp);return F.toFlatObject(n,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),Le.call(a,n.message,r,i,t,e),a.cause=n,a.name=n.name,s&&Object.assign(a,s),a};const Vb=null;function Jl(n){return F.isPlainObject(n)||F.isArray(n)}function Wp(n){return F.endsWith(n,"[]")?n.slice(0,-2):n}function Cf(n,r,i){return n?n.concat(r).map(function(e,s){return e=Wp(e),!i&&s?"["+e+"]":e}).join(i?".":""):r}function jb(n){return F.isArray(n)&&!n.some(Jl)}const Gb=F.toFlatObject(F,{},null,function(r){return/^is[A-Z]/.test(r)});function So(n,r,i){if(!F.isObject(n))throw new TypeError("target must be an object");r=r||new FormData,i=F.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,g){return!F.isUndefined(g[v])});const t=i.metaTokens,e=i.visitor||c,s=i.dots,a=i.indexes,l=(i.Blob||typeof Blob<"u"&&Blob)&&F.isSpecCompliantForm(r);if(!F.isFunction(e))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(F.isDate(p))return p.toISOString();if(F.isBoolean(p))return p.toString();if(!l&&F.isBlob(p))throw new Le("Blob is not supported. Use a Buffer instead.");return F.isArrayBuffer(p)||F.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,v,g){let _=p;if(p&&!g&&typeof p=="object"){if(F.endsWith(v,"{}"))v=t?v:v.slice(0,-2),p=JSON.stringify(p);else if(F.isArray(p)&&jb(p)||(F.isFileList(p)||F.endsWith(v,"[]"))&&(_=F.toArray(p)))return v=Wp(v),_.forEach(function(y,m){!(F.isUndefined(y)||y===null)&&r.append(a===!0?Cf([v],m,s):a===null?v:v+"[]",u(y))}),!1}return Jl(p)?!0:(r.append(Cf(g,v,s),u(p)),!1)}const f=[],h=Object.assign(Gb,{defaultVisitor:c,convertValue:u,isVisitable:Jl});function d(p,v){if(!F.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(p),F.forEach(p,function(_,b){(!(F.isUndefined(_)||_===null)&&e.call(r,_,F.isString(b)?b.trim():b,v,h))===!0&&d(_,v?v.concat(b):[b])}),f.pop()}}if(!F.isObject(n))throw new TypeError("data must be an object");return d(n),r}function Tf(n){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(t){return r[t]})}function Wu(n,r){this._pairs=[],n&&So(n,this,r)}const Xp=Wu.prototype;Xp.append=function(r,i){this._pairs.push([r,i])};Xp.toString=function(r){const i=r?function(t){return r.call(this,t,Tf)}:Tf;return this._pairs.map(function(e){return i(e[0])+"="+i(e[1])},"").join("&")};function zb(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function qp(n,r,i){if(!r)return n;const t=i&&i.encode||zb;F.isFunction(i)&&(i={serialize:i});const e=i&&i.serialize;let s;if(e?s=e(r,i):s=F.isURLSearchParams(r)?r.toString():new Wu(r,i).toString(t),s){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class kf{constructor(){this.handlers=[]}use(r,i,t){return this.handlers.push({fulfilled:r,rejected:i,synchronous:t?t.synchronous:!1,runWhen:t?t.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){F.forEach(this.handlers,function(t){t!==null&&r(t)})}}const Jp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kb=typeof URLSearchParams<"u"?URLSearchParams:Wu,Yb=typeof FormData<"u"?FormData:null,Qb=typeof Blob<"u"?Blob:null,Wb={isBrowser:!0,classes:{URLSearchParams:Kb,FormData:Yb,Blob:Qb},protocols:["http","https","file","blob","url","data"]},Xu=typeof window<"u"&&typeof document<"u",Zl=typeof navigator=="object"&&navigator||void 0,Xb=Xu&&(!Zl||["ReactNative","NativeScript","NS"].indexOf(Zl.product)<0),qb=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Jb=Xu&&window.location.href||"http://localhost",Zb=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Xu,hasStandardBrowserEnv:Xb,hasStandardBrowserWebWorkerEnv:qb,navigator:Zl,origin:Jb},Symbol.toStringTag,{value:"Module"})),Ut={...Zb,...Wb};function $b(n,r){return So(n,new Ut.classes.URLSearchParams,{visitor:function(i,t,e,s){return Ut.isNode&&F.isBuffer(i)?(this.append(t,i.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...r})}function e1(n){return F.matchAll(/\w+|\[(\w*)]/g,n).map(r=>r[0]==="[]"?"":r[1]||r[0])}function t1(n){const r={},i=Object.keys(n);let t;const e=i.length;let s;for(t=0;t<e;t++)s=i[t],r[s]=n[s];return r}function Zp(n){function r(i,t,e,s){let a=i[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=s>=i.length;return a=!a&&F.isArray(e)?e.length:a,l?(F.hasOwnProp(e,a)?e[a]=[e[a],t]:e[a]=t,!o):((!e[a]||!F.isObject(e[a]))&&(e[a]=[]),r(i,t,e[a],s)&&F.isArray(e[a])&&(e[a]=t1(e[a])),!o)}if(F.isFormData(n)&&F.isFunction(n.entries)){const i={};return F.forEachEntry(n,(t,e)=>{r(e1(t),e,i,0)}),i}return null}function n1(n,r,i){if(F.isString(n))try{return(r||JSON.parse)(n),F.trim(n)}catch(t){if(t.name!=="SyntaxError")throw t}return(i||JSON.stringify)(n)}const Ns={transitional:Jp,adapter:["xhr","http","fetch"],transformRequest:[function(r,i){const t=i.getContentType()||"",e=t.indexOf("application/json")>-1,s=F.isObject(r);if(s&&F.isHTMLForm(r)&&(r=new FormData(r)),F.isFormData(r))return e?JSON.stringify(Zp(r)):r;if(F.isArrayBuffer(r)||F.isBuffer(r)||F.isStream(r)||F.isFile(r)||F.isBlob(r)||F.isReadableStream(r))return r;if(F.isArrayBufferView(r))return r.buffer;if(F.isURLSearchParams(r))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let o;if(s){if(t.indexOf("application/x-www-form-urlencoded")>-1)return $b(r,this.formSerializer).toString();if((o=F.isFileList(r))||t.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return So(o?{"files[]":r}:r,l&&new l,this.formSerializer)}}return s||e?(i.setContentType("application/json",!1),n1(r)):r}],transformResponse:[function(r){const i=this.transitional||Ns.transitional,t=i&&i.forcedJSONParsing,e=this.responseType==="json";if(F.isResponse(r)||F.isReadableStream(r))return r;if(r&&F.isString(r)&&(t&&!this.responseType||e)){const a=!(i&&i.silentJSONParsing)&&e;try{return JSON.parse(r)}catch(o){if(a)throw o.name==="SyntaxError"?Le.from(o,Le.ERR_BAD_RESPONSE,this,null,this.response):o}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ut.classes.FormData,Blob:Ut.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};F.forEach(["delete","get","head","post","put","patch"],n=>{Ns.headers[n]={}});const i1=F.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),r1=n=>{const r={};let i,t,e;return n&&n.split(`
`).forEach(function(a){e=a.indexOf(":"),i=a.substring(0,e).trim().toLowerCase(),t=a.substring(e+1).trim(),!(!i||r[i]&&i1[i])&&(i==="set-cookie"?r[i]?r[i].push(t):r[i]=[t]:r[i]=r[i]?r[i]+", "+t:t)}),r},If=Symbol("internals");function Yr(n){return n&&String(n).trim().toLowerCase()}function va(n){return n===!1||n==null?n:F.isArray(n)?n.map(va):String(n)}function s1(n){const r=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let t;for(;t=i.exec(n);)r[t[1]]=t[2];return r}const a1=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function el(n,r,i,t,e){if(F.isFunction(t))return t.call(this,r,i);if(e&&(r=i),!!F.isString(r)){if(F.isString(t))return r.indexOf(t)!==-1;if(F.isRegExp(t))return t.test(r)}}function o1(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,i,t)=>i.toUpperCase()+t)}function l1(n,r){const i=F.toCamelCase(" "+r);["get","set","has"].forEach(t=>{Object.defineProperty(n,t+i,{value:function(e,s,a){return this[t].call(this,r,e,s,a)},configurable:!0})})}let rn=class{constructor(r){r&&this.set(r)}set(r,i,t){const e=this;function s(o,l,u){const c=Yr(l);if(!c)throw new Error("header name must be a non-empty string");const f=F.findKey(e,c);(!f||e[f]===void 0||u===!0||u===void 0&&e[f]!==!1)&&(e[f||l]=va(o))}const a=(o,l)=>F.forEach(o,(u,c)=>s(u,c,l));if(F.isPlainObject(r)||r instanceof this.constructor)a(r,i);else if(F.isString(r)&&(r=r.trim())&&!a1(r))a(r1(r),i);else if(F.isObject(r)&&F.isIterable(r)){let o={},l,u;for(const c of r){if(!F.isArray(c))throw TypeError("Object iterator must return a key-value pair");o[u=c[0]]=(l=o[u])?F.isArray(l)?[...l,c[1]]:[l,c[1]]:c[1]}a(o,i)}else r!=null&&s(i,r,t);return this}get(r,i){if(r=Yr(r),r){const t=F.findKey(this,r);if(t){const e=this[t];if(!i)return e;if(i===!0)return s1(e);if(F.isFunction(i))return i.call(this,e,t);if(F.isRegExp(i))return i.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,i){if(r=Yr(r),r){const t=F.findKey(this,r);return!!(t&&this[t]!==void 0&&(!i||el(this,this[t],t,i)))}return!1}delete(r,i){const t=this;let e=!1;function s(a){if(a=Yr(a),a){const o=F.findKey(t,a);o&&(!i||el(t,t[o],o,i))&&(delete t[o],e=!0)}}return F.isArray(r)?r.forEach(s):s(r),e}clear(r){const i=Object.keys(this);let t=i.length,e=!1;for(;t--;){const s=i[t];(!r||el(this,this[s],s,r,!0))&&(delete this[s],e=!0)}return e}normalize(r){const i=this,t={};return F.forEach(this,(e,s)=>{const a=F.findKey(t,s);if(a){i[a]=va(e),delete i[s];return}const o=r?o1(s):String(s).trim();o!==s&&delete i[s],i[o]=va(e),t[o]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const i=Object.create(null);return F.forEach(this,(t,e)=>{t!=null&&t!==!1&&(i[e]=r&&F.isArray(t)?t.join(", "):t)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,i])=>r+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...i){const t=new this(r);return i.forEach(e=>t.set(e)),t}static accessor(r){const t=(this[If]=this[If]={accessors:{}}).accessors,e=this.prototype;function s(a){const o=Yr(a);t[o]||(l1(e,a),t[o]=!0)}return F.isArray(r)?r.forEach(s):s(r),this}};rn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);F.reduceDescriptors(rn.prototype,({value:n},r)=>{let i=r[0].toUpperCase()+r.slice(1);return{get:()=>n,set(t){this[i]=t}}});F.freezeMethods(rn);function tl(n,r){const i=this||Ns,t=r||i,e=rn.from(t.headers);let s=t.data;return F.forEach(n,function(o){s=o.call(i,s,e.normalize(),r?r.status:void 0)}),e.normalize(),s}function $p(n){return!!(n&&n.__CANCEL__)}function Mr(n,r,i){Le.call(this,n??"canceled",Le.ERR_CANCELED,r,i),this.name="CanceledError"}F.inherits(Mr,Le,{__CANCEL__:!0});function eg(n,r,i){const t=i.config.validateStatus;!i.status||!t||t(i.status)?n(i):r(new Le("Request failed with status code "+i.status,[Le.ERR_BAD_REQUEST,Le.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function u1(n){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""}function c1(n,r){n=n||10;const i=new Array(n),t=new Array(n);let e=0,s=0,a;return r=r!==void 0?r:1e3,function(l){const u=Date.now(),c=t[s];a||(a=u),i[e]=l,t[e]=u;let f=s,h=0;for(;f!==e;)h+=i[f++],f=f%n;if(e=(e+1)%n,e===s&&(s=(s+1)%n),u-a<r)return;const d=c&&u-c;return d?Math.round(h*1e3/d):void 0}}function f1(n,r){let i=0,t=1e3/r,e,s;const a=(u,c=Date.now())=>{i=c,e=null,s&&(clearTimeout(s),s=null),n(...u)};return[(...u)=>{const c=Date.now(),f=c-i;f>=t?a(u,c):(e=u,s||(s=setTimeout(()=>{s=null,a(e)},t-f)))},()=>e&&a(e)]}const xa=(n,r,i=3)=>{let t=0;const e=c1(50,250);return f1(s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,l=a-t,u=e(l),c=a<=o;t=a;const f={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:u||void 0,estimated:u&&o&&c?(o-a)/u:void 0,event:s,lengthComputable:o!=null,[r?"download":"upload"]:!0};n(f)},i)},Rf=(n,r)=>{const i=n!=null;return[t=>r[0]({lengthComputable:i,total:n,loaded:t}),r[1]]},Pf=n=>(...r)=>F.asap(()=>n(...r)),h1=Ut.hasStandardBrowserEnv?((n,r)=>i=>(i=new URL(i,Ut.origin),n.protocol===i.protocol&&n.host===i.host&&(r||n.port===i.port)))(new URL(Ut.origin),Ut.navigator&&/(msie|trident)/i.test(Ut.navigator.userAgent)):()=>!0,d1=Ut.hasStandardBrowserEnv?{write(n,r,i,t,e,s){const a=[n+"="+encodeURIComponent(r)];F.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),F.isString(t)&&a.push("path="+t),F.isString(e)&&a.push("domain="+e),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function p1(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function g1(n,r){return r?n.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):n}function tg(n,r,i){let t=!p1(r);return n&&(t||i==!1)?g1(n,r):r}const xf=n=>n instanceof rn?{...n}:n;function Ki(n,r){r=r||{};const i={};function t(u,c,f,h){return F.isPlainObject(u)&&F.isPlainObject(c)?F.merge.call({caseless:h},u,c):F.isPlainObject(c)?F.merge({},c):F.isArray(c)?c.slice():c}function e(u,c,f,h){if(F.isUndefined(c)){if(!F.isUndefined(u))return t(void 0,u,f,h)}else return t(u,c,f,h)}function s(u,c){if(!F.isUndefined(c))return t(void 0,c)}function a(u,c){if(F.isUndefined(c)){if(!F.isUndefined(u))return t(void 0,u)}else return t(void 0,c)}function o(u,c,f){if(f in r)return t(u,c);if(f in n)return t(void 0,u)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,c,f)=>e(xf(u),xf(c),f,!0)};return F.forEach(Object.keys({...n,...r}),function(c){const f=l[c]||e,h=f(n[c],r[c],c);F.isUndefined(h)&&f!==o||(i[c]=h)}),i}const ng=n=>{const r=Ki({},n);let{data:i,withXSRFToken:t,xsrfHeaderName:e,xsrfCookieName:s,headers:a,auth:o}=r;r.headers=a=rn.from(a),r.url=qp(tg(r.baseURL,r.url,r.allowAbsoluteUrls),n.params,n.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(F.isFormData(i)){if(Ut.hasStandardBrowserEnv||Ut.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[u,...c]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...c].join("; "))}}if(Ut.hasStandardBrowserEnv&&(t&&F.isFunction(t)&&(t=t(r)),t||t!==!1&&h1(r.url))){const u=e&&s&&d1.read(s);u&&a.set(e,u)}return r},v1=typeof XMLHttpRequest<"u",m1=v1&&function(n){return new Promise(function(i,t){const e=ng(n);let s=e.data;const a=rn.from(e.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:u}=e,c,f,h,d,p;function v(){d&&d(),p&&p(),e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}let g=new XMLHttpRequest;g.open(e.method.toUpperCase(),e.url,!0),g.timeout=e.timeout;function _(){if(!g)return;const y=rn.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),S={data:!o||o==="text"||o==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:y,config:n,request:g};eg(function(R){i(R),v()},function(R){t(R),v()},S),g=null}"onloadend"in g?g.onloadend=_:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(_)},g.onabort=function(){g&&(t(new Le("Request aborted",Le.ECONNABORTED,n,g)),g=null)},g.onerror=function(){t(new Le("Network Error",Le.ERR_NETWORK,n,g)),g=null},g.ontimeout=function(){let m=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const S=e.transitional||Jp;e.timeoutErrorMessage&&(m=e.timeoutErrorMessage),t(new Le(m,S.clarifyTimeoutError?Le.ETIMEDOUT:Le.ECONNABORTED,n,g)),g=null},s===void 0&&a.setContentType(null),"setRequestHeader"in g&&F.forEach(a.toJSON(),function(m,S){g.setRequestHeader(S,m)}),F.isUndefined(e.withCredentials)||(g.withCredentials=!!e.withCredentials),o&&o!=="json"&&(g.responseType=e.responseType),u&&([h,p]=xa(u,!0),g.addEventListener("progress",h)),l&&g.upload&&([f,d]=xa(l),g.upload.addEventListener("progress",f),g.upload.addEventListener("loadend",d)),(e.cancelToken||e.signal)&&(c=y=>{g&&(t(!y||y.type?new Mr(null,n,g):y),g.abort(),g=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c)));const b=u1(e.url);if(b&&Ut.protocols.indexOf(b)===-1){t(new Le("Unsupported protocol "+b+":",Le.ERR_BAD_REQUEST,n));return}g.send(s||null)})},y1=(n,r)=>{const{length:i}=n=n?n.filter(Boolean):[];if(r||i){let t=new AbortController,e;const s=function(u){if(!e){e=!0,o();const c=u instanceof Error?u:this.reason;t.abort(c instanceof Le?c:new Mr(c instanceof Error?c.message:c))}};let a=r&&setTimeout(()=>{a=null,s(new Le(`timeout ${r} of ms exceeded`,Le.ETIMEDOUT))},r);const o=()=>{n&&(a&&clearTimeout(a),a=null,n.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),n=null)};n.forEach(u=>u.addEventListener("abort",s));const{signal:l}=t;return l.unsubscribe=()=>F.asap(o),l}},A1=function*(n,r){let i=n.byteLength;if(i<r){yield n;return}let t=0,e;for(;t<i;)e=t+r,yield n.slice(t,e),t=e},_1=async function*(n,r){for await(const i of b1(n))yield*A1(i,r)},b1=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const r=n.getReader();try{for(;;){const{done:i,value:t}=await r.read();if(i)break;yield t}}finally{await r.cancel()}},Df=(n,r,i,t)=>{const e=_1(n,r);let s=0,a,o=l=>{a||(a=!0,t&&t(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await e.next();if(u){o(),l.close();return}let f=c.byteLength;if(i){let h=s+=f;i(h)}l.enqueue(new Uint8Array(c))}catch(u){throw o(u),u}},cancel(l){return o(l),e.return()}},{highWaterMark:2})},Eo=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ig=Eo&&typeof ReadableStream=="function",S1=Eo&&(typeof TextEncoder=="function"?(n=>r=>n.encode(r))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),rg=(n,...r)=>{try{return!!n(...r)}catch{return!1}},E1=ig&&rg(()=>{let n=!1;const r=new Request(Ut.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!r}),Of=64*1024,$l=ig&&rg(()=>F.isReadableStream(new Response("").body)),Da={stream:$l&&(n=>n.body)};Eo&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!Da[r]&&(Da[r]=F.isFunction(n[r])?i=>i[r]():(i,t)=>{throw new Le(`Response type '${r}' is not supported`,Le.ERR_NOT_SUPPORT,t)})})})(new Response);const w1=async n=>{if(n==null)return 0;if(F.isBlob(n))return n.size;if(F.isSpecCompliantForm(n))return(await new Request(Ut.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(F.isArrayBufferView(n)||F.isArrayBuffer(n))return n.byteLength;if(F.isURLSearchParams(n)&&(n=n+""),F.isString(n))return(await S1(n)).byteLength},C1=async(n,r)=>{const i=F.toFiniteNumber(n.getContentLength());return i??w1(r)},T1=Eo&&(async n=>{let{url:r,method:i,data:t,signal:e,cancelToken:s,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:u,headers:c,withCredentials:f="same-origin",fetchOptions:h}=ng(n);u=u?(u+"").toLowerCase():"text";let d=y1([e,s&&s.toAbortSignal()],a),p;const v=d&&d.unsubscribe&&(()=>{d.unsubscribe()});let g;try{if(l&&E1&&i!=="get"&&i!=="head"&&(g=await C1(c,t))!==0){let S=new Request(r,{method:"POST",body:t,duplex:"half"}),I;if(F.isFormData(t)&&(I=S.headers.get("content-type"))&&c.setContentType(I),S.body){const[R,N]=Rf(g,xa(Pf(l)));t=Df(S.body,Of,R,N)}}F.isString(f)||(f=f?"include":"omit");const _="credentials"in Request.prototype;p=new Request(r,{...h,signal:d,method:i.toUpperCase(),headers:c.normalize().toJSON(),body:t,duplex:"half",credentials:_?f:void 0});let b=await fetch(p,h);const y=$l&&(u==="stream"||u==="response");if($l&&(o||y&&v)){const S={};["status","statusText","headers"].forEach(G=>{S[G]=b[G]});const I=F.toFiniteNumber(b.headers.get("content-length")),[R,N]=o&&Rf(I,xa(Pf(o),!0))||[];b=new Response(Df(b.body,Of,R,()=>{N&&N(),v&&v()}),S)}u=u||"text";let m=await Da[F.findKey(Da,u)||"text"](b,n);return!y&&v&&v(),await new Promise((S,I)=>{eg(S,I,{data:m,headers:rn.from(b.headers),status:b.status,statusText:b.statusText,config:n,request:p})})}catch(_){throw v&&v(),_&&_.name==="TypeError"&&/Load failed|fetch/i.test(_.message)?Object.assign(new Le("Network Error",Le.ERR_NETWORK,n,p),{cause:_.cause||_}):Le.from(_,_&&_.code,n,p)}}),eu={http:Vb,xhr:m1,fetch:T1};F.forEach(eu,(n,r)=>{if(n){try{Object.defineProperty(n,"name",{value:r})}catch{}Object.defineProperty(n,"adapterName",{value:r})}});const Lf=n=>`- ${n}`,k1=n=>F.isFunction(n)||n===null||n===!1,sg={getAdapter:n=>{n=F.isArray(n)?n:[n];const{length:r}=n;let i,t;const e={};for(let s=0;s<r;s++){i=n[s];let a;if(t=i,!k1(i)&&(t=eu[(a=String(i)).toLowerCase()],t===void 0))throw new Le(`Unknown adapter '${a}'`);if(t)break;e[a||"#"+s]=t}if(!t){const s=Object.entries(e).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=r?s.length>1?`since :
`+s.map(Lf).join(`
`):" "+Lf(s[0]):"as no adapter specified";throw new Le("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return t},adapters:eu};function nl(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Mr(null,n)}function Bf(n){return nl(n),n.headers=rn.from(n.headers),n.data=tl.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),sg.getAdapter(n.adapter||Ns.adapter)(n).then(function(t){return nl(n),t.data=tl.call(n,n.transformResponse,t),t.headers=rn.from(t.headers),t},function(t){return $p(t)||(nl(n),t&&t.response&&(t.response.data=tl.call(n,n.transformResponse,t.response),t.response.headers=rn.from(t.response.headers))),Promise.reject(t)})}const ag="1.11.0",wo={};["object","boolean","number","function","string","symbol"].forEach((n,r)=>{wo[n]=function(t){return typeof t===n||"a"+(r<1?"n ":" ")+n}});const Mf={};wo.transitional=function(r,i,t){function e(s,a){return"[Axios v"+ag+"] Transitional option '"+s+"'"+a+(t?". "+t:"")}return(s,a,o)=>{if(r===!1)throw new Le(e(a," has been removed"+(i?" in "+i:"")),Le.ERR_DEPRECATED);return i&&!Mf[a]&&(Mf[a]=!0,console.warn(e(a," has been deprecated since v"+i+" and will be removed in the near future"))),r?r(s,a,o):!0}};wo.spelling=function(r){return(i,t)=>(console.warn(`${t} is likely a misspelling of ${r}`),!0)};function I1(n,r,i){if(typeof n!="object")throw new Le("options must be an object",Le.ERR_BAD_OPTION_VALUE);const t=Object.keys(n);let e=t.length;for(;e-- >0;){const s=t[e],a=r[s];if(a){const o=n[s],l=o===void 0||a(o,s,n);if(l!==!0)throw new Le("option "+s+" must be "+l,Le.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Le("Unknown option "+s,Le.ERR_BAD_OPTION)}}const ma={assertOptions:I1,validators:wo},On=ma.validators;let Vi=class{constructor(r){this.defaults=r||{},this.interceptors={request:new kf,response:new kf}}async request(r,i){try{return await this._request(r,i)}catch(t){if(t instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const s=e.stack?e.stack.replace(/^.+\n/,""):"";try{t.stack?s&&!String(t.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(t.stack+=`
`+s):t.stack=s}catch{}}throw t}}_request(r,i){typeof r=="string"?(i=i||{},i.url=r):i=r||{},i=Ki(this.defaults,i);const{transitional:t,paramsSerializer:e,headers:s}=i;t!==void 0&&ma.assertOptions(t,{silentJSONParsing:On.transitional(On.boolean),forcedJSONParsing:On.transitional(On.boolean),clarifyTimeoutError:On.transitional(On.boolean)},!1),e!=null&&(F.isFunction(e)?i.paramsSerializer={serialize:e}:ma.assertOptions(e,{encode:On.function,serialize:On.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),ma.assertOptions(i,{baseUrl:On.spelling("baseURL"),withXsrfToken:On.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let a=s&&F.merge(s.common,s[i.method]);s&&F.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),i.headers=rn.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(i)===!1||(l=l&&v.synchronous,o.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let c,f=0,h;if(!l){const p=[Bf.bind(this),void 0];for(p.unshift(...o),p.push(...u),h=p.length,c=Promise.resolve(i);f<h;)c=c.then(p[f++],p[f++]);return c}h=o.length;let d=i;for(f=0;f<h;){const p=o[f++],v=o[f++];try{d=p(d)}catch(g){v.call(this,g);break}}try{c=Bf.call(this,d)}catch(p){return Promise.reject(p)}for(f=0,h=u.length;f<h;)c=c.then(u[f++],u[f++]);return c}getUri(r){r=Ki(this.defaults,r);const i=tg(r.baseURL,r.url,r.allowAbsoluteUrls);return qp(i,r.params,r.paramsSerializer)}};F.forEach(["delete","get","head","options"],function(r){Vi.prototype[r]=function(i,t){return this.request(Ki(t||{},{method:r,url:i,data:(t||{}).data}))}});F.forEach(["post","put","patch"],function(r){function i(t){return function(s,a,o){return this.request(Ki(o||{},{method:r,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Vi.prototype[r]=i(),Vi.prototype[r+"Form"]=i(!0)});let R1=class og{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(s){i=s});const t=this;this.promise.then(e=>{if(!t._listeners)return;let s=t._listeners.length;for(;s-- >0;)t._listeners[s](e);t._listeners=null}),this.promise.then=e=>{let s;const a=new Promise(o=>{t.subscribe(o),s=o}).then(e);return a.cancel=function(){t.unsubscribe(s)},a},r(function(s,a,o){t.reason||(t.reason=new Mr(s,a,o),i(t.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const i=this._listeners.indexOf(r);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const r=new AbortController,i=t=>{r.abort(t)};return this.subscribe(i),r.signal.unsubscribe=()=>this.unsubscribe(i),r.signal}static source(){let r;return{token:new og(function(e){r=e}),cancel:r}}};function P1(n){return function(i){return n.apply(null,i)}}function x1(n){return F.isObject(n)&&n.isAxiosError===!0}const tu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tu).forEach(([n,r])=>{tu[r]=n});function lg(n){const r=new Vi(n),i=Np(Vi.prototype.request,r);return F.extend(i,Vi.prototype,r,{allOwnKeys:!0}),F.extend(i,r,null,{allOwnKeys:!0}),i.create=function(e){return lg(Ki(n,e))},i}const mt=lg(Ns);mt.Axios=Vi;mt.CanceledError=Mr;mt.CancelToken=R1;mt.isCancel=$p;mt.VERSION=ag;mt.toFormData=So;mt.AxiosError=Le;mt.Cancel=mt.CanceledError;mt.all=function(r){return Promise.all(r)};mt.spread=P1;mt.isAxiosError=x1;mt.mergeConfig=Ki;mt.AxiosHeaders=rn;mt.formToJSON=n=>Zp(F.isHTMLForm(n)?new FormData(n):n);mt.getAdapter=sg.getAdapter;mt.HttpStatusCode=tu;mt.default=mt;const{Axios:z2,AxiosError:K2,CanceledError:Y2,isCancel:Q2,CancelToken:W2,VERSION:X2,all:q2,Cancel:J2,isAxiosError:Z2,spread:$2,toFormData:eI,AxiosHeaders:tI,HttpStatusCode:nI,formToJSON:iI,getAdapter:rI,mergeConfig:sI}=mt,Yt=mt.create();Yt.interceptors.request.use(n=>{const r=localStorage.getItem("Authorization");return r&&(n.headers.Authorization=r),n});Yt.interceptors.response.use(n=>n,n=>(n.response&&n.response.status===401&&(localStorage.removeItem("Authorization"),ws.replace({name:"login",query:{redirect:ws.currentRoute.value.path}})),Promise.reject(n)));const D1=Fe({__name:"ListComp",props:{HomeVideos:{default:()=>[]},vtype:{default:1}},emits:["update:HomeVideos"],setup(n,{emit:r}){Ri();let i=1;const t=n,e=r,s=ne(!1),a=ne(!1),o=async()=>{try{i++,s.value=!0;const u=(await Yt.get("/api/home/gethomemodules",{params:{channeid:t.vtype,page:i}}))?.data?.data?.list?.[0]?.list||[];u.length||(a.value=!0),e("update:HomeVideos",[...t.HomeVideos,...u]),s.value=!1}catch(l){console.error("ListComp error: ",l)}};return(l,u)=>{const c=Pp,f=Lp,h=Yu;return le(),vt(h,{loading:s.value,"onUpdate:loading":u[0]||(u[0]=d=>s.value=d),"immediate-check":!1,finished:a.value,"finished-text":"",onLoad:o,class:"list",role:""},{default:be(()=>[B(f,{gutter:"10"},{default:be(()=>[(le(!0),we(Xe,null,Ot(l.HomeVideos,d=>(le(),vt(c,{key:d.shortId,span:"12"},{default:be(()=>[B(Fp,{MvItem:d},null,8,["MvItem"])]),_:2},1024))),128))]),_:1})]),_:1},8,["loading","finished"])}}}),O1=pt(D1,[["__scopeId","data-v-843b0e74"]]),L1={class:"scroll-box"},B1=Fe({__name:"NavHomeView",props:{catInfo:{}},setup(n){const r=ne(!1),i=ne(),t=ne(),e=n,s=async()=>{try{const o=(await Yt.get("/api/home/gethomemodules?channeid="+e.catInfo.id)).data;for(const l of o.data?.list??[])l.type===0?i.value=l.banners.map(u=>({id:u.id,showURL:u.showURL,title:u.title,url:u.url,shortId:u.shortId})):0<l.type&&l.type<5&&(t.value=l.list.map(u=>({id:u.id,coverUrl:u.coverUrl,score:u.score,playCount:u.playCount,cidMapper:u.cidMapper,shortId:u.shortId,title:u.title,isSerial:u.isSerial,upStatus:u.upStatus,upCount:u.upCount})))}catch(a){console.error("NavHomeView error: ",a)}r.value=!1};return Tt(()=>{s()}),(a,o)=>{const l=Ls;return le(),we("div",L1,[B(l,{modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=u=>r.value=u),onRefresh:s},{default:be(()=>[B(V_,{HomeBanners:i.value},null,8,["HomeBanners"]),B(z_,{catInfo:a.catInfo},null,8,["catInfo"]),B(O1,{HomeVideos:t.value,"onUpdate:HomeVideos":o[0]||(o[0]=u=>t.value=u),vtype:a.catInfo.id??1},null,8,["HomeVideos","vtype"])]),_:1},8,["modelValue"])])}}}),Jr=pt(B1,[["__scopeId","data-v-8f6fb8c8"]]),M1="/xiguaLogo.png",F1=Fe({__name:"OptionsBoxComp",props:{activeopt:Boolean},emits:["update:activeopt"],setup(n,{emit:r}){const i=r,t=()=>{i("update:activeopt",!1)};return(e,s)=>{const a=li("RouterLink");return le(),we(Xe,null,[s[5]||(s[5]=w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAJZJREFUKFOV0cEKwkAMBNDJ/kozvbj5G0E8CIIgCIKFggdBEETwoN+cskKhlLa77nleyE4EfzzVVSOl+aqKbQhoiwBpV8CbNDwLVONNBOd+k0VA2h3w03DtWVDX8eGO4/iPk4C0J+CHqULGQFTjSwT7ufaGQEh7A75bqroHomofEd/m7pJAIO0L+CYX/t2BjBcA65JwynTYcBfBZzkXIQAAAABJRU5ErkJggg==",alt:"",class:"absolute triangle"},null,-1)),w("ul",null,[B(a,{onClick:t,to:{name:""},class:"flex align_item-center",style:{position:"relative"}},{default:be(()=>s[1]||(s[1]=[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABgBJREFUaEPtmF1sVFUQx/9z99ZWKlQoYiTQCFoeWOqW7mXv3QXUggnQ1AcJqZAQFXngyRg/CRhCYzB+xI9EfSAmogk2ITVKIqYfEiSh2L13927lWyOQRiJRakCxpS3t3jPm0JYsS0v3wC5Sw3lq98ydmd+ZmXPmHMIYHzTG/cdtgP86grcj8L+OgG3HVxKRZ5rGl7kCzVkK7d/fNlXXvcNEmldQoM8JBAIduYDIGYBtJxoAXiadJsJO0zSWjxmAeDyxzvN4K4DkoNO6ptHqUChYl22IrEfAdd0Hkkk6APBdAN4CwAA2ADin65hjGMbv2YTIKgAza46T2AdgPoBjxcVFFX19fdzZ2eMCKCPCt6ZpPH7LAjhO23pmIVc9KQTPj0TmxaSz8fiBuZ6XdADkMdOacDj4ebYgshYB2048RIQYM+fL1LEsQ6bN5RGNxmuJaDMR/mZOllmW9Vs2ILICcPTo0Tu6unql8wGAjhUXT6goLS29mOqg67p5/f1wiDAXQLNlGUtvCQDHOThDiP7XiLA2PXXSHWxtdct8PooPRIleOHXq5Ec1NTXejYAoR6C+vt5XUjIzTIRqZlQD8Kc4cFXqpDsXjcY3EtEbg7//RYTdzNwsRF5zJFJ+WhUmIwDXdYv6+2kpkagGSB5OxWmGOpnROHly0VPpqZPuUH09+0pK2pqIsJiZU+3L7fYIQE1CeM1FRYUtfr+/bzSgEQEcx5klhK9arjSABXIHSVP2MxEaiLSGwsL8jIyl1UQJMy3zPFQBvBhA4ZX6qYsIe5nRrOvcZBjGyeFgRgSwbfczAM+kfNQ9oJAaifQG0wy0j7Y6mc43NBzPnzTp/CMD0RVVAM1K/ZaItplmUNbYVWNEANd1x3me3BYv5XgvkR4wzfJfMnXqRuRaWxMPahrvBnA/gINC9IUjkUiPEoAUtu222URCQsjwxs6dK3q4qurK7fFGHB3p22g0/ioRvQ3gvBBkRCLBEyPJjlrEjuM+zYzBk5M+sazgulw4PaTTcRKL5K4EwKdptCIUCn59LXujAgxEIrUetLWWVbEtFxC2fXAakEwAPIUI75um8dJodjICSK0HZu4l0hZYVjAxmnKVeXmad3b27gPYBPBDT0/w0cpKGmrHR1SVEcAw9fArkRc0TfOsipPXknWcxFZmlunZIURfRSQSyehQyxhAGk+tByJ8FwoFlxGRuFEI206sAVimpadp2pJQqGJPpjqVAK6uB7xiWca7mRobTk52sQDbAO7UNG1TKFSxRUWfMoCsh2QSxwFMJaKPTTP4nIrBdFnbbnsWEJ8CdMI0K2YRkWwpMh7KAIOpdEQecET0gWkGX8zY2jCCsVhitRC8HcBPlmXMVtV1XQC27cq+ZCYzvxMOz1uvajRVPhpNPEnEOwC0W5YxU1XXdQIkTgM8FcAWyzI2qRq9EiC2nEj7CsAflmXcp6rrOgHccwAmAthsWcbrqkZT5R0nUc3Mu2TbYFnG3aq6rhMg3gNQAYCNlmW8qWo0DWAJMzcR0UXTDEqdSkMZQF5CHCchr4GkadrLoVDFe+kWHceZwexbCWAVIM8J/kLXUTfcm5DrHqhMJpPfy92nsXGXXltbq3SuKAO0t7cXnDlz9lJry4znw2Hjw4Hz4fC9RBdrmFk6bUnANDAJvUfTaHt+vr4zEAhcGPjOlZelFvm3rqPQMIxulRAoA7S0HJqYl9cnawCapm0A+IwQvIqZFxGRb8g4Ef5k5nqAPIBWDBb94DR1AdgJaNuJuItZtMoJIm+yanuiDDDw6iyG7VOI6AIzf0OEuu7uYPNQMyZf7OLxHxcCXCMErwAwJWWV/wEwQf5fUKBPKy9Xu9grA8Tj8ZmeR6n3U9kx7gG4bvz4cTv9fr9c3RGHvNRPn+5WElENAPliffmBQAgqvdblZTilygCxWMzP7DssBFwirgPyd1hW2RmVvB2S3buX9cLCtscAyMg84fPlLZw3L3BERZcywKFDhyb29Ih7sn0/lveBjo4OrbKysjenACrKb4ascgRuhlMqNm4DqKxWLmRvRyAXq6qic8xH4F8GFWhPfUIigAAAAABJRU5ErkJggg==",alt:"",class:"flex_none"},null,-1),w("p",{class:"flex_auto"},"",-1),w("span",{class:"no_login_mask"},null,-1)])),_:1,__:[1]}),B(a,{onClick:t,to:{name:""},class:"flex align_item-center",style:{position:"relative"}},{default:be(()=>s[2]||(s[2]=[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAQ5JREFUaEPtVm0KwjAMzQreSGG7hl5Ib+NRRtmNhFX6Y1AH0tc23VZ9+50meR9Z0knjX9d4/0IAeytIBahAIQP/YaFxnFwhUVnP+/4cJTga4Cv/DACEkSyqV48WwpB6SQogCQkgsCxCGBXQsMw6B2eghBENRahAqgK5i+7bX2ZzBZoHoOH7MMfmChAAb6GIB2KeRIcYuW3C8x2JV7mFmgfAIeYQFw4xLUQL0UK6UxBbnGG1rEVmrb3Os3mKyEm39c9sVTbxVs17KOoAjJlvC/POuccwXO41FUByJ1lIRF7eNkdp3gNMBSBHaj4ZwNGahwEgXtwrBrLQXs0hdQkAYalmDBWoyS6SmwogLNWMeQMd3hFAibbaowAAAABJRU5ErkJggg==",alt:"",class:"flex_none"},null,-1),w("p",{class:"flex_auto"},"",-1),w("span",{class:"no_login_mask"},null,-1)])),_:1,__:[2]}),B(a,{onClick:t,to:{name:"history"},class:"flex align_item-center",style:{position:"relative"}},{default:be(()=>s[3]||(s[3]=[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABKtJREFUaEPtmUtsHEUQhv+aHduKIXhzQQTFFwTCB8eB3dntWYKvOYBQhCAmSEhwAPE6gPJCHDhx4GXzOISH4EBOgM0jAsGBCwcneHp3vCF2kIyIuAQRiQs2AUfexxRqZhav7dndeVlmJc91urvq66quqq4mdPlHXa4/tgG22oLbFvCzgG3bAysrPKjrqZ3qf61Wv9LXR5cMw1hK2mKJWGB6em5Xb2/lPgAHmHEngN0tFL1MhDMAvq1Uej8bHR35Iy5QLIBS6fytjlN93nFwmAh9YZRhxoqm4WNN63kpl9v3U5i5zWMjASwsLOxcXPzrRQBPA9CbFqwBKBNhlhm/EGFR/WNGmgg3MSMLIOMz52Q6fe0LQ0NDV8KChAaYmbEzRPQJwDc3CZsnopM7dvRMjoy0d4u5ubldV69Wx5hZwe9dXYMuMvMDhYJRDgMRCkDKc3cz1ycB9LtC+Fci/Ug+f9unRMRhBDMzFYs/3M9cex2gPd7cZaLUmBC3fx10rcAAnvJfAOjxFv8GGHjQNG/5M6gwv3GW9fN1wNJHAO7y/leJUvcGhQgE4LoNpld3HhNCZE8QkRNH+cZcZtaknH0VwNGGJZgxGsSdOgK4B/bv8qrP07hpZo8nofj6NSzLHl+FoIvp9DWZTge7I4Bl2W8CeKbhNkJk7wmy81LOjjKz2lUQ0QkhssqCbT/PEl81udNbpmk8225SWwAV5+v16gUV9ohwiXlgOKjPW1bpIECnlfBUSjuYy2W+7ASg/qszQbR0gRmDKomnUj3D7fJEWwAp7Q+Z8bC7i/9Gh6kgSriKRANQc6U8d8iLdiDCKSGMR1rJbQmgygNdr6jUrzLsvBDZfWFCZRwAFWKlnD2v8oTK2LVa7+5WZUdLACntR5nxvufDTwiRfS/o7se1gGuF2ceZ+V1XPh4TwvjAT34bgPIks3NI+WF/f+/1nTLsxogS3YXUWipjLy9XfnfPnzYlRGYsFIBl2b95VWXRNA0RZveTsIC7hi0B5AFcNk3jxsAAqp6v1dxCjAjvCGE8tRUAUtpvM+NJJVvXkfa7T/i6UKlUGq7XaV5N1DQcy+eNia0AsCz7GIDXlOx6nffu359TIX3N5wsgZbnA7Hzf6QC1g4oThRrrrg0k2h1CZGa2BADAaV3HmGEY1TCWjAxw9mxpOJVyXQjAcdM0VI0S6isWizc4jqbKB+/eQJ/rOh8OAxHZhZI4xG4UsfYA+ndRISIfYi+ExQqjDXPFgYgcRpVwKeMlsmZ/iwKxNpFhSggjXCKLW0qsPzB+ECq7ElHd73DFLiXiFnN+SjVDMPMbhULuiN+4RIo5142il9OtQpYH8ZBpGi+3GtNcTjPjVKEQoZxWi8e50ISKuU2D3Uv+4o9epyLehcaLRpGulFEAEr9SKiU2XuoxYZqGqlES/zblUq+03NhWoXEhMs8FudwHoXR3vvwKwI2NWU6srdJQoKsbW+sg/mstqk4FkDoap7UI1Ce8DoQSs3mtxQZEVzd3GxBd3V5vPpRd+8CxPrKsPjFpB5idDk9M2hnA+X88MbUKkeo+wcyDjtMlj3xBYv1mjenYnd4swUmtuw2Q1E5GXafrLfAPoXTXT4hXC00AAAAASUVORK5CYII=",alt:"",class:"flex_none"},null,-1),w("p",{class:"flex_auto"},"",-1),w("span",{class:"no_login_mask"},null,-1)])),_:1,__:[3]}),B(a,{onClick:s[0]||(s[0]=o=>i("update:activeopt",!1)),to:{name:""},class:"flex align_item-center",style:{position:"relative"}},{default:be(()=>s[4]||(s[4]=[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAO1JREFUaEPtl8EOgzAMQ+GfduD/Txz2T0Oa6CVSFbfuiqo9rtQitpPU7Nviz754/RsEnnYQB3DAVIAWMgW04f/jwHm+Pz1yHcfrK5KLr31bdsAtwMUPI1AUzdwoBUcHevEQiIriQKKAKljzEPf2sFpQ4aWeh0CtE9hC98WZtSwttFwLZfs/vicL3WHQjhKtys86Lw/xrIJavyMTcOOwi7dbyC3AxQ8jkF0stSyjZhuykHoxZcNGFiILhR5xh9DFs4VcBV08DrgKuvhhDmT7n/+BoEAWXeQ02qr8rPMQmKW0PcRPFwoBHPiRAstvoQvDIoBAhk9M2AAAAABJRU5ErkJggg==",alt:"",class:"flex_none"},null,-1),w("p",{class:"flex_auto"},"",-1)])),_:1,__:[4]})])],64)}}}),N1=pt(F1,[["__scopeId","data-v-af85efeb"]]),U1={class:"domain_btn inline_block_tag relative"},H1={class:"options_box fixed"},V1={key:0,class:"load-box"},j1=Fe({__name:"VanBarComp",setup(n){const r=Ri(),i=Ps(),t=ne([]),e=ne(!1),s=ne(!1),a=ne(0),o=ne(),l=async()=>{try{const h=await Yt.get("/api/home/categories");t.value=h.data.sort((d,p)=>d.id-p.id).map(d=>({...d,isMounted:!1}))}catch(h){console.error(h)}};function u(h){t.value[h].isMounted=!0,h>0&&(t.value[h-1].isMounted=!0),h<t.value.length-1&&(t.value[h+1].isMounted=!0)}Tt(async()=>{await l();const h=t.value.findIndex(d=>d.categoryId===i.name);u(h),a.value=h,o.value?.swipeTo(h),wt(()=>{setTimeout(()=>{s.value=!0},500)})});function c(h){u(h),a.value=h,o.value?.swipeTo(h);const d=t.value[h].routeName;r.push("/"+d)}function f(h){u(h),a.value=h;const d=t.value[h].routeName;r.push("/"+d)}return(h,d)=>{const p=mo,v=yo,g=xp,_=Os,b=Ds;return le(),we(Xe,null,[B(g,{fixed:"",placeholder:"",class:"home-nav flex_none"},{left:be(()=>d[5]||(d[5]=[w("img",{src:M1,alt:"Logo",class:"icon"},null,-1)])),title:be(()=>[B(v,{active:a.value,"onUpdate:active":d[0]||(d[0]=y=>a.value=y),background:"transparent",onChange:c,ellipsis:!1,animated:!1},{default:be(()=>[(le(!0),we(Xe,null,Ot(t.value,(y,m)=>(le(),vt(p,{key:y.name,title:y.name,name:m},null,8,["title","name"]))),128))]),_:1},8,["active"])]),right:be(()=>[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA1hJREFUaEPtmM9rE1EQx7/ztj+MWhAVbA+9eVAKrTbJ7qYWaalFPXjRi3+BVRB/HayKnhR/Hfx50PoXeNGLhypVIqJmd5O0Uoh48NaDCipCqbWl+0YeJhBFsz8SbVeyp5A37818ZubNe/MIEf8o4vajDrDYEaxHoB6BKj1QTyFm1jKZ7KAQtB2gJID1RLRKOZaZvwB4C3BWSn6USiXHiMit0uk/TQ8dgXQ6vTIWazlIhEPMaPNjFBHeMeNGLNZ4s6ura8bPHC+ZUACZzPhOIjkCoP2HAn4lBN1zXX6uacvfrFiBz+rfmRmsdt2vGzSNeqXkPQBtKho0xSyGUqnuUS8DvcYDA9h2/jgznwegAXA0jYeTyeRTL0VqPJvN9rkuXQKgA3CJ6JRhxC/7mfsnmUAAlpUfAXgfgHkicdgwum8HVc7M5DgTQ8zyOoAmgO6YZnwo6Doled8ARc8r730SQuzW9e5nYZWqeY4zvlVKeR/AGiIaDhsJXwDFnH+gwi6EGKzW+BJ4EWJMpSOz2BVmT3gCFKvNa7VhicSBMGlTKVK2Pb6fWd4CMBWLNW4MWp08ASwrdwLABRV100wY1aTNn+ZaVs4ubuyTppm4GERHRQB1SDlOfkrVeWbuT6X8VZsgBpRVp7Q6J3Q93h7ksKsI8PKls0MIMarqvGkmNwc1LIi8ZWUn1DkhpdzZ06M/9Du3IoBlZa8CdEQInNH1xDm/i4aRc5zcaSlxFuBrppk86ncND4DccwBb/mb6lAzNZLJ9RJQG8MI0E721AngPYJ0QsTZd71C//9rnOIVWKWffAfhgmolWv4oqRsC289+YubmlJdbc0dEx73fRMHKFQqFpenp2jojmDCO+zO8a/zeAZeWinUKWFflNHPEyGvmDrPwqoWnc77dx8VtBSnLFRqf2VwmlINKXOQUQ+eu0goh0Q1PK00i3lCWIWjT1aq1iF/Zvm/pfIlHTZxXLyncS4Yqm8d5EIvExSBXzbCl/t1itH7ZsO/+YmQcATDY0YCAIRCiAsupUk6fFXC63dmEBTwB0BoUIDVCKTK0ed8NCVA0QJF+9ZMNALCkABVgOQURPDCO+rRL4kgMoQbgu3WXGMdOMT0YOwCvVyseXZATqAEE8sNiy9RSqR6BKD3wHQkYST0h2WaAAAAAASUVORK5CYII=",alt:"",class:"search-btn",onClick:d[1]||(d[1]=()=>At(r).push("/search"))}),w("div",U1,[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAYlJREFUaEPtmL9KA0EQxr/xjFooCnY2kkcwubAb4ivY2dpoLXY2FmKpWFrZiCAW8TEMZA/ufAcrGxujRQLxRvICuTvmziXHXLvz9/vNssMRFvyjBa8f2oBvgkpACQgV0BESCih2rz8B5+IrAOcA1sRyFQswBpburW2dzXPLJOBc/A1gvVjucqyJ6MuY9paogShKLpn5BMBKOWXljUJjItwa074TNZA3nS+7zBHyVVjevNpAXqWqslMCVSmbN64SyKtUVXb1JxBFyQUz+9iFfpj5utvt3IheYufiEYCNqkZgbnGEkTHhprSBFwCHPhoA+MHazrGogZnzYPC2EwT0r8tco/E7CcPwI0u4+l/iLAV8nysBJSBUQEdIKKDYvf4EhsPkgIhPAV4Vy1UowOyvRPBozN6z6CV2Lv4EsF0od3nGI2uFu1AUJa/MvF9eTUUi0ZO17SMRgX6fg2Yz3k3TxnKR1FLb6TSd9Hqt96w49b/EWQr4PlcCSkCogI6QUECxuxIQSygMsPAE/gDD3VExyB3P/wAAAABJRU5ErkJggg==",alt:"",class:"search-btn",onClick:d[2]||(d[2]=y=>e.value=!e.value)}),Sn(w("div",{class:"overlay fixed",onClick:d[3]||(d[3]=y=>e.value=!e.value)},null,512),[[jn,e.value]]),Sn(w("div",H1,[B(N1,{activeopt:e.value,"onUpdate:activeopt":d[4]||(d[4]=y=>e.value=y)},null,8,["activeopt"])],512),[[jn,e.value]])])]),_:1}),B(b,{loop:!1,duration:s.value?200:0,ref_key:"swipeRef",ref:o,class:"home-outer-swipe flex_auto","show-indicators":!1,onChange:f,"lazy-render":!1},{default:be(()=>[(le(!0),we(Xe,null,Ot(t.value,y=>(le(),vt(_,{key:y.name},{default:be(()=>[y.isMounted?(le(),we("div",V1,[(le(),vt(xu,null,[(le(),vt(Lu(Jr),{key:y.name,catInfo:y},null,8,["catInfo"]))],1024))])):An("",!0)]),_:2},1024))),128))]),_:1},8,["duration"])],64)}}}),G1=pt(j1,[["__scopeId","data-v-185d20a9"]]),z1={class:"home flex_direction-column relative"},K1=Fe({__name:"HomeLayout",setup(n){return(r,i)=>(le(),we("div",z1,[B(G1)]))}}),Y1=pt(K1,[["__scopeId","data-v-03e15f6c"]]),Q1="/logowee.png",W1={class:"episodes h_100_vh flex_direction-column"},X1={class:"flex_auto overflow-hidden"},q1={class:"load-box"},J1={class:"flex episodes_inner flex_direction-column"},Z1={class:"episodes_body flex_auto"},$1={class:"episode-list"},eS=["onClick"],tS={class:"van-multi-ellipsis--l2"},nS=Fe({__name:"EpisodesComp",props:{episodes:{}},setup(n){const r=ne(".index-body"),i=()=>{const t=document.querySelector(".detail"),e=document.querySelector(".episodes");t&&(t.style.display="block"),e&&(e.style.display="none")};return(t,e)=>(le(),we("div",null,[(le(),vt(tm,{to:r.value},[Sn(w("div",W1,[w("div",{class:"nav-bar relative van-hairline--bottom"},[w("div",{class:"left",onClick:i},e[0]||(e[0]=[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAXNJREFUaEPt2TtKBEEYReFzMZMBd+ASXIGBmhgaGbkDlyGGJgYuQBAjAzP3YOoCRMHcRMTEkoYOOpgHXfU/ZrArmWD6cb6qoXqgxYYPbXg/EyB7BacV+LcrUEqZAXfAEXAl6aJmMlJ+Qn38E7DfR/8CM0nfYxHhgDnxXfOLpL2x8d3xoYAF8a/AoaS3tQZ4xIetgFd8CMAz3h3gHe8KiIh3AyyJP5D0XrPbLDrHfBuNjDdfgeh4U0BGvBkgK94EkBnfDMiObwKsQ3wr4BE4GezP3b9K831+1TOj+jlQSvkCtgc3OJX0sOqG1t+3AG6A80HQJ3As6dk6ctn1WgBbwC1wlomoBnTRpZR0RBNgHRDNgGyECSATYQbIQpgCMhDmgGiECyAS4QaIQrgCIhDuAG9ECMATEQbwQoQCliA+gF1J3YuOUSMcsADxA+xI6j5HjRTAAHHZvyO7lnQ/qrw/OA1QEzvvnAlgNZO115lWoHbmrM77A89a2jFh78iUAAAAAElFTkSuQmCC",alt:"",class:"left-arrow"},null,-1)])),e[1]||(e[1]=w("div",{class:"center flex_auto"},[w("span",null,"")],-1)),e[2]||(e[2]=w("div",{class:"right"},null,-1))]),w("div",X1,[w("div",q1,[w("div",J1,[w("div",Z1,[w("ul",$1,[(le(!0),we(Xe,null,Ot(t.episodes,(s,a)=>(le(),we("li",{class:"",onClick:o=>t.$emit("toggle",a,s),key:a},[w("p",tS,He(s.episodeTitle),1)],8,eS))),128))])])])])])],512),[[jn,!1]])],8,["to"]))]))}}),iS=pt(nS,[["__scopeId","data-v-4d274c9c"]]);function Ff(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),i.push.apply(i,t)}return i}function gt(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Ff(Object(i),!0).forEach(function(t){j(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ff(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function Qt(n){"@babel/helpers - typeof";return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Qt(n)}function ve(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Nf(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,ug(t.key),t)}}function me(n,r,i){return r&&Nf(n.prototype,r),i&&Nf(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function j(n,r,i){return r=ug(r),r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function ke(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&nu(n,r)}function xe(n){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},xe(n)}function nu(n,r){return nu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nu(n,r)}function rS(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function M(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function qu(n,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M(n)}function Ie(n){var r=rS();return function(){var t=xe(n),e;if(r){var s=xe(this).constructor;e=Reflect.construct(t,arguments,s)}else e=t.apply(this,arguments);return qu(this,e)}}function sS(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=xe(n),n!==null););return n}function Be(){return typeof Reflect<"u"&&Reflect.get?Be=Reflect.get.bind():Be=function(r,i,t){var e=sS(r,i);if(e){var s=Object.getOwnPropertyDescriptor(e,i);return s.get?s.get.call(arguments.length<3?r:t):s.value}},Be.apply(this,arguments)}function kn(n){return aS(n)||oS(n)||lS(n)||uS()}function aS(n){if(Array.isArray(n))return iu(n)}function oS(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function lS(n,r){if(n){if(typeof n=="string")return iu(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return iu(n,r)}}function iu(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,t=new Array(r);i<r;i++)t[i]=n[i];return t}function uS(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cS(n,r){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var t=i.call(n,r);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function ug(n){var r=cS(n,"string");return typeof r=="symbol"?r:String(r)}function Ju(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var il={exports:{}},Uf;function fS(){return Uf||(Uf=1,function(n){var r=Object.prototype.hasOwnProperty,i="~";function t(){}Object.create&&(t.prototype=Object.create(null),new t().__proto__||(i=!1));function e(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,f,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new e(c,f||l,h),p=i?i+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],d]:l._events[p].push(d):(l._events[p]=d,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new t:delete l._events[u]}function o(){this._events=new t,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)r.call(c,f)&&u.push(i?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=i?i+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,p=new Array(d);h<d;h++)p[h]=f[h].fn;return p},o.prototype.listenerCount=function(u){var c=i?i+u:u,f=this._events[c];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,c,f,h,d,p){var v=i?i+u:u;if(!this._events[v])return!1;var g=this._events[v],_=arguments.length,b,y;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),_){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,f),!0;case 4:return g.fn.call(g.context,c,f,h),!0;case 5:return g.fn.call(g.context,c,f,h,d),!0;case 6:return g.fn.call(g.context,c,f,h,d,p),!0}for(y=1,b=new Array(_-1);y<_;y++)b[y-1]=arguments[y];g.fn.apply(g.context,b)}else{var m=g.length,S;for(y=0;y<m;y++)switch(g[y].once&&this.removeListener(u,g[y].fn,void 0,!0),_){case 1:g[y].fn.call(g[y].context);break;case 2:g[y].fn.call(g[y].context,c);break;case 3:g[y].fn.call(g[y].context,c,f);break;case 4:g[y].fn.call(g[y].context,c,f,h);break;default:if(!b)for(S=1,b=new Array(_-1);S<_;S++)b[S-1]=arguments[S];g[y].fn.apply(g[y].context,b)}}return!0},o.prototype.on=function(u,c,f){return s(this,u,c,f,!1)},o.prototype.once=function(u,c,f){return s(this,u,c,f,!0)},o.prototype.removeListener=function(u,c,f,h){var d=i?i+u:u;if(!this._events[d])return this;if(!c)return a(this,d),this;var p=this._events[d];if(p.fn)p.fn===c&&(!h||p.once)&&(!f||p.context===f)&&a(this,d);else{for(var v=0,g=[],_=p.length;v<_;v++)(p[v].fn!==c||h&&!p[v].once||f&&p[v].context!==f)&&g.push(p[v]);g.length?this._events[d]=g.length===1?g[0]:g:a(this,d)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=i?i+u:u,this._events[c]&&a(this,c)):(this._events=new t,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,n.exports=o}(il)),il.exports}var cg=fS();const Fr=Ju(cg);var hS=typeof window<"u"&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,rl={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},sl="%c[xgplayer]",Ye={config:{debug:hS?3:0},logInfo:function(r){for(var i,t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];this.config.debug>=3&&(i=console).log.apply(i,[sl,rl.info,r].concat(e))},logWarn:function(r){for(var i,t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];this.config.debug>=1&&(i=console).warn.apply(i,[sl,rl.warn,r].concat(e))},logError:function(r){var i;if(!(this.config.debug<1)){for(var t=this.config.debug>=2?"trace":"error",e=arguments.length,s=new Array(e>1?e-1:0),a=1;a<e;a++)s[a-1]=arguments[a];(i=console)[t].apply(i,[sl,rl.error,r].concat(s))}}};function dS(n){n.logInfo=Ye.logInfo.bind(n),n.logWarn=Ye.logWarn.bind(n),n.logError=Ye.logError.bind(n)}var pS=function(){function n(r){ve(this,n),this.bufferedList=r}return me(n,[{key:"start",value:function(i){return this.bufferedList[i].start}},{key:"end",value:function(i){return this.bufferedList[i].end}},{key:"length",get:function(){return this.bufferedList.length}}]),n}(),A={};A.createDom=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",e=document.createElement(n);return e.className=t,e.innerHTML=r,Object.keys(i).forEach(function(s){var a=s,o=i[s];n==="video"||n==="audio"||n==="live-video"?o&&e.setAttribute(a,o):e.setAttribute(a,o)}),e};A.createDomFromHtml=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";try{var t=document.createElement("div");t.innerHTML=n;var e=t.children;return t=null,e.length>0?(e=e[0],i&&A.addClass(e,i),r&&Object.keys(r).forEach(function(s){e.setAttribute(s,r[s])}),e):null}catch(s){return Ye.logError("util.createDomFromHtml",s),null}};A.hasClass=function(n,r){if(!n||!r)return!1;try{return Array.prototype.some.call(n.classList,function(t){return t===r})}catch{var i=n.className&&Qt(n.className)==="object"?n.getAttribute("class"):n.className;return i&&!!i.match(new RegExp("(\\s|^)"+r+"(\\s|$)"))}};A.addClass=function(n,r){if(!(!n||!r))try{r.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(i){i&&n.classList.add(i)})}catch{A.hasClass(n,r)||(n.className&&Qt(n.className)==="object"?n.setAttribute("class",n.getAttribute("class")+" "+r):n.className+=" "+r)}};A.removeClass=function(n,r){if(!(!n||!r))try{r.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(i){i&&n.classList.remove(i)})}catch{A.hasClass(n,r)&&r.split(/\s+/g).forEach(function(t){var e=new RegExp("(\\s|^)"+t+"(\\s|$)");n.className&&Qt(n.className)==="object"?n.setAttribute("class",n.getAttribute("class").replace(e," ")):n.className=n.className.replace(e," ")})}};A.toggleClass=function(n,r){n&&r.split(/\s+/g).forEach(function(i){A.hasClass(n,i)?A.removeClass(n,i):A.addClass(n,i)})};A.classNames=function(){for(var n=arguments,r=[],i=function(s){A.typeOf(n[s])==="String"?r.push(n[s]):A.typeOf(n[s])==="Object"&&Object.keys(n[s]).map(function(a){n[s][a]&&r.push(a)})},t=0;t<arguments.length;t++)i(t);return r.join(" ")};A.findDom=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,r=arguments.length>1?arguments[1]:void 0,i;try{i=n.querySelector(r)}catch(t){Ye.logError("util.findDom",t),r.indexOf("#")===0&&(i=n.getElementById(r.slice(1)))}return i};A.getCss=function(n,r){return n.currentStyle?n.currentStyle[r]:document.defaultView.getComputedStyle(n,!1)[r]};A.padStart=function(n,r,i){for(var t=String(i),e=r>>0,s=Math.ceil(e/t.length),a=[],o=String(n);s--;)a.push(t);return a.join("").substring(0,e-o.length)+o};A.format=function(n){if(window.isNaN(n))return"";n=Math.round(n);var r=A.padStart(Math.floor(n/3600),2,0),i=A.padStart(Math.floor((n-r*3600)/60),2,0),t=A.padStart(Math.floor(n-r*3600-i*60),2,0);return(r==="00"?[i,t]:[r,i,t]).join(":")};A.event=function(n){if(n.touches){var r=n.touches[0]||n.changedTouches[0];n.clientX=r.clientX||0,n.clientY=r.clientY||0,n.offsetX=r.pageX-r.target.offsetLeft,n.offsetY=r.pageY-r.target.offsetTop}n._target=n.target||n.srcElement};A.typeOf=function(n){return Object.prototype.toString.call(n).match(/([^\s.*]+)(?=]$)/g)[0]};A.deepCopy=function(n,r){if(A.typeOf(r)==="Object"&&A.typeOf(n)==="Object")return Object.keys(r).forEach(function(i){A.typeOf(r[i])==="Object"&&!(r[i]instanceof Node)?n[i]===void 0||n[i]===void 0?n[i]=r[i]:A.deepCopy(n[i],r[i]):A.typeOf(r[i])==="Array"?n[i]=A.typeOf(n[i])==="Array"?n[i].concat(r[i]):r[i]:n[i]=r[i]}),n};A.deepMerge=function(n,r){return Object.keys(r).map(function(i){if(A.typeOf(r[i])==="Array"&&A.typeOf(n[i])==="Array"){if(A.typeOf(n[i])==="Array"){var t;(t=n[i]).push.apply(t,kn(r[i]))}}else A.typeOf(n[i])===A.typeOf(r[i])&&n[i]!==null&&A.typeOf(n[i])==="Object"&&!(r[i]instanceof window.Node)?A.deepMerge(n[i],r[i]):r[i]!==null&&(n[i]=r[i])}),n};A.getBgImage=function(n){var r=(n.currentStyle||window.getComputedStyle(n,null)).backgroundImage;if(!r||r==="none")return"";var i=document.createElement("a");return i.href=r.replace(/url\("|"\)/g,""),i.href};A.copyDom=function(n){if(n&&n.nodeType===1){var r=document.createElement(n.tagName);return Array.prototype.forEach.call(n.attributes,function(i){r.setAttribute(i.name,i.value)}),n.innerHTML&&(r.innerHTML=n.innerHTML),r}else return""};A.setInterval=function(n,r,i,t){n._interval[r]||(n._interval[r]=window.setInterval(i.bind(n),t))};A.clearInterval=function(n,r){clearInterval(n._interval[r]),n._interval[r]=null};A.setTimeout=function(n,r,i){n._timers||(n._timers=[]);var t=setTimeout(function(){r(),A.clearTimeout(n,t)},i);return n._timers.push(t),t};A.clearTimeout=function(n,r){var i=n._timers;if(A.typeOf(i)==="Array"){for(var t=0;t<i.length;t++)if(i[t]===r){i.splice(t,1),clearTimeout(r);break}}else clearTimeout(r)};A.clearAllTimers=function(n){var r=n._timers;A.typeOf(r)==="Array"&&(r.map(function(i){clearTimeout(i)}),n._timerIds=[])};A.createImgBtn=function(n,r,i,t){var e=A.createDom("xg-".concat(n),"",{},"xgplayer-".concat(n,"-img"));if(e.style.backgroundImage='url("'.concat(r,'")'),i&&t){var s,a,o;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(l){return i.indexOf(l)>-1&&t.indexOf(l)>-1?(s=parseFloat(i.slice(0,i.indexOf(l)).trim()),a=parseFloat(t.slice(0,t.indexOf(l)).trim()),o=l,!1):!0}),e.style.width="".concat(s).concat(o),e.style.height="".concat(a).concat(o),e.style.backgroundSize="".concat(s).concat(o," ").concat(a).concat(o),n==="start"?e.style.margin="-".concat(a/2).concat(o," auto auto -").concat(s/2).concat(o):e.style.margin="auto 5px auto 5px"}return e};A.Hex2RGBA=function(n,r){var i=[];if(/^\#[0-9A-F]{3}$/i.test(n)){var t="#";n.replace(/[0-9A-F]/ig,function(e){t+=e+e}),n=t}return/^#[0-9A-F]{6}$/i.test(n)?(n.replace(/[0-9A-F]{2}/ig,function(e){i.push(parseInt(e,16))}),"rgba(".concat(i.join(","),", ").concat(r,")")):"rgba(255, 255, 255, 0.1)"};A.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement};A.checkIsFunction=function(n){return n&&typeof n=="function"};A.checkIsObject=function(n){return n!==null&&Qt(n)==="object"};A.hide=function(n){n.style.display="none"};A.show=function(n,r){n.style.display=r||"block"};A.isUndefined=function(n){if(typeof n>"u"||n===null)return!0};A.isNotNull=function(n){return n!=null};A.setStyleFromCsstext=function(n,r){if(r)if(A.typeOf(r)==="String"){var i=r.replace(/\s+/g,"").split(";");i.map(function(t){if(t){var e=t.split(":");e.length>1&&(n.style[e[0]]=e[1])}})}else Object.keys(r).map(function(t){n.style[t]=r[t]})};function gS(n,r){for(var i=0,t=r.length;i<t;i++)if(n.indexOf(r[i])>-1)return!0;return!1}A.filterStyleFromText=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],i=n.style.cssText;if(!i)return{};var t=i.replace(/\s+/g,"").split(";"),e={},s={};return t.map(function(a){if(a){var o=a.split(":");o.length>1&&(gS(o[0],r)?e[o[0]]=o[1]:s[o[0]]=o[1])}}),n.setAttribute("style",""),Object.keys(s).map(function(a){n.style[a]=s[a]}),e};A.getStyleFromCsstext=function(n){var r=n.style.cssText;if(!r)return{};var i=r.replace(/\s+/g,"").split(";"),t={};return i.map(function(e){if(e){var s=e.split(":");s.length>1&&(t[s[0]]=s[1])}}),t};A.preloadImg=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(n){var t=new window.Image;t.onload=function(e){t=null,r&&r(e)},t.onerror=function(e){t=null,i&&i(e)},t.src=n}};A.stopPropagation=function(n){n&&n.stopPropagation()};A.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0};A.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};A.checkTouchSupport=function(){return"ontouchstart"in window};A.getBuffered2=function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,i=[],t=0;t<n.length;t++)i.push({start:n.start(t)<.5?0:n.start(t),end:n.end(t)});i.sort(function(l,u){var c=l.start-u.start;return c||u.end-l.end});var e=[];if(r)for(var s=0;s<i.length;s++){var a=e.length;if(a){var o=e[a-1].end;i[s].start-o<r?i[s].end>o&&(e[a-1].end=i[s].end):e.push(i[s])}else e.push(i[s])}else e=i;return new pS(e)};A.getEventPos=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return n.touches&&n.touches.length>0&&(n=n.touches[0]),{x:n.x/r,y:n.y/r,clientX:n.clientX/r,clientY:n.clientY/r,offsetX:n.offsetX/r,offsetY:n.offsetY/r,pageX:n.pageX/r,pageY:n.pageY/r}};A.requestAnimationFrame=function(n){var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(r)return r(n)};A.getHostFromUrl=function(n){if(A.typeOf(n)!=="String")return"";var r=n.split("/"),i="";return r.length>3&&r[2]&&(i=r[2]),i};A.cancelAnimationFrame=function(n){var r=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;r&&r(n)};A.isMSE=function(n){return n.media&&(n=n.media),!n||!(n instanceof HTMLMediaElement)?!1:/^blob/.test(n.currentSrc)||/^blob/.test(n.src)};A.isBlob=function(n){return typeof n=="string"&&/^blob/.test(n)};A.generateSessionId=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=new Date().getTime();try{n=parseInt(n)}catch{n=0}r+=n,window.performance&&typeof window.performance.now=="function"&&(r+=parseInt(window.performance.now()));var i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(r+Math.random()*16)%16|0;return r=Math.floor(r/16),(t==="x"?e:e&3|8).toString(16)});return i};A.createEvent=function(n){var r;return typeof window.Event=="function"?r=new Event(n):(r=document.createEvent("Event"),r.initEvent(n,!0,!0)),r};A.adjustTimeByDuration=function(n,r,i){return!r||!n?n:n>r||i&&n<r?r:n};A.createPositionBar=function(n,r){var i=A.createDom("xg-bar","",{"data-index":-1},n);return r.appendChild(i),i};A.getTransformStyle=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{x:0,y:0,scale:1,rotate:0},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i={scale:"".concat(n.scale||1),translate:"".concat(n.x||0,"%, ").concat(n.y||0,"%"),rotate:"".concat(n.rotate||0,"deg")},t=Object.keys(i);return t.forEach(function(e){var s=new RegExp("".concat(e,"\\([^\\(]+\\)"),"g"),a="".concat(e,"(").concat(i[e],")");s.test(r)?(s.lastIndex=-1,r=r.replace(s,a)):r+="".concat(a," ")}),r};A.convertDeg=function(n){return Math.abs(n)<=1?n*360:n%360};A.getIndexByTime=function(n,r){var i=r.length,t=-1;if(i<1)return t;if(n<=r[0].end||i<2)t=0;else if(n>r[i-1].end)t=i-1;else for(var e=1;e<i;e++)if(n>r[e-1].end&&n<=r[e].end){t=e;break}return t};A.getOffsetCurrentTime=function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,t=-1;if(i>=0&&i<r.length?t=i:t=A.getIndexByTime(n,r),t<0)return-1;var e=r.length,s=r[t],a=s.start,o=s.end,l=s.cTime,u=s.offset;return n<a?l:n>=a&&n<=o?n-u:n>o&&t>=e-1?o:-1};A.getCurrentTimeByOffset=function(n,r){var i=-1;if(!r||r.length<0)return n;for(var t=0;t<r.length;t++)if(n<=r[t].duration){i=t;break}if(i!==-1){var e=r[i].start;return i-1<0?e+n:e+(n-r[i-1].duration)}return n};function fg(n){var r=Qt(n);return n!==null&&(r==="object"||r==="function")}function vS(n,r,i){var t,e,s,a,o,l,u=0,c=!1,f=!1,h=!0,d=!r&&r!==0&&typeof window.requestAnimationFrame=="function";if(typeof n!="function")throw new TypeError("Expected a function");r=+r||0,fg(i)&&(c=!!i.leading,f="maxWait"in i,s=f?Math.max(+i.maxWait||0,r):s,h="trailing"in i?!!i.trailing:h);function p(H){var ie=t,E=e;return t=e=void 0,u=H,a=n.apply(E,ie),a}function v(H,ie){return d?(window.cancelAnimationFrame(o),window.requestAnimationFrame(H)):setTimeout(H,ie)}function g(H){if(d)return window.cancelAnimationFrame(H);clearTimeout(H)}function _(H){return u=H,o=v(m,r),c?p(H):a}function b(H){var ie=H-l,E=H-u,T=r-ie;return f?Math.min(T,s-E):T}function y(H){var ie=H-l,E=H-u;return l===void 0||ie>=r||ie<0||f&&E>=s}function m(){var H=Date.now();if(y(H))return S(H);o=v(m,b(H))}function S(H){return o=void 0,h&&t?p(H):(t=e=void 0,a)}function I(){o!==void 0&&g(o),u=0,t=l=e=o=void 0}function R(){return o===void 0?a:S(Date.now())}function N(){return o!==void 0}function G(){for(var H=Date.now(),ie=y(H),E=arguments.length,T=new Array(E),P=0;P<E;P++)T[P]=arguments[P];if(t=T,e=this,l=H,ie){if(o===void 0)return _(l);if(f)return o=v(m,r),p(l)}return o===void 0&&(o=v(m,r)),a}return G.cancel=I,G.flush=R,G.pending=N,G}function mS(n,r,i){var t=!0,e=!0;if(typeof n!="function")throw new TypeError("Expected a function");return fg(i)&&(t="leading"in i?!!i.leading:t,e="trailing"in i?!!i.trailing:e),vS(n,r,{leading:t,trailing:e,maxWait:r})}function yS(){var n=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return n==="zh-cn"&&(n="zh"),n}function AS(n,r,i){if(n){var t=n.getAttribute(i);return!!(t&&t===r&&(n.tagName==="VIDEO"||n.tagName==="AUDIO"))}}var Hf={android:/(Android)\s([\d.]+)/,ios:/(Version)\/([\d.]+)/},_S=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],je={get device(){var n=je.os;return n.isPc?"pc":"mobile"},get browser(){if(typeof navigator>"u")return"";var n=navigator.userAgent.toLowerCase(),r={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(r).filter(function(i){return r[i].test(n)}))[0]},get os(){if(typeof navigator>"u")return{};var n=navigator.userAgent,r=/(?:Windows Phone)/.test(n),i=/(?:SymbianOS)/.test(n)||r,t=/(?:Tizen)/ig.test(n),e=/(?:Web0S)/ig.test(n),s=/(?:Android)/.test(n),a=/(?:Firefox)/.test(n),o=/(?:iPad|PlayBook)/.test(n)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,l=o||s&&!/(?:Mobile)/.test(n)||a&&/(?:Tablet)/.test(n),u=/(?:iPhone)/.test(n)&&!l,c=!u&&!s&&!i&&!l;return{isTablet:l,isPhone:u,isIpad:o,isIos:u||o,isAndroid:s,isPc:c,isSymbian:i,isWindowsPhone:r,isFireFox:a,isTizen:t,isWebOS:e}},get osVersion(){if(typeof navigator>"u")return 0;var n=navigator.userAgent,r="";/(?:iPhone)|(?:iPad|PlayBook)/.test(n)?r=Hf.ios:r=Hf.android;var i=r?r.exec(n):[];if(i&&i.length>=3){var t=i[2].split(".");return t.length>0?parseInt(t[0]):0}return 0},get isWeixin(){if(typeof navigator>"u")return!1;var n=/(micromessenger)\/([\d.]+)/,r=n.exec(navigator.userAgent.toLocaleLowerCase());return!!r},isSupportMP4:function(){var r={isSupport:!1,mime:""};if(typeof document>"u")return r;if(this.supportResult)return this.supportResult;var i=document.createElement("video");return typeof i.canPlayType=="function"&&_S.map(function(t){i.canPlayType('video/mp4; codecs="'.concat(t,'"'))==="probably"&&(r.isSupport=!0,r.mime+="||".concat(t))}),this.supportResult=r,i=null,r},isMSESupport:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if(typeof MediaSource>"u"||!MediaSource)return!1;try{return MediaSource.isTypeSupported(r)}catch(i){return this._logger.error(r,i),!1}},isHevcSupported:function(){return typeof MediaSource>"u"||!MediaSource.isTypeSupported?!1:MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"')},probeConfigSupported:function(r){var i={supported:!1,smooth:!1,powerEfficient:!1};if(!r||typeof navigator>"u")return Promise.resolve(i);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(r);var t=r.video||{},e=r.audio||{};try{var s=MediaSource.isTypeSupported(t.contentType),a=MediaSource.isTypeSupported(e.contentType);return Promise.resolve({supported:s&&a,smooth:!1,powerEfficient:!1})}catch{return Promise.resolve(i)}}},ru="3.0.23",Vf={1:"media",2:"media",3:"media",4:"media",5:"media",6:"media"},jf={1:5101,2:5102,3:5103,4:5104,5:5105,6:5106},ys=me(function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};ve(this,n);var t=r&&r.i18n?r.i18n.ERROR_TYPES:null;if(r.media){var e=i.mediaError?i.mediaError:r.media.error||{},s=r.duration,a=r.currentTime,o=r.ended,l=r.src,u=r.currentSrc,c=r.media,f=c.readyState,h=c.networkState,d=i.errorCode||e.code;jf[d]&&(d=jf[d]);var p={playerVersion:ru,currentTime:a,duration:s,ended:o,readyState:f,networkState:h,src:l||u,errorType:i.errorType,errorCode:d,message:i.errorMessage||e.message,mediaError:e,originError:i.originError?i.originError.stack:"",host:A.getHostFromUrl(l||u)};return i.ext&&Object.keys(i.ext).map(function(b){p[b]=i.ext[b]}),p}else if(arguments.length>1){for(var v={playerVersion:ru,domain:document.domain},g=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],_=0;_<arguments.length;_++)v[g[_]]=arguments[_];return v.ex=t?(t[arguments[0]]||{}).msg:"",v}}),gn="play",Zu="playing",Ji="ended",Nr="pause",Ur="error",Co="seeking",ei="seeked",dn="timeupdate",Us="waiting",Zn="canplay",bS="canplaythrough",ci="durationchange",hg="volumechange",si="loadeddata",SS="loadedmetadata",dg="ratechange",pg="progress",$u="loadstart",Zi="emptied",ES="stalled",wS="suspend",CS="abort",TS="bufferedChange",ec="focus",gg="blur",tc="ready",vg="urlNull",ji="autoplay_started",nc="autoplay_was_prevented",To="complete",Oa="replay",ko="destroy",Hs="urlchange",su="download_speed_change",mg="leaveplayer",yg="enterplayer",Ag="loading",Cn="fullscreen_change",La="cssFullscreen_change",Ba="mini_state_change",ic="definition_change",kS="before_definition_change",au="after_definition_change",IS="SEI_PARSED",RS="retry",Ti="video_resize",ou="pip_change",_g="rotate",bg="screenShot",Ma="playnext",Sg="shortcut",Eg="xglog",Fa="user_action",Io="reset",wg="source_error",Cg="source_success",Tg="switch_subtitle",kg=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadedmetadata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],Ig={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},Rg="fps_stuck";const PS=Object.freeze(Object.defineProperty({__proto__:null,ABORT:CS,AFTER_DEFINITION_CHANGE:au,AUTOPLAY_PREVENTED:nc,AUTOPLAY_STARTED:ji,BEFORE_DEFINITION_CHANGE:kS,BUFFER_CHANGE:TS,CANPLAY:Zn,CANPLAY_THROUGH:bS,COMPLETE:To,CSS_FULLSCREEN_CHANGE:La,DEFINITION_CHANGE:ic,DESTROY:ko,DOWNLOAD_SPEED_CHANGE:su,DURATION_CHANGE:ci,EMPTIED:Zi,ENDED:Ji,ENTER_PLAYER:yg,ERROR:Ur,FPS_STUCK:Rg,FULLSCREEN_CHANGE:Cn,LEAVE_PLAYER:mg,LOADED_DATA:si,LOADED_METADATA:SS,LOADING:Ag,LOAD_START:$u,MINI_STATE_CHANGE:Ba,PAUSE:Nr,PIP_CHANGE:ou,PLAY:gn,PLAYER_BLUR:gg,PLAYER_FOCUS:ec,PLAYING:Zu,PLAYNEXT:Ma,PROGRESS:pg,RATE_CHANGE:dg,READY:tc,REPLAY:Oa,RESET:Io,RETRY:RS,ROTATE:_g,SCREEN_SHOT:bg,SEEKED:ei,SEEKING:Co,SEI_PARSED:IS,SHORTCUT:Sg,SOURCE_ERROR:wg,SOURCE_SUCCESS:Cg,STALLED:ES,STATS_EVENTS:Ig,SUSPEND:wS,SWITCH_SUBTITLE:Tg,TIME_UPDATE:dn,URL_CHANGE:Hs,URL_NULL:vg,USER_ACTION:Fa,VIDEO_EVENTS:kg,VIDEO_RESIZE:Ti,VOLUME_CHANGE:hg,WAITING:Us,XGLOG:Eg},Symbol.toStringTag,{value:"Module"}));function al(n,r){!this||!this.emit||(n==="error"?this.errorHandler(n,r.error):this.emit(n,r))}function xS(n,r){return function(i,t){var e={player:r,eventName:n,originalEvent:i,detail:i.detail||{},timeStamp:i.timeStamp,currentTime:r.currentTime,duration:r.duration,paused:r.paused,ended:r.ended,isInternalOp:!!r._internalOp[i.type],muted:r.muted,volume:r.volume,host:A.getHostFromUrl(r.currentSrc),vtype:r.vtype};if(r.removeInnerOP(i.type),n==="timeupdate"&&(r._currentTime=r.media&&r.media.currentTime),n==="ratechange"){var s=r.media?r.media.playbackRate:0;if(s&&r._rate===s)return;r._rate=r.media&&r.media.playbackRate}if(n==="durationchange"&&(r._duration=r.media.duration),n==="volumechange"&&(e.isMutedChange=r._lastMuted!==r.muted,r._lastMuted=r.muted),n==="error"&&(e.error=t||r.video.error),r.mediaEventMiddleware[n]){var a=al.bind(r,n,e);try{r.mediaEventMiddleware[n].call(r,e,a)}catch(o){throw al.call(r,n,e),o}}else al.call(r,n,e)}}var DS=function(n){ke(i,n);var r=Ie(i);function i(t){var e;ve(this,i),e=r.call(this,t),e._hasStart=!1,e._currentTime=0,e._duration=0,e._internalOp={},e._lastMuted=!1,e.vtype="MP4",e._rate=-1,e.mediaConfig=Object.assign({},{controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"x5-playsinline":t.playsinline,"webkit-playsinline":t.playsinline,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:t.tabindex|0,mediaType:t.mediaType||"video","data-index":-1},t.videoConfig,t.videoAttributes);var s=t["x5-video-player-type"]||t.x5VideoPlayerType;return je.isWeixin&&je.os.isAndroid&&s&&(e.mediaConfig["x5-video-player-type"]=s,delete e.mediaConfig.playsinline,delete e.mediaConfig["webkit-playsinline"],delete e.mediaConfig["x5-playsinline"]),t.loop&&(e.mediaConfig.loop="loop"),t.autoplayMuted&&!Object.prototype.hasOwnProperty.call(e.mediaConfig,"muted")&&(e.mediaConfig.muted=!0),e.media=t.mediaEl instanceof HTMLMediaElement?t.mediaEl:typeof t.mediaEl=="function"?t.mediaEl(e.mediaConfig):A.createDom(e.mediaConfig.mediaType,"",e.mediaConfig,""),t.defaultPlaybackRate&&(e.media.defaultPlaybackRate=e.media.playbackRate=t.defaultPlaybackRate),A.typeOf(t.volume)==="Number"&&(e.volume=t.volume),t.autoplayMuted&&(e.media.muted=!0,e._lastMuted=!0),t.autoplay&&(e.media.autoplay=!0),t.playsinline&&(e.media.playsinline=!0),e._interval={},e.mediaEventMiddleware={},e.attachVideoEvents(),e}return me(i,[{key:"setEventsMiddleware",value:function(e){var s=this;Object.keys(e).map(function(a){s.mediaEventMiddleware[a]=e[a]})}},{key:"removeEventsMiddleware",value:function(e){var s=this;Object.keys(e).map(function(a){delete s.mediaEventMiddleware[a]})}},{key:"attachVideoEvents",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers||(this._evHandlers=kg.map(function(a){var o="on".concat(a.charAt(0).toUpperCase()).concat(a.slice(1));return typeof e[o]=="function"&&e.on(a,e[o]),j({},a,xS(a,e))})),this._evHandlers.forEach(function(a){var o=Object.keys(a)[0];s.addEventListener(o,a[o],!1)})}},{key:"detachVideoEvents",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers.forEach(function(a){var o=Object.keys(a)[0];s.removeEventListener(o,a[o],!1)}),this._evHandlers.forEach(function(a){var o=Object.keys(a)[0],l="on".concat(o.charAt(0).toUpperCase()).concat(o.slice(1));typeof e[l]=="function"&&e.off(o,e[l])}),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,s){var a=this;e.removeAttribute("src"),e.load(),s.forEach(function(f,h){a.media.appendChild(A.createDom("source","",{src:"".concat(f.src),type:"".concat(f.type||""),"data-index":h+1}))});var o=e.children;if(o){this._videoSourceCount=o.length,this._videoSourceIndex=o.length,this._vLoadeddata=function(f){a.emit(Cg,{src:f.target.currentSrc,host:A.getHostFromUrl(f.target.currentSrc)})};for(var l=null,u=0;u<this._evHandlers.length;u++)if(Object.keys(this._evHandlers[u])[0]==="error"){l=this._evHandlers[u];break}!this._sourceError&&(this._sourceError=function(f){var h=parseInt(f.target.getAttribute("data-index"),10);if(a._videoSourceIndex--,a._videoSourceIndex===0||h>=a._videoSourceCount){var d={code:4,message:"sources_load_error"};l?l.error(f,d):a.errorHandler("error",d)}var p=Vf[4];a.emit(wg,new ys(a,{errorType:p,errorCode:4,errorMessage:"sources_load_error",mediaError:{code:4,message:"sources_load_error"},src:f.target.src}))});for(var c=0;c<o.length;c++)o[c].addEventListener("error",this._sourceError);e.addEventListener("loadeddata",this._vLoadeddata)}}},{key:"_detachSourceEvents",value:function(e){var s=e.children;if(!(!s||s.length===0||!this._sourceError)){for(var a=0;a<s.length;a++)s[a].removeEventListener("error",this._sourceError);for(;s.length>0;)e.removeChild(s[0]);this._vLoadeddata&&e.removeEventListener("loadeddata",this._vLoadeddata)}}},{key:"errorHandler",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.media&&(this.media.error||s)){var a=this.media.error||s,o=a.code?Vf[a.code]:"other",l=a.message;this.media.currentSrc||this.media.srcObject||(l="empty_src",a={code:6,message:l}),this.emit(e,new ys(this,{errorType:o,errorCode:a.code,errorMessage:a.message||"",mediaError:a}))}}},{key:"destroy",value:function(){this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null;for(var e in this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media},set:function(e){this.media=e}},{key:"play",value:function(){var e=this.media?this.media.play():null;return e}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return this.media?this.media.canPlayType(e):!1}},{key:"getBufferedRange",value:function(e){var s=[0,0];if(!this.media)return s;e||(e=this.media.buffered);var a=this.media.currentTime;if(e)for(var o=0,l=e.length;o<l&&(s[0]=e.start(o),s[1]=e.end(o),!(s[0]<=a&&a<=s[1]));o++);return s[0]-a<=0&&a-s[1]<=0?s:[0,0]}},{key:"autoplay",get:function(){return this.media?this.media.autoplay:!1},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?A.getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.media)return e;var s=this.media.buffered;if(!s||s.length===0)return e;for(var a=0;a<s.length;a++)if((s.start(a)<=this.currentTime||s.start(a)<.1)&&s.end(a)>=this.currentTime)return{start:s.start(a),end:s.end(a)};return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?this.media.currentTime!==void 0?this.media.currentTime:this._currentTime:0},set:function(e){this.media&&(this.media.currentTime=e)}},{key:"defaultMuted",get:function(){return this.media?this.media.defaultMuted:!1},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this.media?this.media.ended:!1}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){var e=this.media.error;if(!e)return"";var s=["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];return s[this.media.error.code-1]}},{key:"loop",get:function(){return this.media?this.media.loop:!1},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return this.media?this.media.muted:!1},set:function(e){!this.media||this.media.muted===e||(this._lastMuted=this.media.muted,this.media.muted=e)}},{key:"networkState",get:function(){return this.media.networkState}},{key:"paused",get:function(){return this.media?this.media.paused:!0}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){!this.media||e===1/0||(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return this.media?this.media.preload:!1},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return this.media?this.media.seekable:!1}},{key:"seeking",get:function(){return this.media?this.media.seeking:!1}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){if(this.media){if(this.emit(Hs,e),this.emit(Us),this._currentTime=0,this._duration=0,A.isMSE(this.media)){this.onWaiting();return}this._detachSourceEvents(this.media),A.typeOf(e)==="Array"?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()}}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){e===1/0||!this.media||(this.media.volume=e)}},{key:"aspectRatio",get:function(){return this.media?this.media.videoWidth/this.media.videoHeight:0}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,s){for(var a,o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];(a=Be(xe(i.prototype),"emit",this)).call.apply(a,[this,e,s].concat(l))}},{key:"on",value:function(e,s){for(var a,o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];(a=Be(xe(i.prototype),"on",this)).call.apply(a,[this,e,s].concat(l))}},{key:"once",value:function(e,s){for(var a,o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];(a=Be(xe(i.prototype),"once",this)).call.apply(a,[this,e,s].concat(l))}},{key:"off",value:function(e,s){for(var a,o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];(a=Be(xe(i.prototype),"off",this)).call.apply(a,[this,e,s].concat(l))}},{key:"offAll",value:function(){Be(xe(i.prototype),"removeAllListeners",this).call(this)}}]),i}(Fr),OS=function(){function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};ve(this,n),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=r}return me(n,[{key:"openDB",value:function(i){var t=this,e=this,s=this.myDB.version||1,a=e.indexedDB.open(e.myDB.name,s);a.onerror=function(o){},a.onsuccess=function(o){t.myDB.db=o.target.result,i.call(e)},a.onupgradeneeded=function(o){var l=o.target.result;o.target.transaction,l.objectStoreNames.contains(e.myDB.ojstore.name)||l.createObjectStore(e.myDB.ojstore.name,{keyPath:e.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){var i=this;i.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(i,t){for(var e=this.myDB.db.transaction(i,"readwrite").objectStore(i),s,a=0;a<t.length;a++)s=e.add(t[a]),s.onerror=function(){},s.onsuccess=function(){}}},{key:"putData",value:function(i,t){for(var e=this.myDB.db.transaction(i,"readwrite").objectStore(i),s,a=0;a<t.length;a++)s=e.put(t[a]),s.onerror=function(){},s.onsuccess=function(){}}},{key:"getDataByKey",value:function(i,t,e){var s=this,a=this.myDB.db.transaction(i,"readwrite").objectStore(i),o=a.get(t);o.onerror=function(){e.call(s,null)},o.onsuccess=function(l){var u=l.target.result;e.call(s,u)}}},{key:"deleteData",value:function(i,t){var e=this.myDB.db.transaction(i,"readwrite").objectStore(i);e.delete(t)}},{key:"clearData",value:function(i){var t=this.myDB.db.transaction(i,"readwrite").objectStore(i);t.clear()}}]),n}(),Gf=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],zf=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Kf=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],gi="data-xgplayerid";function Zs(n,r,i){for(var t=arguments.length,e=new Array(t>3?t-3:0),s=3;s<t;s++)e[s-3]=arguments[s];var a=r.call.apply(r,[n].concat(e));!i||typeof i!="function"||(a&&a.then?a.then(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];i.call.apply(i,[n].concat(l))}):i.call.apply(i,[n].concat(e)))}function Na(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[n]&&(this.__hooks[n]=null),(function(){var t=arguments,e=this;if(i.pre)try{var s;(s=i.pre).call.apply(s,[this].concat(Array.prototype.slice.call(arguments)))}catch(o){throw o.message="[pluginName: ".concat(this.pluginName,":").concat(n,":pre error] >> ").concat(o.message),o}if(this.__hooks&&this.__hooks[n])try{var a=Un.apply(void 0,[this,n,r].concat(Array.prototype.slice.call(arguments)));a?a.then?a.then(function(o){o!==!1&&Zs.apply(void 0,[e,r,i.next].concat(kn(t)))}).catch(function(o){throw o}):Zs.apply(void 0,[this,r,i.next].concat(Array.prototype.slice.call(arguments))):a===void 0&&Zs.apply(void 0,[this,r,i.next].concat(Array.prototype.slice.call(arguments)))}catch(o){throw o.message="[pluginName: ".concat(this.pluginName,":").concat(n,"] >> ").concat(o.message),o}else Zs.apply(void 0,[this,r,i.next].concat(Array.prototype.slice.call(arguments)))}).bind(this)}function Pg(n,r){var i=this.__hooks;if(!i||!Array.isArray(i[n]))return-1;for(var t=i[n],e=0;e<t.length;e++)if(t[e]===r)return e;return-1}function Ua(n,r){var i=this.__hooks;if(i)return i.hasOwnProperty(n)?(Array.isArray(i[n])||(i[n]=[]),Pg.call(this,n,r)===-1&&i[n].push(r),!0):(console.warn("has no supported hook which name [".concat(n,"]")),!1)}function Ha(n,r){var i=this.__hooks;if(i)if(Array.isArray(i[n])){var t=i[n],e=Pg.call(this,n,r);e!==-1&&t.splice(e,1)}else i[n]&&(i[n]=null)}function Yf(n){if(!(!this.plugins||!this.plugins[n.toLowerCase()])){for(var r=this.plugins[n.toLowerCase()],i=arguments.length,t=new Array(i>1?i-1:0),e=1;e<i;e++)t[e-1]=arguments[e];return r.useHooks&&r.useHooks.apply(r,t)}}function Qf(n){if(!(!this.plugins||!this.plugins[n.toLowerCase()])){var r=this.plugins[n.toLowerCase()];if(r){for(var i=arguments.length,t=new Array(i>1?i-1:0),e=1;e<i;e++)t[e-1]=arguments[e];return r.removeHooks&&r.removeHooks.apply(r,t)}}}function xg(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];n.__hooks={},r&&r.map(function(i){n.__hooks[i]=null}),Object.defineProperty(n,"hooks",{get:function(){return n.__hooks&&Object.keys(n.__hooks).map(function(t){if(n.__hooks[t])return t})}})}function Dg(n){n.__hooks=null}function Un(n,r,i){for(var t=arguments.length,e=new Array(t>3?t-3:0),s=3;s<t;s++)e[s-3]=arguments[s];if(n.__hooks&&Array.isArray(n.__hooks[r])){var a=n.__hooks[r],o=-1,l=function u(c,f,h){for(var d=arguments.length,p=new Array(d>3?d-3:0),v=3;v<d;v++)p[v-3]=arguments[v];if(o++,a.length===0||o===a.length)return h.call.apply(h,[c,c].concat(p));var g=a[o],_=g.call.apply(g,[c,c].concat(p));if(_&&_.then)return _.then(function(b){return b===!1?null:u.apply(void 0,[c,f,h].concat(p))}).catch(function(b){console.warn("[runHooks]".concat(f," reject"),b.message)});if(_!==!1)return u.apply(void 0,[c,f,h].concat(p));if(_===!1)return!1};return l.apply(void 0,[n,r,i].concat(e))}else return i.call.apply(i,[n,n].concat(e))}function ol(n,r){Ye.logError("[".concat(n,"] event or callback cant be undefined or null when call ").concat(r))}var zn=function(){function n(r){ve(this,n),A.checkIsFunction(this.beforeCreate)&&this.beforeCreate(r),xg(this),this.__args=r,this.__events={},this.__onceEvents={},this.config=r.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(r)}return me(n,[{key:"beforeCreate",value:function(i){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(i){this.player=i.player,this.playerConfig=i.player&&i.player.config,this.pluginName=i.pluginName?i.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=i.player&&i.player.logger}},{key:"updateLang",value:function(i){i||(i=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var i=A.checkTouchSupport()?"touch":"mouse";return this.playerConfig&&(this.playerConfig.domEventType==="touch"||this.playerConfig.domEventType==="mouse")&&(i=this.playerConfig.domEventType),i}},{key:"on",value:function(i,t){var e=this;if(!i||!t||!this.player){ol(this.pluginName,"plugin.on(event, callback)");return}typeof i=="string"?(this.__events[i]=t,this.player.on(i,t)):Array.isArray(i)&&i.forEach(function(s){e.__events[s]=t,e.player.on(s,t)})}},{key:"once",value:function(i,t){var e=this;if(!i||!t||!this.player){ol(this.pluginName,"plugin.once(event, callback)");return}typeof i=="string"?(this.__onceEvents[i]=t,this.player.once(i,t)):Array.isArray(i)&&i.forEach(function(s){e.__onceEvents[s]=t,e.player.once(i,t)})}},{key:"off",value:function(i,t){var e=this;if(!i||!t||!this.player){ol(this.pluginName,"plugin.off(event, callback)");return}typeof i=="string"?(delete this.__events[i],this.player.off(i,t)):Array.isArray(i)&&i.forEach(function(s){delete e.__events[i],e.player.off(s,t)})}},{key:"offAll",value:function(){var i=this;["__events","__onceEvents"].forEach(function(t){Object.keys(i[t]).forEach(function(e){i[t][e]&&i.off(e,i[t][e]),e&&delete i[t][e]})}),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(i){var t;if(this.player){for(var e=arguments.length,s=new Array(e>1?e-1:0),a=1;a<e;a++)s[a-1]=arguments[a];(t=this.player).emit.apply(t,[i].concat(s))}}},{key:"emitUserAction",value:function(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.player){var s=gt(gt({},e),{},{pluginName:this.pluginName});this.player.emitUserAction(i,t,s)}}},{key:"hook",value:function(i,t){return Na.call.apply(Na,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(i,t){for(var e=arguments.length,s=new Array(e>2?e-2:0),a=2;a<e;a++)s[a-2]=arguments[a];return Ua.call.apply(Ua,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(i,t){for(var e=arguments.length,s=new Array(e>2?e-2:0),a=2;a<e;a++)s[a-2]=arguments[a];return Ha.call.apply(Ha,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(this.player)return e&&(t.pluginName=e),this.player.registerPlugin({plugin:i,options:t})}},{key:"getPlugin",value:function(i){return this.player?this.player.getPlugin(i):null}},{key:"__destroy",value:function(){var i=this,t=this.player,e=this.pluginName;this.offAll(),A.clearAllTimers(this),A.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(s){i[s]=null}),t.unRegisterPlugin(e),Dg(this)}}],[{key:"defineGetterOrSetter",value:function(i,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&Object.defineProperty(i,e,t[e])}},{key:"defineMethod",value:function(i,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&typeof t[e]=="function"&&Object.defineProperty(i,e,{configurable:!0,value:t[e]})}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),n}(),ll,Wf;function LS(){if(Wf)return ll;Wf=1;var n=9;if(typeof Element<"u"&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}function i(t,e){for(;t&&t.nodeType!==n;){if(typeof t.matches=="function"&&t.matches(e))return t;t=t.parentNode}}return ll=i,ll}var ul,Xf;function BS(){if(Xf)return ul;Xf=1;var n=LS();function r(e,s,a,o,l){var u=t.apply(this,arguments);return e.addEventListener(a,u,l),{destroy:function(){e.removeEventListener(a,u,l)}}}function i(e,s,a,o,l){return typeof e.addEventListener=="function"?r.apply(null,arguments):typeof a=="function"?r.bind(null,document).apply(null,arguments):(typeof e=="string"&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,function(u){return r(u,s,a,o,l)}))}function t(e,s,a,o){return function(l){l.delegateTarget=n(l.target,s),l.delegateTarget&&o.call(e,l)}}return ul=i,ul}var MS=BS();const qf=Ju(MS);var FS={CONTROLS:"controls",ROOT:"root"},lt={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"},Jf={ICON_DISABLE:"xg-icon-disable"};function cl(n){return n?n.indexOf&&/^(?:http|data:|\/)/.test(n):!1}function NS(n,r){return Qt(n)==="object"&&n.class&&typeof n.class=="string"?"".concat(r," ").concat(n.class):r}function US(n,r){return Qt(n)==="object"&&n.attr&&Qt(n.attr)==="object"&&Object.keys(n.attr).map(function(i){r[i]=n.attr[i]}),r}function Zf(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",s=null;if(n instanceof window.Element)return A.addClass(n,i),Object.keys(t).map(function(a){n.setAttribute(a,t[a])}),n;if(cl(n)||cl(n.url))return t.src=cl(n)?n:n.url||"",s=A.createDom(n.tag||"img","",t,"xg-img ".concat(i)),s;if(typeof n=="function")try{return s=n(),s instanceof window.Element?(A.addClass(s,i),Object.keys(t).map(function(a){s.setAttribute(a,t[a])}),s):(Ye.logWarn("warn>>icons.".concat(r," in config of plugin named [").concat(e,"] is a function mast return an Element Object")),null)}catch(a){return Ye.logError("Plugin named [".concat(e,"]:createIcon"),a),null}return typeof n=="string"?A.createDomFromHtml(n,t,i):(Ye.logWarn("warn>>icons.".concat(r," in config of plugin named [").concat(e,"] is invalid")),null)}function HS(n,r){var i=r.config.icons||r.playerConfig.icons;Object.keys(n).map(function(t){var e=n[t],s=e&&e.class?e.class:"",a=e&&e.attr?e.attr:{},o=null;i&&i[t]&&(s=NS(i[t],s),a=US(i[t],a),o=Zf(i[t],t,s,a,r.pluginName)),!o&&e&&(o=Zf(e.icon?e.icon:e,a,s,{},r.pluginName)),r.icons[t]=o})}function VS(n,r){Object.keys(n).map(function(i){Object.defineProperty(r.langText,i,{get:function(){var e=r.lang,s=r.i18n;return s[i]?s[i]:n[i]&&n[i][e]||""}})})}var qe=function(n){ke(i,n);var r=Ie(i);function i(){var t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ve(this,i),t=r.call(this,e),t.__delegates=[],t}return me(i,[{key:"__init",value:function(e){if(Be(xe(i.prototype),"__init",this).call(this,e),!!e.root){var s=e.root,a=null;this.icons={},this.root=null,this.parent=null,this.extraEls=[];var o=this.registerIcons()||{};HS(o,this),this.langText={};var l=this.registerLanguageTexts()||{};VS(l,this);var u="";try{u=this.render()}catch(h){throw Ye.logError("Plugin:".concat(this.pluginName,":render"),h),new Error("Plugin:".concat(this.pluginName,":render:").concat(h.message))}if(u)a=i.insert(u,s,e.index),a.setAttribute("data-index",e.index);else if(e.tag)a=A.createDom(e.tag,"",e.attr,e.name),a.setAttribute("data-index",e.index),s.appendChild(a);else return;this.root=a,this.parent=s;var c=this.config.attr||{},f=this.config.style||{};this.setAttr(c),this.setStyle(f),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var s=this.children();s&&Qt(s)==="object"&&Object.keys(s).length>0&&Object.keys(s).map(function(a){var o=a,l=s[o],u={root:e.root},c,f;typeof l=="function"?(c=e.config[o]||{},f=l):Qt(l)==="object"&&typeof l.plugin=="function"&&(c=l.options?A.deepCopy(e.config[o]||{},l.options):e.config[o]||{},f=l.plugin),u.config=c,c.index!==void 0&&(u.index=c.index),c.root&&(u.root=c.root),e.registerPlugin(f,u,o)})}}},{key:"updateLang",value:function(e){e||(e=this.lang);function s(u,c){for(var f=0;f<u.children.length;f++)u.children[f].children.length>0?s(u.children[f],c):c(u.children[f])}var a=this.root,o=this.i18n,l=this.langText;a&&s(a,function(u){var c=u.getAttribute&&u.getAttribute("lang-key");if(c){var f=o[c.toUpperCase()]||l[c];f&&(u.innerHTML=typeof f=="function"?f(e):f)}})}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=this.i18n||{},o=this.langText;e.setAttribute&&e.setAttribute("lang-key",s);var l=a[s]||o[s]||"";l&&(e.innerHTML=l)}},{key:"plugins",value:function(){return this._children}},{key:"disable",value:function(){this.config.disable=!0,A.addClass(this.find(".xgplayer-icon"),Jf.ICON_DISABLE)}},{key:"enable",value:function(){this.config.disable=!1,A.removeClass(this.find(".xgplayer-icon"),Jf.ICON_DISABLE)}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";s.root=s.root||this.root;var o=Be(xe(i.prototype),"registerPlugin",this).call(this,e,s,a);return this._children.push(o),o}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,s,a){var o=this;if(arguments.length<3&&typeof s=="function")Array.isArray(e)?e.forEach(function(u){o.bindEL(u,s)}):this.bindEL(e,s);else{var l=i.delegate.call(this,this.root,e,s,a);this.__delegates=this.__delegates.concat(l)}}},{key:"unbind",value:function(e,s){var a=this;if(arguments.length<3&&typeof s=="function")Array.isArray(e)?e.forEach(function(u){a.unbindEL(u,s)}):this.unbindEL(e,s);else for(var o="".concat(e,"_").concat(s),l=0;l<this.__delegates.length;l++)if(this.__delegates[l].key===o){this.__delegates[l].destroy(),this.__delegates.splice(l,1);break}}},{key:"setStyle",value:function(e,s){var a=this;if(this.root){if(A.typeOf(e)==="String")return this.root.style[e]=s;A.typeOf(e)==="Object"&&Object.keys(e).map(function(o){a.root.style[o]=e[o]})}}},{key:"setAttr",value:function(e,s){var a=this;if(this.root){if(A.typeOf(e)==="String")return this.root.setAttribute(e,s);A.typeOf(e)==="Object"&&Object.keys(e).map(function(o){a.root.setAttribute(o,e[o])})}}},{key:"setHtml",value:function(e,s){this.root&&(this.root.innerHTML=e,typeof s=="function"&&s())}},{key:"bindEL",value:function(e,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof s=="function"&&this.root.addEventListener(e,s,a)}},{key:"unbindEL",value:function(e,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof s=="function"&&this.root.removeEventListener(e,s,a)}},{key:"show",value:function(e){if(this.root){this.root.style.display=e!==void 0?e:"block";var s=window.getComputedStyle(this.root,null),a=s.getPropertyValue("display");if(a==="none")return this.root.style.display="block"}}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,s){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!s||!(s instanceof window.Element))return null;try{return typeof e=="string"?this.find(e).appendChild(s):e.appendChild(s)}catch(a){return Ye.logError("Plugin:appendChild",a),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,s=this.player;this.__delegates.map(function(a){a.destroy()}),this.__delegates=[],this._children instanceof Array&&(this._children.map(function(a){s.unRegisterPlugin(a.pluginName)}),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),Be(xe(i.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map(function(a){e[a]=null}),this.extraEls=[]}}],[{key:"insert",value:function(e,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=s.children.length,l=Number(a),u=e instanceof window.Node;if(o){for(var c=0,f=null,h="";c<o;c++){f=s.children[c];var d=Number(f.getAttribute("data-index"));if(d>=l){h="beforebegin";break}else d<l&&(h="afterend")}return u?h==="afterend"?s.appendChild(e):s.insertBefore(e,f):f.insertAdjacentHTML(h,e),h==="afterend"?s.children[s.children.length-1]:s.children[c]}else return u?s.appendChild(e):s.insertAdjacentHTML("beforeend",e),s.children[s.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,s,a,o){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,u=[];if(e instanceof window.Node&&typeof o=="function")if(Array.isArray(a))a.forEach(function(f){var h=qf(e,s,f,o,l);h.key="".concat(s,"_").concat(f),u.push(h)});else{var c=qf(e,s,a,o,l);c.key="".concat(s,"_").concat(a),u.push(c)}return u}},{key:"ROOT_TYPES",get:function(){return FS}},{key:"POSITIONS",get:function(){return lt}}]),i}(zn),jS=function(){function n(){var r=this;if(ve(this,n),j(this,"__trigger",function(i){var t=new Date().getTime();r.timeStamp=t;for(var e=0;e<i.length;e++)r.__runHandler(i[e].target)}),this.__handlers=[],this.timeStamp=0,this.observer=null,!!window.ResizeObserver)try{this.observer=new window.ResizeObserver(mS(this.__trigger,100,{trailing:!0})),this.timeStamp=new Date().getTime()}catch(i){console.error(i)}}return me(n,[{key:"addObserver",value:function(i,t){if(this.observer){this.observer.observe(i);for(var e=i.getAttribute(gi),s=this.__handlers,a=-1,o=0;o<s.length;o++)s[o]&&i===s[o].target&&(a=o);a>-1?this.__handlers[a].handler=t:this.__handlers.push({target:i,handler:t,playerId:e})}}},{key:"unObserver",value:function(i){var t=-1;this.__handlers.map(function(s,a){i===s.target&&(t=a)});try{var e;(e=this.observer)===null||e===void 0||e.unobserve(i)}catch{}t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){var i;(i=this.observer)===null||i===void 0||i.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(i){for(var t=this.__handlers,e=0;e<t.length;e++)if(t[e]&&i===t[e].target){try{t[e].handler(i)}catch(s){console.error(s)}return!0}return!1}}]),n}(),Zr=null;function GS(n,r){return Zr||(Zr=new jS),Zr.addObserver(n,r),Zr}function zS(n,r){var i;(i=Zr)===null||i===void 0||i.unObserver(n,r)}var Lt={pluginGroup:{},init:function(r){var i=r._pluginInfoId;i||(i=new Date().getTime(),r._pluginInfoId=i),!r.config.closeResizeObserver&&GS(r.root,function(){r.resize()}),this.pluginGroup[i]={_originalOptions:r.config||{},_plugins:{}}},formatPluginInfo:function(r,i){var t=null,e=null;return r.plugin&&typeof r.plugin=="function"?(t=r.plugin,e=r.options):(t=r,e={}),i&&(e.config=i||{}),{PLUFGIN:t,options:e}},checkPluginIfExits:function(r,i){for(var t=0;t<i.length;t++)if(r.toLowerCase()===i[t].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(r,i){for(var t=Object.keys(i),e=null,s=0;s<t.length;s++)if(r.toLowerCase()===t[s].toLowerCase()){e=i[t[s]];break}return A.typeOf(e)==="Object"?{root:e.root,position:e.position}:{}},lazyRegister:function(r,i){var t=this,e=i.timeout||1500;return Promise.race([i.loader().then(function(s){var a;s&&s.__esModule?a=s.default:a=s,t.register(r,a,s.options)}),new Promise(function(s,a){setTimeout(function(){a(new Error("timeout"))},e)})])},register:function(r,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!r||!i||typeof i!="function"||i.prototype===void 0)){var e=r._pluginInfoId;if(!(!e||!this.pluginGroup[e])){this.pluginGroup[e]._plugins||(this.pluginGroup[e]._plugins={});var s=this.pluginGroup[e]._plugins,a=this.pluginGroup[e]._originalOptions;t.player=r;var o=t.pluginName||i.pluginName;if(!o)throw new Error("The property pluginName is necessary");if(i.isSupported&&!i.isSupported(r.config.mediaType,r.config.codecType)){console.warn("not supported plugin [".concat(o,"]"));return}t.config||(t.config={});for(var l=Object.keys(a),u=0;u<l.length;u++)if(o.toLowerCase()===l[u].toLowerCase()){var c=a[l[u]];A.typeOf(c)==="Object"?t.config=Object.assign({},t.config,a[l[u]]):A.typeOf(c)==="Boolean"&&(t.config.disable=!c);break}i.defaultConfig&&Object.keys(i.defaultConfig).forEach(function(h){typeof t.config[h]>"u"&&(t.config[h]=i.defaultConfig[h])}),t.root?typeof t.root=="string"&&(t.root=r[t.root]):t.root=r.root,t.index=t.config.index||0;try{s[o.toLowerCase()]&&(this.unRegister(e,o.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(o,"] exist, destroy the old instance")));var f=new i(t);return s[o.toLowerCase()]=f,s[o.toLowerCase()].func=i,f&&typeof f.afterCreate=="function"&&f.afterCreate(),f}catch(h){throw console.error(h),h}}}},unRegister:function(r,i){r._pluginInfoId&&(r=r._pluginInfoId),i=i.toLowerCase();try{var t=this.pluginGroup[r]._plugins[i];t&&(t.pluginName&&t.__destroy(),delete this.pluginGroup[r]._plugins[i])}catch(e){console.error("[unRegister:".concat(i,"] cgid:[").concat(r,"] error"),e)}},deletePlugin:function(r,i){var t=r._pluginInfoId;t&&this.pluginGroup[t]&&this.pluginGroup[t]._plugins&&delete this.pluginGroup[t]._plugins[i]},getPlugins:function(r){var i=r._pluginInfoId;return i&&this.pluginGroup[i]?this.pluginGroup[i]._plugins:{}},findPlugin:function(r,i){var t=r._pluginInfoId;if(!t||!this.pluginGroup[t])return null;var e=i.toLowerCase();return this.pluginGroup[t]._plugins[e]},beforeInit:function(r){var i=this;function t(e){return!e||!e.then?new Promise(function(s){s()}):e}return new Promise(function(e){if(i.pluginGroup){var s;return r._loadingPlugins&&r._loadingPlugins.length?s=Promise.all(r._loadingPlugins):s=Promise.resolve(),s.then(function(){var a=r._pluginInfoId;if(!i.pluginGroup[a]){e();return}var o=i.pluginGroup[a]._plugins,l=[];Object.keys(o).forEach(function(u){if(o[u]&&o[u].beforePlayerInit)try{var c=o[u].beforePlayerInit();l.push(t(c))}catch(f){throw l.push(t(null)),f}}),Promise.all([].concat(l)).then(function(){e()}).catch(function(u){console.error(u),e()})})}})},afterInit:function(r){var i=r._pluginInfoId;if(!(!i||!this.pluginGroup[i])){var t=this.pluginGroup[i]._plugins;Object.keys(t).forEach(function(e){t[e]&&t[e].afterPlayerInit&&t[e].afterPlayerInit()})}},setLang:function(r,i){var t=i._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=this.pluginGroup[t]._plugins;Object.keys(e).forEach(function(s){if(e[s].updateLang)e[s].updateLang(r);else try{e[s].lang=r}catch{console.warn("".concat(s," setLang"))}})}},reRender:function(r){var i=this,t=r._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=[],s=this.pluginGroup[t]._plugins;Object.keys(s).forEach(function(a){a!=="controls"&&s[a]&&(e.push({plugin:s[a].func,options:s[a].__args}),i.unRegister(t,a))}),e.forEach(function(a){i.register(r,a.plugin,a.options)})}},onPluginsReady:function(r){var i=r._pluginInfoId;if(!(!i||!this.pluginGroup[i])){var t=this.pluginGroup[i]._plugins||{};Object.keys(t).forEach(function(e){t[e].onPluginsReady&&typeof t[e].onPluginsReady=="function"&&t[e].onPluginsReady()})}},destroy:function(r){var i=r._pluginInfoId;if(this.pluginGroup[i]){zS(r.root);for(var t=this.pluginGroup[i]._plugins,e=0,s=Object.keys(t);e<s.length;e++){var a=s[e];this.unRegister(i,a)}delete this.pluginGroup[i],delete r._pluginInfoId}}},ee={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function $f(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},preProcessUrl:null,ignores:[],whitelist:[],inactive:3e3,lang:yS(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},isHideTips:!1,minWaitDelay:200,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}var KS=function(r,i){var t,e,s;i.preset&&i.options?s=new i.preset(i.options,r.config):s=new i({},r.config);var a=s,o=a.plugins,l=o===void 0?[]:o,u=a.ignores,c=u===void 0?[]:u,f=a.icons,h=f===void 0?{}:f,d=a.i18n,p=d===void 0?[]:d;r.config.plugins||(r.config.plugins=[]),r.config.ignores||(r.config.ignores=[]),(t=r.config.plugins).push.apply(t,kn(l)),(e=r.config.ignores).push.apply(e,kn(c)),Object.keys(h).map(function(g){r.config.icons[g]||(r.config.icons[g]=h[g])});var v=r.config.i18n||[];p.push.apply(p,kn(v)),r.config.i18n=p},YS=function(n){ke(i,n);var r=Ie(i);function i(){var t;ve(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),j(M(t),"onMouseEnter",function(o){var l=M(t),u=l.player,c=l.playerConfig;c.closeControlsBlur&&u.focus({autoHide:!1})}),j(M(t),"onMouseLeave",function(o){var l=M(t),u=l.player;u.focus()}),t}return me(i,[{key:"beforeCreate",value:function(e){!e.config.mode&&je.device==="mobile"&&(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,s=this.config,a=s.disable,o=s.height,l=s.mode;if(!a){l==="flex"&&this.player.addClass(ee.FLEX_CONTROLS);var u={height:"".concat(o,"px")};Object.keys(u).map(function(f){e.root.style[f]=u[f]}),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(Ba,function(f){f?A.addClass(e.root,"mini-controls"):A.removeClass(e.root,"mini-controls")});var c=this.playerConfig.isMobileSimulateMode;je.device!=="mobile"&&c!=="mobile"&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&A.addClass(this.root,ee.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){A.removeClass(this.root,ee.CONTROLS_AUTOHIDE)}},{key:"show",value:function(e){this.root.style.display="",this.player.focus()}},{key:"hide",value:function(){this.root.style.display="none"}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;if(this.root){var o=e.defaultConfig||{};if(!s.root){var l=s.position?s.position:s.config&&s.config.position?s.config.position:o.position;switch(l){case lt.CONTROLS_LEFT:s.root=this.left;break;case lt.CONTROLS_RIGHT:s.root=this.right;break;case lt.CONTROLS_CENTER:s.root=this.center;break;case lt.CONTROLS:s.root=this.root;break;default:s.root=this.left}return Be(xe(i.prototype),"registerPlugin",this).call(this,e,s,a)}}}},{key:"destroy",value:function(){je.device!=="mobile"&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave)),this.left=null,this.center=null,this.right=null,this.innerRoot=null}},{key:"render",value:function(){var e=this.config,s=e.mode,a=e.autoHide,o=e.initShow,l=e.disable;if(!l){var u=A.classNames({"xgplayer-controls":!0},{"flex-controls":s==="flex"},{"bottom-controls":s==="bottom"},j({},ee.CONTROLS_AUTOHIDE,a),{"xgplayer-controls-initshow":o||!a});return'<xg-controls class="'.concat(u,`" unselectable="on">
    <xg-inner-controls class="xg-inner-controls xg-pos">
      <xg-left-grid class="xg-left-grid">
      </xg-left-grid>
      <xg-center-grid class="xg-center-grid"></xg-center-grid>
      <xg-right-grid class="xg-right-grid">
      </xg-right-grid>
    </xg-inner-controls>
    </xg-controls>`)}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),i}(qe),QS={LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}},un={lang:{},langKeys:[],textKeys:[]};function As(n,r){return Object.keys(r).forEach(function(i){var t=A.typeOf(r[i]),e=A.typeOf(n[i]);if(t==="Array"){var s;e!=="Array"&&(n[i]=[]),(s=n[i]).push.apply(s,kn(r[i]))}else t==="Object"?(e!=="Object"&&(n[i]={}),As(n[i],r[i])):n[i]=r[i]}),n}function Og(){Object.keys(un.lang.en).map(function(n){un.textKeys[n]=n})}function WS(n,r){var i=[];if(r||(r=un),!!r.lang){A.typeOf(n)!=="Array"?i=Object.keys(n).map(function(s){var a=s==="zh"?"zh-cn":s;return{LANG:a,TEXT:n[s]}}):i=n;var t=r,e=t.lang;i.map(function(s){s.LANG==="zh"&&(s.LANG="zh-cn"),e[s.LANG]?As(e[s.LANG]||{},s.TEXT||{}):rc(s,r)}),Og()}}function rc(n,r){var i=n.LANG;if(r||(r=un),!!r.lang){var t=n.TEXT||{};i==="zh"&&(i="zh-cn"),r.lang[i]?As(r.lang[i],t):(r.langKeys.push(i),r.lang[i]=t),Og()}}function XS(n){var r,i={lang:{},langKeys:[],textKeys:{},pId:n};return As(i.lang,un.lang),(r=i.langKeys).push.apply(r,kn(un.langKeys)),As(i.textKeys,un.textKeys),i}rc(QS);var vr={get textKeys(){return un.textKeys},get langKeys(){return un.langKeys},get lang(){var n={};return un.langKeys.map(function(r){n[r]=un.lang[r]}),un.lang["zh-cn"]&&(n.zh=un.lang["zh-cn"]||{}),n},extend:WS,use:rc,init:XS},We={INITIAL:1,READY:2,ATTACHING:3,ATTACHED:4,NOTALLOW:5,RUNNING:6,ENDED:7},eh=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],Jt={},fl=null,Lg=function(n){ke(i,n);var r=Ie(i);function i(){return ve(this,i),r.apply(this,arguments)}return me(i,[{key:"add",value:function(e){e&&(Jt[e.playerId]=e,Object.keys(Jt).length===1&&this.setActive(e.playerId,!0))}},{key:"remove",value:function(e){e&&(e.isUserActive,delete Jt[e.playerId])}},{key:"_iterate",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(var a in Jt)if(Object.prototype.hasOwnProperty.call(Jt,a)){var o=Jt[a];if(s){if(e(o))break}else e(o)}}},{key:"forEach",value:function(e){this._iterate(e)}},{key:"find",value:function(e){var s=null;return this._iterate(function(a){var o=e(a);return o&&(s=a),o},!0),s}},{key:"findAll",value:function(e){var s=[];return this._iterate(function(a){e(a)&&s.push(a)}),s}},{key:"setActive",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(Jt[e])return s?this.forEach(function(a){e===a.playerId?(a.isUserActive=!0,a.isInstNext=!1):a.isUserActive=!1}):Jt[e].isUserActive=s,e}},{key:"getActiveId",value:function(){for(var e=Object.keys(Jt),s=0;s<e.length;s++){var a=Jt[e[s]];if(a&&a.isUserActive)return e[s]}return null}},{key:"setNext",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(Jt[e])return s?this.forEach(function(a){e===a.playerId?(a.isUserActive=!1,a.isInstNext=!0):a.isInstNext=!1}):Jt[e].isInstNext=s,e}}],[{key:"getInstance",value:function(){return fl||(fl=new i),fl}}]),i}(cg.EventEmitter);function qS(n){for(var r=Object.keys(Jt),i=0;i<r.length;i++){var t=Jt[r[i]];if(t.root===n)return t}return null}var JS=["play","pause","replay","retry"],th=0,nh=0,hi=null,Ro=function(n){ke(i,n);var r=Ie(i);function i(t){var e;ve(this,i);var s=A.deepMerge($f(),t);e=r.call(this,s),j(M(e),"canPlayFunc",function(){if(e.config){var p=e.config,v=p.autoplay,g=p.defaultPlaybackRate;Ye.logInfo("player","canPlayFunc, startTime",e.__startTime),e._seekToStartTime(),e.playbackRate=g,(v||e._useAutoplay)&&e.mediaPlay(),e.off(Zn,e.canPlayFunc),e.removeClass(ee.ENTER)}}),j(M(e),"onFullscreenChange",function(p,v){var g=function(){A.setTimeout(M(e),function(){e.resize()},100)},_=A.getFullScreenEl();e._fullActionFrom?e._fullActionFrom="":e.emit(Fa,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var b=AS(_,e.playerId,gi);if(v||_&&(_===e._fullscreenEl||b))g(),!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,_,ee.FULLSCREEN),e.emit(Cn,!0,e._fullScreenOffset),e.cssfullscreen&&e.exitCssFullscreen();else if(e.fullscreen){g();var y=M(e),m=y._fullScreenOffset,S=y.config;if(S.needFullscreenScroll?(window.scrollTo(m.left,m.top),A.setTimeout(M(e),function(){e.fullscreen=!1,e._fullScreenOffset=null},100)):(!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!1,e._fullScreenOffset=null),e.cssfullscreen)e.removeClass(ee.FULLSCREEN);else{var I=e._fullscreenEl;!I&&(e.root.contains(p.target)||p.target===e.root)&&(I=p.target),e.recoverFullStyle(e.root,I,ee.FULLSCREEN)}e._fullscreenEl=null,e.emit(Cn,!1)}}),j(M(e),"_onWebkitbeginfullscreen",function(p){e._fullscreenEl=e.media,e.onFullscreenChange(p,!0)}),j(M(e),"_onWebkitendfullscreen",function(p){e.onFullscreenChange(p,!1)}),xg(M(e),JS),e.config=s,e._pluginInfoId=A.generateSessionId(),dS(M(e));var a=e.constructor.defaultPreset;if(e.config.presets.length){var o=e.config.presets.indexOf("default");o>=0&&a&&(e.config.presets[o]=a)}else a&&e.config.presets.push(a);e.userTimer=null,e.waitTimer=null,e.handleSource=!0,e._state=We.INITIAL,e.isAd=!1,e.isError=!1,e._hasStart=!1,e.isSeeking=!1,e.isCanplay=!1,e._useAutoplay=!1,e.__startTime=-1,e.rotateDeg=0,e.isActive=!1,e.fullscreen=!1,e.cssfullscreen=!1,e.isRotateFullscreen=!1,e._fullscreenEl=null,e.timeSegments=[],e._cssfullscreenEl=null,e.curDefinition=null,e._orgCss="",e._fullScreenOffset=null,e._videoHeight=0,e._videoWidth=0,e.videoPos={pi:1,scale:0,rotate:-1,x:0,y:0,h:-1,w:-1,vy:0,vx:0},e.sizeInfo={width:0,height:0,left:0,top:0},e._accPlayed={t:0,acc:0,loopAcc:0},e._offsetInfo={currentTime:-1,duration:0},e.innerContainer=null,e.controls=null,e.topBar=null,e.root=null,e.__i18n=vr.init(e._pluginInfoId),je.os.isAndroid&&je.osVersion>0&&je.osVersion<6&&(e.config.autoplay=!1),e.database=new OS,e.isUserActive=!1,e._onceSeekCanplay=null,e._isPauseBeforeSeek=0,e.innerStates={isActiveLocked:!1},e.instManager=hi;var l=e._initDOM();if(!l)return console.error(new Error("can't find the dom which id is ".concat(e.config.id," or this.config.el does not exist"))),qu(e);var u=e.config,c=u.definition,f=c===void 0?{}:c,h=u.url;if(!h&&f.list&&f.list.length>0){var d=f.list.find(function(p){return p.definition&&p.definition===f.defaultDefinition});d||(f.defaultDefinition=f.list[0].definition,d=f.list[0]),e.config.url=d.url,e.curDefinition=d}return e._bindEvents(),e._registerPresets(),e._registerPlugins(),Lt.onPluginsReady(M(e)),e.getInitDefinition(),e.setState(We.READY),A.setTimeout(M(e),function(){e.emit(tc)},0),e.onReady&&e.onReady(),(e.config.videoInit||e.config.autoplay)&&(!e.hasStart||e.state<We.ATTACHED)&&e.start(),e}return me(i,[{key:"_initDOM",value:function(){var e,s=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var a=this.config.el;if(a&&a.nodeType===1)this.root=a;else return this.emit(Ur,new ys("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1}var o=qS(this.root);if(o&&(Ye.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),o.destroy()),this.root.setAttribute(gi,this.playerId),this.media.setAttribute(gi,this.playerId),(e=hi)===null||e===void 0||e.add(this),Lt.init(this),this._initBaseDoms(),this.config.controls){var l=this.config.controls.root||null,u=Lt.register(this,YS,{root:l});this.controls=u}var c=this.config.isMobileSimulateMode==="mobile"?"mobile":je.device;if(this.addClass("".concat(ee.DEFAULT," ").concat(ee.INACTIVE," xgplayer-").concat(c," ").concat(this.config.controls?"":ee.NO_CONTROLS)),this.config.autoplay?this.addClass(ee.ENTER):this.addClass(ee.NO_START),this.config.fluid){var f=this.config,h=f.width,d=f.height;(typeof h!="number"||typeof d!="number")&&(h=600,d=337.5);var p={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(d*100/h,"%")};Object.keys(p).forEach(function(m){s.root.style[m]=p[m]})}else["width","height"].forEach(function(m){s.config[m]&&(typeof s.config[m]!="number"?s.root.style[m]=s.config[m]:s.root.style[m]="".concat(s.config[m],"px"))});var v=this.root.getBoundingClientRect(),g=v.width,_=v.height,b=v.left,y=v.top;return this.sizeInfo.width=g,this.sizeInfo.height=_,this.sizeInfo.left=b,this.sizeInfo.top=y,!0}},{key:"_initBaseDoms",value:function(){this.topBar=null,this.leftBar=null,this.rightBar=null,this.config.marginControls&&(this.innerContainer=A.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer))}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach(function(s){e.on(s,e["on"+s.charAt(0).toUpperCase()+s.slice(1)])}),Gf.forEach(function(s){document&&document.addEventListener(s,e.onFullscreenChange)}),je.os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once(si,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.media.focus()},this.once(gn,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),Gf.forEach(function(s){document.removeEventListener(s,e.onFullscreenChange)}),this.playFunc&&this.off(gn,this.playFunc),this.off(Zn,this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_clearUserTimer",value:function(){this.userTimer&&(A.clearTimeout(this,this.userTimer),this.userTimer=null)}},{key:"_startInit",value:function(e){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.media&&!((!e||e===""||A.typeOf(e)==="Array"&&e.length===0)&&(e="",this.emit(vg),Ye.logWarn("config.url is null, please get url and run player._startInit(url)"),this.config.nullUrlStart))){A.isNotNull(a.playSessionId)&&(this._playSessionId=a.playSessionId),this.handleSource&&(this._detachSourceEvents(this.media),A.typeOf(e)==="Array"&&e.length>0?this._attachSourceEvents(this.media,e):!this.media.src||this.media.src!==e?this.media.src=e:e||this.media.removeAttribute("src")),A.typeOf(this.config.volume)==="Number"&&(this.volume=this.config.volume);var o=this.innerContainer?this.innerContainer:this.root;this.media instanceof window.Element&&!o.contains(this.media)&&o.insertBefore(this.media,o.firstChild);var l=this.media.readyState;Ye.logInfo("_startInit readyState",l),this.config.autoplay&&(!A.isMSE(this.media)&&this.load(),(je.os.isIpad||je.os.isPhone)&&this.mediaPlay());var u=this.config.startTime;this.__startTime=u>0?u:-1,this.config.startTime=0,l>=2&&this.duration>0?this.canPlayFunc():this.on(Zn,this.canPlayFunc),(!this.hasStart||this.state<We.ATTACHED)&&Lt.afterInit(this),this.hasStart=!0,this.setState(We.ATTACHED),A.setTimeout(this,function(){s.emit(To)},0)}}},{key:"_registerPlugins",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._loadingPlugins=[];var a=this.config.ignores||[],o=this.config.plugins||[],l=this.config.i18n||[];s&&vr.extend(l,this.__i18n);var u=a.join("||").toLowerCase().split("||"),c=this.plugins;o.forEach(function(f){try{var h=f.plugin?f.plugin.pluginName:f.pluginName;if(h&&u.indexOf(h.toLowerCase())>-1)return null;if(!s&&c[h.toLowerCase()])return;if(f.lazy&&f.loader){var d=Lt.lazyRegister(e,f);f.forceBeforeInit&&(d.then(function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(d),1)}).catch(function(p){Ye.logError("_registerPlugins:loadingPlugin",p),e._loadingPlugins.splice(e._loadingPlugins.indexOf(d),1)}),e._loadingPlugins.push(d));return}return e.registerPlugin(f)}catch(p){Ye.logError("_registerPlugins:",p)}})}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach(function(s){KS(e,s)})}},{key:"_getRootByPosition",value:function(e){var s=null;switch(e){case lt.ROOT_RIGHT:this.rightBar||(this.rightBar=A.createPositionBar("xg-right-bar",this.root)),s=this.rightBar;break;case lt.ROOT_LEFT:this.leftBar||(this.leftBar=A.createPositionBar("xg-left-bar",this.root)),s=this.leftBar;break;case lt.ROOT_TOP:this.topBar||(this.topBar=A.createPositionBar("xg-top-bar",this.root),this.config.topBarAutoHide&&A.addClass(this.topBar,ee.TOP_BAR_AUTOHIDE)),s=this.topBar;break;default:s=this.innerContainer||this.root;break}return s}},{key:"registerPlugin",value:function(e,s){var a=Lt.formatPluginInfo(e,s),o=a.PLUFGIN,l=a.options,u=this.config.plugins,c=Lt.checkPluginIfExits(o.pluginName,u);!c&&u.push(o);var f=Lt.getRootByConfig(o.pluginName,this.config);f.root&&(l.root=f.root),f.position&&(l.position=f.position);var h=l.position?l.position:l.config&&l.config.position||o.defaultConfig&&o.defaultConfig.position;if(!l.root&&typeof h=="string"&&h.indexOf("controls")>-1){var d;return(d=this.controls)===null||d===void 0?void 0:d.registerPlugin(o,l,o.pluginName)}return l.root||(l.root=this._getRootByPosition(h)),Lt.register(this,o,l)}},{key:"deregister",value:function(e){typeof e=="string"?Lt.unRegister(this,e):e instanceof zn&&Lt.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.deregister(e),s&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var s;if(typeof e=="string"?s=e:e instanceof zn&&(s=e.pluginName),!!s)for(var a=this.config.plugins.length-1;a>-1;a--){var o=this.config.plugins[a];if(o.pluginName.toLowerCase()===s.toLowerCase()){this.config.plugins.splice(a,1);break}}}},{key:"plugins",get:function(){return Lt.getPlugins(this)}},{key:"getPlugin",value:function(e){var s=Lt.findPlugin(this,e);return s&&s.pluginName?s:null}},{key:"addClass",value:function(e){this.root&&(A.hasClass(this.root,e)||A.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&A.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return A.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,s){this.root&&this.root.setAttribute(e,s)}},{key:"removeAttribute",value:function(e,s){this.root&&this.root.removeAttribute(e,s)}},{key:"start",value:function(e){var s=this;if(!(this.state>We.ATTACHING)){var a=this._playSessionId;return A.isNotNull(a)&&(this._playSessionId=void 0),!e&&!this.config.url&&this.getInitDefinition(),this.hasStart=!0,this.setState(We.ATTACHING),this._registerPlugins(!1),Lt.beforeInit(this).then(function(){if(s.config){e||(e=s.url||s.config.url);var o=s.preProcessUrl(e),l=s._startInit(o.url,{playSessionId:a});return l}}).catch(function(o){throw o.fileName="player",o.lineNumber="236",Ye.logError("start:beforeInit:",o),o})}}},{key:"switchURL",value:function(e,s){var a=this,o=e;A.typeOf(e)==="Object"&&(o=e.url),o=this.preProcessUrl(o).url;var l=this.currentTime;this.__startTime=l;var u=this.paused&&!this.isError;return this.src=o,new Promise(function(c,f){var h=function(v){a.off("timeupdate",d),a.off("canplay",d),f(v)},d=function(){a._seekToStartTime(),u&&a.pause(),a.off("error",h),c(!0)};if(a.once("error",h),!o){a.errorHandler("error",{code:6,message:"empty_src"});return}je.os.isAndroid?a.once("timeupdate",d):a.once("canplay",d),a.play()})}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var e=this;if(!this.hasStart&&this.state<We.ATTACHED){this.removeClass(ee.NO_START),this.addClass(ee.ENTER),this.start(),this._useAutoplay=!0;return}this.state<We.RUNNING&&(this.removeClass(ee.NO_START),!this.isCanplay&&this.addClass(ee.ENTER));var s=Be(xe(i.prototype),"play",this).call(this);return s!==void 0&&s&&s.then?s.then(function(){e.removeClass(ee.NOT_ALLOW_AUTOPLAY),e.addClass(ee.PLAYING),e.state<We.RUNNING&&(Ye.logInfo(">>>>playPromise.then"),e.setState(We.RUNNING),e.emit(ji))}).catch(function(a){if(Ye.logWarn(">>>>playPromise.catch",a.name),e.media&&e.media.error){e.onError(),e.removeClass(ee.ENTER);return}a.name==="NotAllowedError"&&(e._errorTimer=A.setTimeout(e,function(){e._errorTimer=null,e.emit(nc),e.addClass(ee.NOT_ALLOW_AUTOPLAY),e.removeClass(ee.ENTER),e.pause(),e.setState(We.NOTALLOW)},0))}):(Ye.logWarn("video.play not return promise"),this.state<We.RUNNING&&(this.setState(We.RUNNING),this.removeClass(ee.NOT_ALLOW_AUTOPLAY),this.removeClass(ee.NO_START),this.removeClass(ee.ENTER),this.addClass(ee.PLAYING),this.emit(ji))),s}},{key:"mediaPause",value:function(){Be(xe(i.prototype),"pause",this).call(this)}},{key:"videoPause",value:function(){Be(xe(i.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;return this.removeClass(ee.PAUSED),Un(this,"play",function(){return e.mediaPlay()})}},{key:"pause",value:function(){var e=this;Un(this,"pause",function(){Be(xe(i.prototype),"pause",e).call(e)})}},{key:"seek",value:function(e,s){var a=this;if(!(!this.media||Number.isNaN(Number(e))||!this.hasStart)){var o=this.config,l=o.isSeekedPlay,u=o.seekedStatus,c=s||(l?"play":u);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,!this._isPauseBeforeSeek&&(this._isPauseBeforeSeek=this.paused?2:1),this._onceSeekCanplay&&this.off(ei,this._onceSeekCanplay),this._onceSeekCanplay=function(){switch(a.removeClass(ee.ENTER),a.isSeeking=!1,c){case"play":a.play();break;case"pause":a.pause();break;default:a._isPauseBeforeSeek>1||a.paused?a.pause():a.play()}a._isPauseBeforeSeek=0,a._onceSeekCanplay=null},this.once(ei,this._onceSeekCanplay),this.state<We.RUNNING?(this.removeClass(ee.NO_START),this.currentTime=e,this.play()):this.currentTime=e}}},{key:"getInitDefinition",value:function(){var e=this,s=this.config,a=s.definition,o=s.url;!o&&a&&a.list&&a.list.length>0&&a.defaultDefinition&&a.list.map(function(l){l.definition===a.defaultDefinition&&(e.config.url=l.url,e.curDefinition=l)})}},{key:"changeDefinition",value:function(e,s){var a=this,o=this.config.definition;if(Array.isArray(o?.list)&&o.list.forEach(function(u){e?.definition===u.definition&&(a.curDefinition=u)}),e!=null&&e.bitrate&&typeof e.bitrate!="number"&&(e.bitrate=parseInt(e.bitrate,10)||0),this.emit(ic,{from:s,to:e}),!this.hasStart){this.config.url=e.url;return}var l=this.switchURL(e.url,gt({seamless:o.seamless!==!1&&typeof MediaSource<"u"&&typeof MediaSource.isTypeSupported=="function"},e));l&&l.then?l.then(function(){a.emit(au,{from:s,to:e})}):this.emit(au,{from:s,to:e})}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(si,this.reloadFunc)}},{key:"resetState",value:function(){var e=this,s=ee.NOT_ALLOW_AUTOPLAY,a=ee.PLAYING,o=ee.NO_START,l=ee.PAUSED,u=ee.REPLAY,c=ee.ENTER,f=ee.ENDED,h=ee.ERROR,d=ee.LOADING,p=[s,a,o,l,u,c,f,h,d];this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,p.forEach(function(v){e.removeClass(v)}),this.addClass(ee.NO_START),this.emit(Io)}},{key:"reset",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;this.resetState();var o=this.plugins;if(o&&(s.map(function(u){e.deregister(u)}),a)){var l=$f();Object.keys(this.config).forEach(function(u){e.config[u]!=="undefined"&&(u==="plugins"||u==="presets"||u==="el"||u==="id")&&(e.config[u]=l[u])})}}},{key:"destroy",value:function(){var e,s=this,a=this.innerContainer,o=this.root,l=this.media;if(!(!o||!l)){if(this.hasStart=!1,this._useAutoplay=!1,o.removeAttribute(gi),l.removeAttribute(gi),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),A.clearAllTimers(this),this.emit(ko),(e=hi)===null||e===void 0||e.remove(this),Lt.destroy(this),Dg(this),Be(xe(i.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),a)for(var u=a.children,c=0;c<u.length;c++)a.removeChild(u[c]);!a&&l instanceof window.Node&&o.contains(l)&&!this.config.remainMediaAfterDestroy&&o.removeChild(l),["topBar","leftBar","rightBar","innerContainer"].map(function(h){s[h]&&o.removeChild(s[h]),s[h]=null});var f=o.className.split(" ");f.length>0?o.className=f.filter(function(h){return h.indexOf("xgplayer")<0}).join(" "):o.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach(function(h){s[h]=!1})}}},{key:"replay",value:function(){var e=this;this.removeClass(ee.ENDED),this.currentTime=0,this.isSeeking=!1,Un(this,"replay",function(){e.once(ei,function(){var s=e.mediaPlay();s&&s.catch&&s.catch(function(a){console.log(a)})}),e.emit(Oa),e.onPlay()})}},{key:"retry",value:function(){var e=this;this.removeClass(ee.ERROR),this.addClass(ee.LOADING),Un(this,"retry",function(){var s=e.currentTime,a=e.config.url,o=A.isMSE(e.media)?{url:a}:e.preProcessUrl(a);e.src=o.url,!e.config.isLive&&(e.currentTime=s),e.once(Zn,function(){e.mediaPlay()})})}},{key:"changeFullStyle",value:function(e,s,a,o){e&&(o||(o=ee.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=A.filterStyleFromText(e)),A.addClass(e,a),s&&s!==e&&!this._orgPCss&&(this._orgPCss=A.filterStyleFromText(s),A.addClass(s,o),s.setAttribute(gi,this.playerId)))}},{key:"recoverFullStyle",value:function(e,s,a,o){o||(o=ee.PARENT_FULLSCREEN),this._orgCss&&(A.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),A.removeClass(e,a),s&&s!==e&&this._orgPCss&&(A.setStyleFromCsstext(s,this._orgPCss),this._orgPCss="",A.removeClass(s,o),s.removeAttribute(gi))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget,s=this.root,a=this.media;(e==="video"||e==="media")&&(e=this[e]),e||(e=s),this._fullScreenOffset={top:A.scrollTop(),left:A.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var o=A.getFullScreenEl();if(o===this._fullscreenEl)return this.onFullscreenChange(),Promise.resolve();try{for(var l=0;l<zf.length;l++){var u=zf[l];if(e[u]){var c=u==="webkitRequestFullscreen"?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[u]();return c&&c.then?c:Promise.resolve()}}return a.fullscreenEnabled||a.webkitSupportsFullscreen?(a.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch{return Promise.reject(new Error("call getFullscreen fail"))}}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),!(!this._fullscreenEl&&!A.getFullScreenEl())){this.root;var s=this.media;this._fullActionFrom="exit";try{for(var a=0;a<Kf.length;a++){var o=Kf[a];if(document[o]){var l=document[o]();return l&&l.then?l:Promise.resolve()}}return s&&s.webkitSupportsFullscreen?(s.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch{return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var s=e?"".concat(ee.INNER_FULLSCREEN," ").concat(ee.CSS_FULLSCREEN):ee.CSS_FULLSCREEN;this.changeFullStyle(this.root,e,s);var a=this.config.fullscreen,o=a===void 0?{}:a,l=o.useCssFullscreen===!0||typeof o.useCssFullscreen=="function"&&o.useCssFullscreen();l&&(this.fullscreen=!0,this.emit(Cn,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(La,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(ee.INNER_FULLSCREEN," ").concat(ee.CSS_FULLSCREEN):ee.CSS_FULLSCREEN;if(!this.fullscreen)this.recoverFullStyle(this.root,this._cssfullscreenEl,e);else{var s=this.config.fullscreen,a=s===void 0?{}:s,o=a.useCssFullscreen===!0||typeof a.useCssFullscreen=="function"&&a.useCssFullscreen();o?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(Cn,!1)):this.removeClass(e)}this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(La,!1)}},{key:"getRotateFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.cssfullscreen&&this.exitCssFullscreen(e);var s=e?"".concat(ee.INNER_FULLSCREEN," ").concat(ee.ROTATE_FULLSCREEN):ee.ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,s,ee.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this._rootStyle=this.root.getAttribute("style");var a=Math.abs(window.orientation)===90||Math.abs(screen.orientation.angle)===90;this.root.style.width=a?"".concat(window.innerWidth,"px"):"".concat(window.innerHeight,"px"),this.emit(Cn,!0)}},{key:"exitRotateFullscreen",value:function(e){var s=this._fullscreenEl!==this.root?"".concat(ee.INNER_FULLSCREEN," ").concat(ee.ROTATE_FULLSCREEN):ee.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,s,ee.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(Cn,!1),this._rootStyle&&(this.root.style.style=this._rootStyle,this._rootStyle=!1)}},{key:"setRotateDeg",value:function(e){window.orientation===90||window.orientation===-90?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};if(this.isActive){this.onFocus(e);return}this.emit(ec,gt({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ignorePaused:!1};if(!this.isActive){this.onBlur(e);return}this._clearUserTimer(),this.emit(gg,gt({paused:this.paused,ended:this.ended},e))}},{key:"onFocus",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!0,delay:3e3},a=this.innerStates;if(this.isActive=!0,this.removeClass(ee.INACTIVE),this._clearUserTimer(),s.isLock!==void 0&&(a.isActiveLocked=s.isLock),s.autoHide===!1||s.isLock===!0||a.isActiveLocked){this._clearUserTimer();return}var o=s&&s.delay?s.delay:this.config.inactive;this.userTimer=A.setTimeout(this,function(){e.userTimer=null,e.blur()},o)}},{key:"onBlur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=e.ignorePaused,a=s===void 0?!1:s;if(!this.innerStates.isActiveLocked){var o=this.config.closePauseVideoFocus;this.isActive=!1,(a||o||!this.paused&&!this.ended)&&this.addClass(ee.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(ee.ENTER),this.removeClass(ee.ERROR),this.removeClass(ee.LOADING),this.isCanplay=!0,this.waitTimer&&A.clearTimeout(this,this.waitTimer)}},{key:"onLoadeddata",value:function(){var e=this;this.isError=!1,this.isSeeking=!1,this.__startTime>0&&(this.duration>0?this._seekToStartTime():this.once(ci,function(){e._seekToStartTime()}))}},{key:"onLoadstart",value:function(){this.removeClass(ee.ERROR),this.isCanplay=!1}},{key:"onPlay",value:function(){this.state===We.ENDED&&this.setState(We.RUNNING),this.removeClass(ee.PAUSED),this.ended&&this.removeClass(ee.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(ee.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this._clearUserTimer(),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(ee.ENDED),this.setState(We.ENDED)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(ee.NOT_ALLOW_AUTOPLAY),this.removeClass(ee.NO_START),this.removeClass(ee.ENTER),this.removeClass(ee.LOADING),this.addClass(ee.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(ee.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&A.clearTimeout(this,this.waitTimer),this.removeClass(ee.LOADING),this.removeClass(ee.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&A.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=A.setTimeout(this,function(){e.addClass(ee.LOADING),e.emit(Ag),A.clearTimeout(e,e.waitTimer),e.waitTimer=null},this.config.minWaitDelay)}},{key:"onPlaying",value:function(){var e=this;this.isError=!1;var s=ee.NO_START,a=ee.PAUSED,o=ee.ENDED,l=ee.ERROR,u=ee.REPLAY,c=ee.LOADING,f=[s,a,o,l,u,c];f.forEach(function(h){e.removeClass(h)}),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.media.videoHeight&&this.resize(),(this.waitTimer||this.hasClass(ee.LOADING))&&this.media.readyState>2&&(this.removeClass(ee.LOADING),A.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&this.state===We.NOTALLOW&&this.duration&&(this.setState(We.RUNNING),this.emit(ji)),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onVolumechange",value:function(){A.typeOf(this.config.volume)==="Number"&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,s,a){if(!(!this.media||!s||!e)){var o=A.typeOf(e)==="String"?e:e.type||"";a.props&&A.typeOf(a.props)!=="Array"&&(a.props=[a.props]),this.emit(Fa,gt({eventType:o,action:s,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},a))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var s=new Date().getTime()-this._accPlayed.t;this._accPlayed.acc+=s,this._accPlayed.t=0,(e==="ended"||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{startDiff:0,endDiff:0},a=s||{},o=a.startDiff,l=o===void 0?0:o,u=a.endDiff,c=u===void 0?0:u,f=this.media.buffered;if(!f||f.length===0||!this.duration)return!0;for(var h=e||this.media.currentTime||.2,d=f.length,p=0;p<d;p++)if(f.start(p)+l<=h&&f.end(p)-c>h)return!0;return!1}},{key:"resizePosition",value:function(){var e=this,s=this.videoPos,a=s.vy,o=s.vx,l=s.h,u=s.w,c=this.videoPos.rotate;if(!(c<0&&l<0&&u<0)){var f=this.videoPos._pi;if(!f&&this.media.videoHeight&&(f=this.media.videoWidth/this.media.videoHeight*100),!!f){this.videoPos.pi=f,c=c<0?0:c;var h={rotate:c},d=0,p=0,v=1,g=Math.abs(c/90),_=this.root,b=this.innerContainer,y=_.offsetWidth,m=b?b.offsetHeight:_.offsetHeight,S={},I=m,R=y;if(g%2===0)v=l>0?100/l:u>0?100/u:1,h.scale=v,d=a>0?(100-l)/2-a:0,h.y=g===2?0-d:d,p=o>0?(100-u)/2-o:0,h.x=g===2?0-p:p,S.width="".concat(R,"px"),S.height="".concat(I,"px"),S.maxWidth="",S.maxHeight="";else if(g%2===1){R=m,I=y;var N=m-y;p=-N/2/R*100,h.x=g===3?p+a/2:p-a/2,d=N/2/I*100,h.y=g===3?d+o/2:d-o/2,h.scale=v,S.width="".concat(R,"px"),S.maxWidth="".concat(R,"px"),S.height="".concat(I,"px"),S.maxHeight="".concat(I,"px")}var G=A.getTransformStyle(h,this.media.style.transform||this.media.style.webkitTransform);S.transform=G,S.webkitTransform=G,Object.keys(S).map(function(H){e.media.style[H]=S[H]})}}}},{key:"position",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{h:0,y:0,x:0,w:0};if(!(!this.media||!e||!e.h)){var s=this.videoPos;s.h=e.h*100||0,s.w=e.w*100||0,s.vx=e.x*100||0,s.vy=e.y*100||0,this.resizePosition()}}},{key:"setConfig",value:function(e){var s=this;e&&Object.keys(e).map(function(a){if(a!=="plugins"){s.config[a]=e[a];var o=s.plugins[a.toLowerCase()];o&&A.typeOf(o.setConfig)==="Function"&&o.setConfig(e[a])}})}},{key:"playNext",value:function(e){var s=this;this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,Un(this,"playnext",function(){s.start(),s.emit(Ma,e)})}},{key:"resize",value:function(){var e=this;if(!(!this.media||!this.root)){var s=this.root.getBoundingClientRect();this.sizeInfo.width=s.width,this.sizeInfo.height=s.height,this.sizeInfo.left=s.left,this.sizeInfo.top=s.top;var a=this.media,o=a.videoWidth,l=a.videoHeight,u=this.config,c=u.fitVideoSize,f=u.videoFillMode;if((f==="fill"||f==="cover"||f==="contain")&&this.setAttribute("data-xgfill",f),!(!l||!o)){this._videoHeight=l,this._videoWidth=o;var h=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,d=s.width,p=s.height-h,v=parseInt(o/l*1e3,10),g=parseInt(d/p*1e3,10),_=d,b=p,y={};c==="auto"&&g>v||c==="fixWidth"?(b=d/v*1e3,this.config.fluid?y.paddingTop="".concat(b*100/_,"%"):y.height="".concat(b+h,"px")):(c==="auto"&&g<v||c==="fixHeight")&&(_=v*p/1e3,y.width="".concat(_,"px")),!this.fullscreen&&!this.cssfullscreen&&Object.keys(y).forEach(function(S){e.root.style[S]=y[S]}),(f==="fillHeight"&&g<v||f==="fillWidth"&&g>v)&&this.setAttribute("data-xgfill","cover");var m={videoScale:v,vWidth:_,vHeight:b,cWidth:_,cHeight:b+h};this.resizePosition(),this.emit(Ti,m)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this.media.updateObjectPosition){this.media.updateObjectPosition(e,s);return}this.media.style.objectPosition="".concat(e*100,"% ").concat(s*100,"%")}},{key:"setState",value:function(e){Ye.logInfo("setState","state from:".concat(eh[this.state]," to:").concat(eh[e])),this._state=e}},{key:"preProcessUrl",value:function(e,s){var a=this.config,o=a.preProcessUrl,l=a.preProcessUrlOptions,u=Object.assign({},l,s);return!A.isBlob(e)&&typeof o=="function"?o(e,u):{url:e}}},{key:"_seekToStartTime",value:function(){this.__startTime>0&&this.duration>0&&(this.currentTime=this.__startTime>this.duration?this.duration:this.__startTime,this.__startTime=-1)}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){typeof e=="boolean"&&(this._hasStart=e,e===!1&&this.setState(We.READY),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return this._state===We.RUNNING||this._state===We.ENDED},set:function(e){e?this.setState(We.RUNNING):this._state>=We.RUNNING&&this.setState(We.ATTACHED)}},{key:"definitionList",get:function(){return!this.config||!this.config.definition?[]:this.config.definition.list||[]},set:function(e){var s=this,a=this.config.definition,o=null,l=null;a.list=e,this.emit("resourceReady",e),e.forEach(function(u){var c;((c=s.curDefinition)===null||c===void 0?void 0:c.definition)===u.definition&&(o=u),a.defaultDefinition===u.definition&&(l=u)}),!l&&e.length>0&&(l=e[0]),o?this.changeDefinition(o):l&&this.changeDefinition(l)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.media||!this.media.getVideoPlaybackQuality)return e;var s=this.media.getVideoPlaybackQuality();return e.dropped=s.droppedVideoFrames||0,e.total=s.totalVideoFrames||0,e.corrupted=s.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"lang",get:function(){return this.config.lang},set:function(e){var s=vr.langKeys.filter(function(a){return a===e});if(s.length===0&&e!=="zh"){console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(vr.langKeys.join(),"] "));return}this.config.lang=e,Lt.setLang(e,this)}},{key:"i18n",get:function(){var e=this.config.lang;return e==="zh"&&(e="zh-cn"),this.__i18n.lang[e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return ru}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){return Be(xe(i.prototype),"readyState",this)}},{key:"error",get:function(){var e=Be(xe(i.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){return Be(xe(i.prototype),"networkState",this)}},{key:"fullscreenChanging",get:function(){return this._fullScreenOffset!==null}},{key:"cumulateTime",get:function(){var e=this._accPlayed,s=e.acc,a=e.t;return a?new Date().getTime()-a+s:s}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"videoRotateDeg",get:function(){return this.videoPos.rotate},set:function(e){e=A.convertDeg(e),!(e%90!==0||e===this.videoPos.rotate)&&(this.videoPos.rotate=e,this.resizePosition())}},{key:"avgSpeed",get:function(){return nh},set:function(e){nh=e}},{key:"realTimeSpeed",get:function(){return th},set:function(e){th=e}},{key:"offsetCurrentTime",get:function(){return this._offsetInfo.currentTime||0},set:function(e){this._offsetInfo.currentTime=e}},{key:"offsetDuration",get:function(){return this._offsetInfo.duration||0},set:function(e){this._offsetInfo.duration=e||0}},{key:"hook",value:function(e,s){return Na.call.apply(Na,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,s){return Ua.call.apply(Ua,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,s){return Ha.call.apply(Ha,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,s,a){for(var o=arguments.length,l=new Array(o>3?o-3:0),u=3;u<o;u++)l[u-3]=arguments[u];return Yf.call.apply(Yf,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,s,a){for(var o=arguments.length,l=new Array(o>3?o-3:0),u=3;u<o;u++)l[u-3]=arguments[u];return Qf.call.apply(Qf,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,s){var a;typeof s=="boolean"&&s!==this.muted&&(this.addInnerOP("volumechange"),A.typeOf(s)===Boolean&&(this.muted=s)),(a=hi)===null||a===void 0||a.setActive(this.playerId,e)}}],[{key:"debugger",get:function(){return Ye.config.debug},set:function(e){Ye.config.debug=e}},{key:"instManager",get:function(){return hi},set:function(e){hi=e}},{key:"getCurrentUserActivePlayerId",value:function(){var e;return(e=hi)===null||e===void 0?void 0:e.getActiveId()}},{key:"setCurrentUserActive",value:function(e,s){var a;(a=hi)===null||a===void 0||a.setActive(e,s)}},{key:"isHevcSupported",value:function(){return je.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return je.probeConfigSupported(e)}},{key:"install",value:function(e,s){i.plugins||(i.plugins={}),i.plugins[e]||(i.plugins[e]=s)}},{key:"use",value:function(e,s){i.plugins||(i.plugins={}),i.plugins[e]=s}}]),i}(DS);j(Ro,"defaultPreset",null);j(Ro,"XgVideoProxy",null);Ro.instManager=Lg.getInstance();function Pi(n,r,i){try{return' <div class="xg-tips '.concat(i?"hide":" ",'" lang-key="').concat(n.i18nKeys[r],`">
    `).concat(n.i18n[r],`
    </div>`)}catch{return'<div class="xg-tips hide"></div>'}}var $i=function(n){ke(i,n);var r=Ie(i);function i(){var t;ve(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),j(M(t),"_onMouseenter",function(o){t.emit("icon_mouseenter",{pluginName:t.pluginName})}),j(M(t),"_onMouseLeave",function(o){t.emit("icon_mouseleave",{pluginName:t.pluginName})}),t}return me(i,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave),this.config.disable&&this.disable()}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),i}(qe);function ZS(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" class='path_full' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}function $S(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}var lu=function(n){ke(i,n);var r=Ie(i);function i(){return ve(this,i),r.apply(this,arguments)}return me(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.cssFullscreen=="boolean"&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;Be(xe(i.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(La,function(s){e.animate(s)}),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,s=this.find(".xgplayer-icon");s.appendChild(e.cssFullscreen),s.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var s=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:s}),s?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var s=this.i18nKeys,a=this.find(".xg-tips");a&&this.changeLangTextKey(a,e?s.EXITCSSFULLSCREEN_TIPS:s.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:ZS,class:"xg-get-cssfull"},exitCssFullscreen:{icon:$S,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){Be(xe(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class='xgplayer-cssfullscreen'>
    <div class="xgplayer-icon">
    </div>
    `.concat(Pi(this,"CSSFULLSCREEN_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:lt.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),i}($i);function eE(){return new DOMParser().parseFromString(`<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>
    </g>
</svg>`,"image/svg+xml").firstChild}var tE=function(n){ke(i,n);var r=Ie(i);function i(){return ve(this,i),r.apply(this,arguments)}return me(i,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(s){s.preventDefault(),s.stopPropagation(),e.config.onClick(s)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:eE,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){A.addClass(this.root,"show")}},{key:"hide",value:function(){A.removeClass(this.root,"show")}},{key:"render",value:function(){return`<xg-icon class="xgplayer-back">
    </xg-icon>`}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:lt.ROOT_TOP,index:0}}}]),i}(qe);function nE(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>
</svg>
`,"image/svg+xml").firstChild}function iE(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>
</svg>
`,"image/svg+xml").firstChild}var Bg=function(n){ke(i,n);var r=Ie(i);function i(){var t;ve(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),j(M(t),"_onOrientationChange",function(o){t.player.fullscreen&&t.config.rotateFullscreen&&(window.orientation===90||window.orientation===-90?t.player.setRotateDeg(0):t.player.setRotateDeg(90))}),t}return me(i,[{key:"afterCreate",value:function(){var e=this;Be(xe(i.prototype),"afterCreate",this).call(this);var s=this.config,a=this.playerConfig;if(!s.disable){s.target&&(this.playerConfig.fullscreenTarget=this.config.target);var o=A.getFullScreenEl();a.fullscreenTarget===o&&this.player.getFullscreen().catch(function(l){}),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(u){var c=e.player.fullscreen;e.emitUserAction(u,"switch_fullscreen",{prop:"fullscreen",from:c,to:!c})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(Cn,function(l){var u=e.find(".xg-tips");u&&e.changeLangTextKey(u,l?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(l)}),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:tE,options:{config:{onClick:function(u){e.handleFullscreen(u)}}}})),je.device==="mobile"&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:nE,class:"xg-get-fullscreen"},exitFullscreen:{icon:iE,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){Be(xe(i.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",je.device==="mobile"?"touchend":"click",this.handleFullscreen),je.device==="mobile"&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e instanceof Event&&(e.preventDefault(),e.stopPropagation());var s=this.player,a=this.config,o=a.useCssFullscreen===!0||typeof a.useCssFullscreen=="function"&&a.useCssFullscreen();o?(s.fullscreen?s.exitCssFullscreen():s.getCssFullscreen(),this.animate(s.fullscreen)):a.rotateFullscreen?(s.fullscreen?s.exitRotateFullscreen():s.getRotateFullscreen(),this.animate(s.fullscreen)):a.switchCallback&&typeof a.switchCallback=="function"?a.switchCallback(s.fullscreen):s.fullscreen?(s.exitFullscreen(),a.useScreenOrientation&&this.unlockScreen()):(s.getFullscreen().catch(function(l){}),a.useScreenOrientation&&s.aspectRatio>1&&this.lockScreen(a.lockOrientationType))}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return`<xg-icon class="xgplayer-fullscreen">
    <div class="xgplayer-icon">
    </div>
    `.concat(Pi(this,e,this.playerConfig.isHideTips),`
    </xg-icon>`)}}},{key:"lockScreen",value:function(e){try{screen.orientation.lock(e).catch(function(s){})}catch{}}},{key:"unlockScreen",value:function(){try{screen.orientation.unlock().catch(function(e){})}catch{}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:lt.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,useScreenOrientation:!1,lockOrientationType:"landscape",switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),i}($i);function sc(){return new DOMParser().parseFromString(`<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>
</svg>
`,"image/svg+xml").firstChild}function ac(){return new DOMParser().parseFromString(`<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>
</svg>
`,"image/svg+xml").firstChild}var Mg=function(n){ke(i,n);var r=Ie(i);function i(){var t;ve(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),j(M(t),"btnClick",function(o){o.preventDefault(),o.stopPropagation();var l=M(t),u=l.player;return t.emitUserAction(o,"switch_play_pause",{prop:"paused",from:u.paused,to:!u.paused}),u.ended?u.replay():u.paused?(u.play(),t.animate(!1)):(u.pause(),t.animate(!0)),!1}),t}return me(i,[{key:"afterCreate",value:function(){Be(xe(i.prototype),"afterCreate",this).call(this);var e=this.config;e.disable||(this.initIcons(),this.bind(["touchend","click"],this.btnClick),this.listenEvents(),this.animate(!0))}},{key:"listenEvents",value:function(){var e=this,s=this.player;this.on([gn,Nr,Ur,Zi],function(){e.animate(s.paused)})}},{key:"registerIcons",value:function(){return{play:{icon:sc,class:"xg-icon-play"},pause:{icon:ac,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){if(this.player){var s=this.i18nKeys,a=this.find(".xg-tips");e?(this.setAttr("data-state","pause"),a&&this.changeLangTextKey(a,s.PLAY_TIPS)):(this.setAttr("data-state","play"),a&&this.changeLangTextKey(a,s.PAUSE_TIPS))}}},{key:"destroy",value:function(){Be(xe(i.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-play">
    <div class="xgplayer-icon">
    </div>
    `.concat(Pi(this,"PLAY_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:lt.CONTROLS_LEFT,index:0,disable:!1}}}]),i}($i),rE=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],sE=function(){function n(r){ve(this,n),this.fragments=r.fragments||[],this.fragments.length===0&&this.fragments.push({percent:1}),this._callBack=r.actionCallback,this.fragConfig={fragFocusClass:r.fragFocusClass||"inner-focus-point",fragAutoFocus:!!r.fragAutoFocus,fragClass:r.fragClass||""},this.style=r.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}return me(n,[{key:"updateDuration",value:function(i){var t=this;this.duration=i;var e=0,s=this.fragments;this.fragments=s.map(function(a){return a.start=parseInt(e,10),a.end=parseInt(e+a.percent*t.duration,10),a.duration=parseInt(a.percent*t.duration,10),e+=a.percent*t.duration,a})}},{key:"updateProgress",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"played",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},e=this.progressList,s=this.fragments;if(!(e.length<1)){var a=t.newIndex,o=t.curIndex,l=t.millisecond;a!==o&&e.map(function(f,h){h<a?f[i].style.width="100%":h>a&&(f[i].style.width=0)});var u=s[a],c=l===0?0:(l-u.start)/u.duration;e[a][i].style.width=c<0?0:"".concat(c*100,"%")}}},{key:"updateFocus",value:function(i){if(!(!this.fragConfig.fragAutoFocus||this.fragments.length<2)){if(!i){if(this.focusIndex>-1){this.unHightLight(this.focusIndex);var t={index:-1,preIndex:this.focusIndex,fragment:null};this._callBack&&this._callBack(t),this.focusIndex=-1}return}var e=this.findIndex(i.currentTime*1e3,this.focusIndex);if(e>=0&&e!==this.focusIndex){this.focusIndex>-1&&this.unHightLight(this.focusIndex),this.setHightLight(e);var s={index:e,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]};this.focusIndex=e,this._callBack&&this._callBack(s)}}}},{key:"update",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(t*1e3,10)!==this.duration){if(!t&&t!==0)return;this.updateDuration(parseInt(t*1e3,10))}var e=this.playedIndex,s=this.cachedIndex;if(A.typeOf(i.played)!=="Undefined"){var a=this.findIndex(i.played*1e3,e);if(a<0)return;this.updateProgress("played",{newIndex:a,curIndex:e,millisecond:parseInt(i.played*1e3,10)}),this.playedIndex=a}if(A.typeOf(i.cached)!=="Undefined"){var o=this.findIndex(i.cached*1e3,s);if(o<0)return;this.updateProgress("cached",{newIndex:o,curIndex:s,millisecond:parseInt(i.cached*1e3,10)}),this.cachedIndex=o}}},{key:"findIndex",value:function(i,t){var e=this.fragments;if(!e||e.length===0)return-1;if(e.length===1)return 0;if(t>-1&&t<e.length&&i>e[t].start&&i<e[t].end)return t;if(i>e[e.length-1].start)return e.length-1;for(var s=0;s<e.length;s++)if(i>e[s].start&&i<=e[s].end){t=s;break}return t}},{key:"findHightLight",value:function(){for(var i=this.root.children,t=0;t<i.length;t++)if(A.hasClass(i[t],this.fragConfig.fragFocusClass))return{dom:i[t],pos:i[t].getBoundingClientRect()}}},{key:"findFragment",value:function(i){var t=this.root.children;return i<0||i>=t.length?null:{dom:t[i],pos:t[i].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var i=this.root.children,t=0;t<i.length;t++)A.removeClass(i[t],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(i){var t=this.root.children;if(i<t.length)return A.addClass(t[i],this.fragConfig.fragFocusClass),{dom:t[i],pos:t[i].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(i){var t=this;if(Object.keys(this.fragConfig).forEach(function(s){i[s]!==void 0&&(t.fragConfig[s]=i[s])}),i.fragments){if(this.fragments=i.fragments.length===0?[{percent:1}]:i.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var e=this.root.children;e.length>0;)this.root.removeChild(e[0]);this.render()}}},{key:"render",value:function(){var i=this,t=this.style.progressColor;if(this.root||(this.root=A.createDom("xg-inners","",{},"progress-list")),this.fragments){var e=this.fragConfig,s=e.fragClass,a=e.fragFocusClass;this.progressList=this.fragments.map(function(o){var l=A.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(o.percent):"flex: ".concat(o.percent)},"".concat(o.isFocus?a:""," xgplayer-progress-inner ").concat(s));return i.root.appendChild(l),rE.forEach(function(u){l.appendChild(A.createDom(u.tag,"",{style:u.styleKey?"background: ".concat(i.style[u.styleKey],"; width:0;"):"width:0;"},u.className))}),{cached:l.children[0],played:l.children[1]}})}return this.root}}]),n}(),ih={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},Fg=function(n){ke(i,n);var r=Ie(i);function i(t){var e;return ve(this,i),e=r.call(this,t),j(M(e),"onMoveOnly",function(s,a){var o=M(e),l=o.pos,u=o.config,c=o.player,f=a;if(s){A.event(s);var h=A.getEventPos(s,c.zoom),d=c.rotateDeg===90?h.clientY:h.clientX;if(l.moving&&Math.abs(l.x-d)<u.miniMoveStep)return;l.moving=!0,l.x=d,f=e.computeTime(s,d)}e.triggerCallbacks("dragmove",f,s),e._updateInnerFocus(f)}),j(M(e),"onBodyClick",function(s){e.pos.isLocked&&(e.pos.isLocked=!1,s.preventDefault(),s.stopPropagation())}),j(M(e),"_mouseDownHandler",function(s,a){e._state.time=a.currentTime,e.updateWidth(a.currentTime,a.seekTime,a.percent,0),e._updateInnerFocus(a)}),j(M(e),"_mouseUpHandler",function(s,a){var o=M(e),l=o.pos;l.moving&&e.updateWidth(a.currentTime,a.seekTime,a.percent,2)}),j(M(e),"_mouseMoveHandler",function(s,a){var o=M(e),l=o._state,u=o.pos,c=o.config,f=o.player;l.time<a.currentTime?a.forward=!0:a.forward=!1,l.time=a.currentTime,u.isDown&&!u.moving&&(u.moving=!0,c.isPauseMoving&&f.pause(),e.triggerCallbacks("dragstart",a,s),e.emitUserAction("drag","dragstart",a)),e.updateWidth(a.currentTime,a.seekTime,a.percent,1),e.triggerCallbacks("dragmove",a,s),e._updateInnerFocus(a)}),j(M(e),"onMouseDown",function(s){var a=M(e),o=a._state,l=a.player,u=a.pos,c=a.config,f=a.playerConfig,h=A.getEventPos(s,l.zoom),d=l.rotateDeg===90?h.clientY:h.clientX;if(!(l.isMini||c.closeMoveSeek||!f.allowSeekAfterEnded&&l.ended)){if(!l.duration&&!l.isPlaying){l.play();return}s.stopPropagation(),e.focus(),A.checkIsFunction(f.disableSwipeHandler)&&f.disableSwipeHandler(),A.checkIsFunction(c.onMoveStart)&&c.onMoveStart(),A.event(s),u.x=d,u.isDown=!0,u.moving=!1,o.prePlayTime=l.currentTime,l.focus({autoHide:!1}),e.isProgressMoving=!0,A.addClass(e.progressBtn,"active");var p=e.computeTime(s,d);p.prePlayTime=o.prePlayTime,e._mouseDownHandlerHook(s,p);var v=s.type;return v==="touchstart"?(e.root.addEventListener("touchmove",e.onMouseMove),e.root.addEventListener("touchend",e.onMouseUp),e.root.addEventListener("touchcancel",e.onMouseUp)):(e.unbind("mousemove",e.onMoveOnly),document.addEventListener("mousemove",e.onMouseMove,!1),document.addEventListener("mouseup",e.onMouseUp,!1)),!0}}),j(M(e),"onMouseUp",function(s){var a=M(e),o=a.player,l=a.config,u=a.pos,c=a.playerConfig,f=a._state;if(u){s.stopPropagation(),s.preventDefault(),A.checkIsFunction(c.enableSwipeHandler)&&c.enableSwipeHandler(),A.checkIsFunction(l.onMoveEnd)&&l.onMoveEnd(),A.event(s),A.removeClass(e.progressBtn,"active");var h=e.computeTime(s,u.x);h.prePlayTime=f.prePlayTime,u.moving?(e.triggerCallbacks("dragend",h,s),e.emitUserAction("drag","dragend",h)):(e.triggerCallbacks("click",h,s),e.emitUserAction("click","click",h)),e._mouseUpHandlerHook(s,h),u.moving=!1,u.isDown=!1,u.x=0,u.y=0,u.isLocked=!0,f.prePlayTime=0,f.time=0;var d=s.type;d==="touchend"||d==="touchcancel"?(e.root.removeEventListener("touchmove",e.onMouseMove),e.root.removeEventListener("touchend",e.onMouseUp),e.root.removeEventListener("touchcancel",e.onMouseUp),e.blur()):(document.removeEventListener("mousemove",e.onMouseMove,!1),document.removeEventListener("mouseup",e.onMouseUp,!1),u.isEnter?c.isMobileSimulateMode!=="mobile"&&e.bind("mousemove",e.onMoveOnly):e.onMouseLeave(s)),A.setTimeout(M(e),function(){e.resetSeekState()},1),o.focus()}}),j(M(e),"onMouseMove",function(s){var a=M(e),o=a._state,l=a.pos,u=a.player,c=a.config;A.checkTouchSupport()&&s.preventDefault(),A.event(s);var f=A.getEventPos(s,u.zoom),h=u.rotateDeg===90?f.clientY:f.clientX,d=Math.abs(l.x-h);if(!(l.moving&&d<c.miniMoveStep||!l.moving&&d<c.miniStartStep)){l.x=h;var p=e.computeTime(s,h);p.prePlayTime=o.prePlayTime,e._mouseMoveHandlerHook(s,p)}}),j(M(e),"onMouseOut",function(s){e.triggerCallbacks("mouseout",null,s)}),j(M(e),"onMouseOver",function(s){e.triggerCallbacks("mouseover",null,s)}),j(M(e),"onMouseEnter",function(s){var a=M(e),o=a.player,l=a.pos;if(!(l.isDown||l.isEnter||o.isMini||!o.config.allowSeekAfterEnded&&o.ended)){l.isEnter=!0,e.bind("mousemove",e.onMoveOnly),e.bind("mouseleave",e.onMouseLeave),A.event(s);var u=A.getEventPos(s,o.zoom),c=o.rotateDeg===90?u.clientY:u.clientX,f=e.computeTime(s,c);e.triggerCallbacks("mouseenter",f,s),e.focus()}}),j(M(e),"onMouseLeave",function(s){e.triggerCallbacks("mouseleave",null,s),e.unlock(),e._updateInnerFocus(null)}),j(M(e),"onVideoResize",function(){var s=e.pos,a=s.x,o=s.isDown,l=s.isEnter;if(l&&!o){var u=e.computeTime(null,a);e.onMoveOnly(null,u)}}),e.useable=!1,e.isProgressMoving=!1,e.__dragCallBacks=[],e._state={now:-1,direc:0,time:0,prePlayTime:-1},e._disableBlur=!1,typeof e.config.isDragingSeek=="boolean"&&(console.warn("[XGPLAYER] 'isDragingSeek' is deprecated, please use 'isDraggingSeek' instead"),e.config.isDraggingSeek=e.config.isDragingSeek),e}return me(i,[{key:"offsetDuration",get:function(){return this.playerConfig.customDuration||this.player.offsetDuration||this.player.duration}},{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"currentTime",get:function(){var e=this.player,s=e.offsetCurrentTime,a=e.currentTime;return s>=0?s:a+this.timeOffset}},{key:"changeState",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.useable=e}},{key:"show",value:function(e){this.root&&(this.root.style.display="flex")}},{key:"_initInner",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!s||s.length===0)&&(s=[{percent:1}]);var o=gt(gt({fragments:s},a),{},{actionCallback:function(u){e.emitUserAction("fragment_focus","fragment_focus",u)}});this.innerList?this.innerList.reset(o):(this.innerList=new sE(o),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map(function(l){e[l]=e.innerList[l].bind(e.innerList)}))}},{key:"_updateInnerFocus",value:function(e){this.innerList&&this.innerList.updateFocus(e)}},{key:"afterCreate",value:function(){if(!(this.config.disable||this.playerConfig.isLive)){this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1,isLocked:!1},this.outer=this.find("xg-outer");var e=this.config,s=e.fragFocusClass,a=e.fragAutoFocus,o=e.fragClass;this._initInner(this.config.fragments,{fragFocusClass:s,fragAutoFocus:a,fragClass:o,style:this.playerConfig.commonStyle||{}}),je.device==="mobile"&&(this.config.isDraggingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.listenEvents(),this.bindDomEvents(),this.initCustomStyle()}}},{key:"listenEvents",value:function(){var e=this;this.on(ci,function(){e.onMouseLeave()}),this.on(dn,function(){e.onTimeupdate()}),this.on(ei,function(){e.onTimeupdate(),e.onCacheUpdate()}),this.on(pg,function(){e.onCacheUpdate()}),this.on(Ji,function(){e.onCacheUpdate(!0),e.onTimeupdate(!0),e._state.now=0}),this.on(Zi,function(){e.onReset()}),this.on(Ti,function(){e.onVideoResize()})}},{key:"setConfig",value:function(e){var s=this,a=null;Object.keys(e).forEach(function(o){s.config[o]=e[o],o==="fragments"&&(a=e[o])}),a&&this._initInner(a,e)}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},s=e.commonStyle,a=s.sliderBtnStyle,o=this.progressBtn;a&&(typeof a=="string"?o.style.boxShadow=a:Qt(a)==="object"&&Object.keys(a).map(function(l){o.style[l]=a[l]}))}},{key:"triggerCallbacks",value:function(e,s,a){this.__dragCallBacks.length>0&&this.__dragCallBacks.map(function(o){if(o&&o.handler&&o.type===e)try{o.handler(s,a)}catch(l){console.error("[XGPLAYER][triggerCallbacks] ".concat(o," error"),l)}})}},{key:"addCallBack",value:function(e,s){s&&typeof s=="function"&&this.__dragCallBacks.push({type:e,handler:s})}},{key:"removeCallBack",value:function(e,s){var a=this.__dragCallBacks,o=-1;a.map(function(l,u){l&&l.type===e&&l.handler===s&&(o=u)}),o>-1&&a.splice(o,1)}},{key:"unlock",value:function(){var e=this.player,s=this.pos;if(s.isEnter=!1,s.isLocked=!1,!e.isMini){if(this.unbind("mousemove",this.onMoveOnly),s.isDown){this.unbind("mouseleave",this.onMouseLeave);return}this.blur()}}},{key:"bindDomEvents",value:function(){var e=this.player.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),(this.domEventType==="touch"||this.domEventType==="compatible")&&this.root.addEventListener("touchstart",this.onMouseDown),(this.domEventType==="mouse"||this.domEventType==="compatible")&&(this.bind("mousedown",this.onMouseDown),e.isMobileSimulateMode!=="mobile"&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut),this.player.root.addEventListener("click",this.onBodyClick,!0))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),A.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),A.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,s,a,o){var l=this.config,u=this.player;if(!(l.isCloseClickSeek&&o===0)){var c=s=s>=u.duration?u.duration-l.endedDiff:Number(s).toFixed(1);this.updatePercent(a),this.updateTime(e),!(o===1&&(!l.isDraggingSeek||u.config.mediaType==="audio"))&&(this._state.now=c,this._state.direc=c>u.currentTime?0:1,u.seek(c))}}},{key:"computeTime",value:function(e,s){var a=this.player,o=this.root.getBoundingClientRect(),l=o.width,u=o.height,c=o.top,f=o.left,h,d,p=s;a.rotateDeg===90?(h=u,d=c):(h=l,d=f);var v=p-d;v=v>h?h:v<0?0:v;var g=v/h;g=g<0?0:g>1?1:g,Number.isNaN(g)&&(g=this.player.currentTime/this.offsetDuration);var _=parseInt(g*this.offsetDuration*1e3,10)/1e3,b=A.getCurrentTimeByOffset(_,a.timeSegments);return{percent:g,currentTime:_,seekTime:b,offset:v,width:h,left:d,e}}},{key:"updateTime",value:function(e){var s=this.player,a=this.duration;e>a?e=a:e<0&&(e=0);var o=s.plugins.time;o&&o.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,s){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(e*100,"%"),this.innerList.update({played:e*this.offsetDuration},this.offsetDuration);var a=this.player.plugins.miniprogress;a&&a.update({played:e*this.offsetDuration},this.offsetDuration)}}},{key:"onTimeupdate",value:function(e){var s=this.player,a=this._state,o=this.offsetDuration;if(!(s.isSeeking&&s.media.seeking||this.isProgressMoving||!s.hasStart)){if(a.now>-1){var l=parseInt(a.now*1e3,10)-parseInt(s.currentTime*1e3,10);if(a.direc===0&&l>300||a.direc===1&&l>-300){a.now=-1;return}else a.now=-1}var u=this.currentTime;u=A.adjustTimeByDuration(u,o,e),this.innerList.update({played:u},o),this.progressBtn.style.left="".concat(u/o*100,"%")}}},{key:"onCacheUpdate",value:function(e){var s=this.player,a=this.duration;if(s){var o=s.bufferedPoint.end;o=A.adjustTimeByDuration(o,a,e),this.innerList.update({cached:o},a)}}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0),this.progressBtn.style.left="0%"}},{key:"destroy",value:function(){var e=this.player;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var s=this.domEventType;(s==="touch"||s==="compatible")&&(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),this.root.removeEventListener("touchcancel",this.onMouseUp)),(s==="mouse"||s==="compatible")&&(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!0))}},{key:"render",value:function(){if(!(this.config.disable||this.playerConfig.isLive)){var e=this.player.controls?this.player.controls.config.mode:"",s=e==="bottom"?"xgplayer-progress-bottom":"";return`
    <xg-progress class="xgplayer-progress `.concat(s,`">
      <xg-outer class="xgplayer-progress-outer">
        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>
      </xg-outer>
    </xg-progress>
    `)}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:lt.CONTROLS_CENTER,index:0,disable:!1,isDraggingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:ih.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return ih}}]),i}(qe),Ng=function(n){ke(i,n);var r=Ie(i);function i(t){var e;return ve(this,i),e=r.call(this,t),e.isActiving=!1,e}return me(i,[{key:"duration",get:function(){var e=this.player,s=e.offsetDuration,a=e.duration;return this.playerConfig.customDuration||s||a}},{key:"currentTime",get:function(){var e=this.player,s=e.offsetCurrentTime,a=e.currentTime;return s>=0?s:a}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this.player.controls.config.mode;this.mode=e==="flex"?"flex":"normal",!this.config.disable&&(this.mode==="flex"&&(this.createCenterTime(),this.root.style.display="none"),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.listenEvents())}},{key:"listenEvents",value:function(){var e=this;this.on([ci,ei,dn],function(s){s.eventName==="durationchange"&&(e.isActiving=!1),e.onTimeUpdate()}),this.on(Ji,function(){e.onTimeUpdate(!0)}),this.on(Zi,function(){e.onReset()})}},{key:"show",value:function(e){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="block"),this.centerDurDom&&(this.centerDurDom.style.display="block");return}this.root.style.display="block"}},{key:"hide",value:function(){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="none"),this.centerDurDom&&(this.centerDurDom.style.display="none");return}this.root.style.display="none"}},{key:"onTimeUpdate",value:function(e){var s=this.player,a=this.config,o=this.duration;if(!(a.disable||this.isActiving||!s.hasStart)){var l=this.currentTime+this.timeOffset;l=A.adjustTimeByDuration(l,o,e),this.mode==="flex"?(this.centerCurDom.innerHTML=this.minWidthTime(A.format(l)),o!==1/0&&o>0&&(this.centerDurDom.innerHTML=A.format(o))):(this.timeDom.innerHTML=this.minWidthTime(A.format(l)),o!==1/0&&o>0&&(this.durationDom.innerHTML=A.format(o)))}}},{key:"onReset",value:function(){this.mode==="flex"?(this.centerCurDom.innerHTML=this.minWidthTime(A.format(0)),this.centerDurDom.innerHTML=A.format(0)):(this.timeDom.innerHTML=this.minWidthTime(A.format(0)),this.durationDom.innerHTML=A.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(!(!e.controls||!e.controls.center)){var s=e.controls.center;this.centerCurDom=A.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-left"),this.centerDurDom=A.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-right"),s.children.length>0?s.insertBefore(this.centerCurDom,s.children[0]):s.appendChild(this.centerCurDom),s.appendChild(this.centerDurDom),this.extraEls=[this.centerCurDom,this.centerDurDom]}}},{key:"afterPlayerInit",value:function(){var e=this.config;if(this.duration===1/0||this.playerConfig.isLive?(A.hide(this.durationDom),A.hide(this.timeDom),A.hide(this.find(".time-separator")),A.show(this.find(".time-live-tag"))):A.hide(this.find(".time-live-tag")),e.hide){this.hide();return}this.show()}},{key:"changeLiveState",value:function(e){e?(A.hide(this.durationDom),A.hide(this.timeDom),A.hide(this.find(".time-separator")),A.show(this.find(".time-live-tag"))):(A.hide(this.find(".time-live-tag")),A.show(this.find(".time-separator")),A.show(this.durationDom),A.show(this.timeDom))}},{key:"updateTime",value:function(e){if(this.isActiving=!0,!(!e&&e!==0||e>this.duration)){if(this.mode==="flex"){this.centerCurDom.innerHTML=this.minWidthTime(A.format(e));return}this.timeDom.innerHTML=this.minWidthTime(A.format(e))}}},{key:"minWidthTime",value:function(e){return e.split(":").map(function(s){return'<span class="time-min-width">'.concat(s,"</span>")}).join(":")}},{key:"resetActive",value:function(){var e=this,s=this.player,a=function(){e.isActiving=!1};this.off(ei,a),s.isSeeking&&s.media.seeking?this.once(ei,a):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-time">
    <span class="time-current">00:00</span>
    <span class="time-separator">/</span>
    <span class="time-duration">00:00</span>
    <span class="time-live-tag">`.concat(this.i18n.LIVE_TIP,`</span>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:lt.CONTROLS_LEFT,index:2,disable:!1}}}]),i}(qe);function aE(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function oE(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function lE(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>
</svg>
`,"image/svg+xml").firstChild}var Ug=function(n){ke(i,n);var r=Ie(i);function i(){var t;ve(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),j(M(t),"onBarMousedown",function(o){var l=M(t),u=l.player,c=t.find(".xgplayer-bar");A.event(o);var f=c.getBoundingClientRect(),h=A.getEventPos(o,u.zoom),d=f.height-(h.clientY-f.top);if(h.h=d,h.barH=f.height,t.pos=h,!(d<-2))return t.updateVolumePos(d,o),document.addEventListener("mouseup",t.onBarMouseUp),t._d.isStart=!0,!1}),j(M(t),"onBarMouseMove",function(o){var l=M(t),u=l._d;if(u.isStart){var c=M(t),f=c.pos,h=c.player;o.preventDefault(),o.stopPropagation(),A.event(o);var d=A.getEventPos(o,h.zoom);u.isMoving=!0;var p=f.h-d.clientY+f.clientY;p>f.barH||t.updateVolumePos(p,o)}}),j(M(t),"onBarMouseUp",function(o){A.event(o),document.removeEventListener("mouseup",t.onBarMouseUp);var l=M(t),u=l._d;u.isStart=!1,u.isMoving=!1}),j(M(t),"onMouseenter",function(o){t._d.isActive=!0,t.focus(),t.emit("icon_mouseenter",{pluginName:t.pluginName})}),j(M(t),"onMouseleave",function(o){t._d.isActive=!1,t.unFocus(100,!1,o),t.emit("icon_mouseleave",{pluginName:t.pluginName})}),j(M(t),"onVolumeChange",function(o){if(t.player){var l=t.player,u=l.muted,c=l.volume;t._d.isMoving||(t.find(".xgplayer-drag").style.height=u||c===0?"4px":"".concat(c*100,"%"),t.config.showValueLabel&&t.updateVolumeValue()),t.animate(u,c)}}),t}return me(i,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:oE,class:"xg-volume-small"},volumeLarge:{icon:aE,class:"xg-volume"},volumeMuted:{icon:lE,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},!this.config.disable){this.initIcons();var s=this.playerConfig,a=s.commonStyle,o=s.volume;a.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=a.volumeColor),this.changeMutedHandler=this.hook("mutedChange",function(l){e.changeMuted(l)},{pre:function(u){u.preventDefault(),u.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),je.device!=="mobile"&&this.playerConfig.isMobileSimulateMode!=="mobile"&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(hg,this.onVolumeChange),this.once(si,this.onVolumeChange),A.typeOf(o)!=="Number"&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,s){var a=this.player,o=this.find(".xgplayer-drag"),l=this.find(".xgplayer-bar");if(!(!l||!o)){var u=parseInt(e/l.getBoundingClientRect().height*1e3,10);o.style.height="".concat(e,"px");var c=Math.max(Math.min(u/1e3,1),0),f={volume:{from:a.volume,to:c}};a.muted&&(f.muted={from:!0,to:!1}),this.emitUserAction(s,"change_volume",{muted:a.muted,volume:a.volume,props:f}),a.volume=Math.max(Math.min(u/1e3,1),0),a.muted&&(a.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,s=e.volume,a=e.muted,o=this.find(".xgplayer-value-label"),l=Math.max(Math.min(s,1),0);o.innerText=a?0:Math.round(l*100)}},{key:"focus",value:function(){var e=this.player;e.focus({autoHide:!1}),this._timerId&&(A.clearTimeout(this,this._timerId),this._timerId=null),A.addClass(this.root,"slide-show")}},{key:"unFocus",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=arguments.length>2?arguments[2]:void 0,l=this._d,u=this.player;l.isActive||(this._timerId&&(A.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=A.setTimeout(this,function(){l.isActive||(a?u.blur():u.focus(),A.removeClass(e.root,"slide-show"),l.isStart&&e.onBarMouseUp(o)),e._timerId=null},s))}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var s=this.player,a=this._d;a.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:s.muted,volume:s.volume,props:{muted:{from:s.muted,to:!s.muted}}}),s.volume>0&&(s.muted=!s.muted),s.volume<.01&&(s.volume=this.config.miniVolume)}},{key:"animate",value:function(e,s){e||s===0?this.setAttr("data-state","mute"):s<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this._timerId&&(A.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon",je.device==="mobile"?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,s=this.config.showValueLabel;return`
    <xg-icon class="xgplayer-volume" data-state="normal">
      <div class="xgplayer-icon">
      </div>
      <xg-slider class="xgplayer-slider">
        `.concat(s?'<div class="xgplayer-value-label">'.concat(e*100,"</div>"):"",`
        <div class="xgplayer-bar">
          <xg-drag class="xgplayer-drag" style="height: `).concat(e*100,`%"></xg-drag>
        </div>
      </xg-slider>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:lt.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),i}(qe);function Vt(){return new Date().getTime()}var di={LOAD_START:"loadstart",LOADED_DATA:"loadeddata",FIRST_FRAME:"firstFrame",WAIT_START:"waitingStart",WAIT_END:"waitingEnd",SEEK_START:"seekStart",SEEK_END:"seekEnd"},uE=function(n){ke(i,n);var r=Ie(i);function i(){var t;ve(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),j(M(t),"_onTimeupdate",function(){t._state.isTimeUpdate=!0,t._state.autoplayStart&&(Ye.logInfo("[xgLogger]".concat(t.player.playerId," _onTimeupdate")),t._sendFF("onTimeupdate"))}),j(M(t),"_onAutoplayStart",function(){Ye.logInfo("[xgLogger]".concat(t.player.playerId," _onAutoplayStart")),t._state.autoplayStart=!0,t.vt&&t._sendFF("onAutoplayStart")}),j(M(t),"_onReset",function(){t._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},t.vt=0,t.pt=0,t.fvt=0,t.newPointTime=Vt(),t.loadedCostTime=0,t.startCostTime=0,t._isSeeking=!1,t.seekingStart=0,t.waitingStart=0,t.fixedWaitingStart=0,t._isWaiting=!1,t._waitTimer&&A.clearTimeout(M(t),t._waitTimer),t._waittTimer&&A.clearTimeout(M(t),t._waittTimer),t._waitTimer=null,t._waittTimer=null,t._waitType=0}),j(M(t),"_onSeeking",function(){t.seekingStart||(t.suspendWaitingStatus("seek"),t.seekingStart=Vt(),t.emitLog(di.SEEK_START,{start:Vt()}))}),j(M(t),"_onSeeked",function(){t.suspendSeekingStatus("seeked")}),j(M(t),"_onWaitingLoadStart",function(){t._isWaiting||t.vt||(t._isWaiting=!0,t.waitingStart=Vt(),t.fixedWaitingStart=Vt(),t._waitType=1,t.emitLog(di.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:1,endType:"loadstart"}))}),j(M(t),"_onWaiting",function(){t._isWaiting||!t.vt||(t._isWaiting=!0,t.vt?t.seekingStart?t._waitType=2:t._waitType=0:t._waitType=1,t.fixedWaitingStart=Vt(),t._waitTimer=A.setTimeout(M(t),function(){t._isWaiting&&(t.waitingStart=Vt(),A.clearTimeout(M(t),t._waitTimer),t._waitTimer=null,t._startWaitTimeout(),t.emitLog(di.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:t._waitType,endType:t._waitType===2?"seek":"playing"}))},200))}),j(M(t),"_onError",function(){t.suspendSeekingStatus("error"),t.suspendWaitingStatus("error")}),j(M(t),"_onPlaying",function(){t._isWaiting&&t.suspendWaitingStatus("playing")}),t}return me(i,[{key:"afterCreate",value:function(){var e=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.newPointTime=Vt(),this.loadedCostTime=0,this.startCostTime=0,this.on($u,function(){var s=e._state,a=s.autoplayStart,o=s.isFFSend;e.startCostTime=Vt()-e.newPointTime,Ye.logInfo("[xgLogger]".concat(e.player.playerId," LOAD_START"),"autoplayStart:".concat(a," isFFSend:").concat(o," startCostTime:").concat(e.startCostTime," newPointTime").concat(e.newPointTime)),!o&&(!s.isLs&&e.emitLog(di.LOAD_START,{}),s.isLs=!0,s.isTimeUpdate=!1,s.isFFLoading=!0,e.pt=Vt(),e.vt=0,e.fvt=0,e._initOnceEvents(),e._onWaitingLoadStart())}),this.on(si,function(){e.vt=Vt(),e.fvt=e.vt-e.pt,e.loadedCostTime=e.vt-e.newPointTime;var s=e._state,a=s.isTimeUpdate,o=s.isFFSend,l=s.autoplayStart;Ye.logInfo("[xgLogger]".concat(e.player.playerId," LOADED_DATA"),"fvt:".concat(e.fvt," isTimeUpdate:").concat(e._state.isTimeUpdate," loadedCostTime:").concat(e.loadedCostTime)),(a||l)&&e._sendFF("loadedData"),o||e.emitLog(di.LOADED_DATA,{}),e.suspendWaitingStatus("loadeddata")}),this.on(Co,this._onSeeking),this.on(ei,this._onSeeked),this.on(ko,function(){e.endState("destroy")}),this.on(Hs,function(){e.endState("urlChange"),Ye.logInfo("[xgLogger]".concat(e.player.playerId," URL_CHANGE")),e._state.isFFSend&&e._onReset()}),this.on([Zu,Zn],this._onPlaying),this.on(Us,this._onWaiting),this.on(Ur,this._onError),this.on(Io,function(){Ye.logInfo("[xgLogger]".concat(e.player.playerId," RESET")),e.endState("reset"),e._initOnceEvents(),e._onReset()})}},{key:"_initOnceEvents",value:function(){this.off(ji,this._onAutoplayStart),this.off(dn,this._onTimeupdate),this.once(ji,this._onAutoplayStart),this.once(dn,this._onTimeupdate)}},{key:"_sendFF",value:function(e){this.s=Vt();var s=this._state,a=s.isFFLoading,o=s.isFFSend;Ye.logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(e," fvt:").concat(this.fvt," isFFLoading:").concat(a," !isFFSend:").concat(!o)),this.vt>0&&a&&!o&&(Ye.logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),e),this._state.isFFLoading=!1,this._state.isFFSend=!0,this.emitLog(di.FIRST_FRAME,{fvt:this.fvt,costTime:this.fvt,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&A.clearTimeout(this,this._waittTimer),this._waittTimer=A.setTimeout(this,function(){e.suspendWaitingStatus("timeout"),A.clearTimeout(e,e._waittTimer),e._waittTimer=null},this.config.waitTimeout)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var s=Vt(),a=s-this.seekingStart;this.seekingStart=0,this.emitLog(di.SEEK_END,{end:s,costTime:a,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(A.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(A.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,!!this.waitingStart){var s=Vt(),a=s-this.waitingStart,o=s-this.fixedWaitingStart,l=this.config.waitTimeout;this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0,this.emitLog(di.WAIT_END,{fixedCostTime:o>l?l:o,costTime:a>l?l:a,type:e==="loadeddata"?1:this._waitType,endType:this._waitType===2?"seek":e})}}},{key:"emitLog",value:function(e,s){var a=this.player;this.emit(Eg,gt({t:Vt(),host:A.getHostFromUrl(a.currentSrc),vtype:a.vtype,eventType:e,currentTime:this.player.currentTime,readyState:a.video.readyState,networkState:a.video.networkState},s))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}]),i}(qe);function cE(){return new DOMParser().parseFromString(`<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">
  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>
</svg>
`,"image/svg+xml").firstChild}var fE=function(n){ke(i,n);var r=Ie(i);function i(){return ve(this,i),r.apply(this,arguments)}return me(i,[{key:"registerIcons",value:function(){return{replay:cE}}},{key:"afterCreate",value:function(){var e=this;qe.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",function(){e.player.replay()},{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(Ji,function(){if(e.playerConfig.loop||A.addClass(e.player.root,"replay"),!e.config.disable){e.show();var s=e.root.querySelector("path");if(s){var a=window.getComputedStyle(s).getPropertyValue("transform");if(typeof a=="string"&&a.indexOf("none")>-1)return null;s.setAttribute("transform",a)}}}),this.on(gn,function(){e.hide()})}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),A.removeClass(this.player.root,"replay")}},{key:"show",value:function(e){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return`<xg-replay class="xgplayer-replay">
      <xg-replay-txt class="xgplayer-replay-txt" lang-key="`.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,`</xg-replay-txt>
    </xg-replay>`)}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),i}(qe),hE=function(n){ke(i,n);var r=Ie(i);function i(){return ve(this,i),r.apply(this,arguments)}return me(i,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){A.addClass(this.root,"hide")}},{key:"show",value:function(e){A.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){typeof e.player.config.poster=="string"&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(Ji,function(){e.isEndedShow&&A.removeClass(e.root,"hide")}),this.config.hideCanplay?(this.once(dn,function(){e.onTimeUpdate()}),this.on(Hs,function(){A.removeClass(e.root,"hide"),A.addClass(e.root,"xg-showplay"),e.once(dn,function(){e.onTimeUpdate()})})):this.on(gn,function(){A.addClass(e.root,"hide")})}},{key:"setConfig",value:function(e){var s=this;Object.keys(e).forEach(function(o){s.config[o]=e[o]});var a=this.config.poster;this.update(a)}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?A.removeClass(this.root,"xg-showplay"):this.once(dn,function(){e.onTimeUpdate()})}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"getBgSize",value:function(e){var s="";switch(e){case"cover":s="cover";break;case"contain":s="contain";break;case"fixHeight":s="auto 100%";break;default:s=""}return s?"background-size: ".concat(s,";"):""}},{key:"render",value:function(){var e=this.config,s=e.poster,a=e.hideCanplay,o=e.fillMode,l=e.notHidden,u=this.getBgSize(o),c=s?"background-image:url(".concat(s,");").concat(u):u,f=l?"xg-not-hidden":a?"xg-showplay":"";return'<xg-poster class="xgplayer-poster '.concat(f,'" style="').concat(c,`">
    </xg-poster>`)}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,notHidden:!1,poster:"",fillMode:"fixWidth"}}}]),i}(qe),Fn={};function dE(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{start:null,end:null};return Fn[n]&&window.clearTimeout(Fn[n].id),Fn[n]={},i.start&&i.start(),Fn[n].id=window.setTimeout(function(){i.end&&i.end(),window.clearTimeout(Fn[n].id),delete Fn[n]},r),Fn[n].id}function rh(n){if(n){window.clearTimeout(n);return}Object.keys(Fn).map(function(r){window.clearTimeout(Fn[r].id),delete Fn[r]})}var pE=function(n){ke(i,n);var r=Ie(i);function i(t){var e;return ve(this,i),e=r.call(this,t),j(M(e),"onPlayerReset",function(){e.autoPlayStart=!1;var s=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),A.removeClass(e.root,s),e.show()}),j(M(e),"onAutoplayStart",function(){if(!e.autoPlayStart){var s=e.config.mode==="auto"?"auto-hide":"hide";A.addClass(e.root,s),e.autoPlayStart=!0,e.toggleTo("play")}}),e.autoPlayStart=!1,e}return me(i,[{key:"afterCreate",value:function(){var e=this.playerConfig;this.initIcons(),this.listenEvents(),this.bindClickEvents(),e.autoplay||this.show()}},{key:"listenEvents",value:function(){var e=this,s=this.player,a=this.playerConfig;this.once(tc,function(){a&&(a.lang&&a.lang==="en"?A.addClass(s.root,"lang-is-en"):a.lang==="jp"&&A.addClass(s.root,"lang-is-jp"))}),this.on(ji,this.onAutoplayStart),this.on(nc,function(){var o=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),A.removeClass(e.root,o),e.show()}),this.on(gn,function(){e.toggleTo("play")}),this.on(Nr,function(){e.toggleTo("pause")}),this.on(Io,function(){e.onPlayerReset()})}},{key:"bindClickEvents",value:function(){var e=this;this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(a){a.cancelable&&a.preventDefault(),a.stopPropagation();var o=e.player.paused;e.emitUserAction(a,"switch_play_pause",{props:"paused",from:o,to:!o})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:sc,class:"xg-icon-play"},startPause:{icon:ac,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){A.addClass(this.root,"hide")}},{key:"show",value:function(e){A.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){A.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){A.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var s=this;this._animateId=dE("pauseplay",400,{start:function(){A.addClass(s.root,"interact"),s.show(),s.switchStatus(!0)},end:function(){A.removeClass(s.root,"interact"),!e&&s.hide(),s._animateId=null}})}},{key:"endAnimate",value:function(){A.removeClass(this.root,"interact"),rh(this._animateId),this._animateId=null}},{key:"switchPausePlay",value:function(e){var s=this.player;if(e.cancelable&&e.preventDefault(),e.stopPropagation(),!(s.state<We.READY)){var a=this.player.paused;!a&&s.state===We.RUNNING?s.pause():s.play()}}},{key:"onPlayPause",value:function(e){this.toggleTo(e)}},{key:"toggleTo",value:function(e){var s=this.config,a=this.player;if(!(!a||a.state<We.RUNNING||!this.autoPlayStart)){if(s.mode==="show"){this.switchStatus(),this.show();return}if(s.mode==="auto"){this.switchStatus();return}if(s.isShowPause&&a.paused&&!a.ended||s.isShowEnd&&a.ended){this.switchStatus(),this.show(),this.endAnimate();return}if(s.disableAnimate){this.switchStatus(),this.hide();return}if(e==="play")this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||a.ended)return;this.animate()}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),rh(this._animateId)}},{key:"render",value:function(){var e=this.playerConfig.autoplay?this.config.mode==="auto"?"auto-hide":"hide":"";return`
    <xg-start class="xgplayer-start `.concat(e,`">
    <xg-start-inner></xg-start-inner>
    </xg-start>`)}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),i}(qe),gE=function(n){ke(i,n);var r=Ie(i);function i(){return ve(this,i),r.apply(this,arguments)}return me(i,[{key:"render",value:function(){var e=this.config.innerHtml,s=A.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)s.appendChild(e);else if(e&&typeof e=="string")s.innerHTML=e;else{for(var a="",o=1;o<=12;o++)a+='<div class="xgplayer-enter-bar'.concat(o,'"></div>');s.innerHTML='<div class="xgplayer-enter-spinner">'.concat(a,"</div>")}return s}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),i}(qe),sh=function(n){ke(i,n);var r=Ie(i);function i(){return ve(this,i),r.apply(this,arguments)}return me(i,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return`
      <xg-icon class="xgplayer-miniicon">
      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="`.concat(this.i18nKeys[e],'">').concat(this.i18n[e],`</span></div>
      </xg-icon>`)}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:lt.CONTROLS_RIGHT,index:10}}}]),i}(qe);function ah(n){var r=parseFloat(n),i=n.indexOf("%")===-1&&!Number.isNaN(r);return i&&r}var oc=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],Hg=oc.length;function vE(){for(var n={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},r=0;r<Hg;r++){var i=oc[r];n[i]=0}return n}function mE(n){var r=window.getComputedStyle(n);return r}function oh(n){if(typeof n=="string"&&(n=document.querySelector(n)),!(!n||Qt(n)!=="object"||!n.nodeType)){var r=mE(n);if(r.display==="none")return vE();var i={};i.width=n.offsetWidth,i.height=n.offsetHeight;for(var t=i.isBorderBox=r.boxSizing==="border-box",e=0;e<Hg;e++){var s=oc[e],a=r[s],o=parseFloat(a);i[s]=Number.isNaN(o)?0:o}var l=i.paddingLeft+i.paddingRight,u=i.paddingTop+i.paddingBottom,c=i.marginLeft+i.marginRight,f=i.marginTop+i.marginBottom,h=i.borderLeftWidth+i.borderRightWidth,d=i.borderTopWidth+i.borderBottomWidth,p=t,v=ah(r.width);v!==!1&&(i.width=v+(p?0:l+h));var g=ah(r.height);return g!==!1&&(i.height=g+(p?0:u+d)),i.innerWidth=i.width-(l+h),i.innerHeight=i.height-(u+d),i.outerWidth=i.width+c,i.outerHeight=i.height+f,i}}function hl(n,r){for(var i=0;i<n.length;i++){var t=n[i];if(t.identifier===r)return t}}var dl={START:"dragStart",MOVE:"dragMove",ENDED:"dragEnded"},lh={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},yE=function(n){ke(i,n);var r=Ie(i);function i(t){var e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ve(this,i),e=r.call(this),e.isEnabled=!0,e.isDragging=!1,e.isDown=!1,e.position={},e.downPoint={},e.dragPoint={x:0,y:0},e.startPos={x:0,y:0},e._root=t instanceof Element?t:document.querySelector(t),e._handlerDom=s.handle instanceof Element?s.handle:document.querySelector(s.handle),!e._root||!e._handlerDom?qu(e):(e._bindStartEvent(),e)}return me(i,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),lh[this._startKey].map(function(s){e["on".concat(s)]=e["on".concat(s)].bind(e)})}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var s=this;if(e){var a=lh[this._startKey];a.map(function(o){window.addEventListener(o,s["on".concat(o)])}),this._boundPointerEvents=a}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map(function(s){window.removeEventListener(s,e["on".concat(s)])}),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame(function(){e.animate()}))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var s=e.changedTouches[0];this.dragStart(e,s),this.touchIdentifier=s.pointerId!==void 0?s.pointerId:s.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var s=hl(e.changedTouches,this.touchIdentifier);s&&this.dragMove(e,s)}},{key:"ontouchend",value:function(e){var s=hl(e.changedTouches,this.touchIdentifier);s&&this.dragEnd(e,s),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var s=hl(e.changedTouches,this.touchIdentifier);s&&this.dragCancel(e,s)}},{key:"dragStart",value:function(e,s){if(!(!this._root||this.isDown||!this.isEnabled)){this.downPoint=s,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var a=oh(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-a.height,this.startPos.maxX=window.innerWidth-a.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,s){this.isDragging=!0,this.animate(),this.emit(dl.START,this.startPos)}},{key:"dragEnd",value:function(e,s){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(dl.ENDED)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,s){var a={x:s.pageX-this.downPoint.pageX,y:s.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(a)&&this.dragRealStart(e,s),a}},{key:"dragMove",value:function(e,s){if(e=e||window.event,!!this.isDown){var a=this.startPos,o=a.x,l=a.y,u=this._dragPointerMove(e,s),c=u.x,f=u.y;c=this.checkContain("x",c,o),f=this.checkContain("y",f,l),this.position.x=o+c,this.position.y=l+f,this.dragPoint.x=c,this.dragPoint.y=f,this.emit(dl.MOVE,this.position)}}},{key:"dragCancel",value:function(e,s){this.dragEnd(e,s)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,s,a){return s+a<0?0-a:e==="x"&&s+a>this.startPos.maxX?this.startPos.maxX-a:e==="y"&&s+a>this.startPos.maxY?this.startPos.maxY-a:s}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),s=this._getPositionCoord(e.left,"width"),a=this._getPositionCoord(e.top,"height");this.position.x=Number.isNaN(s)?0:s,this.position.y=Number.isNaN(a)?0:a,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var s=e.transform;if(s.indexOf("matrix")===0){var a=s.split(","),o=s.indexOf("matrix3d")===0?12:4,l=parseInt(a[o],10),u=parseInt(a[o+1],10);this.position.x+=l,this.position.y+=u}}},{key:"_getPositionCoord",value:function(e,s){if(e.indexOf("%")!==-1){var a=oh(this._root.parentNode);return a?parseFloat(e)/100*a[s]:0}return parseInt(e,10)}}]),i}(Fr),AE=function(n){ke(i,n);var r=Ie(i);function i(t){var e;ve(this,i),e=r.call(this,t),j(M(e),"onCancelClick",function(o){e.exitMini(),e.isClose=!0}),j(M(e),"onCenterClick",function(o){var l=M(e),u=l.player;u.paused?u.play():u.pause()}),j(M(e),"onScroll",function(o){if(!(!window.scrollY&&window.scrollY!==0||Math.abs(window.scrollY-e.pos.scrollY)<50)){var l=parseInt(A.getCss(e.player.root,"height"));l+=e.config.scrollTop,e.pos.scrollY=window.scrollY,window.scrollY>l+5?!e.isMini&&!e.isClose&&e.getMini():window.scrollY<=l&&(e.isMini&&e.exitMini(),e.isClose=!1)}}),e.isMini=!1,e.isClose=!1;var s=M(e),a=s.config;return e.pos={left:a.left<0?window.innerWidth-a.width-20:a.left,top:a.top<0?window.innerHeight-a.height-20:a.top,height:e.config.height,width:e.config.width,scrollY:window.scrollY||0},e.lastStyle=null,e}return me(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.mini=="boolean"&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(Nr,function(){e.setAttr("data-state","pause")}),this.on(gn,function(){e.setAttr("data-state","play")})}},{key:"onPluginsReady",value:function(){var e=this,s=this.player,a=this.config;if(!a.disable){if(this.config.isShowIcon){var o={config:{onClick:function(){e.getMini()}}};s.controls.registerPlugin(sh,o,sh.pluginName)}var l=A.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",l,this.onCancelClick),this.bind(".play-icon",l,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new yE(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:sc,class:"xg-icon-play"},pause:{icon:ac,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var s=this.player,a=this.playerConfig,o=this.config.target||this.player.root;this.lastStyle={},A.addClass(s.root,"xgplayer-mini"),["width","height","top","left"].map(function(l){e.lastStyle[l]=o.style[l],o.style[l]="".concat(e.pos[l],"px")}),a.fluid&&(o.style["padding-top"]=""),this.emit(Ba,!0),s.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var s=this.player,a=this.playerConfig,o=this.config.target||this.player.root;A.removeClass(s.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(l){o.style[l]=e.lastStyle[l]}),this.lastStyle=null,a.fluid&&(s.root.style.width="100%",s.root.style.height="0",s.root.style["padding-top"]="".concat(a.height*100/a.width,"%")),this.emit(Ba,!1),this.isMini=s.isMini=!1}},{key:"updatePos",value:function(e){this.pos=Object.assign(this.pos,e),this.isMini&&(this.player.root.style.left="".concat(this.pos.left,"px"),this.player.root.style.top="".concat(this.pos.top,"px"),this.player.root.style.width="".concat(this.pos.width,"px"),this.player.root.style.height="".concat(this.pos.height,"px"))}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=A.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return`
      <xg-mini-layer class="xg-mini-layer">
      <xg-mini-header class="xgplayer-mini-header">
      `.concat(Pi(this,"MINI_DRAG",this.playerConfig.isHideTips),`
      </xg-mini-header>
      <div class="mini-cancel-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>
        </svg>
      </div>
      <div class="play-icon">
      </div>
      </xg-mini-layer>`)}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),i}(qe),$s={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},pl=["videoClick","videoDbClick"],gl=function(n){ke(i,n);var r=Ie(i);function i(){var t;ve(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),j(M(t),"onMouseMove",function(o){var l=M(t),u=l.player,c=l.playerConfig;u.isActive||(u.focus({autoHide:!c.closeDelayBlur}),!c.closeFocusVideoFocus&&u.media.focus())}),j(M(t),"onMouseEnter",function(o){var l=M(t),u=l.playerConfig,c=l.player;!u.closeFocusVideoFocus&&c.media.focus(),u.closeDelayBlur?c.focus({autoHide:!1}):c.focus(),t.emit(yg)}),j(M(t),"onMouseLeave",function(o){var l=t.playerConfig,u=l.closePlayerBlur,c=l.leavePlayerTime,f=l.closeDelayBlur;!u&&!f&&(c?t.player.focus({autoHide:!0,delay:c}):t.player.blur({ignorePaused:!0})),t.emit(mg)}),j(M(t),"onVideoClick",function(o){var l=M(t),u=l.player,c=l.playerConfig;o.target&&c.closeVideoClick||(o.target===u.root||o.target===u.media||o.target===u.innerContainer||o.target===u.media.__canvas)&&(o.preventDefault(),c.closeVideoStopPropagation||o.stopPropagation(),t._clickCount++,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),t.clickTimer=setTimeout(function(){t._clickCount&&(t._clickCount--,Un(M(t),pl[0],function(f,h){t.switchPlayPause(h.e)},{e:o,paused:u.paused}),clearTimeout(t.clickTimer),t.clickTimer=null)},300))}),j(M(t),"onVideoDblClick",function(o){var l=M(t),u=l.player,c=l.playerConfig;if(!(c.closeVideoDblclick||!o.target||o.target!==u.media&&o.target!==u.media.__canvas)){if(!c.closeVideoClick&&t._clickCount<2){t._clickCount=0;return}t._clickCount=0,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),o.preventDefault(),o.stopPropagation(),Un(M(t),pl[1],function(f,h){t.emitUserAction(h.e,"switch_fullscreen",{props:"fullscreen",from:u.fullscreen,to:!u.fullscreen}),u.fullscreen?u.exitFullscreen():u.getFullscreen()},{e:o,fullscreen:u.fullscreen})}}),t}return me(i,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,pl.map(function(a){e.__hooks[a]=null});var s=this.playerConfig.isMobileSimulateMode;s==="mobile"||je.device==="mobile"&&!je.os.isIpad||this.initEvents()}},{key:"initEvents",value:function(){var e=this,s=this.player,a=s.media,o=s.root,l=this.playerConfig.enableContextmenu;o&&o.addEventListener("click",this.onVideoClick,!1),o&&o.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys($s).map(function(u){o.addEventListener(u,e[$s[u]],!1)}),!l&&a&&a.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var s=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:s.paused,to:!s.paused}),s.ended?s.duration!==1/0&&s.duration>0&&s.replay():s.paused?s.play():s.pause()}},{key:"onContextmenu",value:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,s=this.player,a=s.video,o=s.root;this.clickTimer&&clearTimeout(this.clickTimer),o.removeEventListener("click",this.onVideoClick,!1),o.removeEventListener("dblclick",this.onVideoDblClick,!1),a.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys($s).map(function(l){o.removeEventListener(l,e[$s[l]],!1)})}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),i}(zn),pi={PRESS:"press",PRESS_END:"pressend",DOUBlE_CLICK:"doubleclick",CLICK:"click",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart",TOUCH_END:"touchend"},_E={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},bE={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function uh(n){return n&&n.length>0?n[n.length-1]:null}function SE(){return{pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0}}var EE=function(){function n(r){var i=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{eventType:"touch"};ve(this,n),j(this,"onTouchStart",function(e){var s=i._pos,a=i.root,o=uh(e.touches);s.x=o?parseInt(o.pageX,10):e.pageX,s.y=o?parseInt(o.pageX,10):e.pageX,s.start=!0,i.__setPress(e),a.addEventListener(i.events.end,i.onTouchEnd),a.addEventListener(i.events.cancel,i.onTouchCancel),a.addEventListener(i.events.move,i.onTouchMove),i.trigger(pi.TOUCH_START,e)}),j(this,"onTouchCancel",function(e){i.onTouchEnd(e)}),j(this,"onTouchEnd",function(e){var s=i._pos,a=i.root;i.__clearPress(),a.removeEventListener(i.events.cancel,i.onTouchCancel),a.removeEventListener(i.events.end,i.onTouchEnd),a.removeEventListener(i.events.move,i.onTouchMove),e.moving=s.moving,e.press=s.press,s.press&&i.trigger(pi.PRESS_END,e),i.trigger(pi.TOUCH_END,e),!s.press&&!s.moving&&i.__setDb(e),s.press=!1,s.start=!1,s.moving=!1}),j(this,"onTouchMove",function(e){var s=i._pos,a=i.config,o=uh(e.touches),l=o?parseInt(o.pageX,10):e.pageX,u=o?parseInt(o.pageY,10):e.pageX,c=l-s.x,f=u-s.y;Math.abs(f)<a.miniStep&&Math.abs(c)<a.miniStep||(i.__clearPress(),s.press&&i.trigger(pi.PRESS_END,e),s.press=!1,s.moving=!0,i.trigger(pi.TOUCH_MOVE,e))}),this._pos={moving:!1,start:!1,x:0,y:0},this.config=SE(),Object.keys(t).map(function(e){i.config[e]=t[e]}),this.root=r,this.events=t.eventType==="mouse"?bE:_E,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return me(n,[{key:"_initEvent",value:function(){this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(i){var t=this,e=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout(function(){t.trigger(pi.PRESS,i),t._pos.press=!0,t.__clearPress()},e.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(i){var t=this,e=this.config;if(this.dbIntrvalId){this.__clearDb(),this.trigger(pi.DOUBlE_CLICK,i);return}this.dbIntrvalId=setTimeout(function(){t.__clearDb(),!t._pos.start&&!t._pos.press&&!t._pos.moving&&t.trigger(pi.CLICK,i)},e.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(i,t){this.__handlers[i]||(this.__handlers[i]=[]),this.__handlers[i].push(t)}},{key:"off",value:function(i,t){if(this.__handlers[i]){for(var e=this.__handlers[i],s=-1,a=0;a<e.length;a++)if(e[a]===t){s=a;break}s>=0&&this.__handlers[i].splice(s,1)}}},{key:"trigger",value:function(i,t){this.__handlers[i]&&this.__handlers[i].map(function(e){try{e(t)}catch(s){console.error("trigger>>:".concat(i),s)}})}},{key:"destroy",value:function(){var i=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).forEach(function(e){i.root.removeEventListener(e,i[t[e]])})}}]),n}();function wE(){return new DOMParser().parseFromString(`<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <path opacity="0.54"
    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"
    fill="white" />
  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>
</svg>`,"image/svg+xml").firstChild}var rr={AUTO:"auto",SEEKING:"seeking",PLAYBACK:"playbackrate"},vl=["videoClick","videoDbClick"],CE=function(n){ke(i,n);var r=Ie(i);function i(t){var e;return ve(this,i),e=r.call(this,t),j(M(e),"onTouchStart",function(s){var a=M(e),o=a.player,l=a.config,u=a.pos,c=a.playerConfig,f=e.getTouche(s);if(f&&!l.disableGesture&&e.duration>0&&!o.ended){u.isStart=!0,e.timer&&clearTimeout(e.timer),A.checkIsFunction(c.disableSwipeHandler)&&c.disableSwipeHandler(),e.find(".xg-dur").innerHTML=A.format(e.duration);var h=e.root.getBoundingClientRect();o.rotateDeg===90?(u.top=h.left,u.left=h.top,u.width=h.height,u.height=h.width):(u.top=h.top,u.left=h.left,u.width=h.width,u.height=h.height);var d=parseInt(f.pageX-u.left,10),p=parseInt(f.pageY-u.top,10);u.x=o.rotateDeg===90?p:d,u.y=o.rotateDeg===90?d:p,u.scopeL=l.scopeL*u.width,u.scopeR=(1-l.scopeR)*u.width,u.scopeM1=u.width*(1-l.scopeM)/2,u.scopeM2=u.width-u.scopeM1}}),j(M(e),"onTouchMove",function(s){var a=e.getTouche(s),o=M(e),l=o.pos,u=o.config,c=o.player;if(!(!a||u.disableGesture||!e.duration||!l.isStart)){var f=u.miniMoveStep,h=u.hideControlsActive,d=parseInt(a.pageX-l.left,10),p=parseInt(a.pageY-l.top,10),v=c.rotateDeg===90?p:d,g=c.rotateDeg===90?d:p;if(Math.abs(v-l.x)>f||Math.abs(g-l.y)>f){var _=v-l.x,b=g-l.y,y=l.scope;if(y===-1&&(y=e.checkScope(v,g,_,b,l),y===0&&(h?c.blur():c.focus({autoHide:!1}),!l.time&&(l.time=parseInt(c.currentTime*1e3,10)+e.timeOffset*1e3)),l.scope=y),y===-1||y>0&&!u.gestureY||y===0&&!u.gestureX)return;e.executeMove(_,b,y,l.width,l.height),l.x=v,l.y=g}}}),j(M(e),"onTouchEnd",function(s){var a=M(e),o=a.player,l=a.pos,u=a.playerConfig;if(setTimeout(function(){o.getPlugin("progress")&&o.getPlugin("progress").resetSeekState()},10),!!l.isStart){l.scope>-1&&s.cancelable&&s.preventDefault();var c=e.config,f=c.disableGesture,h=c.gestureX;!f&&h?e.endLastMove(l.scope):l.time=0,l.scope=-1,e.resetPos(),A.checkIsFunction(u.enableSwipeHandler)&&u.enableSwipeHandler(),e.changeAction(rr.AUTO)}}),j(M(e),"onRootTouchMove",function(s){e.config.disableGesture||!e.config.gestureX||e.checkIsRootTarget(s)&&(s.stopPropagation(),e.pos.isStart?e.onTouchMove(s):e.onTouchStart(s))}),j(M(e),"onRootTouchEnd",function(s){e.pos.scope>-1&&e.onTouchEnd(s)}),e.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},e.timer=null,e}return me(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:wE,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this;vl.map(function(h){e.__hooks[h]=null});var s=this.playerConfig,a=this.config,o=this.player;s.closeVideoDblclick===!0&&(a.closedbClick=!0),this.resetPos(),A.isUndefined(s.disableGesture)||(a.disableGesture=!!s.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=A.createDom("xg-mask","",{},"xgmask"),o.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var l=this.domEventType==="mouse"?"mouse":"touch";this.touch=new EE(this.root,{eventType:l,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",function(h){h.preventDefault()}),o.root.addEventListener("touchmove",this.onRootTouchMove,!0),o.root.addEventListener("touchend",this.onRootTouchEnd,!0),o.root.addEventListener("touchcancel",this.onRootTouchEnd,!0);var u=this.player.controls;u&&u.center&&(u.center.addEventListener("touchmove",this.onRootTouchMove,!0),u.center.addEventListener("touchend",this.onRootTouchEnd,!0),u.center.addEventListener("touchcancel",this.onRootTouchEnd,!0)),this.on(ci,function(){var h=e.player,d=e.config;h.duration>0&&h.duration*1e3<d.moveDuration&&(d.moveDuration=h.duration*1e3)}),this.on([Zn,Ji],function(){var h=e.pos,d=h.time,p=h.isStart;!p&&d>0&&(e.pos.time=0)});var c={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(c).map(function(h){e.touch.on(h,function(d){e[c[h]](d)})}),!a.disableActive){var f=o.plugins.progress;f&&(f.addCallBack("dragmove",function(h){e.activeSeekNote(h.currentTime,h.forward)}),["dragend","click"].forEach(function(h){f.addCallBack(h,function(){e.changeAction(rr.AUTO)})}))}}},{key:"registerThumbnail",value:function(){var e=this.player,s=e.plugins.thumbnail;if(s&&s.usable){this.thumbnail=s.createThumbnail(null,"mobile-thumbnail");var a=this.find(".time-preview");a.insertBefore(this.thumbnail,a.children[0])}}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},s=e.commonStyle,a=s.playedColor,o=s.progressColor,l=s.timePreviewStyle,u=s.curTimeColor,c=s.durationColor;if(a&&(this.find(".xg-curbar").style.backgroundColor=a),o&&(this.find(".xg-bar").style.backgroundColor=o),l){var f=this.find(".time-preview");Object.keys(l).forEach(function(p){f.style[p]=l[p]})}var h=u||a,d=c;h&&(this.find(".xg-cur").style.color=h),d&&(this.find(".xg-dur").style.color=d),this.config.disableTimeProgress&&A.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map(function(s){e.pos[s]=0})):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var s=this.player,a=this.root;a.setAttribute("data-xg-action",e);var o=s.plugins.start;o&&o.recover()}},{key:"getTouche",value:function(e){var s=this.player.rotateDeg,a=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return s===0?{pageX:a.pageX,pageY:a.pageY}:{pageX:a.pageX,pageY:a.pageY}}},{key:"checkScope",value:function(e,s,a,o,l){var u=l.width,c=-1;if(e<0||e>u)return c;var f=Math.abs(o===0?a:a/o);return Math.abs(a)>0&&f>=1.73&&e>l.scopeM1&&e<l.scopeM2?c=0:(Math.abs(a)===0||f<=.57)&&(c=e<l.scopeL?1:e>l.scopeR?2:3),c}},{key:"executeMove",value:function(e,s,a,o,l){switch(a){case 0:this.updateTime(e/o*this.config.scopeM);break;case 1:this.updateBrightness(s/l);break;case 2:je.os.isIos||this.updateVolume(s/l);break}}},{key:"endLastMove",value:function(e){var s=this,a=this.pos,o=this.player,l=this.config,u=(a.time-this.timeOffset)/1e3;switch(e){case 0:o.seek(Number(u).toFixed(1)),l.hideControlsEnd?o.blur():o.focus(),this.timer=setTimeout(function(){s.pos.time=0},500);break}this.changeAction(rr.AUTO)}},{key:"checkIsRootTarget",value:function(e){var s=this.player.plugins||{};return s.progress&&s.progress.root.contains(e.target)?!1:s.start&&s.start.root.contains(e.target)||s.controls&&s.controls.root.contains(e.target)}},{key:"sendUseAction",value:function(e){var s=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:s,to:!s})}},{key:"clickHandler",value:function(e){var s=this.player,a=this.config,o=this.playerConfig;if(s.state<We.RUNNING){o.closeVideoClick||(this.sendUseAction(A.createEvent("click")),s.play());return}!a.closedbClick||o.closeVideoClick?s.isActive?s.blur():s.focus():o.closeVideoClick||((s.isActive||a.focusVideoClick)&&(this.sendUseAction(A.createEvent("click")),this.switchPlayPause()),s.focus())}},{key:"dbClickHandler",value:function(e){var s=this.config,a=this.player;!s.closedbClick&&a.state>=We.RUNNING&&(this.sendUseAction(A.createEvent("dblclick")),this.switchPlayPause())}},{key:"onClick",value:function(e){var s=this,a=this.player;Un(this,vl[0],function(o,l){s.clickHandler(l.e)},{e,paused:a.paused})}},{key:"onDbClick",value:function(e){var s=this,a=this.player;Un(this,vl[1],function(o,l){s.dbClickHandler(l.e)},{e,paused:a.paused})}},{key:"onPress",value:function(e){var s=this.pos,a=this.config,o=this.player;a.disablePress||(s.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:o.playbackRate,to:a.pressRate}),o.playbackRate=a.pressRate,this.changeAction(rr.PLAYBACK))}},{key:"onPressEnd",value:function(e){var s=this.pos,a=this.config,o=this.player;a.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:o.playbackRate,to:s.rate}),o.playbackRate=s.rate,s.rate=1,this.changeAction(rr.AUTO))}},{key:"updateTime",value:function(e){var s=this.player,a=this.config,o=this.player.duration;e=Number(e.toFixed(4));var l=parseInt(e*a.moveDuration,10)+this.timeOffset;l+=this.pos.time,l=l<0?0:l>o*1e3?o*1e3-200:l,s.getPlugin("time")&&s.getPlugin("time").updateTime(l/1e3),s.getPlugin("progress")&&s.getPlugin("progress").updatePercent(l/1e3/this.duration,!0),this.activeSeekNote(l/1e3,e>0),a.isTouchingSeek&&s.seek(Number((l-this.timeOffset)/1e3).toFixed(1)),this.pos.time=l}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var s=this.player,a=this.pos;if(e=parseInt(e*100,10),a.volume+=e,!(Math.abs(a.volume)<10)){var o=parseInt(s.volume*10,10)-parseInt(a.volume/10,10);o=o>10?10:o<1?0:o,s.volume=o/10,a.volume=0}}},{key:"updateBrightness",value:function(e){var s=this.pos,a=this.config,o=this.xgMask;if(a.darkness){this.player.rotateDeg&&(e=-e);var l=s.light+.8*e;l=l>a.maxDarkness?a.maxDarkness:l<0?0:l,o&&(o.style.backgroundColor="rgba(0,0,0,".concat(l,")")),s.light=l}}},{key:"activeSeekNote",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=this.player,o=this.config,l=!(this.duration!==1/0&&this.duration>0);if(!(!e||typeof e!="number"||l||o.disableActive)){e<0?e=0:e>a.duration&&(e=a.duration-.2),this.changeAction(rr.SEEKING);var u=a.plugins.start;u&&u.focusHide(),this.find(".xg-dur").innerHTML=A.format(this.duration),this.find(".xg-cur").innerHTML=A.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),s?A.removeClass(this.find(".xg-seek-show"),"xg-back"):A.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var s=this.player,a=s.plugins.thumbnail;a&&a.usable&&this.thumbnail&&a.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<We.ATTACHED)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!0}},{key:"enableGesture",value:function(){this.config.disableGesture=!1}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0),e.root.removeEventListener("touchcancel",this.onRootTouchEnd,!0);var s=this.player.controls;s&&s.center&&(s.center.removeEventListener("touchmove",this.onRootTouchMove,!0),s.center.removeEventListener("touchend",this.onRootTouchEnd,!0),s.center.removeEventListener("touchcancel",this.onRootTouchEnd,!0))}},{key:"render",value:function(){var e=this.config.gradient!=="normal"?"gradient ".concat(this.config.gradient):"gradient";return`
     <xg-trigger class="trigger">
     <div class="`.concat(e,`"></div>
        <div class="time-preview">
            <div class="xg-seek-show `).concat(this.config.disableSeekIcon?" hide-seek-icon":"",`">
              <i class="xg-seek-icon"></i>
              <span class="xg-cur">00:00</span>
              <span class="xg-separator">/</span>
              <span class="xg-dur">00:00</span>
            </div>
              <div class="xg-bar xg-timebar">
                <div class="xg-curbar"></div>
              </div>
        </div>
        <div class="xg-playbackrate xg-top-note">
            <span><i>`).concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,`</span>
        </div>
     </xg-trigger>
    `)}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:360*1e3,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),i}(qe);function TE(n){n.preventDefault(),n.returnValue=!1}function ch(n){var r=n.tagName;return!!(r==="INPUT"||r==="TEXTAREA"||n.isContentEditable)}var fh=function(n){ke(i,n);var r=Ie(i);function i(){var t;ve(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),j(M(t),"onBodyKeyDown",function(o){if(t.player){var l=o||window.event,u=l.keyCode,c=M(t),f=c._keyState,h=c.player,d=t.config,p=d.disable,v=d.disableBodyTrigger,g=d.isIgnoreUserActive;if(p||v||!(h.isUserActive||g)||ch(l.target)||!t.checkIsVisible()||l.metaKey||l.altKey||l.ctrlKey){f.isBodyKeyDown=!1;return}!o.repeat&&!f.isKeyDown&&((l.target===document.body||t.config.isGlobalTrigger&&!ch(l.target))&&t.checkCode(u,!0)&&(f.isBodyKeyDown=!0),document.addEventListener("keyup",t.onBodyKeyUp)),f.isBodyKeyDown&&t.handleKeyDown(l)}}),j(M(t),"onBodyKeyUp",function(o){t.player&&(document.removeEventListener("keyup",t.onBodyKeyUp),t.handleKeyUp(o))}),j(M(t),"onKeydown",function(o){if(t.player){var l=o||window.event,u=M(t),c=u._keyState;if(!l.repeat){if(t.config.disable||t.config.disableRootTrigger||l.metaKey||l.altKey||l.ctrlKey)return;l&&(l.keyCode===37||t.checkCode(l.keyCode))&&(l.target===t.player.root||l.target===t.player.video||l.target===t.player.controls.el)&&(c.isKeyDown=!0),t.player.root.addEventListener("keyup",t.onKeyup)}c.isKeyDown&&t.handleKeyDown(l)}}),j(M(t),"onKeyup",function(o){t.player&&(t.player.root.removeEventListener("keyup",t.onKeyup),t.handleKeyUp(o))}),t}return me(i,[{key:"mergekeyCodeMap",value:function(){var e=this,s=this.config.keyCodeMap;s&&Object.keys(s).map(function(a){e.keyCodeMap[a]?["keyCode","action","disable","pressAction","disablePress","isBodyTarget"].map(function(o){s[a][o]&&(e.keyCodeMap[a][o]=s[a][o])}):e.keyCodeMap[a]=s[a]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e=typeof this.config.seekStep=="function"?this.config.seekStep(this.player):this.config.seekStep;!e||typeof e!="number"||(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,disablePress:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,disablePress:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,disablePress:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disablePress:!1,disable:!1},right:{keyCode:39,action:"seek",pressAction:"changePlaybackRate",disablePress:!1,disable:!1},esc:{keyCode:27,action:"exitFullscreen",disablePress:!0,disable:!1}},this.mergekeyCodeMap(),this._keyState={isKeyDown:!1,isBodyKeyDown:!1,isPress:!1,tt:0,playbackRate:0},this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"setConfig",value:function(e){var s=this;Object.keys(e).forEach(function(a){s.config[a]=e[a]})}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),s=e.height,a=e.top,o=e.bottom,l=window.innerHeight;return!(a<0&&a<0-s*.9||o>0&&o-l>s*.9)}},{key:"checkCode",value:function(e,s){var a=this,o=!1;return Object.keys(this.keyCodeMap).map(function(l){a.keyCodeMap[l]&&e===a.keyCodeMap[l].keyCode&&!a.keyCodeMap[l].disable&&(o=!s||s&&!a.keyCodeMap[l].noBodyTarget)}),o}},{key:"downVolume",value:function(e){var s=this.player;if(!(s.volume<=0)){var a=parseFloat((s.volume-.1).toFixed(1)),o={volume:{from:s.volume,to:a}};this.emitUserAction(e,"change_volume",{props:o}),a>=0?s.volume=a:s.volume=0}}},{key:"upVolume",value:function(e){var s=this.player;if(!(s.volume>=1)){var a=parseFloat((s.volume+.1).toFixed(1)),o={volume:{from:s.volume,to:a}};this.emitUserAction(e,"change_volume",{props:o}),a<=1?s.volume=a:s.volume=1}}},{key:"seek",value:function(e){var s=this.player,a=s.currentTime,o=s.offsetCurrentTime,l=s.duration,u=s.offsetDuration,c=s.timeSegments,f=o>-1?o:a,h=u||l,d=e.repeat&&this.seekStep>=4?parseInt(this.seekStep/2,10):this.seekStep;f+d<=h?f=f+d:f=h;var p=A.getCurrentTimeByOffset(f,c),v={currentTime:{from:a,to:p}};this.emitUserAction(e,"seek",{props:v}),this.player.currentTime=p}},{key:"seekBack",value:function(e){var s=this.player,a=s.currentTime,o=s.offsetCurrentTime,l=s.timeSegments,u=e.repeat?parseInt(this.seekStep/2,10):this.seekStep,c=o>-1?o:a,f=c-u;f<0&&(f=0),f=A.getCurrentTimeByOffset(f,l);var h={currentTime:{from:a,to:f}};this.emitUserAction(e,"seek",{props:h}),this.player.currentTime=f}},{key:"changePlaybackRate",value:function(e){var s=this._keyState,a=this.config,o=this.player;s.playbackRate===0&&(s.playbackRate=o.playbackRate,o.playbackRate=a.playbackRate)}},{key:"playPause",value:function(e){var s=this.player;s&&(this.emitUserAction(e,"switch_play_pause"),s.paused?s.play():s.pause())}},{key:"exitFullscreen",value:function(e){var s=this.player,a=s.fullscreen,o=s.cssfullscreen;a&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:a,to:!a}),s.exitFullscreen()),o&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:o,to:!o}),s.exitCssFullscreen())}},{key:"handleKeyDown",value:function(e){var s=this._keyState;if(e.repeat){s.isPress=!0;var a=Date.now();if(a-s.tt<200)return;s.tt=a}this.handleKeyCode(e.keyCode,e,s.isPress)}},{key:"handleKeyUp",value:function(e){var s=this._keyState;s.playbackRate>0&&(this.player.playbackRate=s.playbackRate,s.playbackRate=0),s.isKeyDown=!1,s.isPress=!1,s.tt=0}},{key:"handleKeyCode",value:function(e,s,a){for(var o=Object.keys(this.keyCodeMap),l=0;l<o.length;l++){var u=this.keyCodeMap[o[l]],c=u.action,f=u.keyCode,h=u.disable,d=u.pressAction,p=u.disablePress;if(f===e){if(!h&&!(a&&p)){var v=a&&d||c;typeof v=="function"?c(s,this.player,a):typeof v=="string"&&typeof this[v]=="function"&&this[v](s,this.player,a),this.emit(Sg,gt({key:o[l],target:s.target,isPress:a},this.keyCodeMap[o[l]]))}TE(s),s.stopPropagation();break}}}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown),this.player.root.removeEventListener("keyup",this.onKeyup),document.removeEventListener("keyup",this.onBodyKeyUp)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!1,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!0,keyCodeMap:{},disable:!1,playbackRate:2,isIgnoreUserActive:!0}}}]),i}(zn);function kE(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">
  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>
</svg>
`,"image/svg+xml").firstChild}var IE=function(n){ke(i,n);var r=Ie(i);function i(){return ve(this,i),r.apply(this,arguments)}return me(i,[{key:"registerIcons",value:function(){return{loadingIcon:kE}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return`
    <xg-loading class="xgplayer-loading">
      <xg-loading-inner></xg-loading-inner>
    </xg-loading>`}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:lt.ROOT}}}]),i}(qe),RE=function(n){ke(i,n);var r=Ie(i);function i(){var t;ve(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),j(M(t),"_onDurationChange",function(){t.updateSegments();var o=t.player,l=o.currentTime,u=o.timeSegments;if(t._checkIfEnabled(u)){var c=A.getIndexByTime(l,u),f=A.getOffsetCurrentTime(l,u,c);t.player.offsetCurrentTime=f,t.changeIndex(c,u)}}),j(M(t),"_onLoadedData",function(){var o=t.player.timeSegments;if(t._checkIfEnabled(o)){var l=A.getOffsetCurrentTime(0,o);t.player.offsetCurrentTime=l,t.changeIndex(0,o),t.curPos.start>0&&(t.player.currentTime=t.curPos.start)}}),j(M(t),"_onTimeupdate",function(){var o=t.player,l=o.currentTime,u=o.timeSegments;if(t._checkIfEnabled(u)){var c=u.length;t.lastCurrentTime=l;var f=A.getIndexByTime(l,u);f!==t.curIndex&&t.changeIndex(f,u);var h=A.getOffsetCurrentTime(l,u,f);if(t.player.offsetCurrentTime=h,!!t.curPos){var d=t.curPos,p=d.start,v=d.end;l<p?t.player.currentTime=p:l>v&&f>=c-1&&t.player.pause()}}}),j(M(t),"_onSeeking",function(){var o=t.player,l=o.currentTime,u=o.timeSegments;if(t._checkIfEnabled(u))if(l<u[0].start)t.player.currentTime=u[0].start;else if(l>u[u.length-1].end)t.player.currentTime=u[u.length-1].end;else{var c=A.getIndexByTime(l,u);if(c>=0){var f=t.getSeekTime(l,t.lastCurrentTime,c,u);f>=0&&(t.player.currentTime=f)}}}),j(M(t),"_onPlay",function(){var o=t.player,l=o.currentTime,u=o.timeSegments;t._checkIfEnabled(u)&&l>=u[u.length-1].end&&(t.player.currentTime=u[0].start)}),t}return me(i,[{key:"afterCreate",value:function(){this.curIndex=-1,this.curPos=null,this.lastCurrentTime=0,this.updateSegments(),this.on(ci,this._onDurationChange),this.on(si,this._onLoadedData),this.on(dn,this._onTimeupdate),this.on(Co,this._onSeeking),this.on(gn,this._onPlay)}},{key:"setConfig",value:function(e){var s=this;if(e){var a=Object.keys(e);a.length<1||(a.forEach(function(o){s.config[o]=e[o]}),this.updateSegments())}}},{key:"updateSegments",value:function(){var e=this.config,s=e.disable,a=e.segments,o=this.player;if(s||!a||a.length===0)o.timeSegments=[],o.offsetDuration=0,o.offsetCurrentTime=-1;else{var l=this.formatTimeSegments(a,o.duration);o.timeSegments=l,o.offsetDuration=l.length>0?l[l.length-1].duration:0}}},{key:"formatTimeSegments",value:function(e,s){var a=[];return e?(e.sort(function(o,l){return o.start-l.start}),e.forEach(function(o,l){var u={};if(u.start=o.start<0?0:o.start,u.end=s>0&&o.end>s?s:o.end,!(s>0&&u.start>s)){a.push(u);var c=u.end-u.start;if(l===0)u.offset=o.start,u.cTime=0,u.segDuration=c,u.duration=c;else{var f=a[l-1];u.offset=f.offset+(u.start-f.end),u.cTime=f.duration+f.cTime,u.segDuration=c,u.duration=f.duration+c}}}),a):[]}},{key:"getSeekTime",value:function(e,s,a,o){var l=-1,u=o[a],c=u.start,f=u.end;if(e>=c&&e<=f)return l;var h=e-s;if(h<0&&e<c){var d=s>c?s-c:0;return l=a-1>=0?o[a-1].end+h+d:0,l}return-1}},{key:"_checkIfEnabled",value:function(e){return!(!e||e.length<1)}},{key:"changeIndex",value:function(e,s){this.curIndex=e,e>=0&&s.length>0?this.curPos=s[e]:this.curPos=null}}],[{key:"pluginName",get:function(){return"TimeSegmentsControls"}},{key:"defaultConfig",get:function(){return{disable:!0,segments:[]}}}]),i}(zn);function PE(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">
  <g>
    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>
    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>
  </g>
  <defs>
    <clipPath>
      <rect width="40" height="40" fill="white"/>
    </clipPath>
  </defs>
</svg>
`,"image/svg+xml").firstChild}var xE=function(n){ke(i,n);var r=Ie(i);function i(t){var e;return ve(this,i),e=r.call(this,t),e.rotateDeg=e.config.rotateDeg||0,e}return me(i,[{key:"afterCreate",value:function(){var e=this;if(!this.config.disable){Be(xe(i.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(Ti,function(){e.rotateDeg&&e.config.innerRotate&&A.setTimeout(e,function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)},100)});var s=this.player.root;this.rootWidth=s.style.width||s.offsetWidth||s.clientWidth,this.rootHeight=s.style.height||s.offsetHeight||s.clientHeight,this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate)}}},{key:"destroy",value:function(){Be(xe(i.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,s){if(e||(e=0),s){this.player.videoRotateDeg=e;return}var a=this.player,o=this.rootWidth,l=this.rootHeight,u=a.root,c=a.innerContainer,f=a.media,h=u.offsetWidth,d=c&&s?c.offsetHeight:u.offsetHeight,p=o,v=l,g=0,_=0;(e===.75||e===.25)&&(p="".concat(d,"px"),v="".concat(h,"px"),g=-(d-h)/2,_=-(h-d)/2);var b="translate(".concat(g,"px,").concat(_,"px) rotate(").concat(e,"turn)"),y={transformOrigin:"center center",transform:b,webKitTransform:b,height:v,width:p},m=s?f:u,S=s?a.getPlugin("poster"):null;Object.keys(y).map(function(I){m.style[I]=y[I],S&&S.root&&(S.root.style[I]=y[I])})}},{key:"rotate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,o=this.player;this.rotateDeg||(this.rotateDeg=0);var l=e?1:-1;this.rotateDeg=(this.rotateDeg+1+l*.25*a)%1,this.updateRotateDeg(this.rotateDeg,s),o.emit(_g,this.rotateDeg*360)}},{key:"registerIcons",value:function(){return{rotate:PE}}},{key:"render",value:function(){if(!this.config.disable)return`
    <xg-icon class="xgplayer-rotate">
      <div class="xgplayer-icon">
      </div>
      `.concat(Pi(this,"ROTATE_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:lt.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),i}($i);function DE(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}function OE(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}var sr={PIP:"picture-in-picture",INLINE:"inline",FULLSCREEN:"fullscreen"},LE=function(n){ke(i,n);var r=Ie(i);function i(){var t;ve(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),j(M(t),"switchPIP",function(o){if(!t.isPIPAvailable())return!1;o.stopPropagation&&o.stopPropagation(),t.isPip?(t.exitPIP(),t.emitUserAction(o,"change_pip",{props:"pip",from:!0,to:!1}),t.setAttr("data-state","normal")):t.player.media.readyState===4&&(t.requestPIP(),t.emitUserAction(o,"change_pip",{props:"pip",from:!1,to:!0}),t.setAttr("data-state","pip"))}),t}return me(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.pip=="boolean"&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(Be(xe(i.prototype),"afterCreate",this).call(this),this.pMode=sr.INLINE,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(To,function(){e.config.showIcon&&(A.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))}))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:DE,class:"xg-get-pip"},pipIconExit:{icon:OE,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,s=this.player;this.leavePIPCallback=function(){var a=s.paused;A.setTimeout(e,function(){!a&&s.mediaPlay()},0),!a&&s.mediaPlay(),e.setAttr("data-state","normal"),e.pipWindow=null,s.emit(ou,!1)},this.enterPIPCallback=function(a){s.emit(ou,!0),a!=null&&a.pictureInPictureWindow&&(e.pipWindow=a.pictureInPictureWindow),e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(a){var o=s.media.webkitPresentationMode;e.pMode===sr.FULLSCREEN&&o!==sr.FULLSCREEN&&s.onFullscreenChange(null,!1),e.pMode=o,o===sr.PIP?e.enterPIPCallback(a):o===sr.INLINE&&e.leavePIPCallback(a)},s.media&&(s.media.addEventListener("enterpictureinpicture",this.enterPIPCallback),s.media.addEventListener("leavepictureinpicture",this.leavePIPCallback),i.checkWebkitSetPresentationMode(s.media)&&s.media.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"copyStyleIntoPiPWindow",value:function(e){var s=kn(document.styleSheets).map(function(o){try{return kn(o.cssRules).map(function(u){return u.cssText}).join("")}catch{var l=document.createElement("link");l.rel="stylesheet",l.type=o.type,l.media=o.media,l.href=o.href,e.document.head.appendChild(l)}return""}).filter(Boolean).join(`
`),a=document.createElement("style");a.textContent=s,e.document.head.appendChild(a)}},{key:"requestPIP",value:function(){var e=this,s=this.player,a=this.playerConfig,o=this.config;if(!(!this.isPIPAvailable()||this.isPip))try{var l=a.poster;if(l&&(s.media.poster=A.typeOf(l)==="String"?l:l.poster),o.preferDocument&&this.isDocPIPAvailable()){var u={};if(o.width&&o.height)u.width=o.width,u.height=o.height;else{var c=s.root.getBoundingClientRect();u.width=c.width,u.height=c.height}documentPictureInPicture.requestWindow(u).then(function(f){var h=o.docPiPNode,d=o.docPiPStyle;e.enterPIPCallback();var p=h||s.root,v=p.parentElement,g=p.previousSibling,_=p.nextSibling;e.copyStyleIntoPiPWindow(f);var b=document.createElement("style");if(b.append("body{padding:0; margin:0;}"),d){var y="";typeof d=="string"?y=d:typeof d=="function"&&(y=d.call(o)),y&&b.append(y)}else p===s.root&&b.append(`
              .xgplayer{width: 100%!important; height: 100%!important;}
            `);f.document.head.append(b),f.document.body.append(p),f.addEventListener("pagehide",function(m){v&&(_?v.insertBefore(p,_):g?v.insertBefore(p,g.nextSibling):v.appendChild(p)),e.leavePIPCallback()},{once:!0})})}else i.checkWebkitSetPresentationMode(s.media)?s.media.webkitSetPresentationMode("picture-in-picture"):s.media.requestPictureInPicture();return!0}catch(f){return console.error("requestPiP",f),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{if(this.isPIPAvailable()&&this.isPip){var s;this.isDocPIPAvailable()&&(s=documentPictureInPicture)!==null&&s!==void 0&&s.window?documentPictureInPicture.window.close():i.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("inline"):document.exitPictureInPicture()}return!0}catch(a){return console.error("exitPIP",a),!1}}},{key:"isPip",get:function(){var e,s=this.player;return!!(this.isDocPIPAvailable()&&(e=documentPictureInPicture)!==null&&e!==void 0&&e.window)||document.pictureInPictureElement&&document.pictureInPictureElement===s.media||s.media.webkitPresentationMode===sr.PIP}},{key:"isPIPAvailable",value:function(){var e=this.player.media,s=A.typeOf(document.pictureInPictureEnabled)==="Boolean"?document.pictureInPictureEnabled:!1;return s&&(A.typeOf(e.disablePictureInPicture)==="Boolean"&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&A.typeOf(e.webkitSetPresentationMode)==="Function")||this.isDocPIPAvailable()}},{key:"isDocPIPAvailable",value:function(){return"documentPictureInPicture"in window&&/^(https|file)/.test(location.protocol)}},{key:"destroy",value:function(){Be(xe(i.prototype),"destroy",this).call(this);var e=this.player;e.media.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.media.removeEventListener("leavepictureinpicture",this.leavePIPCallback),i.checkWebkitSetPresentationMode(e.media)&&e.media.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(!(!this.config.showIcon||!this.isPIPAvailable()))return`<xg-icon class="xgplayer-pip">
      <div class="xgplayer-icon xg-icon-disable">
      </div>
      `.concat(Pi(this,"PIP",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:lt.CONTROLS_RIGHT,index:6,showIcon:!1,preferDocument:!1,width:void 0,height:void 0,docPiPNode:void 0,docPiPStyle:void 0}}},{key:"checkWebkitSetPresentationMode",value:function(e){return typeof e.webkitSetPresentationMode=="function"}}]),i}($i);function BE(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">
  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>
</svg>
`,"image/svg+xml").firstChild}var ME=function(n){ke(i,n);var r=Ie(i);function i(t){var e;return ve(this,i),e=r.call(this,t),j(M(e),"playNext",function(s){var a=M(e),o=a.player;s.preventDefault(),s.stopPropagation(),e.idx+1<e.config.urlList.length?(e.idx++,e.nextHandler(e.config.urlList[e.idx],e.idx),o.emit(Ma,e.idx+1)):(e.nextHandler(),o.emit(Ma))}),e.idx=-1,e}return me(i,[{key:"afterCreate",value:function(){!this.config.urlList||this.config.urlList.length===0||(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:BE}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e=je.device==="mobile"?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var s=this.player;e&&(s.pause(),s.currentTime=0,s.switchURL?s.switchURL(e):s.src=e,s.config.url=e,s.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(!(!this.config.urlList||this.config.urlList.length===0))return`
     <xg-icon class="xgplayer-playnext">
      <div class="xgplayer-icon">
      </div>
      `.concat(Pi(this,"PLAYNEXT_TIPS",this.playerConfig.isHideTips),`
     </xg-icon>
    `)}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:lt.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),i}(qe),ya={exports:{}},FE=ya.exports,hh;function NE(){return hh||(hh=1,function(n,r){(function(i,t){n.exports=t()})(FE,function(){return function i(t,e,s){var a=window,o="application/octet-stream",l=s||o,u=t,c=!e&&!s&&u,f=document.createElement("a"),h=function(R){return String(R)},d=a.Blob||a.MozBlob||a.WebKitBlob||h,p=e||"download",v,g;if(d=d.call?d.bind(a):Blob,String(this)==="true"&&(u=[u,l],l=u[0],u=u[1]),c&&c.length<2048&&(p=c.split("/").pop().split("?")[0],f.href=c,f.href.indexOf(c)!==-1)){var _=new XMLHttpRequest;return _.open("GET",c,!0),_.responseType="blob",_.onload=function(R){i(R.target.response,p,o)},setTimeout(function(){_.send()},0),_}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(u))if(u.length>1024*1024*1.999&&d!==h)u=S(u),l=u.type||o;else return navigator.msSaveBlob?navigator.msSaveBlob(S(u),p):I(u);else if(/([\x80-\xff])/.test(u)){var b=0,y=new Uint8Array(u.length),m=y.length;for(b;b<m;++b)y[b]=u.charCodeAt(b);u=new d([y],{type:l})}v=u instanceof d?u:new d([u],{type:l});function S(R){var N=R.split(/[:;,]/),G=N[1],H=N[2]=="base64"?atob:decodeURIComponent,ie=H(N.pop()),E=ie.length,T=0,P=new Uint8Array(E);for(T;T<E;++T)P[T]=ie.charCodeAt(T);return new d([P],{type:G})}function I(R,N){if("download"in f)return f.href=R,f.setAttribute("download",p),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout(function(){f.click(),document.body.removeChild(f),N===!0&&setTimeout(function(){a.URL.revokeObjectURL(f.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(R)&&(R="data:"+R.replace(/^data:([\w\/\-\+]+)/,o)),window.open(R)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=R),!0;var G=document.createElement("iframe");document.body.appendChild(G),!N&&/^data:/.test(R)&&(R="data:"+R.replace(/^data:([\w\/\-\+]+)/,o)),G.src=R,setTimeout(function(){document.body.removeChild(G)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(v,p);if(a.URL)I(a.URL.createObjectURL(v),!0);else{if(typeof v=="string"||v.constructor===h)try{return I("data:"+l+";base64,"+a.btoa(v))}catch{return I("data:"+l+","+encodeURIComponent(v))}g=new FileReader,g.onload=function(R){I(this.result)},g.readAsDataURL(v)}return!0}})}(ya)),ya.exports}var UE=NE();const HE=Ju(UE);function VE(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">
  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">
      <g id="Group-2">
        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">
          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>
          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>
          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>
          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>
        </g>
      </g>
    </g>
  </g>
</svg>
`,"image/svg+xml").firstChild}var jE=function(n){ke(i,n);var r=Ie(i);function i(t){var e;return ve(this,i),e=r.call(this,t),j(M(e),"download",function(s){if(!e.isLock){e.emitUserAction(s,"download");var a=e.playerConfig.url,o="";A.typeOf(a)==="String"?o=a:A.typeOf(a)==="Array"&&a.length>0&&(o=a[0].src);var l=e.getAbsoluteURL(o);HE(l),e.isLock=!0,e.timer=window.setTimeout(function(){e.isLock=!1,window.clearTimeout(e.timer),e.timer=null},300)}}),e.timer=null,e.isLock=!1,e}return me(i,[{key:"afterCreate",value:function(){Be(xe(i.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.appendChild(".xgplayer-icon",this.icons.download),this._handler=this.hook("click",this.download,{pre:function(s){s.preventDefault(),s.stopPropagation()}}),this.bind(["click","touchend"],this._handler))}},{key:"registerIcons",value:function(){return{download:VE}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var s=document.createElement("div");s.innerHTML='<a href="'.concat(e,'">x</a>'),e=s.firstChild.href}return e}},{key:"destroy",value:function(){Be(xe(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-download">
   <div class="xgplayer-icon">
   </div>
   `.concat(Pi(this,"DOWNLOAD_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:lt.CONTROLS_RIGHT,index:3,disable:!0}}}]),i}($i),GE=function(n){ke(i,n);var r=Ie(i);function i(){return ve(this,i),r.apply(this,arguments)}return me(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.screenShot=="boolean"&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){Be(xe(i.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(s){e.fitVideo&&(e.width=s.vWidth,e.height=s.vHeight)},this.once(Ti,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,s){var a=document.createElement("a");a.href=e,a.download=s;var o;try{typeof MouseEvent<"u"?o=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}):(o=document.createEvent("MouseEvents"),o.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null))}catch(l){console.error("MouseEvent unsupported",l)}o&&a.dispatchEvent(o)}},{key:"createCanvas",value:function(e,s){var a=document.createElement("canvas"),o=a.getContext("2d");this.canvasCtx=o,this.canvas=a,a.width=e||this.config.width,a.height=s||this.config.height,o.imageSmoothingEnabled=!0,o.imageSmoothingEnabled&&(o.imageSmoothingQuality="high")}},{key:"onClickBtn",value:function(e){var s=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot");var a=this.config;this.shot(a.width,a.height).then(function(o){s.emit(bg,o),a.saveImg&&s.saveScreenShot(o,a.name+a.format)})}},{key:"shot",value:function(e,s){var a=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{quality:.92,type:"image/png"},l=this.config,u=this.player,c=o.quality||l.quality,f=o.type||l.type;return new Promise(function(h,d){var p=null,v;if(u.media.canvas)p=u.media.canvas;else{a.canvas?(a.canvas.width=e||l.width,a.canvas.height=s||l.height):a.createCanvas(e,s),p=a.canvas,v=a.canvasCtx;var g=u.media.videoWidth/u.media.videoHeight,_=p.width/p.height,b=0,y=0,m=u.media.videoWidth,S=u.media.videoHeight,I,R,N,G;g>_?(N=p.width,G=p.width/g,I=0,R=Math.round((p.height-G)/2)):g===_?(N=p.width,G=p.height,I=0,R=0):g<_&&(N=p.height*g,G=p.height,I=Math.round((p.width-N)/2),R=0),v.drawImage(u.media,b,y,m,S,I,R,N,G)}var H=p.toDataURL(f,c).replace(f,"image/octet-stream");H=H.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),h(H)})}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){Be(xe(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(Ti,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",s="SCREENSHOT";return`
      <xg-icon class="xgplayer-shot">
      <div class="`.concat(e,`">
      `).concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[s],'">').concat(this.i18n[s],"</span>"),`
      </div>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:lt.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,saveImg:!0,fitVideo:!0,disable:!1,name:"screenshot"}}}]),i}($i),zE=function(){function n(r){ve(this,n),this.config=r.config,this.parent=r.root,this.root=A.createDom("ul","",{},"xg-options-list xg-list-slide-scroll ".concat(this.config.className)),r.root.appendChild(this.root);var i=this.config.maxHeight;i&&this.setStyle({maxHeight:i}),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var t=this.config.domEventType==="touch"?"touchend":"click";this._delegates=qe.delegate.call(this,this.root,"li",t,this.onItemClick)}return me(n,[{key:"renderItemList",value:function(i){var t=this,e=this.config,s=this.root;i?e.data=i:i=e.data,e.style&&Object.keys(e.style).map(function(a){s.style[a]=e[a]}),i.length>0&&(this.attrKeys=Object.keys(i[0])),this.root.innerHTML="",i.map(function(a,o){var l=a.selected?"option-item selected":"option-item";a["data-index"]=o,t.root.appendChild(A.createDom("li","<span>".concat(a.showText,"</span>"),a,l))})}},{key:"onItemClick",value:function(i){i.delegateTarget||(i.delegateTarget=i.target);var t=i.delegateTarget;if(t&&A.hasClass(t,"selected"))return!1;var e=typeof this.config.onItemClick=="function"?this.config.onItemClick:null,s=this.root.querySelector(".selected");A.addClass(t,"selected"),s&&A.removeClass(s,"selected"),e(i,{from:s?this.getAttrObj(s,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(i,t){if(!i||!t)return{};var e={};t.map(function(a){e[a]=i.getAttribute(a)});var s=i.getAttribute("data-index");return s&&(e.index=Number(s)),e}},{key:"show",value:function(){A.removeClass(this.root,"hide"),A.addClass(this.root,"active")}},{key:"hide",value:function(){A.removeClass(this.root,"active"),A.addClass(this.root,"hide")}},{key:"setStyle",value:function(i){var t=this;Object.keys(i).forEach(function(e){t.root.style[e]=i[e]})}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map(function(i){i.destroy&&i.destroy()}),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),n}(),Ln={SIDE:"side",MIDDLE:"middle",DEFAULT:"default"},ar={CLICK:"click",HOVER:"hover"};function KE(n,r){return n===Ln.SIDE?r===lt.CONTROLS_LEFT?"xg-side-list xg-left-side":"xg-side-list xg-right-side":""}var Oi=je.device==="mobile",Va=function(n){ke(i,n);var r=Ie(i);function i(t){var e;return ve(this,i),e=r.call(this,t),j(M(e),"onEnter",function(s){s.stopPropagation(),e.emit("icon_mouseenter",{pluginName:e.pluginName}),e.switchActiveState(s)}),j(M(e),"switchActiveState",function(s){s.stopPropagation();var a=e.config.toggleMode;a===ar.CLICK?e.toggle(!e.isActive):e.toggle(!0)}),j(M(e),"onLeave",function(s){s.stopPropagation(),e.emit("icon_mouseleave",{pluginName:e.pluginName}),e.config.listType!==Ln.SIDE&&e.isActive&&e.toggle(!1)}),j(M(e),"onListEnter",function(s){e.enterType=2}),j(M(e),"onListLeave",function(s){e.enterType=0,e.isActive&&e.toggle(!1)}),e.isIcons=!1,e.isActive=!1,e.curValue=null,e.curIndex=0,e}return me(i,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,s=this.config;this.initIcons(),Oi=Oi||this.domEventType==="touch",Oi&&je.device==="mobile"&&s.listType===Ln.DEFAULT&&(s.listType=Ln.SIDE),s.hidePortrait&&A.addClass(this.root,"portrait"),this.on([Ti,Cn],function(){e._resizeList()}),this.once(Zn,function(){s.list&&s.list.length>0&&(e.renderItemList(s.list),e.show())}),Oi&&this.on(ec,function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)}),Oi?(s.toggleMode=ar.CLICK,this.activeEvent="touchend"):this.activeEvent=s.toggleMode===ar.CLICK?"click":"mouseenter",s.toggleMode===ar.CLICK?this.bind(this.activeEvent,this.switchActiveState):(this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)),this.isIcons&&this.bind("click",this.onIconClick)}},{key:"initIcons",value:function(){var e=this,s=this.icons,a=Object.keys(s),o=!1;a.length>0&&(a.forEach(function(l){e.appendChild(".xgplayer-icon",s[l]),!o&&(o=s[l])}),this.isIcons=o),!o&&(this.appendChild(".xgplayer-icon",A.createDom("span","",{},"icon-text")),A.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(e){!this.config.list||this.config.list.length<2||A.addClass(this.root,"show")}},{key:"hide",value:function(){A.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,s,a){if(e===void 0)return"";var o=this.config.list;!a&&(a=this.player.lang),s=!s||A.isUndefined(e[s])?"text":s,typeof e=="number"&&(e=o[e]);try{return Qt(e[s])==="object"?e[s][a]||e[s].en:e[s]}catch(l){return console.warn(l),""}}},{key:"toggle",value:function(e){if(!(e===this.isActive||this.config.disable)){var s=this.player.controls,a=this.config.listType;e?(a===Ln.SIDE?s.blur():s.focus(),this.optionsList&&this.optionsList.show()):(a===Ln.SIDE?s.focus():s.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,s){e.stopPropagation();var a=this.config,o=a.listType,l=a.list;this.curIndex=s.to.index,this.curItem=l[this.curIndex],this.changeCurrentText();var u=this.config.isItemClickHide;(u||Oi||o===Ln.SIDE)&&this.toggle(!1)}},{key:"onIconClick",value:function(e){}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,s=this.curIndex<e.length?this.curIndex:0,a=e[s];a&&(this.find(".icon-text").innerHTML=this.getTextByLang(a,"iconText"))}}},{key:"renderItemList",value:function(e,s){var a=this,o=this.config,l=this.optionsList,u=this.player;if(typeof s=="number"&&(this.curIndex=s,this.curItem=o.list[s]),l){l.renderItemList(e),this.changeCurrentText();return}var c={config:{data:e||[],className:KE(o.listType,o.position),onItemClick:function(v,g){a.onItemClick(v,g)},domEventType:Oi?"touch":"mouse"},root:o.listType===Ln.SIDE?u.innerContainer||u.root:this.root};if(this.config.isShowIcon){var f=this.player.root.getBoundingClientRect(),h=f.height,d=o.listType===Ln.MIDDLE?h-50:h;d&&o.heightLimit&&(c.config.maxHeight="".concat(d,"px")),this.optionsList=new zE(c),this.changeCurrentText(),this.show()}this._resizeList()}},{key:"_resizeList",value:function(){if(this.config.heightLimit){var e=this.player.root.getBoundingClientRect(),s=e.height,a=this.config.listType===Ln.MIDDLE?s-50:s;this.optionsList&&this.optionsList.setStyle({maxHeight:"".concat(a,"px")})}}},{key:"destroy",value:function(){var e=this.config;e.toggleMode===ar.CLICK?this.unbind(this.activeEvent,this.switchActiveState):(this.unbind(this.activeEvent,this.onEnter),this.unbind("mouseleave",this.onLeave)),this.isIcons&&this.unbind("click",this.onIconClick),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",`">
    <div class="xgplayer-icon">
    </div>
   </xg-icon>`)}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:lt.CONTROLS_RIGHT,index:100,list:[],listType:"default",listStyle:{},hidePortrait:!0,isShowIcon:!1,isItemClickHide:!0,toggleMode:ar.HOVER,heightLimit:!0}}}]),i}(qe),YE=function(n){ke(i,n);var r=Ie(i);function i(t){var e;return ve(this,i),e=r.call(this,t),e.curTime=0,e.isPaused=!0,e}return me(i,[{key:"beforeCreate",value:function(e){var s=e.config.list;Array.isArray(s)&&s.length>0&&(e.config.list=s.map(function(a){return!a.text&&a.name&&(a.text=a.name),a.text||(a.text=a.definition),a}))}},{key:"afterCreate",value:function(){var e=this;Be(xe(i.prototype),"afterCreate",this).call(this),this.on("resourceReady",function(s){e.changeDefinitionList(s)}),this.on(ic,function(s){e.renderItemList(e.config.list,s.to)}),this.player.definitionList.length<2&&this.hide()}},{key:"show",value:function(e){!this.config.list||this.config.list.length<2||A.addClass(this.root,"show")}},{key:"initDefinition",value:function(){var e=this.config,s=e.list,a=e.defaultDefinition;if(s.length>0){var o=null;s.map(function(l){l.definition===a&&(o=l)}),o||(o=s[0]),this.changeDefinition(o)}}},{key:"renderItemList",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.list||[],a=arguments.length>1?arguments[1]:void 0,o=a&&a.definition?a.definition:this.config.defaultDefinition;a&&s.forEach(function(c){c.selected=!1});var l=0,u=s.map(function(c,f){var h=gt(gt({},c),{},{showText:e.getTextByLang(c)||c.definition,selected:!1});return(c.selected||c.definition&&c.definition==o)&&(h.selected=!0,l=f),h});Be(xe(i.prototype),"renderItemList",this).call(this,u,l)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map(function(s){return!s.text&&s.name&&(s.text=s.name),s.text||(s.text=s.definition),s}),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,s){this.player.changeDefinition(e,s)}},{key:"onItemClick",value:function(e,s){var a=this.player.definitionList;Be(xe(i.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:s.from,to:s.to});for(var o=0;o<a.length;o++)s.to&&a[o].definition===s.to.definition&&(s.to.url=a[o].url),s.from&&a[o].definition===s.from.definition&&(s.from.url=a[o].url);this.player.changeDefinition(s.to,s.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return gt(gt({},Va.defaultConfig),{},{position:lt.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0})}}]),i}(Va),QE=function(n){ke(i,n);var r=Ie(i);function i(t){var e;return ve(this,i),e=r.call(this,t),e.curRate=1,e}return me(i,[{key:"beforeCreate",value:function(e){var s=e.player.config.playbackRate,a=s?Array.isArray(s)?s:e.config.list:[];Array.isArray(a)&&(e.config.list=a.map(function(o){return typeof o=="number"?o={rate:o,text:"".concat(o,"x")}:!o.text&&o.rate&&(o.text="".concat(o.rate,"x")),o}))}},{key:"afterCreate",value:function(){var e=this;Be(xe(i.prototype),"afterCreate",this).call(this),this.on(dg,function(){e.curValue!==e.player.playbackRate&&e.renderItemList()}),this.renderItemList()}},{key:"show",value:function(e){!this.config.list||this.config.list.length===0||Be(xe(i.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,s){Be(xe(i.prototype),"onItemClick",this).call(this,e,s);var a=e.delegateTarget,o=Number(a.getAttribute("rate"));if(!o||o===this.curValue)return!1;var l={playbackRate:{from:this.player.playbackRate,to:o}};this.emitUserAction(e,"change_rate",{props:l}),this.curValue=o,this.player.playbackRate=o}},{key:"renderItemList",value:function(){var e=this,s=this.player.playbackRate||1;this.curValue=s;var a=-1,o=this.config.list.map(function(l,u){var c={rate:l.rate};return c.rate===s&&(c.selected=!0,a=u),c.showText=e.getTextByLang(l),c});Be(xe(i.prototype),"renderItemList",this).call(this,o,a)}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,s=this.curIndex<e.length?this.curIndex:0,a=e[s],o="";!a||this.curIndex<0?o="".concat(this.player.playbackRate,"x"):o=this.getTextByLang(a,"iconText"),this.find(".icon-text").innerHTML=o}}},{key:"destroy",value:function(){Be(xe(i.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return gt(gt({},Va.defaultConfig),{},{position:lt.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1})}}]),i}(Va),WE=function(n){ke(i,n);var r=Ie(i);function i(){return ve(this,i),r.apply(this,arguments)}return me(i,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(Ur,function(s){e.onError(s)})}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleError",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=this.player,a=e.errorType,o=s.errorNote?this.i18n[s.errorNote]:"";if(!o)switch(a){case"decoder":o=this.i18n.MEDIA_ERR_DECODE;break;case"network":o=this.i18n.MEDIA_ERR_NETWORK;break;default:o=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=o,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return`<xg-error class="xgplayer-error">
      <div class="xgplayer-errornote">
       <span class="xgplayer-error-text"></span>
       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>
      </div>
    </xg-error>`}}],[{key:"pluginName",get:function(){return"error"}}]),i}(qe),XE=function(n){ke(i,n);var r=Ie(i);function i(){return ve(this,i),r.apply(this,arguments)}return me(i,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],function(s){(e.config.onClick||e.customOnClick)&&(s.preventDefault(),s.stopPropagation(),e.customOnClick?e.customOnClick(s):e.config.onClick(s))}),this.player.showPrompt=function(){e.showPrompt.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var s=this;Object.keys(e).map(function(a){s.root.style[a]=e[a]})}},{key:"showPrompt",value:function(e){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(e){this.customOnClick=o;var l=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),A.addClass(this.root,"show"),a.mode==="arrow"&&A.addClass(this.root,"arrow"),typeof e=="string"?this.find(".xgplayer-prompt-detail").innerHTML=e:this.find(".xgplayer-prompt-detail").innerHTML="".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),a.style&&this.setStyle(a.style);var u=typeof a.autoHide=="boolean"?a.autoHide:this.config.autoHide;if(u){var c=a.interval||l;this.intervalId=setTimeout(function(){s.hide()},c)}}}},{key:"hide",value:function(){A.removeClass(this.root,"show"),A.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(ee.CONTROLS_FOLLOW,`">
    <span class="xgplayer-prompt-detail"></span>
    </xg-prompt>`)}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),i}(qe),dh={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function Vg(n){Object.keys(dh).map(function(r){n[r]===void 0&&(n[r]=dh[r])})}var ph={_updateDotDom:function(r,i){if(i){var t=this.calcuPosition(r.time,r.duration),e=r.style||{};e.left="".concat(t.left,"%"),e.width="".concat(t.width,"%"),i.setAttribute("data-text",r.text),i.setAttribute("data-time",r.time),t.isMini?A.addClass(i,"mini"):A.removeClass(i,"mini"),Object.keys(e).map(function(s){i.style[s]=e[s]})}},initDots:function(){var r=this;this._ispots.map(function(i){r.createDot(i,!1)}),this.ispotsInit=!0},createDot:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this.player.plugins.progress;if(t&&(i&&(Vg(r),this._ispots.push(r)),!(!this.ispotsInit&&i))){var e=this.calcuPosition(r.time,r.duration),s=r.style||{};s.left="".concat(e.left,"%"),s.width="".concat(e.width,"%");var a="xgspot_".concat(r.id," xgplayer-spot");e.isMini&&(a+=" mini");var o=r.template?'<div class="xgplayer-spot-pop">'.concat(r.template,"</div>"):"",l=A.createDom("xg-spot",o,{"data-text":r.text,"data-time":r.time,"data-id":r.id},a);Object.keys(s).map(function(u){l.style[u]=s[u]}),t.outer&&t.outer.appendChild(l),this.positionDot(l,r.id)}},findDot:function(r){if(this.player.plugins.progress){var i=this._ispots.filter(function(t,e){return t.id===r});return i.length>0?i[0]:null}},updateDot:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=this.player.plugins.progress;if(t){var e=this.findDot(r.id);if(e&&Object.keys(r).map(function(a){e[a]=r[a]}),!!this.ispotsInit){var s=t.find('xg-spot[data-id="'.concat(r.id,'"]'));s&&(this._updateDotDom(r,s),i&&this.showDot(r.id))}}},deleteDot:function(r){var i=this._ispots,t=this.player.plugins.progress;if(t){for(var e=[],s=0;s<i.length;s++)i[s].id===r&&e.push(s);for(var a=e.length,o=a-1;o>=0;o--)if(i.splice(e[o],1),this.ispotsInit){var l=t.find('xg-spot[data-id="'.concat(r,'"]'));l&&l.parentElement.removeChild(l)}}},deleteAllDots:function(){var r=this.player.plugins.progress;if(r){if(!this.ispotsInit){this._ispots=[];return}for(var i=r.root.getElementsByTagName("xg-spot"),t=i.length-1;t>=0;t--)r.outer.removeChild(i[t]);this._ispots=[]}},updateAllDots:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.player.plugins.progress;if(t){if(!this.ispotsInit){this._ispots=i;return}this._ispots=[];var e=t.root.getElementsByTagName("xg-spot"),s=e.length;if(s>i.length)for(var a=s-1;a>i.length-1;a--)t.outer.removeChild(e[a]);i.forEach(function(o,l){l<s?(e[l].setAttribute("data-id","".concat(o.id)),r._ispots.push(o),r.updateDot(o)):r.createDot(o)})}},positionDots:function(){var r=this,i=this._ispots,t=this.playerSize,e=this.player.sizeInfo,s=this.player.plugins.progress;!s||e.width===t.width||(t.width=e.width,t.left=e.left,i.forEach(function(a){var o=s.find('xg-spot[data-id="'.concat(a.id,'"]'));o&&r.positionDot(o,a.id)}))},positionDot:function(r,i){var t=A.findDom(r,".xgplayer-spot-pop");if(t){var e=this.playerSize,s=r.getBoundingClientRect(),a=t.getBoundingClientRect(),o=s.left-e.left,l=e.width-o-s.width/2;if(o<a.width/2||e.width<a.width){var u=a.width/2-o;t.style.left="".concat(u,"px")}else if(l<a.width/2){var c=l-a.width/2+s.width/2;t.style.left="".concat(c,"px")}else t.style.left="50%"}},updateDuration:function(){var r=this,i=this.player.plugins.progress;if(i){var t=this._ispots;t.forEach(function(e){var s=i.find('xg-spot[data-id="'.concat(e.id,'"]'));r._updateDotDom(e,s)})}},getAllDotsDom:function(){var r=this.player.plugins.progress;if(!r)return[];var i=r.root.getElementsByTagName("xg-spot");return i},getDotDom:function(r){var i=this.player.plugins.progress;if(i)return i.find('xg-spot[data-id="'.concat(r,'"]'))}};function qE(n){var r=n.config,i=n.player;Object.keys(ph).map(function(e){n[e]=ph[e].bind(n)});var t=i.config.progressDot||r.ispots||[];n._ispots=t.map(function(e){return Vg(e),e}),n.ispotsInit=!1,n.playerSize={left:i.sizeInfo.left,width:i.sizeInfo.width},n.on(ci,function(){n.ispotsInit?n.updateDuration():n.initDots()}),n.on(Ti,function(){n.positionDots()})}var or={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMouseOver"},JE=function(n){ke(i,n);var r=Ie(i);function i(t){var e;return ve(this,i),e=r.call(this,t),j(M(e),"onMousemove",function(s){if(!e.config.disable){if(A.hasClass(s.target,"xg-spot-content")&&e.config.isHideThumbnailHover){e.player.plugins.progress.onMouseLeave(s);return}(e._state.f||A.hasClass(s.target,"xg-spot-content"))&&(A.event(s),s.stopPropagation())}}),j(M(e),"onMousedown",function(s){e.config.disable||(e._state.f||A.hasClass(s.target,"xg-spot-content"))&&(A.event(s),s.stopPropagation())}),j(M(e),"onMouseup",function(s){if(e.isDrag){var a=e.player.plugins.progress;a&&a.pos&&(a.onMouseUp(s),!a.pos.isEnter&&a.onMouseLeave(s))}}),j(M(e),"onDotMouseLeave",function(s){if(!e.config.disable){e._curDot.removeEventListener("mouseleave",e.onDotMouseLeave),e.blurDot(s.target),e._curDot=null;var a=e.player.plugins.progress;a&&a.enableBlur(),e.show()}}),j(M(e),"onProgressMouseOver",function(s,a){if(!e.config.disable&&A.hasClass(a.target,"xgplayer-spot")&&!e._curDot){e._curDot=a.target,e.focusDot(a.target),e._curDot.children.length>0&&e.hide();var o=e.player.plugins.progress;o&&o.disableBlur(),e._curDot.addEventListener("mouseleave",e.onDotMouseLeave)}}),e._ispots=[],e.videoPreview=null,e.videothumbnail=null,e.thumbnail=null,e.timeStr="",e._state={now:0,f:!1},e}return me(i,[{key:"beforeCreate",value:function(e){var s=e.player.plugins.progress;s&&(e.root=s.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",function(s,a){a.seekTime&&e.player.seek(a.seekTime)}),this.transformTimeHook=this.hook("transformTime",function(s){e.setTimeContent(A.format(s))}),qE(this),this.on(ci,function(){e.show()}),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(e){var s=this;e&&Object.keys(e).map(function(a){s.config[a]=e[a]})}},{key:"onPluginsReady",value:function(){var e=this.player;e.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,s=this.player.plugins.progress;if(s&&(Object.keys(or).map(function(o){e[or[o]]=e[or[o]].bind(e),s.addCallBack(o,e[or[o]])}),je.device!=="mobile")){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup);var a=this.hook("previewClick",function(){});this.handlerPreviewClick=function(o){o.stopPropagation(),a(parseInt(e._state.now*1e3,10)/1e3,o),s&&s.onMouseUp(o)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,s){this.config.disable||!this.player.duration||this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!0,this.videoPreview&&A.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!1,this.videoPreview&&A.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(e,s){this.config.disable||A.hasClass(s.target,"xgplayer-spot")&&(s.stopPropagation(),s.preventDefault(),["time","id","text"].map(function(a){e[a]=s.target.getAttribute("data-".concat(a))}),e.time&&(e.time=Number(e.time)),this.handlerSpotClick(s,e))}},{key:"updateLinePos",value:function(e,s){var a=this.root,o=this.previewLine,l=this.player,u=this.config,c=l.controls.mode,f=c==="flex",h=a.getBoundingClientRect().width;if(!(!h&&this._hasThumnail)){h=this._hasThumnail&&h<u.width?u.width:h;var d=e-h/2,p;d<0&&!f?(d=0,p=e-h/2):d>s-h&&!f?(p=d-(s-h),d=s-h):p=0,p!==void 0&&(o.style.transform="translateX(".concat(p.toFixed(2),"px)")),a.style.transform="translateX(".concat(d.toFixed(2),"px) translateZ(0)")}}},{key:"updateTimeText",value:function(e){var s=this.timeText,a=this.timePoint;s.innerHTML=e,!this.thumbnail&&(a.innerHTML=e)}},{key:"updatePosition",value:function(e,s,a,o){var l=this.root,u=this.config,c=this._state;if(l){c.now=a,this.transformTimeHook(a);var f=this.timeStr;o&&o.target&&A.hasClass(o.target,"xgplayer-spot")?(this.showTips(o.target.getAttribute("data-text"),!1,f),this.focusDot(o.target),c.f=!0,u.isFocusDots&&c.f&&(c.now=parseInt(o.target.getAttribute("data-time"),10))):u.defaultText?(c.f=!1,this.showTips(u.defaultText,!0,f)):(c.f=!1,this.hideTips("")),this.updateTimeText(f),this.updateThumbnails(c.now),this.updateLinePos(e,s)}}},{key:"setTimeContent",value:function(e){this.timeStr=e}},{key:"updateThumbnails",value:function(e){var s=this.player,a=this.videoPreview,o=this.config,l=s.plugins.thumbnail;if(l&&l.usable){this.thumbnail&&l.update(this.thumbnail,e,o.width,o.height);var u=a&&a.getBoundingClientRect();this.videothumbnail&&l.update(this.videothumbnail,e,u.width,u.height)}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(je.device!=="mobile"){var s=this.player,a=this.config,o=s.getPlugin("thumbnail");if(o&&o.setConfig(e),!o||!o.usable||!a.isShowThumbnail){A.addClass(this.root,"short-line no-thumbnail");return}else A.removeClass(this.root,"short-line no-thumbnail");a.mode==="short"&&A.addClass(this.root,"short-line"),this._hasThumnail=!0;var l=this.find(".xg-spot-thumbnail");this.thumbnail=o.createThumbnail(l,"progress-thumbnail"),a.isShowCoverPreview&&(this.videoPreview=A.createDom("xg-video-preview","",{},"xgvideo-preview"),s.root.appendChild(this.videoPreview),this.videothumbnail=o.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)}}},{key:"calcuPosition",value:function(e,s){var a=this.player.plugins.progress,o=this.player,l=a.root.getBoundingClientRect().width,u=o.duration/l*6;return e+s>o.duration&&(s=o.duration-e),e/o.duration*100,s/o.duration,{left:e/o.duration*100,width:s/o.duration*100,isMini:s<u}}},{key:"showDot",value:function(e){var s=this.findDot(e);if(s){var a=this.root.getBoundingClientRect(),o=a.width,l=s.time/this.player.duration*o;this.updatePosition(l,o,s.time)}}},{key:"focusDot",value:function(e,s){e&&(s||(s=e.getAttribute("data-id")),A.addClass(e,"active"),this._activeDotId=s)}},{key:"blurDot",value:function(e){if(!e){var s=this._activeDotId;e=this.getDotDom(s)}e&&(A.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";A.addClass(this.root,"no-timepoint"),e&&(A.addClass(this.find(".xg-spot-content"),"show-text"),s&&this.config.mode==="production"?(A.addClass(this.root,"product"),this.tipText.textContent=e):(A.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(a," ").concat(e)))}},{key:"hideTips",value:function(){A.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",A.removeClass(this.find(".xg-spot-content"),"show-text"),A.removeClass(this.root,"product")}},{key:"hide",value:function(){A.addClass(this.root,"hide")}},{key:"show",value:function(e){A.removeClass(this.root,"hide")}},{key:"enable",value:function(){var e=this.config,s=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&e.isShowThumbnail&&this.registerThumbnail(s.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var e=this,s=this.player.plugins.progress;s&&Object.keys(or).map(function(a){s.removeCallBack(a,e[or[a]])}),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return je.device==="mobile"||this.playerConfig.isMobileSimulateMode==="mobile"?"":'<div class="xg-spot-info hide '.concat(this.config.mode==="short"?"short-line":"",`">
      <div class="xg-spot-content">
        <div class="xg-spot-thumbnail">
          <span class="xg-spot-time"></span>
        </div>
        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>
      </div>
      <div class="xgplayer-progress-point">00:00</div>
      <div class="xg-spot-ext-text"></div>
      <div class="xg-spot-line"></div>
    </div>`)}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}]),i}(qe),ZE=function(n){ke(i,n);var r=Ie(i);function i(t){var e;return ve(this,i),e=r.call(this,t),e.ratio=1,e.interval=null,e._preloadMark={},e}return me(i,[{key:"afterCreate",value:function(){var e=this;this.usable&&this.initThumbnail(),this.on([ci],function(){var s=e.config,a=s.pic_num,o=s.interval;e.usable&&(e.interval=o>0?o:Math.round(e.player.duration*1e3/a)/1e3)})}},{key:"setConfig",value:function(e){var s=this;if(e){var a=Object.keys(e);a.length<1||(a.forEach(function(o){s.config[o]=e[o]}),this.usable&&this.initThumbnail())}}},{key:"usable",get:function(){var e=this.config,s=e.urls,a=e.pic_num;return s&&s.length>0&&a>0}},{key:"initThumbnail",value:function(){var e=this.config,s=e.width,a=e.height,o=e.pic_num,l=e.interval;this.ratio=s/a*100,this.interval=l||Math.round(this.player.duration/o),this._preloadMark={}}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var s=this;if(!this._preloadMark[e]){var a=this.config.urls,o=a.length,l=[];e>0&&l.push(e-1),l.push(e),e>0&&e<o-1&&l.push(e+1),l.map(function(u){!s._preloadMark[u]&&u>=0&&u<o&&(s._preloadMark[u]=1,A.preloadImg(a[u],function(){s._preloadMark[u]=2}))})}}},{key:"getPosition",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=this.config,l=o.pic_num,u=o.row,c=o.col,f=o.width,h=o.height;this.interval=Math.round(this.player.duration/l);var d=Math.ceil(e/this.interval);d=d>l?l:d;var p=d<u*c?0:Math.ceil(d/(u*c))-1,v=d-p*(c*u),g=v>0?Math.ceil(v/c)-1:0,_=v>0?v-g*c-1:0,b=0,y=0;if(s&&a){var m=s/a;m<f/h?(y=a,b=y*(f/h)):(b=s,y=b/(f/h))}else a?s||(y=a||h,b=y*(f/h)):(b=s||f,y=b/(f/h));var S=this.getUrlByIndex(p);return{urlIndex:p,rowIndex:g,colIndex:_,url:S,height:y,width:b,style:{backgroundImage:"url(".concat(S,")"),backgroundSize:"".concat(b*c,"px auto"),backgroundPosition:"-".concat(_*b,"px -").concat(g*y,"px"),width:"".concat(b,"px"),height:"".concat(y,"px")}}}},{key:"update",value:function(e,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",u=this.config,c=u.pic_num,f=u.urls;if(!(c<=0||!f||f.length===0)){var h=this.getPosition(s,a,o);this.preload(h.urlIndex),Object.keys(h.style).map(function(d){e.style[d]=h.style[d]}),Object.keys(l).map(function(d){e.style[d]=l[d]})}}},{key:"changeConfig",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.setConfig(e)}},{key:"createThumbnail",value:function(e,s){var a=A.createDom("xg-thumbnail","",{},"thumbnail ".concat(s));return e&&e.appendChild(a),a}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),i}(qe);function ml(n){return n?"background:".concat(n,";"):""}var $E=function(n){ke(i,n);var r=Ie(i);function i(){var t;ve(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),j(M(t),"onTimeupdate",function(){var o=t.player.ended,l=M(t),u=l.offsetDuration,c=t.currentTime;c=A.adjustTimeByDuration(c,u,o),t.update({played:c},u)}),t}return me(i,[{key:"offsetDuration",get:function(){return this.playerConfig.customDuration||this.player.offsetDuration||this.player.duration}},{key:"currentTime",get:function(){var e=this.player,s=e.offsetCurrentTime,a=e.currentTime;return s>=0?s:a}},{key:"afterCreate",value:function(){var e=this;this.root&&(this.on(dn,this.onTimeupdate),this.on(Zi,function(){e.reset()}))}},{key:"reset",value:function(){this.update({played:0,cached:0},0)}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},s=arguments.length>1?arguments[1]:void 0;!s||!this.root||(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/s*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/s*100,"%")))}},{key:"render",value:function(){var e=this.playerConfig,s=e.commonStyle,a=e.miniprogress;if(a){var o=this.config,l=o.mode,u=o.height,c={cached:ml(s.cachedColor),played:ml(s.playedColor),progress:ml(s.progressColor),height:u>0&&u!==2?"height: ".concat(u,"px;"):""},f=l==="show"?"xg-mini-progress-show":"";return'<xg-mini-progress class="xg-mini-progress '.concat(f,'" style="').concat(c.progress," ").concat(c.height,`">
    <xg-mini-progress-cache class="xg-mini-progress-cache" style="`).concat(c.cached,`"></xg-mini-progress-cache>
    <xg-mini-progress-played class="xg-mini-progress-played" style="`).concat(c.played,`"></xg-mini-progress-played>
    </xg-mini-progress>`)}}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{mode:"auto",height:2}}}]),i}(qe),lr={REAL_TIME:"realtime",FIRST_FRAME:"firstframe",POSTER:"poster"};function ew(){try{return parseInt(window.performance.now(),10)}catch{return new Date().getTime()}}function tw(){try{var n=document.createElement("canvas").getContext;return!!n}catch{return!1}}var ea=null,nw=function(n){ke(i,n);var r=Ie(i);function i(){var t;ve(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),j(M(t),"onLoadedData",function(o){t.player&&(t._frameCount=t.config.startFrameCount,t.stop(),t.renderOnTimeupdate(o),t.off(dn,t.renderOnTimeupdate),t.on(dn,t.renderOnTimeupdate))}),j(M(t),"onVisibilitychange",function(o){document.visibilityState==="visible"?t._checkIfCanStart()&&t.start():document.visibilityState==="hidden"&&t.stop()}),j(M(t),"renderOnTimeupdate",function(o){if(t._frameCount>0)t.renderOnce(),t._frameCount--;else{t._isLoaded=!0,t.off(dn,t.renderOnTimeupdate);var l=t.config.startInterval;!t.player.paused&&t._checkIfCanStart()&&t.start(0,l)}}),j(M(t),"start",function(o,l){var u=t.player.video,c=ew(),f=t.checkVideoIsSupport(u);!f||!t.canvasCtx||(l||(l=t.interval),t.stop(),u.videoWidth&&u.videoHeight&&(t.videoPI=u.videoHeight>0?parseInt(u.videoWidth/u.videoHeight*100,10):0,(t.config.mode===lr.REAL_TIME||c-t.preTime>=l)&&(u&&u.videoWidth&&t.update(f,t.videoPI),t.preTime=c)),t.frameId=t._loopType==="timer"?A.setTimeout(M(t),t.start,l):A.requestAnimationFrame(t.start))}),j(M(t),"stop",function(){t.frameId&&(t._loopType==="timer"?A.clearTimeout(M(t),t.frameId):A.cancelAnimationFrame(t.frameId),t.frameId=null)}),t}return me(i,[{key:"afterCreate",value:function(){var e=this;this.playerConfig.dynamicBg===!0&&(this.config.disable=!1),i.isSupport||(this.config.disable=!0);var s=this.config,a=s.disable,o=s.mode,l=s.frameRate;a||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this._isLoaded=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/l,10),this.canvas=null,this.canvasCtx=null,this._frameCount=0,this._loopType=this.config.mode!==lr.REAL_TIME&&this.interval>=1e3?"timer":"animation",this.once(To,function(){e.player&&(e.init(),e.renderByPoster(),e.player.paused||e.start())}),o!==lr.POSTER&&(o!==lr.FIRST_FRAME&&(this.on(Zi,function(){e.stop()}),this.on(gn,function(){var u=e.config.startInterval;e._checkIfCanStart()&&e.start(0,u)}),this.on(Nr,function(){e.stop()})),this.on(si,this.onLoadedData),this.on($u,function(){e._isLoaded=!1,e.stop()}),document.addEventListener("visibilitychange",this.onVisibilitychange)))}},{key:"setConfig",value:function(e){var s=this;Object.keys(e).forEach(function(a){a==="root"&&e[a]!==s.config[a]?s.reRender(e[a]):a==="frameRate"?s.interval=parseInt(1e3/e[a],10):a==="disable"&&e[a]&&s.stop(),s.config[a]=e[a]})}},{key:"init",value:function(e){var s=this.player,a=this.config;this.canvasFilter=i.supportCanvasFilter();try{var o=e||a.root;o||(o=a.isInnerRender&&s.innerContainer||s.root),o.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg" data-index="'.concat(a.index,`"><canvas>
        </canvas><xgmask></xgmask></div>`)),this.root=o.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=a.filter,this.canvas.style.webkitFilter=a.filter),this.mask=this.find("xgmask"),a.addMask&&(this.mask.style.background=a.maskBg),this.canvasCtx=this.canvas.getContext("2d")}catch(l){Ye.logError("plugin:DynamicBg",l)}}},{key:"reRender",value:function(e){var s=this.config.disable;if(!(!s&&!this.root)){this.stop();var a=this.root?this.root.parentElement:null;if(a!==e&&a.removeChild(this.root),!e){this.root=null;return}this.init(e),this.renderOnce();var o=this.config.startInterval;this._checkIfCanStart()&&this.start(0,o)}}},{key:"checkVideoIsSupport",value:function(e){if(!e)return null;var s=e&&e instanceof window.HTMLVideoElement?e:e.canvas?e.canvas:e.flyVideo?e.flyVideo:null;if(s&&!(je.browser==="safari"&&A.isMSE(s)))return s;var a=s?s.tagName.toLowerCase():"";return a==="canvas"||a==="img"?s:null}},{key:"renderByPoster",value:function(){var e=this.playerConfig.poster;if(e){var s=A.typeOf(e)==="String"?e:A.typeOf(e.poster)==="String"?e.poster:null;this.updateImg(s)}}},{key:"_checkIfCanStart",value:function(){var e=this.config.mode;return this._isLoaded&&!this.player.paused&&e!==lr.FIRST_FRAME&&e!==lr.POSTER}},{key:"renderOnce",value:function(){var e=this.player.video;if(!(!e.videoWidth||!e.videoHeight)){this.videoPI=parseInt(e.videoWidth/e.videoHeight*100,10);var s=this.checkVideoIsSupport(e);s&&this.update(s,this.videoPI)}}},{key:"updateImg",value:function(e){var s=this;if(e){var a=this.canvas.getBoundingClientRect(),o=a.width,l=a.height,u=new window.Image;u.onload=function(){if(!(!s.canvas||s.frameId||s.isStart)){s.canvas.height=l,s.canvas.width=o;var c=parseInt(o/l*100,10);s.update(u,c),u=null}},u.src=e}}},{key:"update",value:function(e,s){if(!(!this.canvas||!this.canvasCtx||!s))try{var a=this._pos,o=this.config,l=this.canvas.getBoundingClientRect(),u=l.width,c=l.height;if(u!==a.width||c!==a.height||a.pi!==s){var f=parseInt(u/c*100,10);a.pi=s,a.width!==u&&(a.width=this.canvas.width=u),a.height!==c&&(a.height=this.canvas.height=c);var h=c,d=u;f<s?d=parseInt(c*s/100,10):f>s&&(h=parseInt(u*100/s,10)),a.rwidth=d*o.multiple,a.rheight=h*o.multiple,a.x=(u-a.rwidth)/2,a.y=(c-a.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=o.filter),this.canvasCtx.drawImage(e,a.x,a.y,a.rwidth,a.rheight)}catch(p){Ye.logError("plugin:DynamicBg",p)}}},{key:"destroy",value:function(){this.stop(),document.removeEventListener("visibilitychange",this.onVisibilitychange),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,index:-1,mode:"framerate",frameRate:10,filter:"blur(50px)",startFrameCount:2,startInterval:0,addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return typeof ea=="boolean"||(ea=tw()),ea}},{key:"supportCanvasFilter",value:function(){return!(je.browser==="safari"||je.browser==="firefox")}}]),i}(qe),iw={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:""},mse:{code:2,msg:""},parse:{code:3,msg:""},format:{code:4,msg:""},decoder:{code:5,msg:""},runtime:{code:6,msg:""},timeout:{code:7,msg:""},other:{code:8,msg:""}},HAVE_NOTHING:"/",HAVE_METADATA:"/",HAVE_CURRENT_DATA:"/",HAVE_FUTURE_DATA:"",HAVE_ENOUGH_DATA:"",NETWORK_EMPTY:"/",NETWORK_IDLE:"/",NETWORK_LOADING:"",NETWORK_NO_SOURCE:"/",MEDIA_ERR_ABORTED:"",MEDIA_ERR_NETWORK:"",MEDIA_ERR_DECODE:"",MEDIA_ERR_SRC_NOT_SUPPORTED:"/",REPLAY:"",ERROR:"",PLAY_TIPS:"",PAUSE_TIPS:"",PLAYNEXT_TIPS:"",DOWNLOAD_TIPS:"",ROTATE_TIPS:"",RELOAD_TIPS:"",FULLSCREEN_TIPS:"",EXITFULLSCREEN_TIPS:"",CSSFULLSCREEN_TIPS:"",EXITCSSFULLSCREEN_TIPS:"",TEXTTRACK:"",PIP:"",SCREENSHOT:"",LIVE:"",OFF:"",OPEN:"",MINI_DRAG:"",MINISCREEN:"",REFRESH_TIPS:"",REFRESH:"",FORWARD:"",LIVE_TIP:""}},Qr="info",yl=Ig,rw=function(n){ke(i,n);var r=Ie(i);function i(){var t;ve(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),j(M(t),"_recordUserActions",function(o){var l=t._getTime(),u=Object.assign({},o,{msg:o.msg||o.action});t._stats[Qr].push(gt(gt({type:"userAction"},l),{},{payload:u}))}),j(M(t),"_onReset",function(){t.reset()}),j(M(t),"_recordInfo",function(o){t.info(o)}),j(M(t),"_downloadStats",function(){var o=t.getStats(),l=new Blob([JSON.stringify(o)],{type:"application/json"}),u=window.URL.createObjectURL(l),c=document.createElement("a");c.style.display="none",c.href=u,c.download="player.txt",c.disabled=!1,c.click()}),t}return me(i,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:new Date().toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(Fa,this._recordUserActions),this.on(yl.STATS_INFO,this._recordInfo),this.on(yl.STATS_DOWNLOAD,this._downloadStats),this.on(yl.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var s=this._getTime();this._stats[Qr].push(gt(gt({},s),{},{payload:e}))}},{key:"_infoProfile",value:function(e){if(e&&e.startMs){var s=Date.now(),a=s-e.startMs,o=gt({cat:"function",dur:a,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e);this._info(o)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(e={},j(e,Qr,[]),j(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player,s=e.media,a=[],o=0;o<s.buffered.length;o++)a.push({start:s.buffered.start(o),end:s.buffered.end(o)});var l={currentTime:s.currentTime,readyState:s.readyState,buffered:a,paused:s.paused,ended:s.ended};return this._stats.media=l,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){var e=this._stats[Qr],s=e.map(function(a){var o=a.payload.data,l="";try{o instanceof Error?l=o.msg:o!==void 0&&(l=JSON.stringify(o))}catch(u){console.log("err",u)}return"[".concat(a.timeFormat,"] : ").concat(a.payload.msg," ").concat(l," ")});return s}},{key:"_getProfile",value:function(){var e={traceEvents:[]},s=this._stats[Qr];return s.forEach(function(a){a.payload.profile&&e.traceEvents.push(a.payload)}),e}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),i}(zn),jg=function(n){ke(i,n);var r=Ie(i);function i(){var t;ve(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),j(M(t),"onGapJump",function(){var o=M(t),l=o.player,u=o.config;if(l.media.readyState!==HTMLMediaElement.HAVE_NOTHING){if(l.media.seeking){if(!t.seekingEventReceived)return}else t.seekingEventReceived=!1;if(!(l.media.paused&&l.media.currentTime!==0&&t.hasPlayed)){var c=l.media.buffered,f=u.smallGapLimit||.5,h=u.gapDetectionThreshold||.3,d=l.media.currentTime,p=t._getIndex(c,d,h);if(!(p===null||p===0)){console.log("GapJump  bufferRange ",c.start(p),c.end(p));var v=c.start(p)+.1,g=l.media.duration;if(!(v>g)){var _=v-d,b=_<=f;_<i.BROWSER_GAP_TOLERANCE||b&&(u.useGapJump!==!1&&(l.media.currentTime=t.isSafari?v+.1:v),t.player&&t.player.emit("detectGap"),console.log("gapJump gapIndex",p," isGapSamll:",b," currentTime:",l.media.currentTime," jumpSize:",d-l.media.currentTime),v!==.08&&l&&l.emit("log",{type:"oneevent",end_type:"gap",vid:l.config.vid,ext:{video_postion:Math.floor(v*1e3)}}))}}}}}),t}return me(i,[{key:"afterCreate",value:function(){var e=this,s=this.config.useGapJump;s!==!1&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(Us,this.onGapJump),this.on(gn,function(){e.hasPlayed=!0}),this.on(Co,function(){e.seekingEventReceived=!0}))}},{key:"_getIndex",value:function(e,s,a){if(!e||!e.length||e.length===1&&e.end(0)-e.start(0)<1e-6)return null;for(var o=this._getBuffered(e),l=null,u=0;u<o.length;u++){var c=o[u];if(c.start>s&&(u===0||o[u-1].end-s<=a)){l=u;break}}return l}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var s=[],a=0;a<e.length;a++)s.push({start:e.start(a),end:e.end(a)});return s}}],[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}]),i}(qe);jg.BROWSER_GAP_TOLERANCE=.001;var sw=function(n){ke(i,n);var r=Ie(i);function i(){var t;ve(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),j(M(t),"onWaiting",function(){var o=M(t),l=o.config;t.jumpCnt>l.jumpCntMax||t.timer||l.useWaitingTimeoutJump===!1||(t.timer=setTimeout(t.onJump,l.waitingTime*1e3))}),j(M(t),"onJump",function(){var o=M(t),l=o.player,u=o.config;if(clearTimeout(t.timer),t.timer=null,!(t.jumpCnt>u.jumpCntMax||u.useWaitingTimeoutJump===!1)&&!(l.media.paused&&l.media.currentTime!==0&&t.hasPlayed)){t.jumpSize=u.jumpSize*(t.jumpCnt+1),t.jumpCnt===u.jumpSize&&t.jumpSize<6&&(t.jumpSize=6);var c=l.currentTime+t.jumpSize,f=l.media.duration;c>f||(t.jumpCnt++,l.currentTime=c)}}),t}return me(i,[{key:"afterCreate",value:function(){var e=this,s=this.config,a=s.useWaitingTimeoutJump,o=s.jumpSize;a!==!1&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=o,this.on(Us,this.onWaiting),this.on([Zu,Zn],function(){clearTimeout(e.timer),e.timer=null,e.jumpSize=e.config.jumpSize}),this.on(gn,function(){e.hasPlayed=!0}))}}],[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}]),i}(qe),ur="cdn",ta=["cdn"],aw=function(n){ke(i,n);var r=Ie(i);function i(){var t;ve(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),j(M(t),"getSpeed",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ur;if(!t.speedListCache||!t.speedListCache[o]||t.speedListCache[o].length<=0)return 0;var l=0;return t.speedListCache[o].map(function(u){l+=u}),Math.floor(l/t.speedListCache[o].length)}),j(M(t),"startTimer",function(){A.isMSE(t.player.video)||(t.initSpeedList(),t.cnt=0,t.timer=setTimeout(t.testSpeed,t.config.testTimeStep))}),j(M(t),"initSpeedList",function(){t.speedListCache={},ta.forEach(function(o){t.speedListCache[o]=[]})}),j(M(t),"_onRealSpeedChange",function(o){o.speed&&t.appendList(o.speed,o.type||ur)}),j(M(t),"testSpeed",function(){if(clearTimeout(t.timer),t.timer=null,!(!t.player||!t.config.openSpeed)){var o=t.config,l=o.url,u=o.loadSize,c=o.testCnt,f=o.testTimeStep,h=l+(l.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(t.cnt>=c)){t.cnt++;try{var d=new Date().getTime(),p=null,v=new XMLHttpRequest;t.xhr=v,v.open("GET",h);var g={},_=Math.floor(Math.random()*10);g.Range="bytes="+_+"-"+(u+_),g&&Object.keys(g).forEach(function(b){v.setRequestHeader(b,g[b])}),v.onreadystatechange=function(){if(v.readyState===4){t.xhr=null,p=new Date().getTime();var b=v.getResponseHeader("Content-Length")/1024*8,y=Math.round(b*1e3/(p-d));t.appendList(y),t.timer=setTimeout(t.testSpeed,f)}},v.send()}catch(b){console.error(b)}}}}),j(M(t),"appendList",function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ur;if(!(!t.speedListCache||!t.speedListCache[l])){var u=t.config.saveSpeedMax;t.speedListCache[l].length>=u&&t.speedListCache[l].shift(),t.speedListCache[l].push(o);var c=M(t),f=c.player;f&&(l===ur?f.realTimeSpeed=o:f[t.getSpeedName("realTime",l)]=o),t.updateSpeed(l)}}),j(M(t),"updateSpeed",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ur,l=t.getSpeed(o),u=M(t),c=u.player;if(c)if(o===ur)(!c.avgSpeed||l!==c.avgSpeed)&&(c.avgSpeed=l,c.emit(su,{speed:l,realTimeSpeed:c.realTimeSpeed}));else{var f=t.getSpeedName("avg",o);(!c[f]||l!==c[f])&&(c[f]=l,c.emit(su,{speed:l,realTimeSpeed:c.realTimeSpeed}))}}),t}return me(i,[{key:"afterCreate",value:function(){var e=this.config,s=e.openSpeed,a=e.addSpeedTypeList;a?.length>0&&ta.push.apply(ta,kn(a)),this.initSpeedList(),this.on("real_time_speed",this._onRealSpeedChange),this.timer=null,this.cnt=0,this.xhr=null,s&&this.on([si,Oa],this.startTimer)}},{key:"getSpeedName",value:function(e,s){return e+"Speed"+s.toUpperCase()}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(e){if(this.config.openSpeed=e,!e&&this.timer){clearTimeout(this.timer),this.timer=null;return}if(this.config.openSpeed){if(this.timer)return;this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)}}},{key:"destroy",value:function(){var e=this;this.off("real_time_speed",this._onRealSpeedChange),this.off([si,Oa],this.startTimer),ta.forEach(function(s){e.speedListCache&&e.speedListCache[s]&&(e.speedListCache[s]=[])}),this.speedListCache&&(this.speedListCache={}),clearTimeout(this.timer),this.timer=null,this.xhr&&this.xhr.readyState!==4&&(this.xhr.cancel&&this.xhr.cancel(),this.xhr=null)}}],[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:200*1024,testTimeStep:3e3,url:"",saveSpeedMax:5,addSpeedTypeList:[]}}}]),i}(qe),ow=function(n){ke(i,n);var r=Ie(i);function i(){return ve(this,i),r.apply(this,arguments)}return me(i,[{key:"afterCreate",value:function(){var e=this,s=this.player,a=this.config,o=s.media||s.video;if(this.timer=null,this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,this._payload=[],!a.disabled){var l=o.getVideoPlaybackQuality;l&&(this.on(gn,function(){e._startTick()}),this.on(Nr,function(){e._stopTick()}),this.on(Ji,function(){e._stopTick()}),this.on(Zi,function(){e._stopTick()}))}}},{key:"_startTick",value:function(){var e=this;this._stopTick(),this._timer=setTimeout(function(){e._checkDecodeFPS(),e._startTick()},this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkBuffer",value:function(e,s){for(var a=!1,o=[],l=0;l<s.length;l++){var u=s.start(l),c=s.end(l);if(o.push({start:u,end:c}),u<=e&&e<=c-1){a=!0;break}}return{enoughBuffer:a,buffers:o}}},{key:"_checkStuck",value:function(e,s,a,o){var l=this.player.media||this.player.video,u=document.hidden,c=l.paused,f=l.readyState,h=l.currentTime,d=l.buffered;if(!(u||c||f<4)){var p=this._checkBuffer(h,d),v=p.enoughBuffer,g=p.buffers;v&&(e<=this.config.reportFrame?(this._currentStuckCount++,this._payload.push({currentTime:h,buffers:g,curDecodedFrames:e,totalVideoFrames:s,droppedVideoFrames:a,checkInterval:o}),this._currentStuckCount>=this.config.stuckCount&&(this.emit(Rg,this._payload),this._reset())):this._reset())}}},{key:"_reset",value:function(){this._payload=[],this._currentStuckCount=0}},{key:"_checkDecodeFPS",value:function(){var e=this.player.media||this.player.video;if(e){var s=e.getVideoPlaybackQuality(),a=s.totalVideoFrames,o=s.droppedVideoFrames,l=performance.now();if(a&&this._lastCheckPoint){var u=a-this._lastDecodedFrames,c=l-this._lastCheckPoint;this._checkStuck(u,a,o,c)}this._lastDecodedFrames=a,this._lastCheckPoint=l}}},{key:"destroy",value:function(){this._stopTick()}}],[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}]),i}(qe);vr.use(iw);var lw=me(function n(r,i){var t,e,s;ve(this,n);var a=i&&i.isMobileSimulateMode==="mobile",o=i.isLive,l=o?[]:[RE,Fg,$E,JE,Ng],u=[].concat(l,[Mg,Bg,xE,ME,YE,QE,jE,GE,Ug,LE]),c=[fE,hE,pE,IE,gE,WE,XE,ZE,AE];this.plugins=[rw,uE].concat(kn(u),c,[jg,sw]);var f=a?"mobile":je.device;switch(f){case"pc":(t=this.plugins).push.apply(t,[fh,gl,lu,aw,ow]);break;case"mobile":(e=this.plugins).push.apply(e,[CE]);break;default:(s=this.plugins).push.apply(s,[fh,gl,lu])}(je.os.isIpad||f==="pc")&&this.plugins.push(nw),je.os.isIpad&&this.plugins.push(gl),this.ignores=[],this.i18n=[]}),It=function(n){ke(i,n);var r=Ie(i);function i(){return ve(this,i),r.apply(this,arguments)}return me(i)}(Ro);j(It,"defaultPreset",lw);j(It,"Util",A);j(It,"Sniffer",je);j(It,"Errors",ys);j(It,"Events",PS);j(It,"Plugin",qe);j(It,"BasePlugin",zn);j(It,"I18N",vr);j(It,"STATE_CLASS",ee);j(It,"InstManager",Lg);j(It,"PlayIcon",Mg);j(It,"TimeIcon",Ng);j(It,"Progress",Fg);j(It,"FullscreenIcon",Bg);j(It,"CssFullscreenIcon",lu);j(It,"VolumeIcon",Ug);function uw(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var t,e,s,a,o=[],l=!0,u=!1;try{if(s=(i=i.call(n)).next,r===0){if(Object(i)!==i)return;l=!1}else for(;!(l=(t=s.call(i)).done)&&(o.push(t.value),o.length!==r);l=!0);}catch(c){u=!0,e=c}finally{try{if(!l&&i.return!=null&&(a=i.return(),Object(a)!==a))return}finally{if(u)throw e}}return o}}function gh(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),i.push.apply(i,t)}return i}function Qe(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?gh(Object(i),!0).forEach(function(t){D(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):gh(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function de(){de=function(){return n};var n={},r=Object.prototype,i=r.hasOwnProperty,t=Object.defineProperty||function(E,T,P){E[T]=P.value},e=typeof Symbol=="function"?Symbol:{},s=e.iterator||"@@iterator",a=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function l(E,T,P){return Object.defineProperty(E,T,{value:P,enumerable:!0,configurable:!0,writable:!0}),E[T]}try{l({},"")}catch{l=function(T,P,V){return T[P]=V}}function u(E,T,P,V){var O=T&&T.prototype instanceof h?T:h,z=Object.create(O.prototype),q=new G(V||[]);return t(z,"_invoke",{value:S(E,P,q)}),z}function c(E,T,P){try{return{type:"normal",arg:E.call(T,P)}}catch(V){return{type:"throw",arg:V}}}n.wrap=u;var f={};function h(){}function d(){}function p(){}var v={};l(v,s,function(){return this});var g=Object.getPrototypeOf,_=g&&g(g(H([])));_&&_!==r&&i.call(_,s)&&(v=_);var b=p.prototype=h.prototype=Object.create(v);function y(E){["next","throw","return"].forEach(function(T){l(E,T,function(P){return this._invoke(T,P)})})}function m(E,T){function P(O,z,q,pe){var ye=c(E[O],E,z);if(ye.type!=="throw"){var U=ye.arg,ge=U.value;return ge&&typeof ge=="object"&&i.call(ge,"__await")?T.resolve(ge.__await).then(function(ue){P("next",ue,q,pe)},function(ue){P("throw",ue,q,pe)}):T.resolve(ge).then(function(ue){U.value=ue,q(U)},function(ue){return P("throw",ue,q,pe)})}pe(ye.arg)}var V;t(this,"_invoke",{value:function(O,z){function q(){return new T(function(pe,ye){P(O,z,pe,ye)})}return V=V?V.then(q,q):q()}})}function S(E,T,P){var V="suspendedStart";return function(O,z){if(V==="executing")throw new Error("Generator is already running");if(V==="completed"){if(O==="throw")throw z;return ie()}for(P.method=O,P.arg=z;;){var q=P.delegate;if(q){var pe=I(q,P);if(pe){if(pe===f)continue;return pe}}if(P.method==="next")P.sent=P._sent=P.arg;else if(P.method==="throw"){if(V==="suspendedStart")throw V="completed",P.arg;P.dispatchException(P.arg)}else P.method==="return"&&P.abrupt("return",P.arg);V="executing";var ye=c(E,T,P);if(ye.type==="normal"){if(V=P.done?"completed":"suspendedYield",ye.arg===f)continue;return{value:ye.arg,done:P.done}}ye.type==="throw"&&(V="completed",P.method="throw",P.arg=ye.arg)}}}function I(E,T){var P=T.method,V=E.iterator[P];if(V===void 0)return T.delegate=null,P==="throw"&&E.iterator.return&&(T.method="return",T.arg=void 0,I(E,T),T.method==="throw")||P!=="return"&&(T.method="throw",T.arg=new TypeError("The iterator does not provide a '"+P+"' method")),f;var O=c(V,E.iterator,T.arg);if(O.type==="throw")return T.method="throw",T.arg=O.arg,T.delegate=null,f;var z=O.arg;return z?z.done?(T[E.resultName]=z.value,T.next=E.nextLoc,T.method!=="return"&&(T.method="next",T.arg=void 0),T.delegate=null,f):z:(T.method="throw",T.arg=new TypeError("iterator result is not an object"),T.delegate=null,f)}function R(E){var T={tryLoc:E[0]};1 in E&&(T.catchLoc=E[1]),2 in E&&(T.finallyLoc=E[2],T.afterLoc=E[3]),this.tryEntries.push(T)}function N(E){var T=E.completion||{};T.type="normal",delete T.arg,E.completion=T}function G(E){this.tryEntries=[{tryLoc:"root"}],E.forEach(R,this),this.reset(!0)}function H(E){if(E){var T=E[s];if(T)return T.call(E);if(typeof E.next=="function")return E;if(!isNaN(E.length)){var P=-1,V=function O(){for(;++P<E.length;)if(i.call(E,P))return O.value=E[P],O.done=!1,O;return O.value=void 0,O.done=!0,O};return V.next=V}}return{next:ie}}function ie(){return{value:void 0,done:!0}}return d.prototype=p,t(b,"constructor",{value:p,configurable:!0}),t(p,"constructor",{value:d,configurable:!0}),d.displayName=l(p,o,"GeneratorFunction"),n.isGeneratorFunction=function(E){var T=typeof E=="function"&&E.constructor;return!!T&&(T===d||(T.displayName||T.name)==="GeneratorFunction")},n.mark=function(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,p):(E.__proto__=p,l(E,o,"GeneratorFunction")),E.prototype=Object.create(b),E},n.awrap=function(E){return{__await:E}},y(m.prototype),l(m.prototype,a,function(){return this}),n.AsyncIterator=m,n.async=function(E,T,P,V,O){O===void 0&&(O=Promise);var z=new m(u(E,T,P,V),O);return n.isGeneratorFunction(T)?z:z.next().then(function(q){return q.done?q.value:z.next()})},y(b),l(b,o,"Generator"),l(b,s,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),n.keys=function(E){var T=Object(E),P=[];for(var V in T)P.push(V);return P.reverse(),function O(){for(;P.length;){var z=P.pop();if(z in T)return O.value=z,O.done=!1,O}return O.done=!0,O}},n.values=H,G.prototype={constructor:G,reset:function(E){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!E)for(var T in this)T.charAt(0)==="t"&&i.call(this,T)&&!isNaN(+T.slice(1))&&(this[T]=void 0)},stop:function(){this.done=!0;var E=this.tryEntries[0].completion;if(E.type==="throw")throw E.arg;return this.rval},dispatchException:function(E){if(this.done)throw E;var T=this;function P(ye,U){return z.type="throw",z.arg=E,T.next=ye,U&&(T.method="next",T.arg=void 0),!!U}for(var V=this.tryEntries.length-1;V>=0;--V){var O=this.tryEntries[V],z=O.completion;if(O.tryLoc==="root")return P("end");if(O.tryLoc<=this.prev){var q=i.call(O,"catchLoc"),pe=i.call(O,"finallyLoc");if(q&&pe){if(this.prev<O.catchLoc)return P(O.catchLoc,!0);if(this.prev<O.finallyLoc)return P(O.finallyLoc)}else if(q){if(this.prev<O.catchLoc)return P(O.catchLoc,!0)}else{if(!pe)throw new Error("try statement without catch or finally");if(this.prev<O.finallyLoc)return P(O.finallyLoc)}}}},abrupt:function(E,T){for(var P=this.tryEntries.length-1;P>=0;--P){var V=this.tryEntries[P];if(V.tryLoc<=this.prev&&i.call(V,"finallyLoc")&&this.prev<V.finallyLoc){var O=V;break}}O&&(E==="break"||E==="continue")&&O.tryLoc<=T&&T<=O.finallyLoc&&(O=null);var z=O?O.completion:{};return z.type=E,z.arg=T,O?(this.method="next",this.next=O.finallyLoc,f):this.complete(z)},complete:function(E,T){if(E.type==="throw")throw E.arg;return E.type==="break"||E.type==="continue"?this.next=E.arg:E.type==="return"?(this.rval=this.arg=E.arg,this.method="return",this.next="end"):E.type==="normal"&&T&&(this.next=T),f},finish:function(E){for(var T=this.tryEntries.length-1;T>=0;--T){var P=this.tryEntries[T];if(P.finallyLoc===E)return this.complete(P.completion,P.afterLoc),N(P),f}},catch:function(E){for(var T=this.tryEntries.length-1;T>=0;--T){var P=this.tryEntries[T];if(P.tryLoc===E){var V=P.completion;if(V.type==="throw"){var O=V.arg;N(P)}return O}}throw new Error("illegal catch attempt")},delegateYield:function(E,T,P){return this.delegate={iterator:H(E),resultName:T,nextLoc:P},this.method==="next"&&(this.arg=void 0),f}},n}function _s(n){"@babel/helpers - typeof";return _s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_s(n)}function vh(n,r,i,t,e,s,a){try{var o=n[s](a),l=o.value}catch(u){i(u);return}o.done?r(l):Promise.resolve(l).then(t,e)}function Ke(n){return function(){var r=this,i=arguments;return new Promise(function(t,e){var s=n.apply(r,i);function a(l){vh(s,t,e,a,o,"next",l)}function o(l){vh(s,t,e,a,o,"throw",l)}a(void 0)})}}function _t(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function mh(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,zg(t.key),t)}}function bt(n,r,i){return r&&mh(n.prototype,r),i&&mh(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function D(n,r,i){return r=zg(r),r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function Po(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&uu(n,r)}function ja(n){return ja=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},ja(n)}function uu(n,r){return uu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uu(n,r)}function cw(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fw(n,r){if(n==null)return{};var i={},t=Object.keys(n),e,s;for(s=0;s<t.length;s++)e=t[s],!(r.indexOf(e)>=0)&&(i[e]=n[e]);return i}function cu(n,r){if(n==null)return{};var i=fw(n,r),t,e;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(e=0;e<s.length;e++)t=s[e],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function Oe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function hw(n,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Oe(n)}function xo(n){var r=cw();return function(){var t=ja(n),e;if(r){var s=ja(this).constructor;e=Reflect.construct(t,arguments,s)}else e=t.apply(this,arguments);return hw(this,e)}}function ai(n,r){return gw(n)||uw(n,r)||Gg(n,r)||yw()}function dw(n){return pw(n)||vw(n)||Gg(n)||mw()}function pw(n){if(Array.isArray(n))return fu(n)}function gw(n){if(Array.isArray(n))return n}function vw(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Gg(n,r){if(n){if(typeof n=="string")return fu(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return fu(n,r)}}function fu(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,t=new Array(r);i<r;i++)t[i]=n[i];return t}function mw(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aw(n,r){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var t=i.call(n,r);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function zg(n){var r=Aw(n,"string");return typeof r=="symbol"?r:String(r)}function yh(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),i.push.apply(i,t)}return i}function bs(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?yh(Object(i),!0).forEach(function(t){W(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):yh(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function Et(){Et=function(){return n};var n={},r=Object.prototype,i=r.hasOwnProperty,t=Object.defineProperty||function(E,T,P){E[T]=P.value},e=typeof Symbol=="function"?Symbol:{},s=e.iterator||"@@iterator",a=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function l(E,T,P){return Object.defineProperty(E,T,{value:P,enumerable:!0,configurable:!0,writable:!0}),E[T]}try{l({},"")}catch{l=function(T,P,V){return T[P]=V}}function u(E,T,P,V){var O=T&&T.prototype instanceof h?T:h,z=Object.create(O.prototype),q=new G(V||[]);return t(z,"_invoke",{value:S(E,P,q)}),z}function c(E,T,P){try{return{type:"normal",arg:E.call(T,P)}}catch(V){return{type:"throw",arg:V}}}n.wrap=u;var f={};function h(){}function d(){}function p(){}var v={};l(v,s,function(){return this});var g=Object.getPrototypeOf,_=g&&g(g(H([])));_&&_!==r&&i.call(_,s)&&(v=_);var b=p.prototype=h.prototype=Object.create(v);function y(E){["next","throw","return"].forEach(function(T){l(E,T,function(P){return this._invoke(T,P)})})}function m(E,T){function P(O,z,q,pe){var ye=c(E[O],E,z);if(ye.type!=="throw"){var U=ye.arg,ge=U.value;return ge&&typeof ge=="object"&&i.call(ge,"__await")?T.resolve(ge.__await).then(function(ue){P("next",ue,q,pe)},function(ue){P("throw",ue,q,pe)}):T.resolve(ge).then(function(ue){U.value=ue,q(U)},function(ue){return P("throw",ue,q,pe)})}pe(ye.arg)}var V;t(this,"_invoke",{value:function(O,z){function q(){return new T(function(pe,ye){P(O,z,pe,ye)})}return V=V?V.then(q,q):q()}})}function S(E,T,P){var V="suspendedStart";return function(O,z){if(V==="executing")throw new Error("Generator is already running");if(V==="completed"){if(O==="throw")throw z;return ie()}for(P.method=O,P.arg=z;;){var q=P.delegate;if(q){var pe=I(q,P);if(pe){if(pe===f)continue;return pe}}if(P.method==="next")P.sent=P._sent=P.arg;else if(P.method==="throw"){if(V==="suspendedStart")throw V="completed",P.arg;P.dispatchException(P.arg)}else P.method==="return"&&P.abrupt("return",P.arg);V="executing";var ye=c(E,T,P);if(ye.type==="normal"){if(V=P.done?"completed":"suspendedYield",ye.arg===f)continue;return{value:ye.arg,done:P.done}}ye.type==="throw"&&(V="completed",P.method="throw",P.arg=ye.arg)}}}function I(E,T){var P=T.method,V=E.iterator[P];if(V===void 0)return T.delegate=null,P==="throw"&&E.iterator.return&&(T.method="return",T.arg=void 0,I(E,T),T.method==="throw")||P!=="return"&&(T.method="throw",T.arg=new TypeError("The iterator does not provide a '"+P+"' method")),f;var O=c(V,E.iterator,T.arg);if(O.type==="throw")return T.method="throw",T.arg=O.arg,T.delegate=null,f;var z=O.arg;return z?z.done?(T[E.resultName]=z.value,T.next=E.nextLoc,T.method!=="return"&&(T.method="next",T.arg=void 0),T.delegate=null,f):z:(T.method="throw",T.arg=new TypeError("iterator result is not an object"),T.delegate=null,f)}function R(E){var T={tryLoc:E[0]};1 in E&&(T.catchLoc=E[1]),2 in E&&(T.finallyLoc=E[2],T.afterLoc=E[3]),this.tryEntries.push(T)}function N(E){var T=E.completion||{};T.type="normal",delete T.arg,E.completion=T}function G(E){this.tryEntries=[{tryLoc:"root"}],E.forEach(R,this),this.reset(!0)}function H(E){if(E){var T=E[s];if(T)return T.call(E);if(typeof E.next=="function")return E;if(!isNaN(E.length)){var P=-1,V=function O(){for(;++P<E.length;)if(i.call(E,P))return O.value=E[P],O.done=!1,O;return O.value=void 0,O.done=!0,O};return V.next=V}}return{next:ie}}function ie(){return{value:void 0,done:!0}}return d.prototype=p,t(b,"constructor",{value:p,configurable:!0}),t(p,"constructor",{value:d,configurable:!0}),d.displayName=l(p,o,"GeneratorFunction"),n.isGeneratorFunction=function(E){var T=typeof E=="function"&&E.constructor;return!!T&&(T===d||(T.displayName||T.name)==="GeneratorFunction")},n.mark=function(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,p):(E.__proto__=p,l(E,o,"GeneratorFunction")),E.prototype=Object.create(b),E},n.awrap=function(E){return{__await:E}},y(m.prototype),l(m.prototype,a,function(){return this}),n.AsyncIterator=m,n.async=function(E,T,P,V,O){O===void 0&&(O=Promise);var z=new m(u(E,T,P,V),O);return n.isGeneratorFunction(T)?z:z.next().then(function(q){return q.done?q.value:z.next()})},y(b),l(b,o,"Generator"),l(b,s,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),n.keys=function(E){var T=Object(E),P=[];for(var V in T)P.push(V);return P.reverse(),function O(){for(;P.length;){var z=P.pop();if(z in T)return O.value=z,O.done=!1,O}return O.done=!0,O}},n.values=H,G.prototype={constructor:G,reset:function(E){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!E)for(var T in this)T.charAt(0)==="t"&&i.call(this,T)&&!isNaN(+T.slice(1))&&(this[T]=void 0)},stop:function(){this.done=!0;var E=this.tryEntries[0].completion;if(E.type==="throw")throw E.arg;return this.rval},dispatchException:function(E){if(this.done)throw E;var T=this;function P(ye,U){return z.type="throw",z.arg=E,T.next=ye,U&&(T.method="next",T.arg=void 0),!!U}for(var V=this.tryEntries.length-1;V>=0;--V){var O=this.tryEntries[V],z=O.completion;if(O.tryLoc==="root")return P("end");if(O.tryLoc<=this.prev){var q=i.call(O,"catchLoc"),pe=i.call(O,"finallyLoc");if(q&&pe){if(this.prev<O.catchLoc)return P(O.catchLoc,!0);if(this.prev<O.finallyLoc)return P(O.finallyLoc)}else if(q){if(this.prev<O.catchLoc)return P(O.catchLoc,!0)}else{if(!pe)throw new Error("try statement without catch or finally");if(this.prev<O.finallyLoc)return P(O.finallyLoc)}}}},abrupt:function(E,T){for(var P=this.tryEntries.length-1;P>=0;--P){var V=this.tryEntries[P];if(V.tryLoc<=this.prev&&i.call(V,"finallyLoc")&&this.prev<V.finallyLoc){var O=V;break}}O&&(E==="break"||E==="continue")&&O.tryLoc<=T&&T<=O.finallyLoc&&(O=null);var z=O?O.completion:{};return z.type=E,z.arg=T,O?(this.method="next",this.next=O.finallyLoc,f):this.complete(z)},complete:function(E,T){if(E.type==="throw")throw E.arg;return E.type==="break"||E.type==="continue"?this.next=E.arg:E.type==="return"?(this.rval=this.arg=E.arg,this.method="return",this.next="end"):E.type==="normal"&&T&&(this.next=T),f},finish:function(E){for(var T=this.tryEntries.length-1;T>=0;--T){var P=this.tryEntries[T];if(P.finallyLoc===E)return this.complete(P.completion,P.afterLoc),N(P),f}},catch:function(E){for(var T=this.tryEntries.length-1;T>=0;--T){var P=this.tryEntries[T];if(P.tryLoc===E){var V=P.completion;if(V.type==="throw"){var O=V.arg;N(P)}return O}}throw new Error("illegal catch attempt")},delegateYield:function(E,T,P){return this.delegate={iterator:H(E),resultName:T,nextLoc:P},this.method==="next"&&(this.arg=void 0),f}},n}function Yi(n){"@babel/helpers - typeof";return Yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Yi(n)}function Ah(n,r,i,t,e,s,a){try{var o=n[s](a),l=o.value}catch(u){i(u);return}o.done?r(l):Promise.resolve(l).then(t,e)}function ti(n){return function(){var r=this,i=arguments;return new Promise(function(t,e){var s=n.apply(r,i);function a(l){Ah(s,t,e,a,o,"next",l)}function o(l){Ah(s,t,e,a,o,"throw",l)}a(void 0)})}}function sn(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function _h(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,Yg(t.key),t)}}function an(n,r,i){return r&&_h(n.prototype,r),i&&_h(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function W(n,r,i){return r=Yg(r),r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function Vs(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&Ss(n,r)}function Qi(n){return Qi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Qi(n)}function Ss(n,r){return Ss=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ss(n,r)}function Kg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Aa(n,r,i){return Kg()?Aa=Reflect.construct.bind():Aa=function(e,s,a){var o=[null];o.push.apply(o,s);var l=Function.bind.apply(e,o),u=new l;return a&&Ss(u,a.prototype),u},Aa.apply(null,arguments)}function _w(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Ga(n){var r=typeof Map=="function"?new Map:void 0;return Ga=function(t){if(t===null||!_w(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return Aa(t,arguments,Qi(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Ss(e,t)},Ga(n)}function bw(n,r){if(n==null)return{};var i={},t=Object.keys(n),e,s;for(s=0;s<t.length;s++)e=t[s],!(r.indexOf(e)>=0)&&(i[e]=n[e]);return i}function Sw(n,r){if(n==null)return{};var i=bw(n,r),t,e;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(e=0;e<s.length;e++)t=s[e],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function _e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ew(n,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _e(n)}function js(n){var r=Kg();return function(){var t=Qi(n),e;if(r){var s=Qi(this).constructor;e=Reflect.construct(t,arguments,s)}else e=t.apply(this,arguments);return Ew(this,e)}}function ww(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=Qi(n),n!==null););return n}function _a(){return typeof Reflect<"u"&&Reflect.get?_a=Reflect.get.bind():_a=function(r,i,t){var e=ww(r,i);if(e){var s=Object.getOwnPropertyDescriptor(e,i);return s.get?s.get.call(arguments.length<3?r:t):s.value}},_a.apply(this,arguments)}function Cw(n,r){if(n){if(typeof n=="string")return bh(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return bh(n,r)}}function bh(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,t=new Array(r);i<r;i++)t[i]=n[i];return t}function Tw(n,r){var i=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!i){if(Array.isArray(n)||(i=Cw(n))||r){i&&(n=i);var t=0,e=function(){};return{s:e,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(l){throw l},f:e}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,o;return{s:function(){i=i.call(n)},n:function(){var l=i.next();return s=l.done,l},e:function(l){a=!0,o=l},f:function(){try{!s&&i.return!=null&&i.return()}finally{if(a)throw o}}}}function kw(n,r){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var t=i.call(n,r);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function Yg(n){var r=kw(n,"string");return typeof r=="symbol"?r:String(r)}var en=function(){function n(){sn(this,n)}return an(n,null,[{key:"start",value:function(i){return!i||!i.length||i.length===1&&i.end(0)-i.start(0)<1e-6||i.length===1&&i.start(0)<0?0:i.start(0)}},{key:"end",value:function(i){return!i||!i.length||i.length===1&&i.end(0)-i.start(0)<1e-6?0:i.end(i.length-1)}},{key:"get",value:function(i){if(i)try{return i.buffered}catch{}}},{key:"buffers",value:function(i,t){if(!i||!i.length)return[];for(var e=[],s=0,a=i.length;s<a;s++){var o=e.length;if(!o||!t)e.push([i.start(s),i.end(s)]);else{var l=e[o-1],u=l[1],c=i.start(s);if(c-u<=t){var f=i.end(s);f>u&&(l[1]=f)}else e.push([i.start(s),i.end(s)])}}return e}},{key:"totalLength",value:function(i){return!i||!i.length?0:i.reduce(function(t,e){return t+=e[1]-e[0]},0)}},{key:"info",value:function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(!i||!i.length)return{start:0,end:0,buffers:[]};for(var s=0,a=0,o=0,l=0,u=0,c=0,f=0,h=n.buffers(i,e),d=0,p=h.length;d<p;d++){var v=h[d];if(t+e>=v[0]&&t<=v[1])s=v[0],a=v[1],o=d;else if(t+e<v[0]){l=v[0],u=v[1];break}else t+e>v[1]&&(c=v[0],f=v[1])}return{start:s,end:a,index:o,buffers:h,nextStart:l,nextEnd:u,prevStart:c,prevEnd:f,currentTime:t,behind:t-s,remaining:a?a-t:0,length:n.totalLength&&n.totalLength(h)}}},{key:"isBuffered",value:function(i,t){if(i){var e=n.get(i);if(e!=null&&e.length){for(var s=0;s<e.length;s++)if(t>=e.start(s)&&t<=e.end(s))return!0}}return!1}}]),n}(),Iw=typeof window<"u",qt,Ne={MANIFEST:"manifest",NETWORK:"network",NETWORK_TIMEOUT:"network_timeout",NETWORK_FORBIDDEN:"network_forbidden",NETWORK_NOTFOUND:"network_notfound",NETWROK_RANGE_NOT_SATISFIABLE:"network_range_not_satisfiable",DEMUX:"demux",REMUX:"remux",MEDIA:"media",DRM:"drm",OTHER:"other",RUNTIME:"runtime",SUB_TYPES:{HLS:"HLS",FMP4:"FMP4",MSE_ADD_SB:"MSE_ADD_SB",MSE_APPEND_BUFFER:"MSE_APPEND_BUFFER",MSE_OTHER:"MSE_OTHER",MSE_FULL:"MSE_FULL",MSE_CHANGE_TYPE:"MSE_CHANGE_TYPE",OPTION:"OPTION"}},Al=(qt={},W(qt,Ne.MANIFEST,{HLS:1100,DASH:1200}),W(qt,Ne.NETWORK,2100),W(qt,Ne.NETWORK_TIMEOUT,2101),W(qt,Ne.NETWORK_FORBIDDEN,2103),W(qt,Ne.NETWORK_NOTFOUND,2104),W(qt,Ne.NETWROK_RANGE_NOT_SATISFIABLE,2116),W(qt,Ne.DEMUX,{FLV:3100,HLS:3200,MP4:3300,FMP4:3400,SIDX:3410}),W(qt,Ne.REMUX,{FMP4:4100,MP4:4200}),W(qt,Ne.MEDIA,{MEDIA_ERR_ABORTED:5101,MEDIA_ERR_NETWORK:5102,MEDIA_ERR_DECODE:5103,MEDIA_ERR_SRC_NOT_SUPPORTED:5104,MEDIA_ERR_CODEC_NOT_SUPPORTED:5105,MEDIA_ERR_URL_EMPTY:5106,MSE_ADD_SB:5200,MSE_APPEND_BUFFER:5201,MSE_OTHER:5202,MSE_FULL:5203,MSE_HIJACK:5204,MSE_CHANGE_TYPE:5205,EME_HIJACK:5301}),W(qt,Ne.DRM,{LICENSE:7100,CUSTOM_LICENSE:7200}),W(qt,Ne.OTHER,8e3),W(qt,Ne.RUNTIME,{NO_CANPLAY_ERROR:9001,BUFFERBREAK_ERROR:9002,WAITING_TIMEOUT_ERROR:9003}),qt),ct=function(n){Vs(i,n);var r=js(i);function i(t,e,s,a,o){var l;return sn(this,i),l=r.call(this,o||s?.message),l.errorType=t===Ne.NETWORK_TIMEOUT?Ne.NETWORK:t,l.originError=s,l.ext=a,l.errorCode=Al[t][e]||Al[t],l.errorMessage=l.message,l.errorCode||(l.errorType=Ne.OTHER,l.errorCode=Al[l.errorType]),l}return an(i,null,[{key:"create",value:function(e,s,a,o,l){return e instanceof i?e:(e instanceof Error&&(a=e,e=""),e||(e=Ne.OTHER),new i(e,s,a,o,l))}},{key:"network",value:function(e){var s;return new i(e!=null&&e.isTimeout?Ne.NETWORK_TIMEOUT:Ne.NETWORK,null,e instanceof Error?e:null,{url:e?.url,response:e?.response,httpCode:e==null||(s=e.response)===null||s===void 0?void 0:s.status})}}]),i}(Ga(Error)),na={DEBUG:1,LOG:2,WARN:3,ERROR:4},Rw=200*1024,Pw=["Boolean","Number","String","Undefined","Null","Date","Object"],Kn=function(){function n(r,i){sn(this,n),this.name=r||"",this._prefix="[".concat(this.name,"]"),this.logCacheLevel=i?.logCacheLevel||3,this.logMaxSize=i?.logMaxSize||Rw,this.logSize=0,this.logTextArray=[]}return an(n,[{key:"debug",value:function(){for(var i,t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];this.logCache.apply(this,[na.DEBUG].concat(e)),!n.disabled&&(i=console).debug.apply(i,["[".concat(Wr(),"]"),this._prefix].concat(e))}},{key:"log",value:function(){for(var i,t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];this.logCache.apply(this,[na.LOG].concat(e)),!n.disabled&&(i=console).log.apply(i,["[".concat(Wr(),"]"),this._prefix].concat(e))}},{key:"warn",value:function(){for(var i,t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];this.logCache.apply(this,[na.WARN].concat(e)),!n.disabled&&(i=console).warn.apply(i,["[".concat(Wr(),"]"),this._prefix].concat(e))}},{key:"error",value:function(){for(var i,t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];this.logCache.apply(this,[na.ERROR].concat(e)),!n.disabled&&(i=console).error.apply(i,["[".concat(Wr(),"]"),this._prefix].concat(e))}},{key:"logCache",value:function(i){if(!(i<this.logCacheLevel)){var t="";try{for(var e=arguments.length,s=new Array(e>1?e-1:0),a=1;a<e;a++)s[a-1]=arguments[a];var o=s.map(function(u){return Qg(u)});t="[".concat(Wr(),"]")+this._prefix+JSON.stringify(o)}catch{return}if(i>=this.logCacheLevel&&(this.logSize+=t.length,this.logTextArray.push(t)),this.logSize>this.logMaxSize){var l=this.logTextArray.shift();this.logSize-=l.length}}}},{key:"getLogCache",value:function(){var i=this.logTextArray.join(`
`);return this.reset(),i}},{key:"reset",value:function(){this.logTextArray=[],this.logSize=0}},{key:"table",value:function(){var i;n.disabled||(console.group(this._prefix),(i=console).table.apply(i,arguments),console.groupEnd())}},{key:"setLogLevel",value:function(i){this.logCacheLevel=i}}],[{key:"enable",value:function(){n.disabled=!1}},{key:"disable",value:function(){n.disabled=!0}}]),n}();W(Kn,"disabled",!0);function Wr(){return new Date().toLocaleString()}function xw(n){if(Yi(n)!=="object")return n;var r=Object.prototype.toString.call(n).slice(8,-1);switch(r){case"Array":case"Uint8Array":case"ArrayBuffer":return r+"["+n.length+"]";case"Object":return"{}";default:return r}}function Qg(n,r,i){i||(i=1),r||(r=2);var t={};if(!n||Yi(n)!=="object")return n;var e=Object.prototype.toString.call(n).slice(8,-1);if(!Pw.includes(e))return e;if(!(i>r)){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i===r?t[s]=xw(n[s]):Yi(n[s])==="object"?t[s]=Qg(n[s],r,i+1):t[s]=n[s]);return t}}function gr(){var n,r,i=new Promise(function(t,e){n=t,r=e});return i.used=!1,i.resolve=function(){return i.used=!0,n.apply(void 0,arguments)},i.reject=function(){return i.used=!0,r.apply(void 0,arguments)},i}function cr(){try{return parseInt(performance.now(),10)}catch{return new Date().getTime()}}var Dw={stringify:function(r){try{return JSON.stringify(r)}catch{return""}},parse:function(r){try{return JSON.parse(r)}catch{return}}};function Sh(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;try{return Iw?n&&typeof ManagedMediaSource<"u"?ManagedMediaSource:window.MediaSource:null}catch{}}function _l(n){return/ManagedMediaSource/gi.test(Object.prototype.toString.call(n))}function Ow(n){var r=[];if(n instanceof TimeRanges)for(var i=0;i<n.length;i++)r.push({start:n.start(i),end:n.end(i)});return r}var ia={APPEND:"appendBuffer",REMOVE:"removeBuffer",UPDATE_DURATION:"updateDuration"},Gt=function(){function n(r,i){var t=this;sn(this,n),W(this,"media",null),W(this,"mediaSource",null),W(this,"_openPromise",gr()),W(this,"_queue",Object.create(null)),W(this,"_sourceBuffer",Object.create(null)),W(this,"_mseFullFlag",{}),W(this,"_st",0),W(this,"_opst",0),W(this,"_logger",null),W(this,"_config",null),W(this,"_url",null),W(this,"_onStartStreaming",function(){t._logger.debug("startstreaming")}),W(this,"_onEndStreaming",function(){t._logger.debug("endstreaming")}),W(this,"_onSBUpdateEnd",function(e){var s=t._queue[e];if(s){var a=s[0];if(a?.opName!==ia.UPDATE_DURATION&&s.shift(),a){var o,l,u=cr()-t._opst;t._logger.debug("UpdateEnd(".concat(e,"/").concat(a.opName,")"),Dw.stringify(Ow((o=t._sourceBuffer[e])===null||o===void 0?void 0:o.buffered)),u,a.context),a.promise.resolve({name:a.opName,context:a.context,costtime:u});var c=(l=a.context)===null||l===void 0?void 0:l.callback;c&&typeof c=="function"&&c(a.context),t._startQueue(e)}}}),W(this,"_onSBUpdateError",function(e,s){var a=t._queue[e];if(a){var o=a[0];o&&(t._logger.error("UpdateError",e,o.opName,o.context),o.promise.reject(new ct(Ne.MEDIA,Ne.SUB_TYPES.MSE_APPEND_BUFFER,s)))}}),this._config=Object.assign(n.getDefaultConfig(),i),r&&this.bindMedia(r),this._logger=new Kn("MSE"),this._config.openLog&&Kn.enable()}return an(n,[{key:"isOpened",get:function(){var i;return((i=this.mediaSource)===null||i===void 0?void 0:i.readyState)==="open"}},{key:"hasOpTasks",get:function(){var i=this,t=!1;return Object.keys(this._queue).forEach(function(e){var s=i._queue[e];Array.isArray(s)&&(t||(t=s.length>0))}),t}},{key:"url",get:function(){return this._url}},{key:"duration",get:function(){var i;return((i=this.mediaSource)===null||i===void 0?void 0:i.duration)||-1}},{key:"isEnded",get:function(){return this.mediaSource?this.mediaSource.readyState==="ended":!1}},{key:"streaming",get:function(){return _l(this.mediaSource)?this.mediaSource.streaming:!0}},{key:"isFull",value:function(i){return i?this._mseFullFlag[i]:this._mseFullFlag[n.VIDEO]}},{key:"updateDuration",value:function(i){var t=this,e=this.mediaSource&&this.mediaSource.duration>i;if(this.mediaSource&&this.mediaSource.duration>i){var s=0;if(Object.keys(this._sourceBuffer).forEach(function(a){try{s=Math.max(t.bufferEnd(a)||0,s)}catch{}}),i<s)return Promise.resolve()}return this._enqueueBlockingOp(function(){if(t.isEnded){t._logger.debug("setDuration but ended");return}t.mediaSource&&(t.mediaSource.duration=i,t._logger.debug("setDuration",i))},ia.UPDATE_DURATION,{isReduceDuration:e})}},{key:"open",value:function(){var i=this;if(this._openPromise.used&&!this.isOpened&&this.mediaSource){var t=this.mediaSource,e=function s(){var a=cr()-i._st;i._logger.debug("sourceopen",a),t.removeEventListener("sourceopen",s),i._openPromise.resolve({costtime:a})};t.addEventListener("sourceopen",e),this._openPromise=gr()}return this._openPromise}},{key:"bindMedia",value:function(){var r=ti(Et().mark(function t(e){var s=this,a,o,l,u;return Et().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(this.mediaSource||this.media)){f.next=3;break}return f.next=3,this.unbindMedia();case 3:if(a=Sh(this._config.preferMMS),!(!e||!a)){f.next=6;break}throw new Error("Param media or MediaSource does not exist");case 6:return this.media=e,o=this.mediaSource=new a,l=_l(o),this._st=cr(),u=function h(){var d=cr()-s._st;s._logger.debug("sourceopen"),o.removeEventListener("sourceopen",h),URL.revokeObjectURL(e.src),s._openPromise.resolve({costtime:d})},o.addEventListener("sourceopen",u),l&&(o.addEventListener("startstreaming",this._onStartStreaming),o.addEventListener("endstreaming",this._onEndStreaming)),this._url=URL.createObjectURL(o),e.src=this._url,e.disableRemotePlayback=l,f.abrupt("return",this._openPromise);case 17:case"end":return f.stop()}},t,this)}));function i(t){return r.apply(this,arguments)}return i}()},{key:"unbindMedia",value:function(){var r=ti(Et().mark(function t(){var e=this,s,a,o;return Et().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this._openPromise.used||this._openPromise.resolve(),s=this.mediaSource,s){if(Object.keys(this._queue).forEach(function(c){var f=e._queue[c];f&&f.forEach(function(h){var d,p;return(d=h.promise)===null||d===void 0||(p=d.resolve)===null||p===void 0?void 0:p.call(d)})}),a=!!this.media&&this.media.readyState>=1,o=s.readyState==="open",a&&o)try{s.endOfStream()}catch{}Object.keys(this._sourceBuffer).forEach(function(c){try{s.removeSourceBuffer(e._sourceBuffer[c])}catch{}}),_l(s)&&(s.removeEventListener("startstreaming",this._onStartStreaming),s.removeEventListener("endstreaming",this._onEndStreaming))}if(this.media){this.media.disableRemotePlayback=!1,this.media.removeAttribute("src");try{this.media.load()}catch{}this.media=null}this.mediaSource=null,this._openPromise=gr(),this._queue=Object.create(null),this._sourceBuffer=Object.create(null);case 8:case"end":return u.stop()}},t,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"createSource",value:function(i,t){if(!(this._sourceBuffer[i]||!this.mediaSource)){var e;try{e=this._sourceBuffer[i]=this.mediaSource.addSourceBuffer(t)}catch(s){throw new ct(Ne.MEDIA,Ne.SUB_TYPES.MSE_ADD_SB,s)}e.mimeType=t,e.addEventListener("updateend",this._onSBUpdateEnd.bind(this,i)),e.addEventListener("error",this._onSBUpdateError.bind(this,i))}}},{key:"changeType",value:function(i,t){var e=this,s=this._sourceBuffer[i];return!this.mediaSource||!s||s.mimeType===t?Promise.resolve():typeof s.changeType!="function"?Promise.reject(new ct(Ne.MEDIA,Ne.SUB_TYPES.MSE_CHANGE_TYPE,new Error("changeType is not a function"))):this._enqueueOp(i,function(){try{s.changeType(t)}catch(a){throw new ct(Ne.MEDIA,Ne.SUB_TYPES.MSE_CHANGE_TYPE,a)}s.mimeType=t,e._onSBUpdateEnd(i)},"changeType",{mimeType:t})}},{key:"createOrChangeSource",value:function(i,t){return this.createSource(i,t),this.changeType(i,t)}},{key:"append",value:function(i,t,e){var s=this;return!t||!t.byteLength||!this._sourceBuffer[i]?Promise.resolve():this._enqueueOp(i,function(){var a;!s.mediaSource||s.media.error||(s._logger.debug("MSE APPEND START",e),s._opst=cr(),(a=s._sourceBuffer[i])===null||a===void 0||a.appendBuffer(t))},ia.APPEND,e)}},{key:"remove",value:function(i,t,e,s){var a=this,o=!1;return this._mseFullFlag[i]&&(o=!0),this._enqueueOp(i,function(){if(!(!a.mediaSource||a.media.error)){var l=a._sourceBuffer[i];if(t>=e||!l){a._onSBUpdateEnd(i);return}a._opst=cr(),a._logger.debug("MSE REMOVE START",i,t,e,s),l.remove(t,e)}},ia.REMOVE,s,o)}},{key:"clearBuffer",value:function(i,t){var e=this,s;return Object.keys(this._sourceBuffer).forEach(function(a){s=e.remove(a,i,t)}),s||Promise.resolve()}},{key:"clearAllBuffer",value:function(){var i=this,t;return Object.keys(this._sourceBuffer).forEach(function(e){var s=i._sourceBuffer[e];t=i.remove(e,0,en.end(en.get(s)))}),t}},{key:"clearOpQueues",value:function(i,t){var e;this._logger.debug("MSE clearOpQueue START");var s=this._queue[i];if(t&&s){this._queue[i]=[];return}if(!(!s||!s[i]||s.length<5)){var a=[];s.forEach(function(o){o.context&&o.context.isinit&&a.push(o)}),this._queue[i]=s.slice(0,2),a.length>0&&(e=this._queue[i]).push.apply(e,a)}}},{key:"endOfStream",value:function(i){var t=this;return!this.mediaSource||this.mediaSource.readyState!=="open"?Promise.resolve():this._enqueueBlockingOp(function(){var e=t.mediaSource;!e||e.readyState!=="open"||(t._logger.debug("MSE endOfStream START"),i?e.endOfStream(i):e.endOfStream())},"endOfStream")}},{key:"setLiveSeekableRange",value:function(i,t){var e=this.mediaSource;i<0||t<i||!(e!=null&&e.setLiveSeekableRange)||e.readyState!=="open"||e.setLiveSeekableRange(i,t)}},{key:"getSourceBuffer",value:function(i){return this._sourceBuffer[i]}},{key:"buffered",value:function(i){return en.get(this._sourceBuffer[i])}},{key:"bufferStart",value:function(i){return en.start(this.buffered(i))}},{key:"bufferEnd",value:function(i){return en.end(this.buffered(i))}},{key:"_enqueueOp",value:function(i,t,e,s,a){var o=this;if(!this.mediaSource)return Promise.resolve();var l=this._queue[i]=this._queue[i]||[],u={exec:t,promise:gr(),opName:e,context:s};return a?(l.splice(0,0,u),this._mseFullFlag[i]=!1,this._startQueue(i)):l.push(u),this.isOpened||this.isEnded?l.length===1&&this._startQueue(i):this._openPromise.then(function(){l.length===1&&o._startQueue(i)}),u.promise}},{key:"_enqueueBlockingOp",value:function(){var r=ti(Et().mark(function t(e,s,a){var o=this,l,u;return Et().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.mediaSource){f.next=2;break}return f.abrupt("return",Promise.resolve());case 2:if(l=Object.keys(this._sourceBuffer),l.length){f.next=5;break}return f.abrupt("return",e());case 5:return u=[],l.forEach(function(h){var d=o._queue[h],p=gr();u.push(p),d.push({exec:function(){p.resolve()},promise:p,opName:s,context:a}),d.length===1&&o._startQueue(h)}),f.abrupt("return",Promise.all(u).then(function(){try{return e()}finally{l.forEach(function(h){var d=o._queue[h],p=o._sourceBuffer[h];d?.shift(),(!p||!p.updating)&&o._startQueue(h)})}}));case 8:case"end":return f.stop()}},t,this)}));function i(t,e,s){return r.apply(this,arguments)}return i}()},{key:"_startQueue",value:function(i){var t=this._queue[i];if(t){var e=t[0];if(e&&!this._mseFullFlag[i])try{e.exec()}catch(o){if(o&&o.message&&o.message.indexOf("SourceBuffer is full")>=0){var s;this._mseFullFlag[i]=!0,e.context&&Yi(e.context)==="object"&&(e.context.isFull=!0),this._logger.error("[MSE error],  context,",e.context," ,name,",e.opName,",err,SourceBuffer is full"),e==null||(s=e.promise)===null||s===void 0||s.reject(new ct(Ne.MEDIA,Ne.SUB_TYPES.MSE_FULL,o))}else{var a;this._logger.error(o),e==null||(a=e.promise)===null||a===void 0||a.reject(o.constructor===ct?o:new ct(Ne.MEDIA,Ne.SUB_TYPES.MSE_OTHER,o)),t.shift(),this._startQueue(i)}}}}},{key:"setTimeoffset",value:function(i,t,e){var s=this;return this._enqueueOp(i,function(){t<0&&(t+=.001),s._sourceBuffer[i].timestampOffset=t,s._onSBUpdateEnd(i)},"setTimeoffset",e)}},{key:"abort",value:function(i,t){var e=this;return this.isOpened?this._enqueueOp(i,function(){e._sourceBuffer[i].abort(),e._onSBUpdateEnd(i)},"abort",t):Promise.resolve()}}],[{key:"isSupported",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"',t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,e=Sh(t);if(!e)return!1;try{return e.isTypeSupported(i)}catch(s){return this._logger.error(i,s),!1}}},{key:"isMMSOnly",value:function(){return typeof ManagedMediaSource<"u"&&typeof MediaSource>"u"}},{key:"getDefaultConfig",value:function(){return{openLog:!1,preferMMS:!1}}}]),n}();W(Gt,"VIDEO","video");W(Gt,"AUDIO","audio");var Ni={FETCH:"fetch",XHR:"xhr"},Es={ARRAY_BUFFER:"arraybuffer",TEXT:"text",JSON:"json"},Hn=function(n){Vs(i,n);var r=js(i);function i(t,e,s,a){var o;return sn(this,i),o=r.call(this,a),W(_e(o),"retryCount",0),W(_e(o),"isTimeout",!1),W(_e(o),"loaderType",Ni.FETCH),W(_e(o),"startTime",0),W(_e(o),"endTime",0),W(_e(o),"options",{}),o.url=t,o.request=e,o.response=s,o}return an(i)}(Ga(Error)),Wg=Object.prototype.toString;function Lw(n){return n!==null&&Yi(n)==="object"}function Eh(n){if(Wg.call(n)!=="[object Object]")return!1;var r=Object.getPrototypeOf(n);return r===null||r===Object.prototype}function Bw(n){return Wg.call(n)==="[object Date]"}function Xg(n){if(!(!n||n[0]===null||n[0]===void 0||n[0]===0&&(n[1]===null||n[1]===void 0))){var r="bytes="+n[0]+"-";return n[1]&&(r+=n[1]),r}}function wh(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function qg(n,r){if(n){if(!r)return n;var i,t=Object.keys(r).map(function(s){if(i=r[s],i!=null)return Array.isArray(i)?s=s+"[]":i=[i],i.map(function(a){return Bw(a)?a=a.toISOString():Lw(a)&&(a=JSON.stringify(a)),"".concat(wh(s),"=").concat(wh(a))}).join("&")}).filter(Boolean).join("&");if(t){var e=n.indexOf("#");e!==-1&&(n=n.slice(0,e)),n+=(n.indexOf("?")===-1?"?":"&")+t}return n}}function hu(n,r,i,t,e,s,a,o,l,u,c){e=e!=null?parseFloat(e):null,t=parseInt(t||"0",10),Number.isNaN(t)&&(t=0);var f={range:l,vid:u,index:o,contentLength:t,age:e,startTime:s,firstByteTime:a,endTime:Date.now(),priOptions:c};return{data:n,done:r,options:f,response:i}}function du(n,r){return Math.round(n*8*1e3/r/1024)}var Ee={ERROR:"error",TTFB:"core.ttfb",LOAD_START:"core.loadstart",LOAD_RESPONSE_HEADERS:"core.loadresponseheaders",LOAD_COMPLETE:"core.loadcomplete",LOAD_RETRY:"core.loadretry",SOURCEBUFFER_CREATED:"core.sourcebuffercreated",MEDIASOURCE_OPENED:"core.mediasourceopened",ANALYZE_DURATION_EXCEEDED:"core.analyzedurationexceeded",APPEND_BUFFER:"core.appendbuffer",REMOVE_BUFFER:"core.removebuffer",BUFFEREOS:"core.buffereos",KEYFRAME:"core.keyframe",CHASEFRAME:"core.chaseframe",METADATA_PARSED:"core.metadataparsed",SEI:"core.sei",SEI_IN_TIME:"core.seiintime",FLV_SCRIPT_DATA:"core.flvscriptdata",LOWDECODE:"core.lowdecode",SWITCH_URL_SUCCESS:"core.switchurlsuccess",SWITCH_URL_FAILED:"core.switchurlfailed",SPEED:"core.speed",HLS_MANIFEST_LOADED:"core.hlsmanifestloaded",HLS_LEVEL_LOADED:"core.hlslevelloaded",DEMUXED_TRACK:"core.demuxedtrack",STREAM_EXCEPTION:"core.streamexception",LARGE_AV_FIRST_FRAME_GAP_DETECT:"LARGE_AV_FIRST_FRAME_GAP_DETECT",LARGE_VIDEO_DTS_GAP_DETECT:"LARGE_VIDEO_DTS_GAP_DETECT",LARGE_AUDIO_DTS_GAP_DETECT:"LARGE_AUDIO_DTS_GAP_DETECT",AUDIO_GAP_DETECT:"AUDIO_GAP_DETECT",AUDIO_OVERLAP_DETECT:"AUDIO_OVERLAP_DETECT",MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT:"MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT",REAL_TIME_SPEED:"real_time_speed"},Ch=2*1024*1024,pu=function(n){Vs(i,n);var r=js(i);function i(){var t;return sn(this,i),t=r.call(this),W(_e(t),"_abortController",null),W(_e(t),"_timeoutTimer",null),W(_e(t),"_reader",null),W(_e(t),"_response",null),W(_e(t),"_aborted",!1),W(_e(t),"_index",-1),W(_e(t),"_range",null),W(_e(t),"_receivedLength",0),W(_e(t),"_running",!1),W(_e(t),"_logger",null),W(_e(t),"_vid",""),W(_e(t),"_firtstByte",0),W(_e(t),"_onProcessMinLen",0),W(_e(t),"_onCancel",null),W(_e(t),"_priOptions",null),t}return an(i,[{key:"load",value:function(e){var s,a=this,o=e.url,l=e.vid,u=e.timeout,c=e.responseType,f=e.onProgress,h=e.index,d=e.onTimeout,p=e.onCancel,v=e.range,g=e.transformResponse,_=e.request,b=e.params,y=e.logger,m=e.method,S=e.headers,I=e.body,R=e.mode,N=e.credentials,G=e.cache,H=e.redirect,ie=e.referrer,E=e.referrerPolicy,T=e.onProcessMinLen,P=e.priOptions,V=e.streamRes,O=e.firstMaxChunkSize;this._logger=y,this._aborted=!1,this._onProcessMinLen=T,this._onCancel=p,this._abortController=typeof AbortController<"u"&&new AbortController,this._running=!0,this._index=h,this._range=v||[0,0],this._vid=l||o,this._priOptions=P||{},this._firstMaxChunkSize=O;var z={method:m,headers:S,body:I,mode:R,credentials:N,cache:G,redirect:H,referrer:ie,referrerPolicy:E,signal:(s=this._abortController)===null||s===void 0?void 0:s.signal},q=!1;clearTimeout(this._timeoutTimer),o=qg(o,b);var pe=Xg(v);pe&&(_?S=_.headers:S=z.headers=z.headers||(Headers?new Headers:{}),Headers&&S instanceof Headers?S.append("Range",pe):S.Range=pe),u&&(this._timeoutTimer=setTimeout(function(){if(q=!0,a.cancel(),d){var U=new Hn(o,z,null,"timeout");U.isTimeout=!0,d(U,{index:a._index,range:a._range,vid:a._vid,priOptions:a._priOptions})}},u));var ye=Date.now();return this._logger.debug("[fetch load start], index,",h,",range,",v),new Promise(function(U,ge){var ue=V?new Promise(function(Ve){Ve(V)}):fetch(_||o,_?void 0:z);ue.then(function(){var Ve=ti(Et().mark(function se(fe){var L,Z,J,oe;return Et().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(clearTimeout(a._timeoutTimer),a._response=fe,!(a._aborted||!a._running)){C.next=4;break}return C.abrupt("return");case 4:if(g&&(fe=g(fe,o)||fe),fe.ok){C.next=7;break}throw new Hn(o,z,fe,"bad network response");case 7:if(L=Date.now(),c!==Es.TEXT){C.next=15;break}return C.next=11,fe.text();case 11:Z=C.sent,a._running=!1,C.next=37;break;case 15:if(c!==Es.JSON){C.next=22;break}return C.next=18,fe.json();case 18:Z=C.sent,a._running=!1,C.next=37;break;case 22:if(!f){C.next=29;break}return a.resolve=U,a.reject=ge,a._loadChunk(fe,f,ye,L),C.abrupt("return");case 29:return C.next=31,fe.arrayBuffer();case 31:Z=C.sent,Z=new Uint8Array(Z),a._running=!1,J=Date.now()-ye,oe=du(Z.byteLength,J),a.emit(Ee.REAL_TIME_SPEED,{speed:oe,len:Z.byteLength,time:J,vid:a._vid,index:a._index,range:a._range,priOptions:a._priOptions});case 37:a._logger.debug("[fetch load end], index,",h,",range,",v),U(hu(Z,!0,fe,fe.headers.get("Content-Length"),fe.headers.get("age"),ye,L,h,v,a._vid,a._priOptions));case 39:case"end":return C.stop()}},se)}));return function(se){return Ve.apply(this,arguments)}}()).catch(function(Ve){var se;clearTimeout(a._timeoutTimer),a._running=!1,!(a._aborted&&!q)&&(Ve=Ve instanceof Hn?Ve:new Hn(o,z,null,(se=Ve)===null||se===void 0?void 0:se.message),Ve.startTime=ye,Ve.endTime=Date.now(),Ve.isTimeout=q,Ve.options={index:a._index,range:a._range,vid:a._vid,priOptions:a._priOptions},ge(Ve))})})}},{key:"cancel",value:function(){var t=ti(Et().mark(function s(){return Et().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this._aborted){o.next=2;break}return o.abrupt("return");case 2:if(this._aborted=!0,this._running=!1,!this._response){o.next=14;break}if(o.prev=5,!this._reader){o.next=9;break}return o.next=9,this._reader.cancel();case 9:o.next=13;break;case 11:o.prev=11,o.t0=o.catch(5);case 13:this._response=this._reader=null;case 14:if(this._abortController){try{this._abortController.abort()}catch{}this._abortController=null}this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions});case 16:case"end":return o.stop()}},s,this,[[5,11]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"_loadChunk",value:function(e,s,a,o){var l=this;if(!e.body||!e.body.getReader){this._running=!1;var u=new Hn(e.url,"",e,"onProgress of bad response.body.getReader");u.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this.reject(u);return}this._onProcessMinLen>0&&(this._cache=new Uint8Array(Ch),this._writeIdx=0);var c=this._reader=e.body.getReader(),f,h,d,p=function(){var v=ti(Et().mark(function g(){var _,b,y,m,S,I,R,N,G,H;return Et().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return h=Date.now(),E.prev=1,E.next=4,c.read();case 4:f=E.sent,d=Date.now(),E.next=13;break;case 8:return E.prev=8,E.t0=E.catch(1),d=Date.now(),l._aborted||(l._running=!1,E.t0.options={index:l._index,range:l._range,vid:l._vid,priOptions:l._priOptions},l.reject(E.t0)),E.abrupt("return");case 13:if(b=((_=l._range)===null||_===void 0?void 0:_.length)>0?l._range[0]:0,y=b+l._receivedLength,!l._aborted){E.next=19;break}return l._running=!1,s(void 0,!1,{range:[y,y],vid:l._vid,index:l._index,startTime:h,endTime:d,st:a,firstByteTime:o,priOptions:l._priOptions},e),E.abrupt("return");case 19:m=f.value?f.value.byteLength:0,l._receivedLength+=m,l._logger.debug("fetchLoader,onProgress call,task,",l._range,", start,",y,", end,",b+l._receivedLength,", done,",f.done),l._onProcessMinLen>0?l._writeIdx+m>=l._onProcessMinLen||f.done?(S=new Uint8Array(l._writeIdx+m),S.set(l._cache.slice(0,l._writeIdx),0),m>0&&S.set(f.value,l._writeIdx),l._writeIdx=0,l._logger.debug("fetchLoader,onProgress enough,done,",f.done,",len,",S.byteLength,", writeIdx,",l._writeIdx)):m>0&&l._writeIdx+m<Ch?(l._cache.set(f.value,l._writeIdx),l._writeIdx+=m,l._logger.debug("fetchLoader,onProgress cache,len,",m,", writeIdx,",l._writeIdx)):m>0&&(I=new Uint8Array(l._writeIdx+m+2048),l._logger.debug("fetchLoader,onProgress extra start,size,",l._writeIdx+m+2048,", datalen,",m,", writeIdx,",l._writeIdx),I.set(l._cache.slice(0,l._writeIdx),0),m>0&&I.set(f.value,l._writeIdx),l._writeIdx+=m,delete l._cache,l._cache=I,l._logger.debug("fetchLoader,onProgress extra end,len,",m,", writeIdx,",l._writeIdx)):S=f.value,(S&&S.byteLength>0||f.done)&&(l._firstMaxChunkSize&&(l._firtstByte?l._cacheData&&(N=new Uint8Array(l._cacheData.byteLength+S.byteLength),N.set(l._cacheData,0),N.set(S,l._cacheData.byteLength),S=N,l._cacheData=null):(l._firtstByte++,R=S.slice(0,l._firstMaxChunkSize),l._cacheData=S.slice(l._firstMaxChunkSize),S=R)),s(S,f.done,{range:[l._range[0]+l._receivedLength-(S?S.byteLength:0),l._range[0]+l._receivedLength],vid:l._vid,index:l._index,startTime:h,endTime:d,st:a,firstByteTime:o,priOptions:l._priOptions},e)),f.done?(G=Date.now()-a,H=du(l._receivedLength,G),l.emit(Ee.REAL_TIME_SPEED,{speed:H,len:l._receivedLength,time:G,vid:l._vid,index:l._index,range:l._range,priOptions:l._priOptions}),l._running=!1,l._logger.debug("[fetchLoader onProgress end],task,",l._range,",done,",f.done),l.resolve(hu(f,!0,e,e.headers.get("Content-Length"),e.headers.get("age"),a,o,l._index,l._range,l._vid,l._priOptions))):l._firstMaxChunkSize?setTimeout(function(){p()},0):p();case 25:case"end":return E.stop()}},g,null,[[1,8]])}));return function(){return v.apply(this,arguments)}}();p()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}}],[{key:"isSupported",value:function(){return typeof fetch<"u"}}]),i}(Fr);function Mw(n){return bs({loaderType:Ni.FETCH,retry:0,retryDelay:0,timeout:0,request:null,onTimeout:void 0,onProgress:void 0,onRetryError:void 0,transformRequest:void 0,transformResponse:void 0,transformError:void 0,responseType:Es.TEXT,range:void 0,url:"",params:void 0,method:"GET",headers:{},body:void 0,mode:void 0,credentials:void 0,cache:void 0,redirect:void 0,referrer:void 0,referrerPolicy:void 0,integrity:void 0,onProcessMinLen:0},n)}var Fw=function(n){Vs(i,n);var r=js(i);function i(){var t;return sn(this,i),t=r.call(this),W(_e(t),"_xhr",null),W(_e(t),"_aborted",!1),W(_e(t),"_timeoutTimer",null),W(_e(t),"_range",null),W(_e(t),"_receivedLength",0),W(_e(t),"_url",null),W(_e(t),"_onProgress",null),W(_e(t),"_index",-1),W(_e(t),"_headers",null),W(_e(t),"_currentChunkSizeKB",384),W(_e(t),"_timeout",null),W(_e(t),"_xhr",null),W(_e(t),"_withCredentials",null),W(_e(t),"_startTime",-1),W(_e(t),"_loadCompleteResolve",null),W(_e(t),"_loadCompleteReject",null),W(_e(t),"_runing",!1),W(_e(t),"_logger",!1),W(_e(t),"_vid",""),W(_e(t),"_responseType",void 0),W(_e(t),"_credentials",void 0),W(_e(t),"_method",void 0),W(_e(t),"_transformResponse",void 0),W(_e(t),"_firstRtt",void 0),W(_e(t),"_onCancel",null),W(_e(t),"_priOptions",null),t}return an(i,[{key:"load",value:function(e){var s=this;clearTimeout(this._timeoutTimer),this._logger=e.logger,this._range=e.range,this._onProgress=e.onProgress,this._index=e.index,this._headers=e.headers,this._withCredentials=e.credentials==="include"||e.credentials==="same-origin",this._body=e.body||null,e.method&&(this._method=e.method),this._timeout=e.timeout||null,this._runing=!0,this._vid=e.vid||e.url,this._responseType=e.responseType,this._firstRtt=-1,this._onTimeout=e.onTimeout,this._onCancel=e.onCancel,this._request=e.request,this._priOptions=e.priOptions||{},this._logger.debug("xhrLoader task, range",this._range),this._url=qg(e.url,e.params);var a=Date.now();return new Promise(function(o,l){s._loadCompleteResolve=o,s._loadCompleteReject=l,s._startLoad()}).catch(function(o){if(clearTimeout(s._timeoutTimer),s._runing=!1,!s._aborted)throw o=o instanceof Hn?o:new Hn(s._url,s._request),o.startTime=a,o.endTime=Date.now(),o.options={index:s._index,vid:s._vid,priOptions:s._priOptions},o})}},{key:"_startLoad",value:function(){var e=null;if(this._responseType===Es.ARRAY_BUFFER&&this._range&&this._range.length>1)if(this._onProgress){this._firstRtt=-1;var s=this._currentChunkSizeKB*1024,a=this._range[0]+this._receivedLength,o=this._range[1];s<this._range[1]-a&&(o=a+s),e=[a,o],this._logger.debug("[xhr_loader->],tast :",this._range,", SubRange, ",e)}else e=this._range,this._logger.debug("[xhr_loader->],tast :",this._range,", allRange, ",e);this._internalOpen(e)}},{key:"_internalOpen",value:function(e){var s=this;try{this._startTime=Date.now();var a=this._xhr=new XMLHttpRequest;a.open(this._method||"GET",this._url,!0),a.responseType=this._responseType,this._timeout&&(a.timeout=this._timeout),a.withCredentials=this._withCredentials,a.onload=this._onLoad.bind(this),a.onreadystatechange=this._onReadyStatechange.bind(this),a.onerror=function(u){var c,f,h;s._running=!1;var d=new Hn(s._url,s._request,u==null||(c=u.currentTarget)===null||c===void 0?void 0:c.response,"xhr.onerror.status:"+(u==null||(f=u.currentTarget)===null||f===void 0?void 0:f.status)+",statusText,"+(u==null||(h=u.currentTarget)===null||h===void 0?void 0:h.statusText));d.options={index:s._index,range:s._range,vid:s._vid,priOptions:s._priOptions},s._loadCompleteReject(d)},a.ontimeout=function(u){s.cancel();var c=new Hn(s._url,s._request,{status:408},"timeout");s._onTimeout&&(c.isTimeout=!0,s._onTimeout(c,{index:s._index,range:s._range,vid:s._vid,priOptions:s._priOptions})),c.options={index:s._index,range:s._range,vid:s._vid,priOptions:s._priOptions},s._loadCompleteReject(c)};var o=this._headers||{},l=Xg(e);l&&(o.Range=l),o&&Object.keys(o).forEach(function(u){a.setRequestHeader(u,o[u])}),this._logger.debug("[xhr.send->] tast,",this._range,",load sub range, ",e),a.send(this._body)}catch(u){u.options={index:this._index,range:e,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(u)}}},{key:"_onReadyStatechange",value:function(e){var s=e.target;s.readyState===2&&this._firstRtt<0&&(this._firstRtt=Date.now())}},{key:"_onLoad",value:function(e){var s,a=e.target.status;if(a<200||a>299){var o=new Hn(this._url,null,bs(bs({},e.target.response),{},{status:a}),"bad response,status:"+a);return o.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(o)}var l=null,u=!1,c,f=((s=this._range)===null||s===void 0?void 0:s.length)>0?this._range[0]:0;if(this._responseType===Es.ARRAY_BUFFER){var h,d=new Uint8Array(e.target.response);if(c=f+this._receivedLength,d&&d.byteLength>0){this._receivedLength+=d.byteLength;var p=Date.now()-this._startTime,v=du(this._receivedLength,p);this.emit(Ee.REAL_TIME_SPEED,{speed:v,len:this._receivedLength,time:p,vid:this._vid,index:this._index,range:[c,f+this._receivedLength],priOptions:this._priOptions})}l=d,((h=this._range)===null||h===void 0?void 0:h.length)>1&&this._range[1]&&this._receivedLength<this._range[1]-this._range[0]?u=!1:u=!0,this._logger.debug("[xhr load done->], tast :",this._range,", start",c,"end ",f+this._receivedLength,",dataLen,",d?d.byteLength:0,",receivedLength",this._receivedLength,",index,",this._index,", done,",u)}else u=!0,l=e.target.response;var g={ok:a>=200&&a<300,status:a,statusText:this._xhr.statusText,url:this._xhr.responseURL,headers:this._getHeaders(this._xhr),body:this._xhr.response};this._transformResponse&&(g=this._transformResponse(g,this._url)||g),this._onProgress&&this._onProgress(l,u,{index:this._index,vid:this._vid,range:[c,f+this._receivedLength],startTime:this._startTime,endTime:Date.now(),priOptions:this._priOptions},g),u?(this._runing=!1,this._loadCompleteResolve&&this._loadCompleteResolve(hu(this._onProgress?null:l,u,g,g.headers["content-length"],g.headers.age,this._startTime,this._firstRtt,this._index,this._range,this._vid,this._priOptions))):this._startLoad()}},{key:"cancel",value:function(){if(!this._aborted&&(this._aborted=!0,this._runing=!1,_a(Qi(i.prototype),"removeAllListeners",this).call(this),this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions}),this._xhr))return this._xhr.abort()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}},{key:"_getHeaders",value:function(e){var s=e.getAllResponseHeaders().trim().split(`\r
`),a={},o=Tw(s),l;try{for(o.s();!(l=o.n()).done;){var u=l.value,c=u.split(": ");a[c[0].toLowerCase()]=c.slice(1).join(": ")}}catch(f){o.e(f)}finally{o.f()}return a}}],[{key:"isSupported",value:function(){return typeof XMLHttpRequest<"u"}}]),i}(Fr),Nw=["retry","retryDelay","onRetryError","transformError"],Uw=function(){function n(r,i){sn(this,n),this.promise=gr(),this.alive=!!i.onProgress,!i.logger&&(i.logger=new Kn("Loader")),this._loaderType=r,this._loader=r===Ni.FETCH&&typeof fetch<"u"?new pu:new Fw,this._config=i,this._retryCount=0,this._retryTimer=null,this._canceled=!1,this._retryCheckFunc=i.retryCheckFunc,this._logger=i.logger}return an(n,[{key:"exec",value:function(){var i=this,t=this._config,e=t.retry,s=t.retryDelay,a=t.onRetryError,o=t.transformError,l=Sw(t,Nw),u=function(){var c=ti(Et().mark(function f(){var h,d,p;return Et().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,g.next=3,i._loader.load(l);case 3:h=g.sent,i.promise.resolve(h),g.next=27;break;case 7:if(g.prev=7,g.t0=g.catch(0),i._loader.running=!1,i._logger.debug("[task request catch err]",g.t0),!i._canceled){g.next=13;break}return g.abrupt("return");case 13:if(g.t0.loaderType=i._loaderType,g.t0.retryCount=i._retryCount,d=g.t0,o&&(d=o(d)||d),a&&i._retryCount>0&&a(d,i._retryCount,{index:l.index,vid:l.vid,range:l.range,priOptions:l.priOptions}),i._retryCount++,p=!0,i._retryCheckFunc&&(p=i._retryCheckFunc(g.t0)),!(p&&i._retryCount<=e)){g.next=26;break}return clearTimeout(i._retryTimer),i._logger.debug("[task request setTimeout],retry",i._retryCount,",retry range,",l.range),i._retryTimer=setTimeout(u,s),g.abrupt("return");case 26:i.promise.reject(d);case 27:case"end":return g.stop()}},f,null,[[0,7]])}));return function(){return c.apply(this,arguments)}}();return u(),this.promise}},{key:"cancel",value:function(){var r=ti(Et().mark(function t(){return Et().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return clearTimeout(this._retryTimer),this._canceled=!0,this._loader.running=!1,s.abrupt("return",this._loader.cancel());case 4:case"end":return s.stop()}},t,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"running",get:function(){return this._loader&&this._loader.running}},{key:"loader",get:function(){return this._loader}}]),n}();function Hw(n){return n&&!n.paused&&!n.ended&&n.playbackRate!==0&&n.readyState!==0}function Vw(n){if(!n)return{};if(typeof n.getVideoPlaybackQuality=="function"){var r=n.getVideoPlaybackQuality();return{droppedVideoFrames:r.droppedVideoFrames||r.corruptedVideoFrames,totalVideoFrames:r.totalVideoFrames,creationTime:r.creationTime}}return{droppedVideoFrames:n.webkitDroppedFrameCount,totalVideoFrames:n.webkitDecodedFrameCount,creationTime:performance.now()}}function ba(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(r=r.filter(Boolean),r.length<2)return r[0];var t=new Uint8Array(r.reduce(function(s,a){return s+a.byteLength},0)),e=0;return r.forEach(function(s){t.set(s,e),e+=s.byteLength}),t}function jw(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise(function(r){return setTimeout(r,n)})}var Cr=function(n){Vs(i,n);var r=js(i);function i(t){var e;return sn(this,i),e=r.call(this,t),W(_e(e),"type",Ni.FETCH),W(_e(e),"_queue",[]),W(_e(e),"_alive",[]),W(_e(e),"_currentTask",null),W(_e(e),"_finnalUrl",""),W(_e(e),"_config",void 0),e._config=Mw(t),(e._config.loaderType===Ni.XHR||!pu.isSupported())&&(e.type=Ni.XHR),e.log=t.logger,e}return an(i,[{key:"isFetch",value:function(){return this.type===Ni.FETCH}},{key:"load",value:function(e){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof e=="string"||!e?a.url=e||a.url||this._config.url:a=e,a=Object.assign({},this._config,a),a.params&&(a.params=Object.assign({},a.params)),a.headers&&Eh(a.headers)&&(a.headers=Object.assign({},a.headers)),a.body&&Eh(a.body)&&(a.body=Object.assign({},a.body)),a.transformRequest&&(a=a.transformRequest(a)||a),a.logger=this.log;var o=new Uw(this.type,a);return o.loader.on(Ee.REAL_TIME_SPEED,function(l){s.emit(Ee.REAL_TIME_SPEED,l)}),this._queue.push(o),this._queue.length===1&&(!this._currentTask||!this._currentTask.running)&&this._processTask(),o.promise}},{key:"cancel",value:function(){var t=ti(Et().mark(function s(){var a;return Et().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return a=this._queue.map(function(u){return u.cancel()}).concat(this._alive.map(function(u){return u.cancel()})),this._currentTask&&a.push(this._currentTask.cancel()),this._queue=[],this._alive=[],l.next=6,Promise.all(a);case 6:return l.next=8,jw();case 8:case"end":return l.stop()}},s,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_processTask",value:function(){var e=this;if(this._currentTask=this._queue.shift(),!!this._currentTask){this._currentTask.alive&&this._alive.push(this._currentTask);var s=this._currentTask.exec().catch(function(a){});s&&typeof s.finally=="function"&&s.finally(function(){var a,o;(a=e._currentTask)!==null&&a!==void 0&&a.alive&&((o=e._alive)===null||o===void 0?void 0:o.length)>0&&(e._alive=e._alive.filter(function(l){return l&&l!==e._currentTask})),e._processTask()})}}}],[{key:"isFetchSupport",value:function(){return pu.isSupported()}}]),i}(Fr),Gw=function(){function n(){sn(this,n),W(this,"_prevCurrentTime",0)}return an(n,[{key:"do",value:function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,e=arguments.length>2?arguments[2]:void 0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(i){var a=i.currentTime,o=0;if(this._prevCurrentTime===a){var l=en.info(en.get(i),a);if(!l.buffers.length)return;e&&l.nextStart||l.nextStart&&l.nextStart-a<t?o=l.nextStart+.1:l.end&&l.end-a>s&&!i.seeking&&(o=a+.1)}this._prevCurrentTime=a,o&&a!==o&&(i.currentTime=o)}}}]),n}(),zw=function(){function n(r){var i=this;sn(this,n),W(this,"_seiSet",new Set),this.emitter=r,r.on(Ee.SEI,function(t){t&&i._seiSet.add(t)})}return an(n,[{key:"throw",value:function(i,t){var e=this;if(!(i==null||!this._seiSet.size)){var s=i-.2,a=i+.2,o=[];this._seiSet.forEach(function(l){l.time>=s&&l.time<=a&&o.push(l)}),o.forEach(function(l){e._seiSet.delete(l),e.emitter.emit(Ee.SEI_IN_TIME,l)}),t&&this._seiSet.forEach(function(l){l.time<i-5&&e._seiSet.delete(l)})}}},{key:"reset",value:function(){this._seiSet.clear()}}]),n}(),Kw=1e3,Yw=50,Qw=3e3,Ww=function(){function n(r){sn(this,n),W(this,"_chunkSpeed",0),W(this,"_chunkCache",[]),W(this,"_speeds",[]),W(this,"_totalSize",0),W(this,"_totalCost",0),this._opts=r||{}}return an(n,[{key:"addRecord",value:function(i,t){!i||!t||(this._speeds.push(8e3*i/t),this._speeds=this._speeds.slice(-3))}},{key:"addChunkRecord",value:function(i,t){var e,s;if(!(!i||!t||i<(((e=this._opts)===null||e===void 0?void 0:e.skipChunkSize)||Kw))){this._totalSize+=i,this._totalCost+=t,this._chunkSpeed=8e3*i/t,this._chunkCache.push({size:i,duration:t,timestamp:performance.now()});var a=((s=this._opts)===null||s===void 0?void 0:s.chunkCountForSpeed)||Yw;this._chunkCache.length>a&&(this._chunkCache=this._chunkCache.slice(-a))}}},{key:"getAvgSpeed",value:function(){var i;if(!this._chunkCache.length&&!this._speeds.length)return 0;if(this._speeds.length)return this._speeds.reduce(function(o,l){return o+=l})/this._speeds.length;var t=this._chunkCache[this._chunkCache.length-1],e=performance.now()-t.timestamp;e>(((i=this._opts)===null||i===void 0?void 0:i.longtimeNoReceived)||Qw)&&this._chunkCache.push({size:0,duration:e,timestamp:performance.now()});var s=this._chunkCache.reduce(function(o,l){return o+=l.size},0),a=this._chunkCache.reduce(function(o,l){return o+=l.duration},0);return 8e3*s/a}},{key:"getLatestSpeed",value:function(){return!this._chunkCache.length&&!this._speeds.length?0:this._speeds.length?this._speeds[this._speeds.length-1]:this._chunkSpeed}},{key:"getTotalSize",value:function(){return this._totalSize}},{key:"getTotalCost",value:function(){return this._totalCost}},{key:"reset",value:function(){this._chunkCache=[],this._speeds=[],this._totalSize=0,this._totalCost=0}}]),n}(),Th=function(){function n(r){sn(this,n),W(this,"encodeType",""),W(this,"audioCodec",""),W(this,"videoCodec",""),W(this,"domain",""),W(this,"fps",0),W(this,"bitrate",0),W(this,"width",0),W(this,"height",0),W(this,"samplerate",0),W(this,"channelCount",0),W(this,"gop",0),W(this,"_bitsAccumulateSize",0),W(this,"_bitsAccumulateDuration",0),W(this,"_startGopId",-1),this._timescale=r}return an(n,[{key:"getStats",value:function(){return{encodeType:this.encodeType,audioCodec:this.audioCodec,videoCodec:this.videoCodec,domain:this.domain,fps:this.fps,bitrate:this.bitrate,width:this.width,height:this.height,samplerate:this.samplerate,channelCount:this.channelCount,gop:this.gop}}},{key:"setEncodeType",value:function(i){this.encodeType=i}},{key:"setFpsFromScriptData",value:function(i){var t,e=i.data,s=e==null||(t=e.onMetaData)===null||t===void 0?void 0:t.framerate;s&&s>0&&s<100&&(this.fps=s)}},{key:"setVideoMeta",value:function(i){if(this.width=i.width,this.height=i.height,this.videoCodec=i.codec,this.encodeType=i.codecType,i.fpsNum&&i.fpsDen){var t=i.fpsNum/i.fpsDen;t>0&&t<100&&(this.fps=t)}}},{key:"setAudioMeta",value:function(i){this.audioCodec=i.codec,this.samplerate=i.sampleRate,this.channelCount=i.channelCount}},{key:"setDomain",value:function(i){this.domain=i.split("/").slice(2,3)[0]}},{key:"updateBitrate",value:function(i){var t=this;if((!this.fps||this.fps>=100)&&i.length){var e=i.reduce(function(s,a){return s+=a.duration},0)/i.length;this.fps=Math.round(this._timescale/e)}i.forEach(function(s){t._startGopId===-1&&(t._startGopId=s.gopId),s.gopId===t._startGopId&&t.gop++,t._bitsAccumulateDuration+=s.duration/(t._timescale/1e3),t._bitsAccumulateSize+=s.units.reduce(function(a,o){return a+=o.length},0),t._bitsAccumulateDuration>=1e3&&(t.bitrate=t._bitsAccumulateSize*8,t._bitsAccumulateDuration=0,t._bitsAccumulateSize=0)})}}]),n}(),Xw=function(){function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;sn(this,n),W(this,"_core",null),W(this,"_samples",[]),this._core=r,this._timescale=i,this._stats=new Th(i),this._bindEvents()}return an(n,[{key:"getStats",value:function(){var i,t,e,s,a,o,l,u,c,f,h,d=((i=this._core)===null||i===void 0?void 0:i.media)||{},p=d.currentTime,v=p===void 0?0:p,g=d.decodeFps,_=g===void 0?0:g;return bs(bs({},this._stats.getStats()),{},{downloadSpeed:((t=this._core)===null||t===void 0||(e=t.speedInfo)===null||e===void 0?void 0:e.call(t).speed)||0,avgSpeed:((s=this._core)===null||s===void 0||(a=s.speedInfo)===null||a===void 0?void 0:a.call(s).avgSpeed)||0,totalReceivedByte:((o=this._core)===null||o===void 0||(l=o.speedInfo)===null||l===void 0?void 0:l.call(o).totalSize)||0,totalReceivedCost:((u=this._core)===null||u===void 0||(c=u.speedInfo)===null||c===void 0?void 0:c.call(u).totalCost)||0,currentTime:v,bufferEnd:((f=this._core)===null||f===void 0||(h=f.bufferInfo())===null||h===void 0?void 0:h.remaining)||0,decodeFps:_})}},{key:"_bindEvents",value:function(){var i=this;this._core.on(Ee.DEMUXED_TRACK,function(t){var e=t.videoTrack;return i._stats.updateBitrate(e.samples)}),this._core.on(Ee.FLV_SCRIPT_DATA,function(t){i._stats.setFpsFromScriptData(t)}),this._core.on(Ee.METADATA_PARSED,function(t){t.type==="video"?i._stats.setVideoMeta(t.track):i._stats.setAudioMeta(t.track)}),this._core.on(Ee.TTFB,function(t){i._stats.setDomain(t.responseUrl)})}},{key:"reset",value:function(){this._samples=[],this._stats=new Th(this._timescale)}}]),n}();function qw(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var t,e,s,a,o=[],l=!0,u=!1;try{if(s=(i=i.call(n)).next,r!==0)for(;!(l=(t=s.call(i)).done)&&(o.push(t.value),o.length!==r);l=!0);}catch(c){u=!0,e=c}finally{try{if(!l&&i.return!=null&&(a=i.return(),Object(a)!==a))return}finally{if(u)throw e}}return o}}function ht(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function kh(n,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,Jg(t.key),t)}}function dt(n,r,i){return r&&kh(n.prototype,r),i&&kh(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function X(n,r,i){return r=Jg(r),r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function Jw(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&gu(n,r)}function za(n){return za=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},za(n)}function gu(n,r){return gu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gu(n,r)}function Zw(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $w(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function eC(n,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $w(n)}function tC(n){var r=Zw();return function(){var t=za(n),e;if(r){var s=za(this).constructor;e=Reflect.construct(t,arguments,s)}else e=t.apply(this,arguments);return eC(this,e)}}function nC(n,r){return rC(n)||qw(n,r)||lc(n,r)||oC()}function $t(n){return iC(n)||sC(n)||lc(n)||aC()}function iC(n){if(Array.isArray(n))return vu(n)}function rC(n){if(Array.isArray(n))return n}function sC(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function lc(n,r){if(n){if(typeof n=="string")return vu(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return vu(n,r)}}function vu(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,t=new Array(r);i<r;i++)t[i]=n[i];return t}function aC(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lC(n,r){var i=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!i){if(Array.isArray(n)||(i=lc(n))||r){i&&(n=i);var t=0,e=function(){};return{s:e,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(l){throw l},f:e}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,o;return{s:function(){i=i.call(n)},n:function(){var l=i.next();return s=l.done,l},e:function(l){a=!0,o=l},f:function(){try{!s&&i.return!=null&&i.return()}finally{if(a)throw o}}}}function uC(n,r){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var t=i.call(n,r);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function Jg(n){var r=uC(n,"string");return typeof r=="symbol"?r:String(r)}var Si={VIDEO:"video",AUDIO:"audio",METADATA:"metadata"},Ei={AV1:"av1",AVC:"avc",HEVC:"hevc"},cn={AAC:"aac",G711PCMA:"g7110a",G711PCMU:"g7110m",OPUS:"opus",MP3:"mp3"},yn={LARGE_AV_SHIFT:"LARGE_AV_SHIFT",LARGE_VIDEO_GAP:"LARGE_VIDEO_GAP",LARGE_VIDEO_GAP_BETWEEN_CHUNK:"LARGE_VIDEO_GAP_BETWEEN_CHUNK",LARGE_AUDIO_GAP:"LARGE_AUDIO_GAP",AUDIO_FILLED:"AUDIO_FILLED",AUDIO_DROPPED:"AUDIO_DROPPED"},Zg=function(){function n(){ht(this,n),X(this,"id",1),X(this,"type",Si.VIDEO),X(this,"codecType",Ei.AVC),X(this,"pid",-1),X(this,"hvcC",void 0),X(this,"codec",""),X(this,"timescale",0),X(this,"formatTimescale",0),X(this,"sequenceNumber",0),X(this,"baseMediaDecodeTime",0),X(this,"baseDts",0),X(this,"duration",0),X(this,"warnings",[]),X(this,"samples",[]),X(this,"pps",[]),X(this,"sps",[]),X(this,"vps",[]),X(this,"fpsNum",0),X(this,"fpsDen",0),X(this,"sarRatio",[]),X(this,"width",0),X(this,"height",0),X(this,"nalUnitSize",4),X(this,"present",!1),X(this,"isVideoEncryption",!1),X(this,"isAudioEncryption",!1),X(this,"isVideo",!0),X(this,"lastKeyFrameDts",0),X(this,"kid",null),X(this,"pssh",null),X(this,"ext",void 0)}return dt(n,[{key:"reset",value:function(){this.sequenceNumber=this.width=this.height=this.fpsDen=this.fpsNum=this.duration=this.baseMediaDecodeTime=this.timescale=0,this.codec="",this.present=!1,this.pid=-1,this.pps=[],this.sps=[],this.vps=[],this.sarRatio=[],this.samples=[],this.warnings=[],this.hvcC=null}},{key:"firstDts",get:function(){return this.samples.length?this.samples[0].dts:null}},{key:"firstPts",get:function(){return this.samples.length?this.samples[0].pts:null}},{key:"samplesDuration",get:function(){if(this.samples.length>0){var i=this.samples[0],t=this.samples[this.samples.length-1];return t.dts-i.dts+t.duration}return 0}},{key:"exist",value:function(){return/av01/.test(this.codec)?!0:!!(this.pps.length&&this.sps.length&&this.codec)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isVideoEncryption}}]),n}(),$g=function(){function n(){ht(this,n),X(this,"id",2),X(this,"type",Si.AUDIO),X(this,"codecType",cn.AAC),X(this,"pid",-1),X(this,"codec",""),X(this,"container",""),X(this,"sequenceNumber",0),X(this,"sampleDuration",0),X(this,"timescale",0),X(this,"formatTimescale",0),X(this,"baseMediaDecodeTime",0),X(this,"duration",0),X(this,"warnings",[]),X(this,"samples",[]),X(this,"baseDts",0),X(this,"sampleSize",16),X(this,"sampleRate",0),X(this,"channelCount",0),X(this,"objectType",0),X(this,"sampleRateIndex",0),X(this,"config",[]),X(this,"present",!1),X(this,"isVideoEncryption",!1),X(this,"isAudioEncryption",!1),X(this,"kid",null),X(this,"ext",void 0)}return dt(n,[{key:"reset",value:function(){this.sequenceNumber=0,this.timescale=0,this.sampleDuration=0,this.sampleRate=0,this.channelCount=0,this.baseMediaDecodeTime=0,this.present=!1,this.pid=-1,this.codec="",this.samples=[],this.config=[],this.warnings=[]}},{key:"exist",value:function(){return!!(this.sampleRate&&this.channelCount&&(this.codec||this.container)&&(this.codecType===cn.AAC||this.codecType===cn.G711PCMA||this.codecType===cn.G711PCMU||this.codecType===cn.OPUS||this.codecType===cn.MP3))}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isAudioEncryption}},{key:"firstDts",get:function(){return this.samples.length?this.samples[0].dts:null}},{key:"firstPts",get:function(){return this.samples.length?this.samples[0].pts:null}},{key:"samplesDuration",get:function(){if(this.samples.length>0){var i=this.samples[0],t=this.samples[this.samples.length-1];return t.dts-i.dts+t.duration}return 0}}]),n}(),mu=function(){function n(r,i,t){ht(this,n),X(this,"flag",{}),X(this,"keyframe",!1),X(this,"gopId",0),X(this,"duration",0),X(this,"size",0),X(this,"units",[]),X(this,"chromaFormat",420),this.originPts=this.pts=r,this.originDts=this.dts=i,t&&(this.units=t)}return dt(n,[{key:"cts",get:function(){return this.pts-this.dts}},{key:"setToKeyframe",value:function(){this.keyframe=!0,this.flag.dependsOn=2,this.flag.isNonSyncSample=0}}]),n}(),us=dt(function n(r,i,t,e){ht(this,n),X(this,"duration",1024),X(this,"flag",{dependsOn:2,isNonSyncSample:0}),X(this,"keyframe",!0),this.originPts=this.pts=this.dts=r,this.data=i,this.size=i.byteLength,this.sampleOffset=e,t&&(this.duration=t)}),cC=dt(function n(r,i){ht(this,n),X(this,"time",0),this.data=r,this.originPts=this.pts=i}),fC=function(n){Jw(i,n);var r=tC(i);function i(){return ht(this,i),r.apply(this,arguments)}return dt(i)}(cC),ev=function(){function n(){ht(this,n),X(this,"id",3),X(this,"type",Si.METADATA),X(this,"timescale",0),X(this,"flvScriptSamples",[]),X(this,"seiSamples",[])}return dt(n,[{key:"exist",value:function(){return!!((this.flvScriptSamples.length||this.seiSamples.length)&&this.timescale)}},{key:"reset",value:function(){this.timescale=0,this.flvScriptSamples=[],this.seiSamples=[]}},{key:"hasSample",value:function(){return!!(this.flvScriptSamples.length||this.seiSamples.length)}}]),n}(),Ka=function(){function n(r){ht(this,n),this.name=r||"",this._prefix="[".concat(this.name,"]")}return dt(n,[{key:"warn",value:function(){var i;if(!n.disabled){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];(i=console).warn.apply(i,[this._prefix].concat(e))}}}],[{key:"enable",value:function(){n.disabled=!1}},{key:"disable",value:function(){n.disabled=!0}}]),n}();X(Ka,"disabled",!0);var Do=typeof window<"u",uc=Do&&navigator.userAgent.toLocaleLowerCase(),hC=Do&&/^((?!chrome|android).)*safari/.test(uc),tv=Do&&uc.includes("firefox"),dC=Do&&uc.includes("android"),$n=function(){function n(){ht(this,n)}return dt(n,null,[{key:"getRateIndexByRate",value:function(i){return n.FREQ.indexOf(i)}},{key:"parseADTS",value:function(i,t){for(var e=i.length,s=0;s+2<e&&!(i[s]===255&&(i[s+1]&246)===240);)s++;if(!(s>=e)){var a=s,o=[],l=(i[s+2]&60)>>>2,u=n.FREQ[l];if(!u)throw new Error("Invalid sampling index: ".concat(l));for(var c=((i[s+2]&192)>>>6)+1,f=(i[s+2]&1)<<2|(i[s+3]&192)>>>6,h=n._getConfig(l,f,c),d=h.config,p=h.codec,v,g,_=0,b=n.getFrameDuration(u);s+7<e;){if(i[s]!==255||(i[s+1]&246)!==240){s++;continue}if(g=(i[s+3]&3)<<11|i[s+4]<<3|(i[s+5]&224)>>5,!g||e-s<g)break;v=(~i[s+1]&1)*2,o.push({pts:t+_*b,data:i.subarray(s+7+v,s+g)}),_++,s+=g}return{skip:a,remaining:s>=e?void 0:i.subarray(s),frames:o,samplingFrequencyIndex:l,sampleRate:u,objectType:c,channelCount:f,codec:p,config:d,originCodec:"mp4a.40.".concat(c)}}}},{key:"parseAudioSpecificConfig",value:function(i){if(i.length){var t=i[0]>>>3,e=(i[0]&7)<<1|i[1]>>>7,s=(i[1]&120)>>>3,a=n.FREQ[e];if(a){var o=n._getConfig(e,s,t),l=o.config,u=o.codec;return{samplingFrequencyIndex:e,sampleRate:a,objectType:t,channelCount:s,config:l,codec:u,originCodec:"mp4a.40.".concat(t)}}}}},{key:"getFrameDuration",value:function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4;return 1024*t/i}},{key:"_getConfig",value:function(i,t,e){var s=[],a,o;return tv?i>=6?(a=5,o=i-3):(a=2,o=i):dC?(a=2,o=i):(a=5,o=i,i>=6?o=i-3:t===1&&(a=2,o=i)),s[0]=a<<3,s[0]|=(i&14)>>1,s[1]=(i&1)<<7,s[1]|=t<<3,a===5&&(s[1]|=(o&14)>>1,s[2]=(o&1)<<7,s[2]|=8,s[3]=0),{config:s,codec:"mp4a.40.".concat(a)}}},{key:"getSilentFrame",value:function(i,t){switch(i){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}]),n}();X($n,"FREQ",[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]);function ln(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r=r.filter(Boolean);var t=new Uint8Array(r.reduce(function(s,a){return s+a.byteLength},0)),e=0;return r.forEach(function(s){t.set(s,e),e+=s.byteLength}),t}var pC=Math.pow(2,32);function at(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n[r]<<8)+(n[r+1]||0)}function gC(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n[r]<<16)+(n[r+1]<<8)+(n[r+2]||0)}function he(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n[r]<<24>>>0)+(n[r+1]<<16)+(n[r+2]<<8)+(n[r+3]||0)}function Li(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return he(n,r)*pC+he(n,r+4)}function nv(n){for(var r="avc1.",i,t=0;t<3;t++)i=n[t].toString(16),i.length<2&&(i="0".concat(i)),r+=i;return r}function Ih(n){if(!Array.isArray(n)){for(var r=[],i="",t=0;t<n.length;t++)t%2&&(i=n[t-1]+n[t],r.push(parseInt(i,16)),i="");return r}return n.map(function(e){return parseInt(e,16)})}function bl(n,r){return+(n+"."+r)}function vC(n){if(n.length<5)return 0;var r=Math.hypot(n[0],n[3]),i=Math.hypot(n[1],n[4]);return r===0||i===0?0:180*Math.atan2(n[1]/i,n[0]/r)/Math.PI}var Ai=function(){function n(){ht(this,n)}return dt(n,null,[{key:"parseAnnexB",value:function(i){var t=i.byteLength-1,e=0;do{if(i[t]===0)e++;else break;t--}while(t>0);e>=3&&(i=i.subarray(0,t+1));for(var s=i.length,a=2,o=0;i[a]!==null&&i[a]!==void 0&&i[a]!==1;)a++;if(a++,o=a+2,o>=s)return[];for(var l=[];o<s;)switch(i[o]){case 0:if(i[o-1]!==0){o+=2;break}else if(i[o-2]!==0){o++;break}else if(o<s-1&&i[o+1]!==1){o++;break}a!==o-2&&l.push(i.subarray(a,o-2));do o++;while(i[o]!==1&&o<s);a=o+1,o=a+2;break;case 1:if(i[o-1]!==0||i[o-2]!==0){o+=3;break}a!==o-2&&l.push(i.subarray(a,o-2)),a=o+1,o=a+2;break;default:o+=3;break}return a<s&&l.push(i.subarray(a)),l}},{key:"parseAvcC",value:function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;if(!(i.length<4)){for(var e=i.length,s=[],a=0,o;a+t<e;)if(o=he(i,a),t===3&&(o>>>=8),a+=t,!!o){if(a+o>e)break;s.push(i.subarray(a,a+o)),a+=o}return s}}},{key:"parseSEI",value:function(i,t){for(var e=i.length,s=t?2:1,a=0,o=0,l="";i[s]===255;)a+=255,s++;for(a+=i[s++];i[s]===255;)o+=255,s++;if(o+=i[s++],a===5&&e>s+16)for(var u=0;u<16;u++)l+=i[s].toString(16),s++;return{payload:i.subarray(s,s+o),type:a,size:o,uuid:l}}},{key:"removeEPB",value:function(i){for(var t=i.byteLength,e=[],s=1;s<t-2;)i[s]===0&&i[s+1]===0&&i[s+2]===3?(e.push(s+2),s+=2):s++;if(!e.length)return i;var a=t-e.length,o=new Uint8Array(a),l=0;for(s=0;s<a;l++,s++)l===e[0]&&(l++,e.shift()),o[s]=i[l];return o}}]),n}(),yu=function(){function n(r){if(ht(this,n),X(this,"_bytesAvailable",void 0),X(this,"_bitsAvailable",0),X(this,"_word",0),!r)throw new Error("ExpGolomb data params is required");this._data=r,this._bytesAvailable=r.byteLength,this._bytesAvailable&&this._loadWord()}return dt(n,[{key:"bitsAvailable",get:function(){return this._bitsAvailable}},{key:"_loadWord",value:function(){var i=this._data.byteLength-this._bytesAvailable,t=Math.min(4,this._bytesAvailable);if(t===0)throw new Error("No bytes available");var e=new Uint8Array(4);e.set(this._data.subarray(i,i+t)),this._word=new DataView(e.buffer).getUint32(0),this._bitsAvailable=t*8,this._bytesAvailable-=t}},{key:"skipBits",value:function(i){if(this._bitsAvailable>i)this._word<<=i,this._bitsAvailable-=i;else{i-=this._bitsAvailable;var t=Math.floor(i/8);i-=t*8,this._bytesAvailable-=t,this._loadWord(),this._word<<=i,this._bitsAvailable-=i}}},{key:"readBits",value:function(i){if(i>32)throw new Error("Cannot read more than 32 bits");var t=Math.min(this._bitsAvailable,i),e=this._word>>>32-t;return this._bitsAvailable-=t,this._bitsAvailable>0?this._word<<=t:this._bytesAvailable>0&&this._loadWord(),t=i-t,t>0&&this._bitsAvailable?e<<t|this.readBits(t):e}},{key:"skipLZ",value:function(){var i;for(i=0;i<this._bitsAvailable;++i)if((this._word&2147483648>>>i)!==0)return this._word<<=i,this._bitsAvailable-=i,i;return this._loadWord(),i+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var i=this.skipLZ();return this.readBits(i+1)-1}},{key:"readEG",value:function(){var i=this.readUEG();return 1&i?1+i>>>1:-1*(i>>>1)}},{key:"readBool",value:function(){return this.readBits(1)===1}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"skipScalingList",value:function(i){for(var t=8,e=8,s,a=0;a<i;a++)e!==0&&(s=this.readEG(),e=(t+s+256)%256),t=e===0?t:e}}]),n}(),mC=function(){function n(){ht(this,n)}return dt(n,null,[{key:"parseAVCDecoderConfigurationRecord",value:function(i){if(!(i.length<7)){for(var t=(i[4]&3)+1,e,s=[],a=[],o=6,l=i[5]&31,u,c=0;c<l;c++)if(u=i[o]<<8|i[o+1],o+=2,!!u){var f=i.subarray(o,o+u);o+=u,s.push(f),e||(e=n.parseSPS(Ai.removeEPB(f)))}var h=i[o];o++;for(var d,p=0;p<h;p++)d=i[o]<<8|i[o+1],o+=2,d&&(a.push(i.subarray(o,o+d)),o+=d);return{sps:e,spsArr:s,ppsArr:a,nalUnitSize:t}}}},{key:"parseSPS",value:function(i){var t=new yu(i);t.readUByte();var e=t.readUByte(),s=t.readUByte(),a=t.readUByte();t.skipUEG();var o=420;if(e===100||e===110||e===122||e===244||e===44||e===83||e===86||e===118||e===128||e===138||e===144){var l=t.readUEG();if(l<=3&&(o=[0,420,422,444][l]),l===3&&t.skipBits(1),t.skipUEG(),t.skipUEG(),t.skipBits(1),t.readBool())for(var u=l!==3?8:12,c=0;c<u;c++)t.readBool()&&(c<6?t.skipScalingList(16):t.skipScalingList(64))}t.skipUEG();var f=t.readUEG();if(f===0)t.readUEG();else if(f===1){t.skipBits(1),t.skipUEG(),t.skipUEG();for(var h=t.readUEG(),d=0;d<h;d++)t.skipUEG()}t.skipUEG(),t.skipBits(1);var p=t.readUEG(),v=t.readUEG(),g=t.readBits(1);g===0&&t.skipBits(1),t.skipBits(1);var _=0,b=0,y=0,m=0;t.readBool()&&(_=t.readUEG(),b=t.readUEG(),y=t.readUEG(),m=t.readUEG());var S,I,R,N,G;if(t.readBool()){if(t.readBool()){var H=t.readUByte();switch(H){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:{S=[t.readUByte()<<8|t.readUByte(),t.readUByte()<<8|t.readUByte()];break}}}if(t.readBool()&&t.readBool(),t.readBool()&&(t.readBits(4),t.readBool()&&t.readBits(24)),t.readBool()&&(t.readUEG(),t.readUEG()),t.readBool()){var ie=t.readBits(32),E=t.readBits(32);I=t.readBool(),R=E,N=ie*2,G=R/N}}return{codec:nv(i.subarray(1,4)),profileIdc:e,profileCompatibility:s,levelIdc:a,chromaFormat:o,width:Math.ceil((p+1)*16-2*(_+b)),height:(2-g)*(v+1)*16-(g?2:4)*(y+m),sarRatio:S,fpsNum:R,fpsDen:N,fps:G,fixedFrame:I}}}]),n}(),Rh=function(){function n(){ht(this,n)}return dt(n,null,[{key:"parseHEVCDecoderConfigurationRecord",value:function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(i.length<23)){t=t||{};for(var e=(i[21]&3)+1,s,a,o=[],l=[],u=[],c=23,f=i[22],h,d,p,v=0;v<f;v++){h=i[c]&63,d=i[c+1]<<8|i[c+2],c+=3;for(var g=0;g<d;g++)if(p=i[c]<<8|i[c+1],c+=2,!!p){switch(h){case 32:{var _=i.subarray(c,c+p);s||(s=n.parseVPS(Ai.removeEPB(_),t)),u.push(_)}break;case 33:{var b=i.subarray(c,c+p);a||(a=n.parseSPS(Ai.removeEPB(b),t)),o.push(b)}break;case 34:l.push(i.subarray(c,c+p));break}c+=p}}return{hvcC:t,sps:a,spsArr:o,ppsArr:l,vpsArr:u,nalUnitSize:e}}}},{key:"parseVPS",value:function(i,t){t=t||{};var e=new yu(i);e.readUByte(),e.readUByte(),e.readBits(12);var s=e.readBits(3);return t.numTemporalLayers=Math.max(t.numTemporalLayers||0,s+1),e.readBits(17),n._parseProfileTierLevel(e,s,t),t}},{key:"parseSPS",value:function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t=t||{};var e=new yu(i);e.readUByte(),e.readUByte(),e.readBits(4);var s=e.readBits(3);t.numTemporalLayers=Math.max(s+1,t.numTemporalLayers||0),t.temporalIdNested=e.readBits(1),n._parseProfileTierLevel(e,s,t),e.readUEG();var a=t.chromaFormatIdc=e.readUEG(),o=420;a<=3&&(o=[0,420,422,444][a]);var l=0;a===3&&(l=e.readBits(1));var u=e.readUEG(),c=e.readUEG(),f=e.readBits(1),h,d,p,v;if(f===1&&(h=e.readUEG(),d=e.readUEG(),p=e.readUEG(),v=e.readUEG()),t.bitDepthLumaMinus8=e.readUEG(),t.bitDepthChromaMinus8=e.readUEG(),f===1){var g=(a===1||a===2)&&l===0?2:1,_=a===1&&l===0?2:1;u-=g*(d+h),c-=_*(v+p)}return{codec:"hev1.1.6.L93.B0",width:u,height:c,chromaFormat:o,hvcC:t}}},{key:"_parseProfileTierLevel",value:function(i,t,e){var s=e.generalTierFlag||0;e.generalProfileSpace=i.readBits(2),e.generalTierFlag=Math.max(i.readBits(1),s),e.generalProfileIdc=Math.max(i.readBits(5),e.generalProfileIdc||0),e.generalProfileCompatibilityFlags=i.readBits(32),e.generalConstraintIndicatorFlags=[i.readBits(8),i.readBits(8),i.readBits(8),i.readBits(8),i.readBits(8),i.readBits(8)];var a=i.readBits(8);s<e.generalTierFlag?e.generalLevelIdc=a:e.generalLevelIdc=Math.max(a,e.generalLevelIdc||0);var o=[],l=[];if(t>i.bitsAvailable)throw new Error("maxSubLayersMinus inavlid size ".concat(t));for(var u=0;u<t;u++)o[u]=i.readBits(1),l[u]=i.readBits(1);t>0&&i.readBits((8-t)*2);for(var c=0;c<t;c++)o[c]!==0&&(i.readBits(2),i.readBits(1),i.readBits(5),i.readBits(16),i.readBits(16),i.readBits(4),i.readBits(16),i.readBits(16),i.readBits(12)),l[c]!==0&&i.readBits(8)}}]),n}(),yC=9e4/2,Ph=3,ra=9e4,Sl=5*9e4,El=9e4,AC=9e4/2,_C=9e4*5,bC=function(){function n(r,i,t,e){ht(this,n),this.videoTrack=r,this.audioTrack=i,this.metadataTrack=t,this._baseDts=-1,this._baseVideoDts=-1,this._baseAudioDts=-1,this._baseDtsInited=!1,this._audioNextPts=void 0,this._videoNextDts=void 0,this._audioTimestampBreak=!1,this._videoTimestampBreak=!1,this._lastAudioExceptionGapDot=0,this._lastAudioExceptionOverlapDot=0,this._lastAudioExceptionLargeGapDot=0,this._needForceFixLargeGap=e?.forceFixLargeGap,this._largeGapThreshold=e?.largeGapThreshold||_C}return dt(n,[{key:"fix",value:function(){var i=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;t=Math.round(t*9e4);var a=this.videoTrack,o=this.audioTrack,l=a.samples,u=o.samples;if(!(!l.length&&!u.length)){var c=l[0],f=u[0],h=0;if(l.length&&u.length&&(h=c.dts-f.pts),this._baseDtsInited||this._calculateBaseDts(this.audioTrack,this.videoTrack),e&&(this._calculateBaseDts(this.audioTrack,this.videoTrack),this._baseDts-=t,this._baseAudioDts-=t,this._baseVideoDts-=t),!s){this._videoNextDts=h>0?t+h:t,this._audioNextPts=h>0?t:t-h,this._needForceFixLargeGap&&(this._videoNextDts=0,this._audioNextPts=0);var d=c?c.dts-this._baseDts-this._videoNextDts:0,p=f?f.pts-this._baseDts-this._audioNextPts:0;Math.abs(d||p)>El&&(this._calculateBaseDts(this.audioTrack,this.videoTrack),this._baseDts-=t)}if(this._resetBaseDtsWhenStreamBreaked(),this._fixAudio(o),this._fixVideo(a),this.metadataTrack.exist()){var v=this.metadataTrack.timescale;this.metadataTrack.seiSamples.forEach(function(g){g.pts=g.originPts-i._baseDts,g.time=Math.max(0,g.pts)/v})}a.samples.length&&(a.baseMediaDecodeTime=a.samples[0].dts),o.samples.length&&(o.baseMediaDecodeTime=o.samples[0].pts*o.timescale/9e4)}}},{key:"_fixVideo",value:function(i){var t=this,e=i.samples;if(e.length){if(e.forEach(function(R){R.dts-=t._needForceFixLargeGap?t._baseVideoDts:t._baseDts,R.pts-=t._needForceFixLargeGap?t._baseVideoDts:t._baseDts}),this._videoNextDts===void 0){var s=e[0];this._videoNextDts=s.dts}var a=e.length,o=0,l=e[0],u=e[1],c=this._videoNextDts-l.dts;if(Math.abs(c)>AC){var f;if(i.warnings.push({type:yn.LARGE_VIDEO_GAP_BETWEEN_CHUNK,nextDts:this._videoNextDts/90,firstSampleDts:l.dts/90,nextSampleDts:(((f=e[1])===null||f===void 0?void 0:f.dts)||0)/90,sampleDuration:c/90}),l.dts+=c,l.pts+=c,u&&Math.abs(u.dts-l.dts)>El)this._videoTimestampBreak=!0,e.forEach(function(R,N){N!==0&&(R.dts+=c,R.pts+=c)});else for(var h=1;h<=a-1;h++){var d,p=(d=e[h])===null||d===void 0?void 0:d.dts,v=e[h-1].dts;p&&p-v<0&&(e[h].dts+=c,e[h].pts+=c)}}var g;if(i.fpsNum&&i.fpsDen&&(g=i.timescale*(i.fpsDen/i.fpsNum)),g<900&&(g=0),!g){var _=i.samples[0],b=i.samples[1];g=a===1?9e3:Math.floor(b.dts-_.dts)}for(var y=0;y<a;y++){var m=e[y].dts,S=e[y+1];if(y<a-1?o=S.dts-m:e[y-1]?o=Math.min(m-e[y-1].dts,g):o=g,o>El||o<0){this._videoTimestampBreak=!0,o=this._audioTimestampBreak?g:Math.max(o,2700);var I=this._audioNextPts||0;S&&S.dts>I&&(o=g),i.warnings.push({type:yn.LARGE_VIDEO_GAP,time:m/i.timescale,dts:m,originDts:e[y].originDts,nextDts:this._videoNextDts,sampleDuration:o,refSampleDuration:g})}e[y].duration=o,this._videoNextDts+=o}}}},{key:"_fixAudio",value:function(i){var t=this,e=i.samples;if(e.length){if(i.codecType===cn.MP3){this.lastAudioSample&&e.unshift(this.lastAudioSample);for(var s=0;s<e.length;s++){var a=e[s];if(e[s+1])a.duration=e[s+1].pts-a.pts;else break;a.pts-=this._baseDts,a.dts=a.pts}this.lastAudioSample=e.pop();return}e.forEach(function(o){o.pts-=t._needForceFixLargeGap?t._baseAudioDts:t._baseDts,o.dts=o.pts}),this._doFixAudioInternal(i,e,9e4)}}},{key:"_calculateBaseDts",value:function(i,t){var e=i.samples,s=t.samples;if(!e.length&&!s.length)return!1;var a=1/0,o=1/0;e.length&&(i.baseDts=a=e[0].pts,this._baseAudioDts=a),s.length&&(t.baseDts=o=s[0].dts,this._baseVideoDts=o),this._baseDts=Math.min(a,o);var l=o-a,u=!1;return Number.isFinite(l)&&Math.abs(l)>yC&&t.warnings.push({type:yn.LARGE_AV_SHIFT,videoBaseDts:o,audioBasePts:a,baseDts:this._baseDts,delta:l}),Number.isFinite(l)&&Math.abs(l)>this._largeGapThreshold*ra&&(u=!0),this._baseDtsInited||(u&&this._needForceFixLargeGap?this._needForceFixLargeGap=!0:this._needForceFixLargeGap=!1),this._baseDtsInited=!0,!0}},{key:"_resetBaseDtsWhenStreamBreaked",value:function(){if(this._baseDtsInited&&this._videoTimestampBreak&&this._audioTimestampBreak){var i=this._calculateBaseDts(this.audioTrack,this.videoTrack);if(!i)return;this._baseDts-=Math.min(this._audioNextPts,this._videoNextDts),this._audioLastSample=null,this._videoLastSample=null,this._videoTimestampBreak=!1,this._audioTimestampBreak=!1}}},{key:"_doFixAudioInternal",value:function(i,t,e){i.sampleDuration||(i.sampleDuration=$n.getFrameDuration(i.timescale,e));var s=i.sampleDuration;if(this._audioNextPts===void 0){var a=t[0];this._audioNextPts=a.pts}for(var o=0;o<t.length;o++){var l=this._audioNextPts,u=t[o],c=u.pts-l;if(!this._audioTimestampBreak&&c>=Ph*s&&c<=ra&&!hC){var f=$n.getSilentFrame(i.codec,i.channelCount)||t[0].data.subarray(),h=Math.floor(c/s);Math.abs(u.pts-this._lastAudioExceptionGapDot)>Sl&&(this._lastAudioExceptionGapDot=u.pts),i.warnings.push({type:yn.AUDIO_FILLED,pts:u.pts/90,originPts:u.originPts,count:h,nextPts:l/90,refSampleDuration:s});for(var d=0;d<h;d++){var p=new us(Math.floor(l),f);p.originPts=Math.floor(this._baseDts+l),t.splice(o,0,p),this._audioNextPts+=s,o++}o--}else c<=-Ph*s&&c>=-1*ra?(Math.abs(u.pts-this._lastAudioExceptionOverlapDot)>Sl&&(this._lastAudioExceptionOverlapDot=u.pts,i.warnings.push({type:yn.AUDIO_DROPPED,pts:u.pts/90,originPts:u.originPts,nextPts:l/90,refSampleDuration:s})),t.splice(o,1),o--):(Math.abs(c)>=ra&&(this._audioTimestampBreak=!0,Math.abs(u.pts-this._lastAudioExceptionLargeGapDot)>Sl&&(this._lastAudioExceptionLargeGapDot=u.pts,i.warnings.push({type:yn.LARGE_AUDIO_GAP,time:u.pts/1e3,pts:u.pts/90,originPts:u.originPts,nextPts:l/90,sampleDuration:c,refSampleDuration:s}))),u.dts=u.pts=l,this._audioNextPts+=s)}}}]),n}(),SC=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],EC=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],wC=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],CC=[0,1,1,4],sa=null,xh=function(){function n(){ht(this,n)}return dt(n,null,[{key:"isHeader",value:function(i,t){return t+1<i.length&&i[t]===255&&(i[t+1]&224)===224&&(i[t+1]&6)!==0}},{key:"appendFrame",value:function(i,t,e,s,a){if(!(e+24>t.length)){var o=n.parseHeader(t,e);if(o&&e+o.frameLength<=t.length){var l=o.samplesPerFrame*9e4/o.sampleRate,u=s+a*l,c={data:t.subarray(e,e+o.frameLength),pts:u,dts:u};return c.size=c.data.byteLength,i.config=[],i.channelCount=o.channelCount,i.sampleRate=o.sampleRate,tv?i.codec="mp3":i.container="audio/mpeg",i.samples.push(c),{length:o.frameLength}}}}},{key:"parseHeader",value:function(i,t){var e=i[t+1]>>3&3,s=i[t+1]>>1&3,a=i[t+2]>>4&15,o=i[t+2]>>2&3;if(e!==1&&a!==0&&a!==15&&o!==3){var l=i[t+2]>>1&1,u=i[t+3]>>6,c=e===3?3-s:s===3?3:4,f=SC[c*14+a-1]*1e3,h=e===3?0:e===2?1:2,d=EC[h*3+o],p=u===3?1:2,v=wC[e][s],g=CC[s],_=v*8*g,b=Math.floor(v*f/d+l)*g;if(sa===null){var y=navigator.userAgent||"",m=y.match(/Chrome\/(\d+)/i);sa=m?parseInt(m[1]):0}var S=!!sa&&sa<=87;return S&&s===2&&f>=224e3&&u===0&&(i[t+3]=i[t+3]|128),{sampleRate:d,channelCount:p,frameLength:b,samplesPerFrame:_}}}}]),n}(),vn=new Ka("TsDemuxer"),iv=function(){function n(r,i,t){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};ht(this,n),X(this,"_pmtId",-1),X(this,"_remainingPacketData",null),X(this,"_videoPesData",[]),X(this,"_audioPesData",[]),X(this,"_gopId",0),this.videoTrack=r||new Zg,this.audioTrack=i||new $g,this.metadataTrack=t||new ev,this._fixer=new bC(this.videoTrack,this.audioTrack,this.metadataTrack,e)}return dt(n,[{key:"demux",value:function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=this.audioTrack,a=this.videoTrack,o=this.metadataTrack;t&&(this._pmtId=-1,a.reset(),s.reset(),o.reset()),!e||t?(this._remainingPacketData=null,this._videoPesData=[],this._audioPesData=[]):(a.samples=[],s.samples=[],o.seiSamples=[],a.warnings=[],s.warnings=[],this._remainingPacketData&&(i=ln(this._remainingPacketData,i),this._remainingPacketData=null));var l=i.length,u=l%188;u&&(this._remainingPacketData=i.subarray(l-u),l-=u);for(var c=a.pid,f=s.pid,h=0;h<l;h+=188){if(i[h]!==71)throw new Error("TS packet did not start with 0x47");var d=!!(i[h+1]&64),p=((i[h+1]&31)<<8)+i[h+2],v=(i[h+3]&48)>>4,g=void 0;if(v>1){if(g=h+5+i[h+4],g===h+188)continue}else g=h+4;switch(p){case 0:d&&(g+=i[g]+1),this._pmtId=(i[g+10]&31)<<8|i[g+11];break;case this._pmtId:{d&&(g+=i[g]+1);var _=g+3+((i[g+1]&15)<<8|i[g+2])-4,b=(i[g+10]&15)<<8|i[g+11];for(g+=12+b;g<_;){var y=(i[g+1]&31)<<8|i[g+2];switch(i[g]){case 15:s.pid=f=y;break;case 3:case 4:s.pid===-1&&(s.pid=f=y,s.codecType=cn.MP3);break;case 27:if(c!==-1)break;a.codecType=Ei.AVC,a.pid=c=y;break;case 36:if(c!==-1)break;a.codecType=Ei.HEVC,a.pid=c=y;break;default:vn.warn("Unsupported stream. type: ".concat(i[g],", pid: ").concat(y))}g+=((i[g+3]&15)<<8|i[g+4])+5}}break;case c:d&&this._videoPesData.length&&this._parseVideoData(),this._videoPesData.push(i.subarray(g,h+188));break;case f:d&&this._audioPesData.length&&this._parseAudioData(),this._audioPesData.push(i.subarray(g,h+188));break;case 17:case 8191:break;default:vn.warn("Unknown pid: ".concat(p))}}return this._parseVideoData(),this._parseAudioData(),s.formatTimescale=a.formatTimescale=a.timescale=o.timescale=9e4,s.timescale=s.sampleRate||0,{videoTrack:a,audioTrack:s,metadataTrack:o}}},{key:"fix",value:function(i,t,e){return this._fixer.fix(i,t,e),{videoTrack:this.videoTrack,audioTrack:this.audioTrack,metadataTrack:this.metadataTrack}}},{key:"demuxAndFix",value:function(i,t,e,s){return this.demux(i,t,e),this.fix(s,t,e)}},{key:"_parseVideoData",value:function(){if(this._videoPesData.length){var i=n._parsePES(ln.apply(void 0,$t(this._videoPesData)));if(!i){vn.warn("Cannot parse video pes",this._videoPesData);return}var t=Ai.parseAnnexB(i.data);t?this._createVideoSample(t,i.pts,i.dts):vn.warn("Cannot parse avc units",i),this._videoPesData=[]}}},{key:"_createVideoSample",value:function(i,t,e){var s=this;if(i.length){var a=this.videoTrack,o=a.codecType===Ei.HEVC,l=new mu(t,e);i.forEach(function(u){var c=o?u[0]>>>1&63:u[0]&31;switch(c){case 5:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:if(!o&&c!==5||o&&c===5)break;l.setToKeyframe(),s._gopId++;break;case 6:case 39:case 40:if(!o&&c!==6||o&&c===6)break;s.metadataTrack.seiSamples.push(new fC(Ai.parseSEI(Ai.removeEPB(u),o),t));return;case 32:if(!o)break;if(!a.vps.length){var f=Rh.parseVPS(Ai.removeEPB(u),a.hvcC);a.hvcC=a.hvcC||f,a.vps=[u]}break;case 7:case 33:if(!o&&c!==7||o&&c===7)break;if(!a.sps.length){var h=Ai.removeEPB(u),d=o?Rh.parseSPS(h,a.hvcC):mC.parseSPS(h);a.sps=[u],a.hvcC=a.hvcC||d.hvcC,a.codec=d.codec,a.width=d.width,a.height=d.height,a.sarRatio=d.sarRatio,a.fpsNum=d.fpsNum,a.fpsDen=d.fpsDen}break;case 8:case 34:if(!o&&c!==8||o&&c===8)break;a.pps.length||(a.pps=[u]);break;case 9:case 35:break;case 38:if(o){for(var p=!1,v=2;v<u.byteLength;v++)if(u[v]===255){p=!0;break}if(!p)return}break}l.units.push(u)}),l.gopId=this._gopId,this._pushVideoSample(a,l)}}},{key:"_pushVideoSample",value:function(i,t){if(t.units.length)if(t.pts===null||t.pts===void 0){vn.warn("Video sample no pts",t);var e=i.samples[i.samples.length-1];e?(t.pts=e.pts,t.dts=e.dts):vn.warn("Drop video sample",t)}else i.samples.push(t)}},{key:"_parseAudioData",value:function(){if(this._audioPesData.length){var i=n._parsePES(ln.apply(void 0,$t(this._audioPesData)));if(!i){vn.warn("Cannot parse audio pes",this._audioPesData);return}switch(this.audioTrack.codecType){case cn.AAC:this._parseAacData(i);break;case cn.MP3:this._parseMPEG(i);break}this._audioPesData=[]}}},{key:"_parseAacData",value:function(i){var t=this.audioTrack,e=i.pts;if(e==null){if(vn.warn("AAC pes not pts",t),!t.samples.length||!t.sampleRate)return;e=t.samples[t.samples.length-1].pts+$n.getFrameDuration(t.sampleRate)}var s=$n.parseADTS(i.data,e);if(s){var a;t.codec=s.codec,t.channelCount=s.channelCount,t.sampleRate=s.sampleRate,t.objectType=s.objectType,t.sampleRateIndex=s.samplingFrequencyIndex,t.config=s.config,(a=t.samples).push.apply(a,$t(s.frames.map(function(o){return new us(o.pts,o.data)}))),s.skip&&vn.warn("Skip aac adts ".concat(s.skip," bits")),s.remaining&&vn.warn("Remaining aac adts ".concat(s.remaining," bits"))}else vn.warn("Cannot parse aac adts",i)}},{key:"_parseMPEG",value:function(i){var t=i.data,e=t.length,s=0,a=0,o=i.pts;if(o===void 0){vn.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<e;)if(xh.isHeader(t,a)){var l=xh.appendFrame(this.audioTrack,t,a,o,s);if(l)a+=l.length,s++;else break}else a++}}],[{key:"probe",value:function(i){return i.length?i[0]===71&&i[188]===71&&i[376]===71:!1}},{key:"_parsePES",value:function(i){var t=i[8];if(!(t==null||i.length<t+9)){var e=i[0]<<16|i[1]<<8|i[2];if(e===1){var s=(i[4]<<8)+i[5];if(!(s&&s>i.length-6)){var a,o,l=i[7];return l&192&&(a=(i[9]&14)*536870912+(i[10]&255)*4194304+(i[11]&254)*16384+(i[12]&255)*128+(i[13]&254)/2,l&64?(o=(i[14]&14)*536870912+(i[15]&255)*4194304+(i[16]&254)*16384+(i[17]&255)*128+(i[18]&254)/2,a-o>60*9e4&&(a=o)):o=a),{data:i.subarray(9+t),pts:a,dts:o}}}}}}]),n}(),wl=function(){function n(r,i,t){ht(this,n),this.dv=new DataView(r),this.start=this.offset=i||this.dv.byteOffset,this.end=t?this.start+t:this.start+this.dv.byteLength}return dt(n,[{key:"buffer",get:function(){return this.dv.buffer}},{key:"unreadLength",get:function(){return Math.max(this.end-this.offset,0)}},{key:"size",get:function(){return this.end-this.start}},{key:"readFloat",value:function(i){var t=0;switch(i){case 4:t=this.dv.getFloat32(this.offset);break;case 8:t=this.dv.getFloat64(this.offset);break;default:throw new Error("read ".concat(i,"-byte float is not supported"))}return this.offset+=i,t}},{key:"back",value:function(i){this.offset-=i}},{key:"skip",value:function(i){this.offset+=i}},{key:"readInt",value:function(i){var t=this.offset;switch(this.offset+=i,i){case 1:return this.dv.getInt8(t);case 2:return this.dv.getInt16(t);case 4:return this.dv.getInt32(t);default:throw new Error("read ".concat(i,"-byte integers is not supported"))}}},{key:"read",value:function(i){var t=this.offset;switch(this.offset+=i,i){case 1:return this.dv.getUint8(t);case 2:return this.dv.getUint16(t);case 3:return(this.dv.getUint16(t)<<8)+this.dv.getUint8(t+2);case 4:return this.dv.getUint32(t);default:return this.back(i-4),this.read(i-4)+this.dv.getUint32(t)*Math.pow(256,i-4)}}},{key:"write",value:function(i,t){var e=this.offset;switch(this.offset+=i,i){case 1:return this.dv.setUint8(e,t);case 2:return this.dv.setUint16(e,t);case 3:return this.dv.setUint8(e,t>>>16),this.dv.setUint16(e+1,65535&t);case 4:return this.dv.setUint32(e,t);default:throw new Error("write ".concat(i,"-byte integers is not supported"))}}},{key:"readToBuffer",value:function(i){var t;return this.offset||i?t=this.dv.buffer.slice(this.offset,i?this.offset+i:this.end):t=this.dv.buffer,this.offset+=t.byteLength,t}},{key:"readToUint8",value:function(i){var t=new Uint8Array(this.dv.buffer,this.offset,i||this.unreadLength);return this.offset+=t.byteLength,t}},{key:"readString",value:function(i){for(var t=0,e="";t<i;t++)e+=String.fromCharCode(this.dv.getUint8(this.offset)),this.offset++;return e}}],[{key:"fromUint8",value:function(i){return new n(i.buffer,i.byteOffset,i.byteLength)}},{key:"concatUint8s",value:function(i){var t=new Uint8Array(i.reduce(function(s,a){return s+a.byteLength},0)),e=0;return i.forEach(function(s){t.set(s,e),e+=s.byteLength}),t}},{key:"concatUint8",value:function(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return this.concatUint8s(t)}}]),n}(),TC=function(){function n(r,i){ht(this,n),this.offset=0,this.val=r,this.size=i}return dt(n,[{key:"skip",value:function(i){this.offset+=i}},{key:"read",value:function(i){var t=this.size-this.offset-i;if(t>=0){var e=0,s=0;if(this.offset+=i,this.size>31){for(;s<i;s++)e+=Math.pow(2,s);return this.val/Math.pow(2,t)&e}else{for(;s<i;s++)e+=1<<s;return this.val>>>t&e}}throw new Error("the number of the read operation exceeds the total length limit of bits")}}],[{key:"fromByte",value:function(i,t){return new n(i.read(t),t<<3)}}]),n}(),st=function(){function n(){ht(this,n)}return dt(n,null,[{key:"findBox",value:function(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=[];if(!i)return s;for(var a=0,o="",l=0;i.length>7;){if(a=he(i),o=String.fromCharCode.apply(null,i.subarray(4,8)),l=8,a===1?(a=Li(i,8),l+=8):a||(a=i.length),!t[0]||o===t[0]){var u=i.subarray(0,a);if(t.length<2)s.push({start:e,size:a,headerSize:l,type:o,data:u});else return n.findBox(u.subarray(l),t.slice(1),e+l)}e+=a,i=i.subarray(a)}return s}},{key:"tfhd",value:function(i){return Pe(i,!0,function(t,e){t.trackId=he(e);var s=4,a=t.flags&255&1,o=t.flags&255&2,l=t.flags&255&8,u=t.flags&255&16,c=t.flags&255&32;a&&(s+=4,t.baseDataOffset=he(e,s),s+=4),o&&(t.sampleDescriptionIndex=he(e,s),s+=4),l&&(t.defaultSampleDuration=he(e,s),s+=4),u&&(t.defaultSampleSize=he(e,s),s+=4),c&&(t.defaultSampleFlags=he(e,s))})}},{key:"sidx",value:function(i){return Pe(i,!0,function(t,e){var s=0;t.reference_ID=he(e,s),s+=4,t.timescale=he(e,s),s+=4,t.version===0?(t.earliest_presentation_time=he(e,s),s+=4,t.first_offset=he(e,s),s+=4):(t.earliest_presentation_time=Li(e,s),s+=8,t.first_offset=Li(e,s),s+=8),s+=2,t.references=[];var a=at(e,s);s+=2;for(var o=0;o<a;o++){var l={};t.references.push(l);var u=he(e,s);s+=4,l.reference_type=u>>31&1,l.referenced_size=u&2147483647,l.subsegment_duration=he(e,s),s+=4,u=he(e,s),s+=4,l.starts_with_SAP=u>>31&1,l.SAP_type=u>>28&7,l.SAP_delta_time=u&268435455}})}},{key:"moov",value:function(i){return Pe(i,!1,function(t,e,s){t.mvhd=n.mvhd(n.findBox(e,["mvhd"],s)[0]),t.trak=n.findBox(e,["trak"],s).map(function(a){return n.trak(a)}),t.pssh=n.pssh(n.findBox(e,["pssh"],s)[0])})}},{key:"mvhd",value:function(i){return Pe(i,!0,function(t,e){var s=0;t.version===1?(t.timescale=he(e,16),t.duration=Li(e,20),s+=28):(t.timescale=he(e,8),t.duration=he(e,12),s+=16),t.nextTrackId=he(e,s+76)})}},{key:"trak",value:function(i){return Pe(i,!1,function(t,e,s){t.tkhd=n.tkhd(n.findBox(e,["tkhd"],s)[0]),t.mdia=n.mdia(n.findBox(e,["mdia"],s)[0])})}},{key:"tkhd",value:function(i){return Pe(i,!0,function(t,e){var s=wl.fromUint8(e);t.version===1?(s.read(8),s.read(8),t.trackId=s.read(4),s.read(4),t.duration=s.read(8)):(s.read(4),s.read(4),t.trackId=s.read(4),s.read(4),t.duration=s.read(4)),s.skip(16),t.matrix=[];for(var a=0;a<36;a++)t.matrix.push(s.read(1));s.back(36);for(var o=[],l=0,u;l<3;l++)o.push(bl(s.readInt(2),s.readInt(2))),o.push(bl(s.readInt(2),s.readInt(2))),u=s.readInt(4),o.push(bl(u>>30,u&1073741823));t.rotation=vC(o),t.width=s.read(4),t.height=s.read(4)})}},{key:"mdia",value:function(i){return Pe(i,!1,function(t,e,s){t.mdhd=n.mdhd(n.findBox(e,["mdhd"],s)[0]),t.hdlr=n.hdlr(n.findBox(e,["hdlr"],s)[0]),t.minf=n.minf(n.findBox(e,["minf"],s)[0])})}},{key:"mdhd",value:function(i){return Pe(i,!0,function(t,e){var s=0;t.version===1?(t.timescale=he(e,16),t.duration=Li(e,20),s+=28):(t.timescale=he(e,8),t.duration=he(e,12),s+=16);var a=at(e,s);t.language=String.fromCharCode((a>>10&31)+96,(a>>5&31)+96,(a&31)+96)})}},{key:"hdlr",value:function(i){return Pe(i,!0,function(t,e){t.version===0&&(t.handlerType=String.fromCharCode.apply(null,e.subarray(4,8)))})}},{key:"minf",value:function(i){return Pe(i,!1,function(t,e,s){t.vmhd=n.vmhd(n.findBox(e,["vmhd"],s)[0]),t.smhd=n.smhd(n.findBox(e,["smhd"],s)[0]),t.stbl=n.stbl(n.findBox(e,["stbl"],s)[0])})}},{key:"vmhd",value:function(i){return Pe(i,!0,function(t,e){t.graphicsmode=at(e),t.opcolor=[at(e,2),at(e,4),at(e,6)]})}},{key:"smhd",value:function(i){return Pe(i,!0,function(t,e){t.balance=at(e)})}},{key:"stbl",value:function(i){return Pe(i,!1,function(t,e,s){var a,o,l;t.stsd=n.stsd(n.findBox(e,["stsd"],s)[0]),t.stts=n.stts(n.findBox(e,["stts"],s)[0]),t.ctts=n.ctts(n.findBox(e,["ctts"],s)[0]),t.stsc=n.stsc(n.findBox(e,["stsc"],s)[0]),t.stsz=n.stsz(n.findBox(e,["stsz"],s)[0]),t.stco=n.stco(n.findBox(e,["stco"],s)[0]),t.stco||(t.co64=n.co64(n.findBox(e,["co64"],s)[0]),t.stco=t.co64);var u=(a=t.stsd.entries[0])===null||a===void 0||(o=a.sinf)===null||o===void 0||(l=o.schi)===null||l===void 0?void 0:l.tenc.default_IV_size;t.stss=n.stss(n.findBox(e,["stss"],s)[0]),t.senc=n.senc(n.findBox(e,["senc"],s)[0],u)})}},{key:"senc",value:function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;return Pe(i,!0,function(e,s){var a=0,o=he(s,a);a+=4,e.samples=[];for(var l=0;l<o;l++){var u={};u.InitializationVector=[];for(var c=0;c<t;c++)u.InitializationVector[c]=s[a+c];if(a+=t,e.flags&2){u.subsamples=[];var f=at(s,a);a+=2;for(var h=0;h<f;h++){var d={};d.BytesOfClearData=at(s,a),a+=2,d.BytesOfProtectedData=he(s,a),a+=4,u.subsamples.push(d)}}e.samples.push(u)}})}},{key:"pssh",value:function(i){return Pe(i,!0,function(t,e){for(var s=[],a=[],o=0,l=0;l<16;l++)a.push(Tl(e[o+l]));if(o+=16,t.version>0){var u=he(e,o);o+=4;for(var c=0;c<(""+u).length;c++)for(var f=0;f<16;f++){var h=e[o];o+=1,s.push(Tl(h))}}var d=he(e,o);t.data_size=d,o+=4,t.kid=s,t.system_id=a,t.buffer=e})}},{key:"stsd",value:function(i){return Pe(i,!0,function(t,e,s){t.entryCount=he(e),t.entries=n.findBox(e.subarray(4),[],s+4).map(function(a){switch(a.type){case"av01":return n.av01(a);case"avc1":case"avc2":case"avc3":case"avc4":return n.avc1(a);case"hvc1":case"hev1":return n.hvc1(a);case"mp4a":return n.mp4a(a);case"alaw":case"ulaw":return n.alaw(a);case"enca":return Pe(a,!1,function(o,l,u){o.channelCount=at(l,16),o.samplesize=at(l,18),o.sampleRate=he(l,24)/65536,l=l.subarray(28),o.sinf=n.sinf(n.findBox(l,["sinf"],u)[0]),o.esds=n.esds(n.findBox(l,["esds"],u)[0])});case"encv":return Pe(a,!1,function(o,l,u){o.width=at(l,24),o.height=at(l,26),o.horizresolution=he(l,28),o.vertresolution=he(l,32),l=l.subarray(78),o.sinf=n.sinf(n.findBox(l,["sinf"],u)[0]),o.avcC=n.avcC(n.findBox(l,["avcC"],u)[0]),o.hvcC=n.hvcC(n.findBox(l,["hvcC"],u)[0]),o.pasp=n.pasp(n.findBox(l,["pasp"],u)[0])})}}).filter(Boolean)})}},{key:"tenc",value:function(i){return Pe(i,!1,function(t,e){var s=6;t.default_IsEncrypted=e[s],s+=1,t.default_IV_size=e[s],s+=1,t.default_KID=[];for(var a=0;a<16;a++)t.default_KID.push(Tl(e[s])),s+=1})}},{key:"schi",value:function(i){return Pe(i,!1,function(t,e,s){t.tenc=n.tenc(n.findBox(e,["tenc"],s)[0])})}},{key:"sinf",value:function(i){return Pe(i,!1,function(t,e,s){t.schi=n.schi(n.findBox(e,["schi"],s)[0]),t.frma=n.frma(n.findBox(e,["frma"],s)[0])})}},{key:"frma",value:function(i){return Pe(i,!1,function(t,e){t.data_format="";for(var s=0;s<4;s++)t.data_format+=String.fromCharCode(e[s])})}},{key:"colr",value:function(i){return Pe(i,!1,function(t,e){var s=wl.fromUint8(e);t.data=i.data,t.colorType=s.readString(4),t.colorType==="nclx"?(t.colorPrimaries=s.read(2),t.transferCharacteristics=s.read(2),t.matrixCoefficients=s.read(2),t.fullRangeFlag=s.read(1)>>7):(t.colorType==="rICC"||t.colorType==="prof")&&(t.iccProfile=e.readToUint8())})}},{key:"av01",value:function(i){return Pe(i,!1,function(t,e,s){var a=Cl(t,e),o=e.subarray(a);s+=a,t.av1C=n.av1C(n.findBox(o,["av1C"],s)[0]),t.colr=n.colr(n.findBox(o,["colr"],s)[0])})}},{key:"av1C",value:function(i){return Pe(i,!1,function(t,e){t.data=i.data;var s=wl.fromUint8(e),a=TC.fromByte(s,4);t.marker=a.read(1),t.version=a.read(7),t.seqProfile=a.read(3),t.seqLevelIdx0=a.read(5),t.seqTier0=a.read(1),t.highBitdepth=a.read(1),t.twelveBit=a.read(1),t.monochrome=a.read(1),t.chromaSubsamplingX=a.read(1),t.chromaSubsamplingY=a.read(1),t.chromaSamplePosition=a.read(2),t.reserved=a.read(3),t.initialPresentationDelayPresent=a.read(1),t.initialPresentationDelayPresent?t.initialPresentationDelayMinusOne=a.read(4):t.initialPresentationDelayMinusOne=0,t.configOBUs=s.readToUint8();var o;t.seqLevelIdx0===2&&t.highBitdepth===1?o=t.twelveBit===1?"12":"10":t.seqProfile<=2&&(o=t.highBitdepth===1?"10":"08"),t.codec=["av01",t.seqProfile,(t.seqLevelIdx0<10?"0"+t.seqLevelIdx0:t.seqLevelIdx0)+(t.seqTier0?"H":"M"),o].join(".")})}},{key:"avc1",value:function(i){return Pe(i,!1,function(t,e,s){var a=Cl(t,e),o=e.subarray(a);s+=a,t.avcC=n.avcC(n.findBox(o,["avcC"],s)[0]),t.pasp=n.pasp(n.findBox(o,["pasp"],s)[0])})}},{key:"avcC",value:function(i){return Pe(i,!1,function(t,e){t.data=i.data,t.configurationVersion=e[0],t.AVCProfileIndication=e[1],t.profileCompatibility=e[2],t.AVCLevelIndication=e[3],t.codec=nv([e[1],e[2],e[3]]),t.lengthSizeMinusOne=e[4]&3,t.spsLength=e[5]&31,t.sps=[];for(var s=6,a=0;a<t.spsLength;a++){var o=at(e,s);s+=2,t.sps.push(e.subarray(s,s+o)),s+=o}t.ppsLength=e[s],s+=1,t.pps=[];for(var l=0;l<t.ppsLength;l++){var u=at(e,s);s+=2,t.pps.push(e.subarray(s,s+=u)),s+=u}})}},{key:"hvc1",value:function(i){return Pe(i,!1,function(t,e,s){var a=Cl(t,e),o=e.subarray(a);s+=a,t.hvcC=n.hvcC(n.findBox(o,["hvcC"],s)[0]),t.pasp=n.pasp(n.findBox(o,["pasp"],s)[0])})}},{key:"hvcC",value:function(i){return Pe(i,!1,function(t,e){t.data=i.data,t.codec="hev1.1.6.L93.B0",t.configurationVersion=e[0];var s=e[1];t.generalProfileSpace=s>>6,t.generalTierFlag=(s&32)>>5,t.generalProfileIdc=s&31,t.generalProfileCompatibility=he(e,2),t.generalConstraintIndicatorFlags=e.subarray(6,12),t.generalLevelIdc=e[12],t.avgFrameRate=at(e,19),t.numOfArrays=e[22],t.vps=[],t.sps=[],t.pps=[];for(var a=23,o=0,l=0,u=0,c=0;c<t.numOfArrays;c++){o=e[a]&63,l=at(e,a+1),a+=3;for(var f=[],h=0;h<l;h++)u=at(e,a),a+=2,f.push(e.subarray(a,a+u)),a+=u;if(o===32){var d;(d=t.vps).push.apply(d,f)}else if(o===33){var p;(p=t.sps).push.apply(p,f)}else if(o===34){var v;(v=t.pps).push.apply(v,f)}}})}},{key:"pasp",value:function(i){return Pe(i,!1,function(t,e){t.hSpacing=he(e),t.vSpacing=he(e,4)})}},{key:"mp4a",value:function(i){return Pe(i,!1,function(t,e,s){var a=Oh(t,e);t.esds=n.esds(n.findBox(e.subarray(a),["esds"],s+a)[0])})}},{key:"esds",value:function(i){return Pe(i,!0,function(t,e){t.codec="mp4a.";for(var s=0,a=0,o=0,l=0;e.length;){for(s=0,l=e[s],a=e[s+1],s+=2;a&128;)o=(a&127)<<7,a=e[s],s+=1;if(o+=a&127,l===3)e=e.subarray(s+3);else if(l===4)t.codec+=(e[s].toString(16)+".").padStart(3,"0"),e=e.subarray(s+13);else if(l===5){var u=t.config=e.subarray(s,s+o),c=(u[0]&248)>>3;c===31&&u.length>=2&&(c=32+((u[0]&7)<<3)+((u[1]&224)>>5)),t.objectType=c,t.codec+=c.toString(16),t.codec[t.codec.length-1]==="."&&(t.codec=t.codec.substring(0,t.codec.length-1));return}else{t.codec[t.codec.length-1]==="."&&(t.codec=t.codec.substring(0,t.codec.length-1));return}}})}},{key:"alaw",value:function(i){return Pe(i,!1,function(t,e){Oh(t,e)})}},{key:"stts",value:function(i){return Pe(i,!0,function(t,e){for(var s=he(e),a=[],o=4,l=0;l<s;l++)a.push({count:he(e,o),delta:he(e,o+4)}),o+=8;t.entryCount=s,t.entries=a})}},{key:"ctts",value:function(i){return Pe(i,!0,function(t,e){var s=he(e),a=[],o=4;if(t.version===1)for(var l=0;l<s;l++)a.push({count:he(e,o),offset:he(e,o+4)}),o+=8;else for(var u=0;u<s;u++)a.push({count:he(e,o),offset:-(~he(e,o+4)+1)}),o+=8;t.entryCount=s,t.entries=a})}},{key:"stsc",value:function(i){return Pe(i,!0,function(t,e){for(var s=he(e),a=[],o=4,l=0;l<s;l++)a.push({firstChunk:he(e,o),samplesPerChunk:he(e,o+4),sampleDescriptionIndex:he(e,o+8)}),o+=12;t.entryCount=s,t.entries=a})}},{key:"stsz",value:function(i){return Pe(i,!0,function(t,e){var s=he(e),a=he(e,4),o=[];if(!s)for(var l=8,u=0;u<a;u++)o.push(he(e,l)),l+=4;t.sampleSize=s,t.sampleCount=a,t.entrySizes=o})}},{key:"stco",value:function(i){return Pe(i,!0,function(t,e){for(var s=he(e),a=[],o=4,l=0;l<s;l++)a.push(he(e,o)),o+=4;t.entryCount=s,t.entries=a})}},{key:"co64",value:function(i){return Pe(i,!0,function(t,e){for(var s=he(e),a=[],o=4,l=0;l<s;l++)a.push(Li(e,o)),o+=8;t.entryCount=s,t.entries=a})}},{key:"stss",value:function(i){return Pe(i,!0,function(t,e){for(var s=he(e),a=[],o=4,l=0;l<s;l++)a.push(he(e,o)),o+=4;t.entryCount=s,t.entries=a})}},{key:"moof",value:function(i){return Pe(i,!1,function(t,e,s){t.mfhd=n.mfhd(n.findBox(e,["mfhd"],s)[0]),t.traf=n.findBox(e,["traf"],s).map(function(a){return n.traf(a)})})}},{key:"mfhd",value:function(i){return Pe(i,!0,function(t,e){t.sequenceNumber=he(e)})}},{key:"traf",value:function(i){return Pe(i,!1,function(t,e,s){t.tfhd=n.tfhd(n.findBox(e,["tfhd"],s)[0]),t.tfdt=n.tfdt(n.findBox(e,["tfdt"],s)[0]),t.trun=n.trun(n.findBox(e,["trun"],s)[0])})}},{key:"trun",value:function(i){return Pe(i,!0,function(t,e){var s=t.version,a=t.flags,o=e.length,l=t.sampleCount=he(e),u=4;if(o>u&&a&1&&(t.dataOffset=-(~he(e,u)+1),u+=4),o>u&&a&4&&(t.firstSampleFlags=he(e,u),u+=4),t.samples=[],o>u)for(var c,f=0;f<l;f++)c={},a&256&&(c.duration=he(e,u),u+=4),a&512&&(c.size=he(e,u),u+=4),a&1024&&(c.flags=he(e,u),u+=4),a&2048&&(s?c.cts=-(~he(e,u+4)+1):c.cts=he(e,u),u+=4),t.samples.push(c)})}},{key:"tfdt",value:function(i){return Pe(i,!0,function(t,e){t.version===1?t.baseMediaDecodeTime=Li(e):t.baseMediaDecodeTime=he(e)})}},{key:"probe",value:function(i){return!!n.findBox(i,["ftyp"])}},{key:"parseSampleFlags",value:function(i){return{isLeading:(i[0]&12)>>>2,dependsOn:i[0]&3,isDependedOn:(i[1]&192)>>>6,hasRedundancy:(i[1]&48)>>>4,paddingValue:(i[1]&14)>>>1,isNonSyncSample:i[1]&1,degradationPriority:i[2]<<8|i[3]}}},{key:"moovToTrack",value:function(i,t,e){var s,a,o=i.trak;if(!(!o||!o.length)){var l=o.find(function(Y){var re,te;return((re=Y.mdia)===null||re===void 0||(te=re.hdlr)===null||te===void 0?void 0:te.handlerType)==="vide"}),u=o.find(function(Y){var re,te;return((re=Y.mdia)===null||re===void 0||(te=re.hdlr)===null||te===void 0?void 0:te.handlerType)==="soun"});if(l&&t){var c,f,h,d,p,v,g,_=t,b=(c=l.tkhd)===null||c===void 0?void 0:c.trackId;b!=null&&(_.id=l.tkhd.trackId),_.tkhdDuration=l.tkhd.duration,_.mvhdDurtion=i.mvhd.duration,_.mvhdTimecale=i.mvhd.timescale,_.timescale=_.formatTimescale=l.mdia.mdhd.timescale,_.duration=l.mdia.mdhd.duration||_.mvhdDurtion/_.mvhdTimecale*_.timescale,_.rotation=l.tkhd.rotation,_.matrix=l.tkhd.matrix;var y=l.mdia.minf.stbl.stsd.entries[0];if(_.width=y.width,_.height=y.height,y.pasp&&(_.sarRatio=[y.pasp.hSpacing,y.pasp.vSpacing]),y.av1C)_.codecType=Ei.AV1,_.codec=y.av1C.codec,_.av1C=y.av1C.data,y.colr&&(_.colr=y.colr.data);else if(y.hvcC)_.codecType=Ei.HEVC,_.codec=y.hvcC.codec,_.vps=y.hvcC.vps,_.sps=y.hvcC.sps,_.pps=y.hvcC.pps,_.hvcC=y.hvcC.data;else if(y.avcC)_.codec=y.avcC.codec,_.sps=y.avcC.sps,_.pps=y.avcC.pps;else throw new Error("unknown video stsd entry");if(_.present=!0,_.ext={},_.ext.stss=(f=l.mdia)===null||f===void 0||(h=f.minf)===null||h===void 0||(d=h.stbl)===null||d===void 0?void 0:d.stss,_.ext.ctts=(p=l.mdia)===null||p===void 0||(v=p.minf)===null||v===void 0||(g=v.stbl)===null||g===void 0?void 0:g.ctts,y&&y.type==="encv"){var m,S,I,R,N,G,H,ie;_.isVideoEncryption=!0,y.default_KID=(m=y.sinf)===null||m===void 0||(S=m.schi)===null||S===void 0?void 0:S.tenc.default_KID,y.default_IsEncrypted=(I=y.sinf)===null||I===void 0||(R=I.schi)===null||R===void 0?void 0:R.tenc.default_IsEncrypted,y.default_IV_size=(N=y.sinf)===null||N===void 0||(G=N.schi)===null||G===void 0?void 0:G.tenc.default_IV_size,_.videoSenc=l.mdia.minf.stbl.senc&&l.mdia.minf.stbl.senc.samples,y.data_format=(H=y.sinf)===null||H===void 0||(ie=H.frma)===null||ie===void 0?void 0:ie.data_format,_.useEME=i.useEME,_.kidValue=i.kidValue,_.pssh=i.pssh,_.encv=y}}if(u&&e){var E,T,P,V,O,z,q,pe,ye,U=e,ge=(E=u.tkhd)===null||E===void 0?void 0:E.trackId;ge!=null&&(U.id=u.tkhd.trackId),U.tkhdDuration=u.tkhd.duration,U.mvhdDurtion=i.mvhd.duration,U.mvhdTimecale=i.mvhd.timescale,U.timescale=U.formatTimescale=u.mdia.mdhd.timescale,U.duration=u.mdia.mdhd.duration||U.mvhdDurtion/U.mvhdTimecale*U.timescale;var ue=u.mdia.minf.stbl.stsd.entries[0];switch(U.sampleSize=ue.sampleSize,U.sampleRate=ue.sampleRate,U.channelCount=ue.channelCount,U.present=!0,ue.type){case"alaw":U.codecType=U.codec=cn.G711PCMA,U.sampleRate=8e3;break;case"ulaw":U.codecType=U.codec=cn.G711PCMU,U.sampleRate=8e3;break;default:U.sampleDuration=$n.getFrameDuration(U.sampleRate,U.timescale),U.sampleRateIndex=$n.getRateIndexByRate(U.sampleRate),U.objectType=((s=ue.esds)===null||s===void 0?void 0:s.objectType)||2,ue.esds&&(U.config=Array.from(ue.esds.config)),U.codec=((a=ue.esds)===null||a===void 0?void 0:a.codec)||"mp4a.40.2";break}if(U.sampleDuration=$n.getFrameDuration(U.sampleRate,U.timescale),U.objectType=((T=ue.esds)===null||T===void 0?void 0:T.objectType)||2,ue.esds&&(ue.esds.config?U.config=Array.from(ue.esds.config):console.warn("esds config is null")),U.codec=((P=ue.esds)===null||P===void 0?void 0:P.codec)||"mp4a.40.2",U.sampleRateIndex=$n.getRateIndexByRate(U.sampleRate),U.ext={},U.ext.stss=(V=u.mdia)===null||V===void 0||(O=V.minf)===null||O===void 0||(z=O.stbl)===null||z===void 0?void 0:z.stss,U.ext.ctts=(q=u.mdia)===null||q===void 0||(pe=q.minf)===null||pe===void 0||(ye=pe.stbl)===null||ye===void 0?void 0:ye.ctts,U.present=!0,ue&&ue.type==="enca"){var Ve,se,fe,L,Z,J,oe,Ue;U.isAudioEncryption=!0,ue.data_format=(Ve=ue.sinf)===null||Ve===void 0||(se=Ve.frma)===null||se===void 0?void 0:se.data_format,ue.default_KID=(fe=ue.sinf)===null||fe===void 0||(L=fe.schi)===null||L===void 0?void 0:L.tenc.default_KID,ue.default_IsEncrypted=(Z=ue.sinf)===null||Z===void 0||(J=Z.schi)===null||J===void 0?void 0:J.tenc.default_IsEncrypted,ue.default_IV_size=(oe=ue.sinf)===null||oe===void 0||(Ue=oe.schi)===null||Ue===void 0?void 0:Ue.tenc.default_IV_size,U.audioSenc=u.mdia.minf.stbl.senc&&u.mdia.minf.stbl.senc.samples,U.useEME=i.useEME,U.kidValue=i.kidValue,U.enca=ue}}if(e&&(e.isVideoEncryption=t?t.isVideoEncryption:!1),t&&(t.isAudioEncryption=e?e.isAudioEncryption:!1),t!=null&&t.encv||e!=null&&e.enca){var C,k,x=t==null||(C=t.encv)===null||C===void 0?void 0:C.default_KID,K=e==null||(k=e.enca)===null||k===void 0?void 0:k.default_KID,Q=x||K?(x||K).join(""):null;t&&(t.kid=Q),e&&(e.kid=Q)}return t&&(t.flags=3841),e&&(e.flags=1793),{videoTrack:t,audioTrack:e}}}},{key:"evaluateDefaultDuration",value:function(i,t,e){var s,a=t==null||(s=t.samples)===null||s===void 0?void 0:s.length;if(!a)return 1024;var o=1024*a/t.timescale;return o*i.timescale/e}},{key:"moofToSamples",value:function(i,t,e){var s={};return i.mfhd&&(t&&(t.sequenceNumber=i.mfhd.sequenceNumber),e&&(e.sequenceNumber=i.mfhd.sequenceNumber)),i.traf.forEach(function(a){var o=a.tfhd,l=a.tfdt,u=a.trun;if(!(!o||!u)){l&&(t&&t.id===o.trackId&&(t.baseMediaDecodeTime=l.baseMediaDecodeTime),e&&e.id===o.trackId&&(e.baseMediaDecodeTime=l.baseMediaDecodeTime));var c=o.defaultSampleSize||0,f=o.defaultSampleDuration||n.evaluateDefaultDuration(t,e,u.samples.length||u.sampleCount),h=u.dataOffset||0,d=0,p=-1;if(!u.samples.length&&u.sampleCount){s[o.trackId]=[];for(var v=0;v<u.sampleCount;v++)s[o.trackId].push({offset:h,dts:d,duration:f,size:c}),d+=f,h+=c}else s[o.trackId]=u.samples.map(function(g,_){return g={offset:h,dts:d,pts:d+(g.cts||0),duration:g.duration||f,size:g.size||c,gopId:p,keyframe:_===0||g.flags!==null&&g.flags!==void 0&&(g.flags&65536)>>>0!==65536},g.keyframe&&(p++,g.gopId=p),d+=g.duration,h+=g.size,g})}}),s}},{key:"moovToSamples",value:function(i){var t=i.trak;if(!(!t||!t.length)){var e=t.find(function(H){var ie,E;return((ie=H.mdia)===null||ie===void 0||(E=ie.hdlr)===null||E===void 0?void 0:E.handlerType)==="vide"}),s=t.find(function(H){var ie,E;return((ie=H.mdia)===null||ie===void 0||(E=ie.hdlr)===null||E===void 0?void 0:E.handlerType)==="soun"});if(!(!e&&!s)){var a,o;if(e){var l,u,c=(l=e.mdia)===null||l===void 0||(u=l.minf)===null||u===void 0?void 0:u.stbl;if(!c)return;var f=c.stts,h=c.stsc,d=c.stsz,p=c.stco,v=c.stss,g=c.ctts;if(!f||!h||!d||!p||!v)return;a=Dh(f,h,d,p,g,v)}if(s){var _,b,y,m=(_=s.mdia)===null||_===void 0||(b=_.minf)===null||b===void 0?void 0:b.stbl;if(!m)return;var S=(y=s.mdia.mdhd)===null||y===void 0?void 0:y.timescale,I=m.stts,R=m.stsc,N=m.stsz,G=m.stco;if(!S||!I||!R||!N||!G)return;o=Dh(I,R,N,G)}return{videoSamples:a,audioSamples:o}}}}}]),n}();function Dh(n,r,i,t,e,s){var a=[],o=e?.entries,l=r.entries,u=t.entries,c=i.entrySizes,f=s?.entries,h;f&&(h={},f.forEach(function(R){h[R-1]=!0}));var d;o&&(d=[],o.forEach(function(R){for(var N=R.count,G=R.offset,H=0;H<N;H++)d.push(G)}));var p,v=-1,g=0,_=0,b=0,y=0,m=0,S=l[0].samplesPerChunk,I=l[1]?l[1].firstChunk-1:1/0;return n.entries.forEach(function(R){for(var N=R.count,G=R.delta,H=0;H<N;H++)p={dts:g,duration:G,size:c[_]||i.sampleSize,offset:u[b]+m,index:_},f&&(p.keyframe=h[_],p.keyframe&&v++,p.gopId=v),d&&_<d.length&&(p.pts=p.dts+d[_]),a.push(p),g+=G,_++,_<S?m+=p.size:(b++,m=0,b>=I&&(y++,I=l[y+1]?l[y+1].firstChunk-1:1/0),S+=l[y].samplesPerChunk)}),a}function Cl(n,r){return n.dataReferenceIndex=at(r,6),n.width=at(r,24),n.height=at(r,26),n.horizresolution=he(r,28),n.vertresolution=he(r,32),n.frameCount=at(r,40),n.depth=at(r,74),78}function Oh(n,r){return n.dataReferenceIndex=at(r,6),n.channelCount=at(r,16),n.sampleSize=at(r,18),n.sampleRate=he(r,24)/65536,28}function Pe(n,r,i){if(n){if(n.size!==n.data.length)throw new Error("box ".concat(n.type," size !== data.length"));var t={start:n.start,size:n.size,headerSize:n.headerSize,type:n.type};return r&&(t.version=n.data[n.headerSize],t.flags=gC(n.data,n.headerSize+1),t.headerSize+=4),i(t,n.data.subarray(t.headerSize),t.start+t.headerSize),t}}var kC=function(r,i,t){for(var e=String(t),s=i>>0,a=Math.ceil(s/e.length),o=[],l=String(r);a--;)o.push(e);return o.join("").substring(0,s-l.length)+l},Tl=function(){for(var r=[],i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return t.forEach(function(s){r.push(kC(Number(s).toString(16),2,0))}),r[0]},IC=function(){function n(r,i,t){ht(this,n),X(this,"__loadedMoofWraps",[]),X(this,"__lastRemainData",null),X(this,"__lastRemainDataStart",0),X(this,"__nextMoofStart",-1),this.videoTrack=r||new Zg,this.audioTrack=i||new $g,this.metadataTrack=t||new ev}return dt(n,[{key:"demuxPart",value:function(i,t,e){var s=this,a=this.videoTrack,o=this.audioTrack,l=a.exist(),u=o.exist(),c=/av01/.test(a.codec);a.samples=[],o.samples=[];var f=i,h=t;if(this.__lastRemainData){var d=this.__lastRemainDataStart+this.__lastRemainData.byteLength,p=t<=d&&t>this.__lastRemainDataStart&&t+i.byteLength>d;if(p){var v=i.subarray(this.__lastRemainData.byteLength+this.__lastRemainDataStart-t);f=ln(this.__lastRemainData,v),h=this.__lastRemainDataStart,this.__lastRemainData=null}else this.__lastRemainData=null,this.__lastRemainDataStart=0,this.__nextMoofStart=-1}if(!e){var g=st.findBox(f,["moov"])[0];if(!g)throw new Error("cannot found moov box");e=st.moov(g)}if(f){var _=h+f.byteLength;!l&&!u&&st.moovToTrack(e,a,o);var b=[];this.__nextMoofStart<0?st.findBox(f,["moof"],h).forEach(function(R){return b.push(R)}):this.__nextMoofStart>=h&&this.__nextMoofStart<=_-8&&st.findBox(f.subarray(this.__nextMoofStart-h),["moof"],this.__nextMoofStart).forEach(function(R){return b.push(R)}),b.filter(function(R){return R.size<=R.data.length}).forEach(function(R){var N=st.moof(R);s.__nextMoofStart=N.start+Math.max.apply(Math,$t(N.traf.map(function(G){return G.trun.samples.reduce(function(H,ie){return H+ie.size},G.trun.dataOffset||0)}))),s.__loadedMoofWraps.push({start:N.start,nextMoofStart:s.__nextMoofStart,moof:N}),s.__loadedMoofWraps.sort(function(G,H){return G.start-H.start})});var y=lC(this.__loadedMoofWraps),m;try{var S=function(){var N=m.value;if(N.start>_||N.nextMoofStart<h)return"continue";var G=N.start,H=st.moofToSamples(N.moof,a,o),ie=a.baseMediaDecodeTime,E=o.baseMediaDecodeTime,T;Object.keys(H).forEach(function(P){a.id==P?H[P].some(function(V){var O=V.offset+=G;if(!(O<h)){if(O+V.size>_)return!0;var z=new mu((V.pts||V.dts)+ie,V.dts+ie);z.duration=V.duration,z.gopId=V.gopId,V.keyframe&&z.setToKeyframe();var q=f.subarray(O-h,O-h+V.size);if(z.data=q,!c)for(var pe=0,ye=q.length-1;pe<ye;)T=he(q,pe),pe+=4,z.units.push(q.subarray(pe,pe+T)),pe+=T;s.__lastRemainDataStart=O+V.size,a.samples.push(z)}}):o.id==P&&H[P].some(function(V){var O=V.offset+G;if(!(O<h)){if(O+V.size>_)return!0;var z=f.subarray(O-h,O-h+V.size);o.samples.push(new us(V.dts+E,z,V.duration)),s.__lastRemainDataStart=O+V.size}})})};for(y.s();!(m=y.n()).done;)var I=S()}catch(R){y.e(R)}finally{y.f()}}return this.__lastRemainDataStart>h&&this.__lastRemainDataStart<f.byteLength+h?this.__lastRemainData=f.subarray(this.__lastRemainDataStart-h):(this.__lastRemainData=f,this.__lastRemainDataStart=h),a.samples.length&&(a.baseMediaDecodeTime=a.samples[0].pts),o.samples.length&&(o.baseMediaDecodeTime=o.samples[0].pts),{videoTrack:a,audioTrack:o,metadataTrack:this.metadataTrack}}},{key:"demux",value:function(i,t){var e=this.videoTrack,s=this.audioTrack,a=e.exist(),o=s.exist();if(e.samples=[],s.samples=[],t){if(!o){var l=st.findBox(t,["moov"])[0];if(!l)throw new Error("cannot found moov box");st.moovToTrack(st.moov(l),null,s)}var u=st.findBox(t,["moof"])[0];if(u){var c=st.moofToSamples(st.moof(u),null,s)[s.id],f=s.baseMediaDecodeTime;if(c){var h=u.start;c.map(function(m){m.offset+=h;var S=t.subarray(m.offset,m.offset+m.size);s.samples.push(new us(m.dts+f,S,m.duration))})}}}if(i){if(!a&&!o){var d=st.findBox(i,["moov"])[0];if(!d)throw new Error("cannot found moov box");st.moovToTrack(st.moov(d),e,s)}var p=st.findBox(i,["moof"])[0];if(p){var v=st.moofToSamples(st.moof(p),e,s),g=e.baseMediaDecodeTime,_=s.baseMediaDecodeTime,b=p.start,y;Object.keys(v).forEach(function(m){e.id==m?v[m].map(function(S){S.offset+=b;var I=new mu((S.pts||S.dts)+g,S.dts+g);I.duration=S.duration,I.gopId=S.gopId,S.keyframe&&I.setToKeyframe();var R=i.subarray(S.offset,S.offset+S.size);I.data=R;for(var N=0,G=R.length-1;N<G;)y=he(R,N),N+=4,I.units.push(R.subarray(N,N+y)),N+=y;e.samples.push(I)}):s.id==m&&v[m].map(function(S){S.offset+=b;var I=i.subarray(S.offset,S.offset+S.size);s.samples.push(new us(S.dts+_,I,S.duration))})})}}return{videoTrack:e,audioTrack:s,metadataTrack:this.metadataTrack}}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset(),this.metadataTrack.reset()}}],[{key:"probe",value:function(i){return st.probe(i)}}]),n}();function RC(n){for(var r=0,i=arguments.length,t=new Array(i>1?i-1:0),e=1;e<i;e++)t[e-1]=arguments[e];t.forEach(function(o){r+=o.length});var s=new n(r),a=0;return t.forEach(function(o){s.set(o,a),a+=o.length}),s}var Bt=function(){function n(){ht(this,n),this.buffer=new Uint8Array(0)}return dt(n,[{key:"write",value:function(){for(var i=this,t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];e.forEach(function(a){a?i.buffer=RC(Uint8Array,i.buffer,a):window.console.warn(a)})}}],[{key:"writeUint16",value:function(i){return new Uint8Array([i>>8&255,i&255])}},{key:"writeUint32",value:function(i){return new Uint8Array([i>>24,i>>16&255,i>>8&255,i&255])}}]),n}(),Lh=Math.pow(2,32)-1,Me=function(){function n(){ht(this,n)}return dt(n,null,[{key:"box",value:function(i){for(var t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];e=e.filter(Boolean);var a=8+e.reduce(function(u,c){return u+c.byteLength},0),o=new Uint8Array(a);o[0]=a>>24&255,o[1]=a>>16&255,o[2]=a>>8&255,o[3]=a&255,o.set(i,4);var l=8;return e.forEach(function(u){o.set(u,l),l+=u.byteLength}),o}},{key:"ftyp",value:function(i){var t=i.find(function(e){return e.type===Si.VIDEO&&e.codecType===Ei.HEVC});return t?n.FTYPHEV1:n.FTYPAVC1}},{key:"initSegment",value:function(i){var t=n.ftyp(i),e=ln(t,n.moov(i));return e}},{key:"pssh",value:function(i){var t=new Uint8Array([1,0,0,0].concat([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75],[0,0,0,1],Ih(i.kid),[0,0,0,0]));return n.box(n.types.pssh,t)}},{key:"moov",value:function(i){if(i[0].useEME&&(i[0].encv||i[0].enca)){i[0].pssh||(i[0].pssh={kid:i[0].kid});var t=this.pssh(i[0].pssh);return n.box.apply(n,[n.types.moov,n.mvhd(i[0].mvhdDurtion||i[0].duration,i[0].mvhdTimecale||i[0].timescale),n.mvex(i)].concat($t(i.map(function(e){return n.trak(e)})),[t]))}else return n.box.apply(n,[n.types.moov,n.mvhd(i[0].mvhdDurtion||i[0].duration,i[0].mvhdTimecale||i[0].timescale)].concat($t(i.map(function(e){return n.trak(e)})),[n.mvex(i)]))}},{key:"mvhd",value:function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4,e=n.box(n.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255,i>>24&255,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]));return e}},{key:"trak",value:function(i){var t=n.box(n.types.trak,n.tkhd(i.id,i.tkhdDuration||0,i.width,i.height),n.mdia(i));return t}},{key:"tkhd",value:function(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=n.box(n.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,i>>24&255,i>>16&255,i>>8&255,i&255,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,e>>8&255,e&255,0,0,s>>8&255,s&255,0,0]));return a}},{key:"mdia",value:function(i){var t=n.box(n.types.mdia,n.mdhd(i.duration,i.timescale),n.hdlr(i.type),n.minf(i));return t}},{key:"mdhd",value:function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4,e=n.box(n.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255,i>>24&255,i>>16&255,i>>8&255,i&255,85,196,0,0]));return e}},{key:"hdlr",value:function(i){var t=n.box(n.types.hdlr,n.HDLR_TYPES[i]);return t}},{key:"minf",value:function(i){var t=n.box(n.types.minf,i.type===Si.VIDEO?n.VMHD:n.SMHD,n.DINF,n.stbl(i));return t}},{key:"stbl",value:function(i){var t=[];i&&i.ext&&i.ext.stss&&t.push(n.stss(i.ext.stss.entries));var e=n.box(n.types.stbl,n.stsd(i),n.STTS,t[0],n.STSC,n.STSZ,n.STCO);return e}},{key:"stsd",value:function(i){var t;i.type==="audio"?i.useEME&&i.enca?t=n.enca(i):i.codecType===cn.OPUS?t=n.opus(i):t=n.mp4a(i):i.useEME&&i.encv?t=n.encv(i):i.av1C?t=n.av01(i):t=n.avc1hev1(i);var e=n.box(n.types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),t);return e}},{key:"enca",value:function(i){var t=i.enca.channelCount,e=i.enca.sampleRate,s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,e>>8&255,e&255,0,0]),a=n.esds(i.config),o=n.sinf(i.enca);return n.box(n.types.enca,s,a,o)}},{key:"encv",value:function(i){var t,e,s=i.sps.length>0?i.sps[0]:[],a=i.pps.length>0?i.pps[0]:[],o=i.width,l=i.height,u=i.sarRatio[0],c=i.sarRatio[1],f=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,o&255,l>>8&255,l&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),h=new Uint8Array((t=(e=[1,s[1],s[2],s[3],255,225,s.length>>>8&255,s.length&255]).concat.apply(e,$t(s)).concat([1,a.length>>>8&255,a.length&255])).concat.apply(t,$t(a))),d=new Uint8Array([0,0,88,57,0,15,200,192,0,4,86,72]),p=n.sinf(i.encv),v=new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,c>>24,c>>16&255,c>>8&255,c&255]);return n.box(n.types.encv,f,n.box(n.types.avcC,h),n.box(n.types.btrt,d),p,n.box(n.types.pasp,v))}},{key:"schi",value:function(i){var t=new Uint8Array([]),e=n.tenc(i);return n.box(n.types.schi,t,e)}},{key:"tenc",value:function(i){var t=new Uint8Array([0,0,0,0,0,0,i.default_IsEncrypted&255,i.default_IV_size&255].concat(Ih(i.default_KID)));return n.box(n.types.tenc,t)}},{key:"sinf",value:function(i){var t=new Uint8Array([]),e=new Uint8Array([i.data_format.charCodeAt(0),i.data_format.charCodeAt(1),i.data_format.charCodeAt(2),i.data_format.charCodeAt(3)]),s=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),a=n.schi(i);return n.box(n.types.sinf,t,n.box(n.types.frma,e),n.box(n.types.schm,s),a)}},{key:"av01",value:function(i){return n.box(n.types.av01,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i.width>>8&255,i.width&255,i.height>>8&255,i.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),i.av1C,i.colr)}},{key:"avc1hev1",value:function(i){var t=i.codecType===Ei.HEVC,e=t?n.types.hvc1:n.types.avc1,s=t?n.hvcC(i):n.avcC(i),a=[new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i.width>>8&255,i.width&255,i.height>>8&255,i.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s];return t?a.push(n.box(n.types.fiel,new Uint8Array([1,0]))):i.sarRatio&&i.sarRatio.length>1&&a.push(n.pasp(i.sarRatio)),n.box.apply(n,[e].concat(a))}},{key:"avcC",value:function(i){var t,e,s=[],a=[],o;return i.sps.forEach(function(l){o=l.byteLength,s.push(o>>>8&255),s.push(o&255),s.push.apply(s,$t(l))}),i.pps.forEach(function(l){o=l.byteLength,a.push(o>>>8&255),a.push(o&255),a.push.apply(a,$t(l))}),n.box(n.types.avcC,new Uint8Array((t=(e=[1,s[3],s[4],s[5],255,224|i.sps.length]).concat.apply(e,s).concat([i.pps.length])).concat.apply(t,a)))}},{key:"hvcC",value:function(i){var t=i.hvcC;if(t instanceof ArrayBuffer||t instanceof Uint8Array)return t;var e=i.vps,s=i.sps,a=i.pps,o;if(t){var l=t.generalProfileCompatibilityFlags,u=t.generalConstraintIndicatorFlags,c=(e.length&&1)+(s.length&&1)+(a.length&&1);o=[1,t.generalProfileSpace<<6|t.generalTierFlag<<5|t.generalProfileIdc,l>>>24,l>>>16,l>>>8,l,u[0],u[1],u[2],u[3],u[4],u[5],t.generalLevelIdc,240,0,252,t.chromaFormatIdc|252,t.bitDepthLumaMinus8|248,t.bitDepthChromaMinus8|248,0,0,t.numTemporalLayers<<3|t.temporalIdNested<<2|3,c];var f=function(d){var p;o.push(d.length>>8,d.length),(p=o).push.apply(p,$t(d))};e.length&&(o.push(160,0,e.length),e.forEach(f)),s.length&&(o.push(161,0,s.length),s.forEach(f)),a.length&&(o.push(162,0,a.length),a.forEach(f))}else o=[1,1,96,0,0,0,144,0,0,0,0,0,93,240,0,252,253,248,248,0,0,15,3,160,0,1,0,24,64,1,12,1,255,255,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,153,152,9,161,0,1,0,45,66,1,1,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,160,2,128,128,45,22,89,153,164,147,43,154,128,128,128,130,0,0,3,0,2,0,0,3,0,50,16,162,0,1,0,7,68,1,193,114,180,98,64];return n.box(n.types.hvcC,new Uint8Array(o))}},{key:"pasp",value:function(i){var t=nC(i,2),e=t[0],s=t[1];return n.box(n.types.pasp,new Uint8Array([e>>24,e>>16&255,e>>8&255,e&255,s>>24,s>>16&255,s>>8&255,s&255]))}},{key:"mp4a",value:function(i){return n.box(n.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i.channelCount,0,16,0,0,0,0,i.sampleRate>>8&255,i.sampleRate&255,0,0]),i.config.length?n.esds(i.config):void 0)}},{key:"esds",value:function(i){var t=i.length,e=n.box(n.types.esds,new Uint8Array([0,0,0,0,3,23+t,0,0,0,4,15+t,64,21,0,6,0,0,0,218,192,0,0,218,192,5].concat([t]).concat(i).concat([6,1,2])));return e}},{key:"opus",value:function(i){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i.channelCount,0,16,0,0,0,0,i.sampleRate>>8&255,i.sampleRate&255,0,0]),e=i.config.length?n.dOps(i):[];return n.box(n.types.Opus,t,e)}},{key:"dOps",value:function(i){if(i.config)return i.config[4]=i.sampleRate>>>24&255,i.config[5]=i.sampleRate>>>16&255,i.config[6]=i.sampleRate>>>8&255,i.config[7]=i.sampleRate&255,n.box(n.types.dOps,i.config)}},{key:"mvex",value:function(i){var t=n.box.apply(n,[n.types.mvex].concat($t(i.map(function(e){return n.trex(e.id)}))));return t}},{key:"trex",value:function(i){var t=n.box(n.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]));return t}},{key:"trex1",value:function(i){var t=n.box(n.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255,0,0,0,1,0,0,2,0,0,0,0,0,0,1,0,0]));return t}},{key:"trex2",value:function(i){var t=n.box(n.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255,0,0,0,1,0,0,4,0,0,0,0,0,2,0,0,0]));return t}},{key:"moof",value:function(i){var t=n.box.apply(n,[n.types.moof,n.mfhd(i[0].samples?i[0].samples[0].gopId:0)].concat($t(i.map(function(e){return n.traf(e)}))));return t}},{key:"mfhd",value:function(i){var t=n.box(n.types.mfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255]));return t}},{key:"traf",value:function(i){var t=n.tfhd(i.id),e=n.tfdt(i,i.baseMediaDecodeTime),s=0,a;if(i.isVideo&&i.videoSenc&&(a=i.videoSenc,a.forEach(function(T){s=s+8,T.subsamples&&T.subsamples.length&&(s=s+2,s=s+T.subsamples.length*6)})),i.videoSencLength=s,!i.useEME||!i.isVideoEncryption&&!i.isAudioEncryption){var o=n.sdtp(i),l=76;return n.box(n.types.traf,t,e,o,n.trun(i.samples,o.byteLength+l))}else if(i.isVideoEncryption)if(i.isVideo){var u=n.saiz(i),c=n.saio(i),f=n.trun1(i),h=n.senc(i),d=n.box(n.types.traf,t,e,u,c,f,h);return d}else if(i.isAudioEncryption){var g=n.sbgp(),_=n.saiz(i),b=n.saio(i),y=n.senc(i),m=n.trun1(i),S=n.box(n.types.traf,t,e,g,_,b,y,m);return S}else{var p=n.sbgp(),v=n.trun1(i);return n.box(n.types.traf,t,e,p,v)}else if(i.isVideo){var I=n.trun1(i);return n.box(n.types.traf,t,e,I)}else{var R=n.sbgp(),N=n.saiz(i),G=n.saio(i),H=n.senc(i),ie=n.trun1(i),E=n.box(n.types.traf,t,e,R,N,G,H,ie);return E}}},{key:"sdtp",value:function(i){var t=new Bt;return i.samples.forEach(function(e){t.write(new Uint8Array(i.isVideo?[e.keyframe?32:16]:[16]))}),n.box(n.types.sdtp,this.extension(0,0),t.buffer)}},{key:"trun1",value:function(i){var t=new Bt,e=Bt.writeUint32(i.samples.length),s=null;if(i.isVideo){var a=i.videoSencLength;s=Bt.writeUint32(i.samples.length*16+a+149),!i.isVideoEncryption&&i.isAudioEncryption&&(s=Bt.writeUint32(i.samples.length*16+92))}else{var o=i.samples.length*12+124;i.isAudioEncryption&&(o=i.samples.length*12+8*i.audioSenc.length+177),s=Bt.writeUint32(o)}return i.samples.forEach(function(l){t.write(Bt.writeUint32(l.duration)),t.write(Bt.writeUint32(l.size)),t.write(Bt.writeUint32(l.keyframe?33554432:65536)),i.isVideo&&t.write(Bt.writeUint32(l.cts?l.cts:0))}),n.box(n.types.trun,this.extension(0,i.flags),e,s,t.buffer)}},{key:"senc",value:function(i){var t=new Bt,e=i.samples.length,s=i.isVideo?16:8,a=i.isVideo?2:0,o=[],l=0;return i.isVideo?(o=i.videoSenc,l=i.videoSencLength):o=i.audioSenc,l=l||s*e,t.write(Bt.writeUint32(16+l),n.types.senc,this.extension(0,a)),t.write(Bt.writeUint32(e)),o.forEach(function(u){for(var c=0;c<u.InitializationVector.length;c++)t.write(new Uint8Array([u.InitializationVector[c]]));u.subsamples&&u.subsamples.length&&(t.write(Bt.writeUint16(u.subsamples.length)),u.subsamples.forEach(function(f){t.write(Bt.writeUint16(f.BytesOfClearData)),t.write(Bt.writeUint32(f.BytesOfProtectedData))}))}),t.buffer}},{key:"saio",value:function(i){var t=i.samples.length*12+141;!i.isVideo&&i.isAudioEncryption&&(t=149);var e=new Uint8Array([1,0,0,0,0,0,0,1,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255]);return n.box(n.types.saio,e)}},{key:"saiz",value:function(i){var t=i.samples.length,e=new Uint8Array([0,0,0,0,16,t>>24&255,t>>16&255,t>>8&255,t&255]);return n.box(n.types.saiz,e)}},{key:"sbgp",value:function(){var i=new Uint8Array([114,111,108,108,0,0,0,1,0,0,1,25,0,0,0,1]);return n.box(n.types.sbgp,this.extension(0,0),i)}},{key:"extension",value:function(i,t){return new Uint8Array([i,t>>16&255,t>>8&255,t&255])}},{key:"tfhd",value:function(i){return n.box(n.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255]))}},{key:"tfdt",value:function(i,t){var e=Math.floor(t/(Lh+1)),s=Math.floor(t%(Lh+1));return i.useEME&&(i.isVideoEncryption||i.isAudioEncryption)?n.box(n.types.tfdt,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])):n.box(n.types.tfdt,new Uint8Array([1,0,0,0,e>>24,e>>16&255,e>>8&255,e&255,s>>24,s>>16&255,s>>8&255,s&255]))}},{key:"trun",value:function(i,t){var e=i.length,s=12+16*e;t+=8+s;var a=new Uint8Array(s);a.set([0,0,15,1,e>>>24&255,e>>>16&255,e>>>8&255,e&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0);for(var o=0;o<e;o++){var l=i[o],u=l.duration,c=l.size,f=l.flag,h=f===void 0?{}:f,d=l.cts,p=d===void 0?0:d;a.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,h.isLeading<<2|(h.dependsOn===null||h.dependsOn===void 0?1:h.dependsOn),h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|(h.isNonSyncSample===null||h.isNonSyncSample===void 0?1:h.isNonSyncSample),h.degradationPriority&61440,h.degradationPriority&15,p>>>24&255,p>>>16&255,p>>>8&255,p&255],12+16*o)}return n.box(n.types.trun,a)}},{key:"moovMP4",value:function(i){return n.box.apply(n,[n.types.moov,n.mvhd(i[0].duration,i[0].timescale)].concat($t(i.map(function(t){return n.trackMP4(t)}))))}},{key:"trackMP4",value:function(i){return n.box(n.types.trak,n.tkhd(i.id,i.duration,i.width,i.height),n.mdiaMP4(i))}},{key:"mdiaMP4",value:function(i){return n.box(n.types.mdia,n.mdhd(i.duration,i.timescale),n.hdlr(i.type),n.minfMP4(i))}},{key:"minfMP4",value:function(i){return n.box(n.types.minf,i.type===Si.VIDEO?n.VMHD:n.SMHD,n.DINF,n.stblMP4(i))}},{key:"stblMP4",value:function(i){var t=i.ext,e=[n.stsd(i),n.stts(t.stts),n.stsc(t.stsc),n.stsz(t.stsz),n.stco(t.stco)];return t.stss.length&&e.push(n.stss(t.stss)),t.ctts.length&&e.push(n.ctts(t.ctts)),n.box.apply(n,[n.types.stbl].concat(e))}},{key:"stts",value:function(i){var t=i.length,e=new Uint8Array(8*t),s=0;return i.forEach(function(a){var o=a.value,l=a.count;e.set([l>>24,l>>16&255,l>>8&255,l&255,o>>24,o>>16&255,o>>8&255,o&255],s),s+=8}),n.box(n.types.stts,ln(new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"stsc",value:function(i){var t=i.length,e=new Uint8Array(12*t),s=0;return i.forEach(function(a){var o=a.firstChunk,l=a.samplesPerChunk,u=a.sampleDescIndex;e.set([o>>24,o>>16&255,o>>8&255,o&255,l>>24,l>>16&255,l>>8&255,l&255,u>>24,u>>16&255,u>>8&255,u&255],s),s+=12}),n.box(n.types.stsc,ln(new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"stsz",value:function(i){var t=i.length,e=new Uint8Array(4*t),s=0;return i.forEach(function(a){e.set([a>>24,a>>16&255,a>>8&255,a&255],s),s+=4}),n.box(n.types.stsz,ln(new Uint8Array([0,0,0,0,0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"stco",value:function(i){var t=i.length,e=new Uint8Array(4*t),s=0;return i.forEach(function(a){e.set([a>>24,a>>16&255,a>>8&255,a&255],s),s+=4}),n.box(n.types.stco,ln(new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"stss",value:function(i){var t=i.length,e=new Uint8Array(4*t),s=0;return i.forEach(function(a){e.set([a>>24,a>>16&255,a>>8&255,a&255],s),s+=4}),n.box(n.types.stss,ln(new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"ctts",value:function(i){var t=i.length,e=new Uint8Array(8*t),s=0;return i.forEach(function(a){var o=a.value,l=a.count;e.set([l>>24,l>>16&255,l>>8&255,l&255,o>>24,o>>16&255,o>>8&255,o&255],s),s+=8}),n.box(n.types.ctts,ln(new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"styp",value:function(){return n.box(n.types.styp,new Uint8Array([109,115,100,104,0,0,0,0,109,115,100,104,109,115,105,120]))}},{key:"sidx",value:function(i){var t=i.timescale,e=i.samples[0].duration,s=e*i.samples.length,a=i.samples[0].sampleOffset*e,o=8;i.samples.forEach(function(h){o+=h.size});var l=0;if(i.isVideo){var u=0,c;i.videoSenc&&(c=i.videoSenc),i.isVideo&&c.forEach(function(h){u=u+8,h.subsamples&&h.subsamples.length&&(u=u+2,u=u+h.subsamples.length*6)}),i.videoSencLength=u,l=o+141+i.samples.length*16+u,i.useEME&&i.isAudioEncryption&&!i.isVideoEncryption&&(l=o+i.samples.length*16+84)}else l=o+116+i.samples.length*12,i.useEME&&i.isAudioEncryption&&(l=o+169+i.samples.length*12+8*i.audioSenc.length);var f=new Uint8Array([0,0,0,0,0,0,0,i.id&255,t>>24&255,t>>16&255,t>>8&255,t&255,a>>24&255,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,1,0,l>>16&255,l>>8&255,l&255,s>>24&255,s>>16&255,s>>8&255,s&255,144,0,0,0]);return n.box(n.types.sidx,f)}},{key:"mdat",value:function(i){var t=n.box(n.types.mdat,i);return t}}]),n}();X(Me,"types",["Opus","dOps","av01","av1C","avc1","avcC","hvc1","hvcC","dinf","dref","esds","ftyp","hdlr","mdat","mdhd","mdia","mfhd","minf","moof","moov","mp4a","mvex","mvhd","pasp","stbl","stco","stsc","stsd","stsz","stts","tfdt","tfhd","traf","trak","trex","tkhd","vmhd","smhd","ctts","stss","styp","pssh","sidx","sbgp","saiz","saio","senc","trun","encv","enca","sinf","btrt","frma","tenc","schm","schi","mehd","fiel","sdtp"].reduce(function(n,r){return n[r]=[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3)],n},Object.create(null)));X(Me,"HDLR_TYPES",{video:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),audio:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])});X(Me,"FTYPAVC1",Me.box(Me.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49])));X(Me,"FTYPHEV1",Me.box(Me.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,104,101,118,49])));X(Me,"DINF",Me.box(Me.types.dinf,Me.box(Me.types.dref,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]))));X(Me,"VMHD",Me.box(Me.types.vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])));X(Me,"SMHD",Me.box(Me.types.smhd,new Uint8Array([0,0,0,0,0,0,0,0])));X(Me,"StblTable",new Uint8Array([0,0,0,0,0,0,0,0]));X(Me,"STTS",Me.box(Me.types.stts,Me.StblTable));X(Me,"STSC",Me.box(Me.types.stsc,Me.StblTable));X(Me,"STSZ",Me.box(Me.types.stsz,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])));X(Me,"STCO",Me.box(Me.types.stco,Me.StblTable));var rv=function(){function n(r,i){ht(this,n),this.name=r||"",this._prefix="[".concat(this.name,"]"),n.disabled=i}return dt(n,[{key:"debug",value:function(){var i;if(!n.disabled){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];(i=console).debug.apply(i,[this._prefix].concat(e))}}},{key:"log",value:function(){var i;if(!n.disabled){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];(i=console).log.apply(i,[this._prefix].concat(e))}}},{key:"warn",value:function(){var i;if(!n.disabled){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];(i=console).warn.apply(i,[this._prefix].concat(e))}}},{key:"error",value:function(){var i;if(!n.disabled){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];(i=console).error.apply(i,[this._prefix].concat(e))}}},{key:"table",value:function(){var i;n.disabled||(console.group(this._prefix),(i=console).table.apply(i,arguments),console.groupEnd())}}],[{key:"enable",value:function(){n.disabled=!1}},{key:"disable",value:function(){n.disabled=!0}}]),n}();X(rv,"disabled",!0);var PC=function(){function n(r,i,t){ht(this,n),this.videoTrack=r,this.audioTrack=i;var e=/Chrome\/([^.]+)/.exec(navigator.userAgent);this.forceFirstIDR=e&&Number(e[1])<50,this.log=new rv("FMP4Remuxer",t&&t.openLog?!t.openLog:!0)}return dt(n,[{key:"remux",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=this.videoTrack,s=this.audioTrack,a=e.exist(),o=s.exist(),l,u,c,f=[];i&&(t&&t.initMerge?(a&&f.push(this.videoTrack),o&&f.push(this.audioTrack),c=Me.initSegment(f)):(a&&(l=Me.initSegment([this.videoTrack])),o&&(u=Me.initSegment([this.audioTrack]))));var h,d;return a&&e.hasSample()&&(h=this._remuxVideo()),o&&s.hasSample()&&(d=this._remuxAudio()),e.samples=[],s.samples=[],{initSegment:c,videoInitSegment:l,audioInitSegment:u,videoSegment:h,audioSegment:d}}},{key:"_remuxVideo",value:function(){var i=this.videoTrack;this.forceFirstIDR&&(i.samples[0].flag={dependsOn:2,isNonSyncSample:0});var t=i.samples,e=/av01/.test(i.codec),s=0;e?t.forEach(function(y){s+=y.data.byteLength}):t.forEach(function(y){s+=y.units.reduce(function(m,S){return m+S.byteLength},0),s+=y.units.length*4});var a=new Uint8Array(s);if(e)for(var o=0,l=t.length,u=0,c;o<l;o++)c=t[o],a.set(c.data,u),c.size=c.data.byteLength,u+=c.size;else for(var f=new DataView(a.buffer),h=function(m,S){S=t[d];var I=0;S.units.forEach(function(R){f.setUint32(m,R.byteLength),m+=4,a.set(R,m),m+=R.byteLength,I+=4+R.byteLength}),S.size=I,v=m,g=S},d=0,p=t.length,v=0,g;d<p;d++)h(v,g);var _=Me.mdat(a),b=Me.moof([i]);return ln(b,_)}},{key:"_remuxAudio",value:function(){var i=this.audioTrack,t=new Uint8Array(i.samples.reduce(function(a,o){return a+o.size},0));i.samples.reduce(function(a,o){return t.set(o.data,a),a+o.size},0);var e=Me.mdat(t),s=Me.moof([i]);return ln(s,e)}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset()}}]),n}(),xC=function(){function n(){_t(this,n);var r=window.crypto||window.msCrypto;this.subtle=r&&(r.subtle||r.webkitSubtle),this.externalDecryptor=null}return bt(n,[{key:"destroy",value:function(){var i;(i=this.externalDecryptor)!==null&&i!==void 0&&i.destroy&&this.externalDecryptor.destroy()}},{key:"decrypt",value:function(i,t){if(!(!i&&!t)){var e=[];return i&&(e[0]=this._decryptSegment(i)),t&&(e[1]=this._decryptSegment(t)),Promise.all(e)}}},{key:"_decryptSegment",value:function(){var r=Ke(de().mark(function t(e){var s;return de().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(s=e.data,!e.key){o.next=5;break}return o.next=4,this._decryptData(e.data,e.key,e.keyIv);case 4:s=o.sent;case 5:if(e.map){o.next=7;break}return o.abrupt("return",s);case 7:return o.abrupt("return",ba(e.map,s));case 8:case"end":return o.stop()}},t,this)}));function i(t){return r.apply(this,arguments)}return i}()},{key:"_decryptData",value:function(){var r=Ke(de().mark(function t(e,s,a){var o;return de().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!this.externalDecryptor){u.next=6;break}return u.next=3,this.externalDecryptor.decrypt(e,s,a);case 3:return u.abrupt("return",u.sent);case 6:if(this.subtle){u.next=8;break}throw new Error("crypto is not defined");case 8:return u.next=10,this.subtle.importKey("raw",s,{name:"AES-CBC"},!1,["encrypt","decrypt"]);case 10:return o=u.sent,u.t0=Uint8Array,u.next=14,this.subtle.decrypt({name:"AES-CBC",iv:a},o,e);case 14:return u.t1=u.sent,u.abrupt("return",new u.t0(u.t1));case 16:case"end":return u.stop()}},t,this)}));function i(t,e,s){return r.apply(this,arguments)}return i}()}]),n}(),Ge=Qe(Qe({},Ee),{},{STREAM_PARSED:"core.streamparsed",NO_AUDIO_TRACK:"core.noaudiotrack",SUBTITLE_SEGMENTS:"core.subtitlesegments",SUBTITLE_PLAYLIST:"core.subtitleplaylist",SEI_PAYLOAD_TIME:"core.seipayloadtime",APPEND_COST:"core.appendcost"}),kl=new Kn("Transmuxer"),Bh=function(){function n(r,i,t,e){_t(this,n),D(this,"_initSegmentId",""),this.hls=r,this._demuxer=i?new IC:new iv(null,null,null,e),this._isMP4=i,t&&(this._remuxer=new PC(this._demuxer.videoTrack,this._demuxer.audioTrack))}return bt(n,[{key:"transmux",value:function(i,t,e,s,a,o){var l=this._demuxer;try{this._isMP4?l.demux(i,t):l.demuxAndFix(ba(i,t),e,s,a)}catch(I){throw new ct(Ne.DEMUX,Ne.SUB_TYPES.HLS,I)}var u=l.videoTrack,c=l.audioTrack,f=l.metadataTrack,h={codec:u.codec,timescale:u.timescale,firstDts:u.firstDts/u.timescale,firstPts:u.firstPts/u.timescale,duration:u.samplesDuration/u.timescale},d={codec:c.codec,timescale:c.timescale,firstDts:c.firstDts/u.timescale,firstPts:c.firstPts/u.timescale,duration:c.samplesDuration/u.timescale,container:c.container},p="".concat(u.codec,"/").concat(u.width,"/").concat(u.height,"/").concat(c.codec,"/").concat(c.config);if(p!==this._initSegmentId&&(this._initSegmentId=p,o=!0),this._fireEvents(u,c,f,e||o),this.hls.emit(Ge.DEMUXED_TRACK,{videoTrack:u,audioTrack:c}),this._remuxer){o&&this.hls.isLive&&!this.hls.config.mseLowLatency&&(u.duration=this.hls.totalDuration*u.timescale,c.duration=this.hls.totalDuration*c.timescale);try{var v=this._remuxer.remux(o),g=v.videoInitSegment,_=v.videoSegment,b=v.audioInitSegment,y=v.audioSegment,m=ba(g,_),S=ba(b,y);return[m?Qe(Qe({},h),{},{data:m}):void 0,S?Qe(Qe({},d),{},{data:S}):void 0]}catch(I){throw new ct(Ne.REMUX,Ne.SUB_TYPES.FMP4,I)}}else return[u,c]}},{key:"_fireEvents",value:function(i,t,e,s){var a=this,o=[i,t],l="discontinuity: ".concat(s);o.forEach(function(u){var c;(c=u.samples)!==null&&c!==void 0&&c.length&&(l+="; ".concat(u.samples.length," ").concat(u.type===Si.VIDEO?"video":"audio"," samples, firstDts/firstPts/duration: ").concat((u.firstDts/u.timescale).toFixed(3),"/").concat((u.firstPts/u.timescale).toFixed(3),"/").concat((u.samplesDuration/u.timescale).toFixed(3))),s&&u.exist()&&a.hls.emit(Ge.METADATA_PARSED,{type:u.type,track:u,meta:Qe({codec:u.codec,timescale:u.timescale,baseDts:u.baseDts},u.type===Si.VIDEO?{width:u.width,height:u.height,sarRatio:u.sarRatio}:{codec:u.codec,channelCount:u.channelCount,sampleRate:u.sampleRate})})}),kl.debug(l),i.warnings.forEach(function(u){var c;switch(u.type){case yn.LARGE_AV_SHIFT:c=Ge.LARGE_AV_FIRST_FRAME_GAP_DETECT;break;case yn.LARGE_VIDEO_GAP:c=Ge.LARGE_VIDEO_DTS_GAP_DETECT;break;case yn.LARGE_VIDEO_GAP_BETWEEN_CHUNK:c=Ge.MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT;break}c&&a.hls.emit(Ge.STREAM_EXCEPTION,Qe(Qe({},u),{},{type:c})),kl.warn("video exception",u)}),t.warnings.forEach(function(u){var c;switch(u.type){case yn.LARGE_AUDIO_GAP:c=Ge.LARGE_AUDIO_DTS_GAP_DETECT;break;case yn.AUDIO_FILLED:c=Ge.AUDIO_GAP_DETECT;break;case yn.AUDIO_DROPPED:c=Ge.AUDIO_OVERLAP_DETECT;break}c&&a.hls.emit(Ge.STREAM_EXCEPTION,Qe(Qe({},u),{},{type:c})),kl.warn("audio exception",u)}),i.samples.forEach(function(u){u.keyframe&&a.hls.emit(Ge.KEYFRAME,{pts:u.pts})}),e.seiSamples.forEach(function(u){a.hls.emit(Ge.SEI,Qe(Qe({},u),{},{originPts:u.originPts/90,sei:{code:u.data.type,content:u.data.payload,dts:u.pts}}))})}}]),n}(),DC=["data"],OC=["data"],Mh=new Kn("BufferService"),LC=function(){function n(r){var i=this;_t(this,n),D(this,"_decryptor",new xC),D(this,"_transmuxer",null),D(this,"_mse",null),D(this,"_softVideo",null),D(this,"_sourceCreated",!1),D(this,"_needInitSegment",!0),D(this,"_directAppend",!1),this.hls=r,r.config.softDecode?this._softVideo=r.media:(this._mse=new Gt(null,{preferMMS:r.config.preferMMS}),r.config.url&&this._mse.bindMedia(r.media).then(function(t){i.hls.emit(Ee.MEDIASOURCE_OPENED,t)})),r.config.decryptor&&(this._decryptor.externalDecryptor=r.config.decryptor)}return bt(n,[{key:"baseDts",get:function(){var i,t,e;return(i=this._transmuxer)===null||i===void 0||(t=i._demuxer)===null||t===void 0||(e=t._fixer)===null||e===void 0?void 0:e._baseDts}},{key:"nbSb",get:function(){var i;return(i=this._mse)!==null&&i!==void 0&&i._sourceBuffer?Object.keys(this._mse._sourceBuffer).length:0}},{key:"msIsOpened",get:function(){var i;return(i=this._mse)===null||i===void 0?void 0:i.isOpened}},{key:"msHasOpTasks",get:function(){var i;return(i=this._mse)===null||i===void 0?void 0:i.hasOpTasks}},{key:"msStreaming",get:function(){var i;return(i=this._mse)===null||i===void 0?void 0:i.streaming}},{key:"updateDuration",value:function(){var r=Ke(de().mark(function t(e){return de().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(Mh.debug("update duration",e),!this._mse){a.next=9;break}if(this._mse.isOpened){a.next=5;break}return a.next=5,this._mse.open();case 5:return a.next=7,this._mse.updateDuration(e);case 7:a.next=10;break;case 9:this._softVideo&&(this._softVideo.duration=e);case 10:case"end":return a.stop()}},t,this)}));function i(t){return r.apply(this,arguments)}return i}()},{key:"createSource",value:function(i,t,e,s){if(!this._sourceCreated){var a=i||t;if(a){if(iv.probe(a))this._transmuxer||(this._transmuxer=new Bh(this.hls,!1,!this._softVideo,this.hls.config.fixerConfig));else if(st.probe(a))if(this._softVideo)this._transmuxer||(this._transmuxer=new Bh(this.hls,!0,null,this.hls.config.fixerConfig));else{this._directAppend=!0;var o=!1;i&&!e&&st.findBox(i,["moov","trak"]).forEach(function(l){var u=st.findBox(l.data,["trak","mdia","minf","stbl","stsd"])[0];if(u){var c=st.stsd(u).entries[0];if(c){if(c.hvcC)e=c.hvcC.codec||"hev1.1.6.L93.B0";else if(c.avcC)e=c.avcC.codec;else if(c.sampleRate||c.esds){var f;s=((f=c.esds)===null||f===void 0?void 0:f.codec)||"mp4a.40.2",o=!0}}}}),t&&!s&&st.findBox(t,["moov","trak","mdia","minf","stbl","stsd"]).forEach(function(l){var u=st.stsd(l).entries[0];u&&u.esds&&(s=u.esds.codec)}),i&&!e&&(e="avc1.42e01e"),t&&!s&&(s="mp4a.40.2"),o&&(e+=", ".concat(s),s=""),this._createMseSource(e,s)}else throw new ct(Ne.OTHER,null,null,null,"unsupported stream");this._softVideo&&(this._sourceCreated=!0)}}}},{key:"appendBuffer",value:function(){var r=Ke(de().mark(function t(e,s,a,o,l,u,c){var f=this,h,d,p,v,g,_,b,y,m,S,I,R,N,G,H;return de().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!(a!=null&&a.length)&&!(o!=null&&o.length))){E.next=2;break}return E.abrupt("return");case 2:if(h=function(){var P;if((P=f.hls)!==null&&P!==void 0&&P.emit){var V;(V=f.hls)===null||V===void 0||V.emit(Ee.APPEND_BUFFER,{start:e.start,end:e.end})}},!this._directAppend){E.next=8;break}return d=[],a&&d.push(this._mse.append(Gt.VIDEO,a)),o&&d.push(this._mse.append(Gt.AUDIO,o)),E.abrupt("return",Promise.all(d).then(h));case 8:if(p=this._needInitSegment||l,v=this._transmuxer.transmux(a,o,p,u,c,this._needInitSegment||l),g=ai(v,2),_=g[0],b=g[1],o&&s&&s?.setTrackExist(!1,!0),o&&e&&e?.setTrackExist(!0,!1),s||e?.setTrackExist(!!_,!!b),_&&!b&&this.hls.emit(Ge.NO_AUDIO_TRACK),!this._softVideo){E.next=20;break}this._softVideo.appendBuffer(_,b),this._needInitSegment=!1,h(),E.next=32;break;case 20:if(!this._mse){E.next=32;break}return y=!this._sourceCreated,y&&this._createMseSource(_?.codec,b?.codec,b?.container),this._needInitSegment=!1,m=this._mse,S=[],p&&!y&&this._handleCodecChange(_,b).forEach(function(T){return S.push(T)}),_&&(I=_.data,R=cu(_,DC),S.push(m.append(Gt.VIDEO,I,R))),b&&(N=b.data,G=cu(b,OC),S.push(m.append(Gt.AUDIO,N,G))),H=Promise.all(S),H.then(h),E.abrupt("return",H);case 32:case"end":return E.stop()}},t,this)}));function i(t,e,s,a,o,l,u){return r.apply(this,arguments)}return i}()},{key:"removeBuffer",value:function(){var r=Ke(de().mark(function t(){var e=this,s,a,o,l=arguments;return de().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s=l.length>0&&l[0]!==void 0?l[0]:0,a=l.length>1&&l[1]!==void 0?l[1]:1/0,o=this.hls.media,!(!this._mse||!o||s<0||a<s||s>=this._mse.duration)){c.next=5;break}return c.abrupt("return");case 5:return c.abrupt("return",this._mse.clearBuffer(s,a).then(function(){return e.hls.emit(Ee.REMOVE_BUFFER,{start:s,end:a,removeEnd:a})}));case 6:case"end":return c.stop()}},t,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"evictBuffer",value:function(){var r=Ke(de().mark(function t(e){var s,a,o,l;return de().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s=this.hls.media,!(!this._mse||!s||!e||e<0)){c.next=3;break}return c.abrupt("return");case 3:if(a=s.currentTime,o=a-e,!(o<=0)){c.next=7;break}return c.abrupt("return");case 7:if(l=en.start(en.get(s)),!(l+1>=o)){c.next=10;break}return c.abrupt("return");case 10:return c.abrupt("return",this.removeBuffer(0,o));case 11:case"end":return c.stop()}},t,this)}));function i(t){return r.apply(this,arguments)}return i}()},{key:"clearAllBuffer",value:function(){var r=Ke(de().mark(function t(){return de().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this._mse){s.next=2;break}return s.abrupt("return",this._mse.clearAllBuffer());case 2:case"end":return s.stop()}},t,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"decryptBuffer",value:function(i,t){return this._decryptor.decrypt(i,t)}},{key:"reset",value:function(){var r=Ke(de().mark(function t(){var e,s=arguments;return de().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(e=s.length>0&&s[0]!==void 0?s[0]:!1,!(this._mse&&!e)){o.next=8;break}return this._transmuxer=null,this._sourceCreated=!1,o.next=6,this._mse.unbindMedia();case 6:return o.next=8,this._mse.bindMedia(this.hls.media);case 8:this._needInitSegment=!0,this._directAppend=!1;case 10:case"end":return o.stop()}},t,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"endOfStream",value:function(){var r=Ke(de().mark(function t(){return de().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this._mse){s.next=5;break}if(!this._sourceCreated){s.next=5;break}return s.next=4,this._mse.endOfStream();case 4:this.hls.emit(Ee.BUFFEREOS);case 5:this._softVideo&&this._softVideo.endOfStream();case 6:case"end":return s.stop()}},t,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"setLiveSeekableRange",value:function(){var r=Ke(de().mark(function t(e,s){return de().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:this._mse&&this._mse.setLiveSeekableRange(e,s);case 1:case"end":return o.stop()}},t,this)}));function i(t,e){return r.apply(this,arguments)}return i}()},{key:"detachMedia",value:function(){var r=Ke(de().mark(function t(){return de().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this._mse){s.next=3;break}return s.next=3,this._mse.unbindMedia();case 3:case"end":return s.stop()}},t,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"destroy",value:function(){var r=Ke(de().mark(function t(){var e;return de().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return(e=this._decryptor)===null||e===void 0||e.destroy(),a.next=3,this.detachMedia();case 3:this._decryptor=null,this._mse=null,this._softVideo=null;case 6:case"end":return a.stop()}},t,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"_createMseSource",value:function(i,t,e){Mh.debug("create mse source, videoCodec=".concat(i,", audioCodec=").concat(t));var s=this._mse;s&&(i&&(s.createSource(Gt.VIDEO,"video/mp4;codecs=".concat(i)),this._sourceCreated=!0),t?(s.createSource(Gt.AUDIO,"audio/mp4;codecs=".concat(t)),this._sourceCreated=!0):e&&(s.createSource(Gt.AUDIO,"".concat(e,';codecs=""')),this._sourceCreated=!0),this.hls.emit(Ee.SOURCEBUFFER_CREATED))}},{key:"_handleCodecChange",value:function(i,t){var e=[],s=this._mse,a=[{type:Gt.VIDEO,codecs:i?.codec},{type:Gt.AUDIO,codecs:t?.codec}];return a.filter(function(o){return!!o.codecs}).forEach(function(o){var l=o.type,u=o.codecs,c=s.getSourceBuffer(l);if(c){var f=u.split(",")[0];new RegExp(f,"ig").test(c.mimeType)||e.push(s.changeType(l,"".concat(l,"/mp4;codecs=").concat(u)))}}),e}},{key:"seamlessSwitch",value:function(){this._needInitSegment=!0}},{key:"isFull",value:function(){var i,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Gt.VIDEO;return(i=this._mse)===null||i===void 0?void 0:i.isFull(t)}}]),n}();function BC(n){var r=n?.media||document.createElement("video");return Qe(Qe({maxPlaylistSize:50,retryCount:3,retryDelay:1e3,pollRetryCount:2,loadTimeout:1e4,manifestLoadTimeout:1e4,preloadTime:30,softDecode:!1,bufferBehind:10,maxJumpDistance:3,startTime:0,useLowLatency:!0,targetLatency:10,maxLatency:20,allowedStreamTrackChange:!0,seiInTime:!1,manifestList:[],minSegmentsStartPlay:3,preferMMS:!1,preferMMSStreaming:!1,mseLowLatency:!0,fixerConfig:{forceFixLargeGap:!1,largeGapThreshold:5}},n),{},{media:r})}var MC=bt(function n(){_t(this,n),D(this,"version",0),D(this,"streams",[]),D(this,"isMaster",!0)}),sv={Audio:"AUDIO",SubTitle:"SUBTITLE"},aa={CLEAR_KEY:"org.w3.clearkey",FAIRPLAY:["urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2","com.apple.streamingkeydelivery"],WIDEVINE:["urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha","com.widevine"],PLAYREADY:["urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready"]};function av(n){for(var r=[],i=0;i<n.length;i++)Array.isArray(n[i])?r=r.concat(av(n[i])):r.push(n[i]);return r}var cc=bt(function n(){_t(this,n),D(this,"id",0),D(this,"url",""),D(this,"default",!1),D(this,"autoSelect",!1),D(this,"forced",!1),D(this,"group",""),D(this,"name",""),D(this,"lang",""),D(this,"segments",[]),D(this,"endSN",0)}),FC=function(n){Po(i,n);var r=xo(i);function i(){var t;_t(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),D(Oe(t),"mediaType",sv.Audio),D(Oe(t),"channels",0),t}return bt(i)}(cc),NC=function(n){Po(i,n);var r=xo(i);function i(){var t;_t(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),D(Oe(t),"mediaType",sv.SubTitle),t}return bt(i)}(cc),UC=bt(function n(){_t(this,n),D(this,"id",0),D(this,"bitrate",0),D(this,"width",0),D(this,"height",0),D(this,"name",""),D(this,"url",""),D(this,"audioCodec",""),D(this,"videoCodec",""),D(this,"textCodec",""),D(this,"audioGroup",""),D(this,"audioStreams",[]),D(this,"subtitleStreams",[]),D(this,"closedCaptionsStream",[])}),HC=bt(function n(){_t(this,n),D(this,"version",0),D(this,"url",""),D(this,"type",""),D(this,"startCC",0),D(this,"endCC",0),D(this,"startSN",0),D(this,"endSN",0),D(this,"totalDuration",0),D(this,"targetDuration",0),D(this,"partTargetDuration",0),D(this,"canSkipUntil",0),D(this,"canSkipDateRanges",!1),D(this,"skippedSegments",0),D(this,"canBlockReload",!1),D(this,"partHoldBack",0),D(this,"live",!0),D(this,"lowLatency",!1),D(this,"endPartIndex",0),D(this,"segments",[]),D(this,"dateRanges",{}),D(this,"skippedSegments",0)}),oa=function(){function n(r){_t(this,n),D(this,"sn",0),D(this,"cc",0),D(this,"url",""),D(this,"parentUrl",""),D(this,"title",""),D(this,"start",0),D(this,"duration",0),D(this,"dataTime",""),D(this,"key",null),D(this,"byteRange",null),D(this,"isInitSegment",!1),D(this,"initSegment",null),D(this,"isLast",!1),D(this,"hasAudio",!1),D(this,"hasVideo",!1),D(this,"independent",!1),D(this,"partIndex",0),this.parentUrl=r}return bt(n,[{key:"end",get:function(){return this.start+this.duration}},{key:"setTrackExist",value:function(i,t){this.hasVideo=i,this.hasAudio=t}},{key:"setByteRange",value:function(i,t){this.byteRange=[0];var e=i.split("@");e.length===1&&t&&t.byteRange?(this.byteRange[0]=t.byteRange[1]||0,this.byteRange[0]&&(this.byteRange[0]+=1)):this.byteRange[0]=parseInt(e[1]),this.byteRange[1]=this.byteRange[0]+parseInt(e[0])-1}}]),n}(),VC=function(){function n(r){_t(this,n),D(this,"method",""),D(this,"url",""),D(this,"iv",null),D(this,"keyFormat",""),D(this,"keyFormatVersions",""),r instanceof n&&(this.method=r.method,this.url=r.url,this.keyFormat=r.keyFormat,this.keyFormatVersions=r.keyFormatVersions,r.iv&&(this.iv=new Uint8Array(r.iv)))}return bt(n,[{key:"clone",value:function(i){var t=new n(this);return i!=null&&t.setIVFromSN(i),t}},{key:"setIVFromSN",value:function(i){if(!this.iv&&this.method==="AES-128"&&typeof i=="number"&&this.url){this.iv=new Uint8Array(16);for(var t=12;t<16;t++)this.iv[t]=i>>8*(15-t)&255}}},{key:"isSegmentEncrypted",value:function(){var i=this.method;return i==="AES-128"}},{key:"isValidKeySystem",value:function(){var i=av([aa.CLEAR_KEY,aa.FAIRPLAY,aa.WIDEVINE,aa.PLAYREADY]).indexOf(this.keyFormat)>-1;if(!i)return!1;var t=["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)>-1;return!!t}},{key:"isSupported",value:function(){return this.method?this.isSegmentEncrypted()?!0:!!this.isValidKeySystem():!1}}]),n}(),jC=function(){function n(r,i,t){_t(this,n),this.msn=r,this.part=i,this.skip=t}return bt(n,[{key:"addDirectives",value:function(i){var t=new self.URL(i);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}]),n}(),GC=/^#(EXT[^:]*)(?::(.*))?$/,Fh=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g,zC=/^(?:[a-zA-Z0-9+\-.]+:)?\/\//,KC=/^((?:[a-zA-Z0-9+\-.]+:)?\/\/[^/?#]*)?([^?#]*\/)?/;function YC(n){return n.split(/[\r\n]/).map(function(r){return r.trim()}).filter(Boolean)}function ov(n){var r=n.match(GC);if(!(!r||!r[1]))return[r[1].replace("EXT-X-",""),r[2]]}function Mn(n){for(var r={},i=Fh.exec(n);i;)r[i[1]]=i[2]||i[3],i=Fh.exec(n);return r}function mr(n,r){if(!r||!n||zC.test(n))return n;var i=KC.exec(r);return i?n[0]==="/"?i[1]+n:i[1]+i[2]+n:n}var QC={audio:[/^mp4a/,/^vorbis$/,/^opus$/,/^flac$/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Il(n,r){var i=QC[n];if(!(!i||!r||!r.length)){for(var t=0;t<i.length;t++)for(var e=0;e<r.length;e++)if(i[t].test(r[e]))return r[e]}}function WC(n,r){var i;if(r){for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&n[t]!==r[t]){i=t;break}}var e=null;n.DURATION&&(e=parseFloat(n.DURATION),Number.isFinite(e)?n._endDate&&(e=(n._endDate.getTime()-n._startDate.getTime())/1e3):e=null);var s=XC(n.CUE||n["X-CUE"],{pre:!1,post:!1,once:!1});return!!n.ID&&!i&&Number.isFinite(n._startDate.getTime())&&(e===null||e>=0)&&(n.END_ON_NEXT!=="YES"||!!n.CLASS)&&(!n.CUE||!s.pre&&!s.post||s.pre!==s.post)&&(n.CLASS!=="com.apple.hls.interstitial"||"X-ASSET-URI"in n||"X-ASSET-LIST"in n)}function XC(n,r){return(n?n.split(/[ ,]+/):[]).reduce(function(i,t){return i[t.toLowerCase()]=!0,i},r)}function qC(n,r){for(var i=new MC,t=0,e,s=[],a=[];e=n[t++];){var o=ov(e);if(o){var l=ai(o,2),u=l[0],c=l[1];if(u==="VERSION")i.version=parseInt(c);else if(u==="MEDIA"&&c){var f=Mn(c),h=void 0;switch(f.TYPE){case"AUDIO":h=new FC;break;case"SUBTITLES":h=new NC;break;default:h=new cc}h.url=mr(f.URI,r),h.default=f.DEFAULT==="YES",h.autoSelect=f.AUTOSELECT==="YES",h.group=f["GROUP-ID"],h.name=f.NAME,h.lang=f.LANGUAGE,f.CHANNELS&&(h.channels=Number(f.CHANNELS.split("/")[0]),Number.isNaN(h.channels)&&(h.channels=0)),f.TYPE==="AUDIO"&&f.URI&&s.push(h),f.TYPE==="SUBTITLES"&&a.push(h)}else if(u==="STREAM-INF"&&c){var d=new UC,p=Mn(c);if(d.bitrate=parseInt(p["AVERAGE-BANDWIDTH"]||p.BANDWIDTH),d.name=p.NAME,d.url=mr(n[t++],r),p.RESOLUTION){var v=p.RESOLUTION.split("x"),g=ai(v,2),_=g[0],b=g[1];d.width=parseInt(_),d.height=parseInt(b)}if(p.CODECS){var y=p.CODECS.split(/[ ,]+/).filter(Boolean);d.videoCodec=Il("video",y),d.audioCodec=Il("audio",y),d.textCodec=Il("text",y)}d.audioGroup=p.AUDIO,d.subtitleGroup=p.SUBTITLES,i.streams.push(d)}}}return i.streams.forEach(function(m,S){m.id=S}),s.length&&(s.forEach(function(m,S){m.id=S}),i.streams.forEach(function(m){m.audioGroup&&(m.audioStreams=s.filter(function(S){return S.group===m.audioGroup}))})),a.length&&(a.forEach(function(m,S){m.id=S}),i.streams.forEach(function(m){m.subtitleGroup&&(m.subtitleStreams=a.filter(function(S){return S.group===m.subtitleGroup}))})),i}function JC(n,r,i){var t=new HC;t.url=r;for(var e=new oa(r),s=null,a=null,o=0,l=0,u=0,c=0,f,h=!1,d=0;f=n[c++];){if(f[0]!=="#"){if(t.lowLatency){l++;continue}e.sn=l,e.cc=u,e.url=mr(f,r),a&&(e.key=a.clone(l)),s&&(e.initSegment=s),t.segments.push(e),e=new oa(r),l++;continue}var p=ov(f);if(p){var v=ai(p,2),g=v[0],_=v[1];switch(g){case"VERSION":t.version=parseInt(_);break;case"PLAYLIST-TYPE":t.type=_?.toUpperCase();break;case"TARGETDURATION":t.targetDuration=parseFloat(_);break;case"PART-INF":{i&&(t.lowLatency=!0);var b=Mn(_);b["PART-TARGET"]&&(t.partTargetDuration=parseFloat(b["PART-TARGET"]))}break;case"SERVER-CONTROL":{var y=Mn(_);t.canBlockReload=y["CAN-BLOCK-RELOAD"]==="YES",t.partHoldBack=parseFloat(y["PART-HOLD-BACK"]||0),t.canSkipUntil=parseFloat(y["CAN-SKIP-UNTIL"]||0),t.canSkipDateRanges=t.canSkipUntil>0&&y["CAN-SKIP-DATERANGES"]==="YES"}break;case"ENDLIST":h=!0;break;case"MEDIA-SEQUENCE":l=t.startSN=parseInt(_);break;case"DISCONTINUITY-SEQUENCE":u=t.startCC=parseInt(_);break;case"DISCONTINUITY":u++;break;case"BYTERANGE":e.setByteRange(_,t.segments[t.segments.length-1]);break;case"PART":{if(!t.lowLatency)break;var m=Mn(_);e.duration=parseFloat(m.DURATION),e.independent=m.INDEPENDENT==="YES",e.sn=l,e.cc=u,e.partIndex=d,e.start=o,e.duration=parseFloat(m.DURATION),o+=e.duration,e.url=mr(m.URI,r),a&&(e.key=a.clone(l)),s&&(e.initSegment=s),t.segments.push(e),e=new oa(r),d++}break;case"PRELOAD-HINT":{var S=Mn(_);if(t.preloadHint=S,S.TYPE==="PART"&&S.URI){var I=S.URI.split(".ts")[0].split("-");t.nextSN=I[3],t.nextIndex=I[I.length-1]}}break;case"PROGRAM-DATE-TIME":e.dataTime=_;break;case"EXTINF":{if(t.lowLatency){d=0;break}var R=_.split(","),N=ai(R,2),G=N[0],H=N[1];e.start=o,e.duration=parseFloat(G),o+=e.duration,e.title=H}break;case"KEY":{var ie=Mn(_);if(ie.METHOD==="NONE"){a=null;break}if(a=new VC,a.method=ie.METHOD,a.url=/^blob:/.test(ie.URI)?ie.URI:mr(ie.URI,r),a.keyFormat=ie.KEYFORMAT||"identity",a.keyFormatVersions=ie.KEYFORMATVERSIONS,!a.isSupported())throw new Error("encrypt ".concat(ie.METHOD,"/").concat(ie.KEYFORMAT," is not supported"));if(ie.IV){var E=ie.IV.slice(2);E=(E.length&1?"0":"")+E,a.iv=new Uint8Array(E.length/2);for(var T=0,P=E.length/2;T<P;T++)a.iv[T]=parseInt(E.slice(T*2,T*2+2),16)}}break;case"MAP":{var V=Mn(_);e.url=mr(V.URI,r),V.BYTERANGE&&e.setByteRange(V.BYTERANGE),e.isInitSegment=!0,e.sn=0,a&&(e.key=a.clone(0)),s=e,e=new oa(r)}break;case"SKIP":{var O=Mn(_),z=parseInt(O["SKIPPED-SEGMENTS"],10);z<=Number.MAX_SAFE_INTEGER&&(t.skippedSegments+=z,l+=z)}break;case"DATERANGE":{var q=Mn(_),pe=t.dateRanges[q.ID];q._startDate=pe?pe._startDate:new Date(q["START-DATE"]);var ye=pe?._endDate||new Date(q.END_DATE);Number.isFinite(ye)&&(q._endDate=ye),(WC(q,pe)||t.skippedSegments)&&(t.dateRanges[q.ID]=q)}break}}}t.segments=t.segments.filter(function(ge){return ge.duration!==0});var U=t.segments[t.segments.length-1];return U&&(h&&(U.isLast=!0),t.endSN=U.sn,t.endPartIndex=U.partIndex),h&&(t.live=!1),t.totalDuration=o,t.endCC=u,t}var la=function(){function n(){_t(this,n)}return bt(n,null,[{key:"parse",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0;if(!i.includes("#EXTM3U"))throw new Error("Invalid m3u8 file");var s=YC(i);return n.isMediaPlaylist(i)?JC(s,t,e):qC(s,t)}},{key:"isMediaPlaylist",value:function(i){return i.includes("#EXTINF:")||i.includes("#EXT-X-TARGETDURATION:")}}]),n}(),ZC=function(){function n(r){var i=this;_t(this,n),D(this,"_emitOnLoaded",function(l,u){var c=l.response,f=l.options,h=f||{},d=h.firstByteTime,p=h.startTime,v=h.endTime,g=h.contentLength,_=v-p;i.hls.emit(Ee.SPEED,{time:_,byteLength:g,url:u}),i.hls.emit(Ee.LOAD_COMPLETE,{url:u,elapsed:_||0}),i.hls.emit(Ee.TTFB,{url:u,responseUrl:c.url,elapsed:d-p}),i.hls.emit(Ee.LOAD_RESPONSE_HEADERS,{headers:c.headers,url:u})}),D(this,"_onLoaderRetry",function(l,u){i.hls.emit(Ge.LOAD_RETRY,{error:ct.network(l),retryTime:u})}),this.hls=r,this._timer=null,this._useLowLatency=r.config.useLowLatency;var t=this.hls.config,e=t.retryCount,s=t.retryDelay,a=t.manifestLoadTimeout,o=t.fetchOptions;this._loader=new Cr(Qe(Qe({},o),{},{responseType:"text",retry:e,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry})),this._audioLoader=new Cr(Qe(Qe({},o),{},{responseType:"text",retry:e,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry})),this._subtitleLoader=new Cr(Qe(Qe({},o),{},{responseType:"text",retry:e,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry}))}return bt(n,[{key:"load",value:function(){var r=Ke(de().mark(function t(e,s,a){var o,l,u,c,f,h,d,p,v,g,_,b,y,m,S,I,R,N,G,H;return de().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return o=[this._loader.load(e)],s&&o.push(this._audioLoader.load(s)),a&&o.push(this._subtitleLoader.load(a)),E.prev=3,E.next=6,Promise.all(o);case 6:if(p=E.sent,v=ai(p,3),g=v[0],_=v[1],b=v[2],g){E.next=13;break}return E.abrupt("return",[]);case 13:this._emitOnLoaded(g,e),l=g.data,f=g.response.url||e,s?(u=_?.data,c=b?.data,h=(_==null||(y=_.response)===null||y===void 0?void 0:y.url)||s,d=(b==null||(m=b.response)===null||m===void 0?void 0:m.url)||a,u&&this._emitOnLoaded(_,s),c&&this._emitOnLoaded(b,a)):(c=_?.data,d=(_==null||(S=_.response)===null||S===void 0?void 0:S.url)||a,c&&this._emitOnLoaded(_,a)),E.next=22;break;case 19:throw E.prev=19,E.t0=E.catch(3),ct.network(E.t0);case 22:if(I=this.hls.config.onPreM3U8Parse,E.prev=23,I&&(l=I(l)||l,u&&(u=I(u,!0)||u),c&&(c=I(c,!0)||c)),R=la.parse(l,f,this._useLowLatency),!(((H=R)===null||H===void 0?void 0:H.live)===!1&&R.segments&&!R.segments.length)){E.next=28;break}throw new Error("empty segments list");case 28:u&&(N=la.parse(u,h,this._useLowLatency)),c&&(G=la.parse(c,d,this._useLowLatency)),E.next=35;break;case 32:throw E.prev=32,E.t1=E.catch(23),new ct(Ne.MANIFEST,Ne.SUB_TYPES.HLS,E.t1);case 35:return R&&(R.isMaster?this.hls.emit(Ge.HLS_MANIFEST_LOADED,{playlist:R}):(this._useLowLatency&&(R.canBlockReload?this.deliveryDirectives=new jC(R.nextSN,R.nextIndex,""):this.deliveryDirectives=null),this.hls.emit(Ge.HLS_LEVEL_LOADED,{playlist:R}))),E.abrupt("return",[R,N,G]);case 37:case"end":return E.stop()}},t,this,[[3,19],[23,32]])}));function i(t,e,s){return r.apply(this,arguments)}return i}()},{key:"parseText",value:function(i,t){var e=this.hls.config.onPreM3U8Parse,s;try{var a;if(e&&(i=e(i)||i),s=la.parse(i,t,this._useLowLatency),((a=s)===null||a===void 0?void 0:a.live)===!1&&s.segments&&!s.segments.length)throw new Error("empty segments list")}catch(o){throw new ct(Ne.MANIFEST,Ne.SUB_TYPES.HLS,o)}return s&&(s.isMaster?this.hls.emit(Ge.HLS_MANIFEST_LOADED,{playlist:s}):this.hls.emit(Ge.HLS_LEVEL_LOADED,{playlist:s})),[s]}},{key:"poll",value:function(i,t,e,s,a,o){var l=this;clearTimeout(this._timer),o=o||3e3;var u=this.hls.config.pollRetryCount,c=function(){var f=Ke(de().mark(function h(){var d,p;return de().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return clearTimeout(l._timer),d=i,g.prev=2,l.deliveryDirectives&&(d=l.deliveryDirectives.addDirectives(i)),g.next=6,l.load(d,t,e);case 6:if(p=g.sent,p[0]){g.next=9;break}return g.abrupt("return");case 9:u=l.hls.config.pollRetryCount,s(p[0],p[1],p[2]),g.next=17;break;case 13:g.prev=13,g.t0=g.catch(2),u--,u<=0&&a(g.t0);case 17:l._timer=setTimeout(c,o);case 18:case"end":return g.stop()}},h,null,[[2,13]])}));return function(){return f.apply(this,arguments)}}();this._timer=setTimeout(c,o)}},{key:"stopPoll",value:function(){return clearTimeout(this._timer),this.cancel()}},{key:"cancel",value:function(){return Promise.all([this._loader.cancel(),this._audioLoader.cancel()])}}]),n}();function lv(n,r,i){return r>i&&(i=r),Math.min(Math.max(n,r),i)}var Rl=new Kn("playlist"),Nh=function(){function n(r,i,t){_t(this,n),D(this,"live",void 0),D(this,"id",0),D(this,"bitrate",0),D(this,"width",0),D(this,"height",0),D(this,"name",""),D(this,"url",""),D(this,"audioCodec",""),D(this,"videoCodec",""),D(this,"textCodec",""),D(this,"startCC",0),D(this,"endCC",0),D(this,"startSN",0),D(this,"endSN",-1),D(this,"totalDuration",0),D(this,"targetDuration",0),D(this,"partTargetDuration",0),D(this,"canSkipUntil",0),D(this,"canSkipDateRanges",!1),D(this,"skippedSegments",0),D(this,"canBlockReload",!1),D(this,"partHoldBack",0),D(this,"lowLatency",!1),D(this,"endPartIndex",0),D(this,"snDiff",null),D(this,"segments",[]),D(this,"audioStreams",[]),D(this,"subtitleStreams",[]),D(this,"closedCaptions",[]),D(this,"currentAudioStream",null),D(this,"currentSubtitleStream",null),this.update(this._setLLPlaybackPoint(r),i,t)}return bt(n,[{key:"lastSegment",get:function(){return this.segments.length?this.segments[this.segments.length-1]:null}},{key:"segmentDuration",get:function(){var i;return this.targetDuration||((i=this.segments[0])===null||i===void 0?void 0:i.duration)||0}},{key:"liveEdge",get:function(){return this.endTime},set:function(i){this.endTime=i}},{key:"endTime",get:function(){var i;return((i=this.lastSegment)===null||i===void 0?void 0:i.end)||0},set:function(i){var t=this.lastSegment;t&&(t.duration=i-t.start)}},{key:"currentSubtitleEndSn",get:function(){var i;return((i=this.currentSubtitleStream)===null||i===void 0?void 0:i.endSN)||0}},{key:"clearOldSegment",value:function(i,t){return this.currentAudioStream&&this._clearSegments(i,t),this._clearSegments(i,t)}},{key:"getAudioSegment",value:function(i){if(!(!i||!this.currentAudioStream)){var t=i.sn-this.snDiff;return this.currentAudioStream.segments.find(function(e){return e.sn===t})}}},{key:"update",value:function(i,t){this.url=i.url,Array.isArray(i.segments)?((this.live===null||this.live===void 0)&&(this.live=i.live),this._updateSegments(i,this),this.startCC=i.startCC,this.endCC=i.endCC,this.startSN=i.startSN,this.endSN=i.endSN||-1,this.totalDuration=i.totalDuration,this.targetDuration=i.targetDuration,this.live=i.live,this.lowLatency=i.lowLatency,this.canBlockReload=i.canBlockReload,this.canSkipDateRanges=i.canSkipDateRanges,this.canSkipUntil=i.canSkipUntil,this.partHoldBack=i.partHoldBack,this.partTargetDuration=i.partTargetDuration,this.skippedSegments=i.skippedSegments,this.endPartIndex=i.endPartIndex,t&&this.currentAudioStream&&Array.isArray(t.segments)&&(this._updateSegments(t,this.currentAudioStream),(this.snDiff===null||this.snDiff===void 0)&&i.segments.length&&t.segments.length&&(this.snDiff=i.segments[0].sn-t.segments[0].sn))):(this.id=i.id,this.bitrate=i.bitrate,this.width=i.width,this.height=i.height,this.name=i.name,this.audioCodec=i.audioCodec,this.videoCodec=i.videoCodec,this.textCodec=i.textCodec,this.audioStreams=i.audioStreams,this.subtitleStreams=i.subtitleStreams,!this.currentAudioStream&&this.audioStreams.length&&(this.currentAudioStream=this.audioStreams.find(function(e){return e.default})||this.audioStreams[0]),!this.currentSubtitleStream&&this.subtitleStreams.length&&(this.currentSubtitleStream=this.subtitleStreams.find(function(e){return e.default})||this.subtitleStreams[0]))}},{key:"updateSubtitle",value:function(i){var t=this;if(i&&this.currentSubtitleStream&&Array.isArray(i.segments)){var e=this._updateSegments(i,this.currentSubtitleStream),s=this.currentSubtitleStream.segments;if(s.length>100&&(this.currentSubtitleStream.segments=s.slice(100)),!!e)return e.map(function(a){return{sn:a.sn,url:a.url,duration:a.duration,start:a.start,end:a.end,lang:t.currentSubtitleStream.lang}})}}},{key:"switchSubtitle",value:function(i){var t=this.subtitleStreams.find(function(s){return s.lang===i}),e=this.currentSubtitleStream;t&&(this.currentSubtitleStream=t,e.segments=[])}},{key:"_setLLPlaybackPoint",value:function(i){if(!i.lowLatency||!i.segments.length)return i;for(var t=i.totalDuration-i.partHoldBack,e=i.segments,s=0,a=0,o=e.length;a<o;a++)e[a].start<=t&&e[a].independent&&(s=a);var l=e.slice(s),u=0;return l.forEach(function(c){c.start=u,u=c.end}),i.segments=l,i.totalDuration=u,i.startSN=l[0].sn,i.startCC=l[0].cc,Rl.log("set ll-hls playback point: SN=".concat(i.startSN," partIndex=").concat(l[0].partIndex,", duration=").concat(u)),i}},{key:"_clearSegments",value:function(i,t){for(var e=0,s=this.segments,a=0,o=s.length;a<o;a++)if(s[a].end>=i){e=a;break}return e>t&&(e=t),e&&(this.segments=this.segments.slice(e),this.currentAudioStream&&(this.currentAudioStream.segments=this.currentAudioStream.segments.slice(e))),t-e}},{key:"_updateSegments",value:function(i,t){var e=t.segments;if(this.live){var s,a=i.lowLatency,o=e[e.length-1],l=(s=o?.sn)!==null&&s!==void 0?s:-1,u=o?.partIndex||0,c=l<i.endSN&&i.segments.length;if(a&&(c=c||u<i.endPartIndex),c){Rl.log("update segments: endSN:".concat(l,", partIndex:").concat(u," --> endSN:").concat(i.endSN,", partIndex:").concat(i.endPartIndex));var f=i.segments.findIndex(function(g){return g.sn===l&&g.partIndex===u}),h=f<0?i.segments:i.segments.slice(f+1);if(e.length&&h.length){var d=o.end,p=d;h.forEach(function(g){g.start=d,d=g.end}),Rl.log("liveEdge: ".concat(p," -> ").concat(d));var v=o?.cc||-1;v>h[0].cc&&h.forEach(function(g){return g.cc+=v})}return t.endSN=i.endSN,t.segments=e.concat(h),h}}else t.segments=i.segments}}]),n}(),$C=function(){function n(r){_t(this,n),D(this,"streams",[]),D(this,"currentStream",null),D(this,"dvrWindow",0),D(this,"_segmentPointer",-1),this.hls=r}return bt(n,[{key:"lowLatency",get:function(){var i;return(i=this.currentStream)===null||i===void 0?void 0:i.lowLatency}},{key:"lastSegment",get:function(){var i;return(i=this.currentStream)===null||i===void 0?void 0:i.lastSegment}},{key:"currentSegment",get:function(){var i;return(i=this.currentSegments)===null||i===void 0?void 0:i[this._segmentPointer]}},{key:"nextSegment",get:function(){var i;return(i=this.currentSegments)===null||i===void 0?void 0:i[this._segmentPointer+1]}},{key:"currentSegments",get:function(){var i;return(i=this.currentStream)===null||i===void 0?void 0:i.segments}},{key:"currentSubtitleEndSn",get:function(){var i;return(i=this.currentStream)===null||i===void 0?void 0:i.currentSubtitleEndSn}},{key:"liveEdge",get:function(){var i;return(i=this.currentStream)===null||i===void 0?void 0:i.liveEdge},set:function(i){this.currentStream&&(this.currentStream.liveEdge=i)}},{key:"totalDuration",get:function(){var i;return((i=this.currentStream)===null||i===void 0?void 0:i.totalDuration)||0}},{key:"seekRange",get:function(){var i=this.currentSegments;if(!(!i||!i.length))return[i[0].start,i[i.length-1].end]}},{key:"nbSegments",get:function(){var i;return((i=this.currentSegments)===null||i===void 0?void 0:i.length)||0}},{key:"isEmpty",get:function(){var i;return!((i=this.currentSegments)!==null&&i!==void 0&&i.length)}},{key:"isLive",get:function(){var i;return(i=this.currentStream)===null||i===void 0?void 0:i.live}},{key:"hadSegmentLoaded",get:function(){return this._segmentPointer!==-1}},{key:"hasSubtitle",get:function(){var i;return!!((i=this.currentStream)!==null&&i!==void 0&&i.currentSubtitleStream)}},{key:"getAudioSegment",value:function(i){var t;return(t=this.currentStream)===null||t===void 0?void 0:t.getAudioSegment(i)}},{key:"moveSegmentPointer",value:function(i){var t;i==null&&(i=this._segmentPointer+1),this._segmentPointer=lv(i,-1,(t=this.currentSegments)===null||t===void 0?void 0:t.length)}},{key:"reset",value:function(){this.streams=[],this.currentStream=null,this.dvrWindow=0,this._segmentPointer=-1}},{key:"getSegmentByIndex",value:function(i){var t;return(t=this.currentSegments)===null||t===void 0?void 0:t[i]}},{key:"setNextSegmentByIndex",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this._segmentPointer=i-1}},{key:"setNextSegmentBySN",value:function(){var i,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=(i=this.currentSegments)===null||i===void 0?void 0:i.findIndex(function(s){return s.sn===t});return e!==-1&&this.setNextSegmentByIndex(e+1),e}},{key:"findSegmentIndexByTime",value:function(i){var t=this.currentSegments;if(t){for(var e=0,s=t.length,a;e<s;e++)if(a=t[e],i>=a.start&&i<a.end)return e;var o=t[t.length-1];if(Math.abs(i-o?.end)<.2)return t.length-1}}},{key:"upsertPlaylist",value:function(i,t,e){var s=this;if(i){if(i.isMaster)this.streams.length=i.streams.length,i.streams.filter(function(u){return u.url}).forEach(function(u,c){s.streams[c]?s.streams[c].update(u):s.streams[c]=new Nh(u)}),this.currentStream=this.streams[0];else if(Array.isArray(i.segments)){var a=this.currentStream;if(a){a.update(i,t,e);var o=a.updateSubtitle(e);o&&this.hls.emit(Ge.SUBTITLE_SEGMENTS,{list:o})}else this.reset(),this.currentStream=this.streams[0]=new Nh(i,t,e)}var l=this.currentStream;l&&this.hls.isLive&&!this.dvrWindow&&(this.dvrWindow=this.currentSegments.reduce(function(u,c){return u+=c.duration,u},0))}}},{key:"updateSegmentsRanges",value:function(i,t){var e,s=(e=this.currentSegments)===null||e===void 0?void 0:e.filter(function(a){return a.sn>=i});s.forEach(function(a){a.start=t,t=a.end})}},{key:"switchSubtitle",value:function(i){var t;(t=this.currentStream)===null||t===void 0||t.switchSubtitle(i)}},{key:"clearOldSegment",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.hls.config.maxPlaylistSize||50,t=this.currentStream;if(!(!this.dvrWindow||!t)){var e=t.endTime-this.dvrWindow;if(!(e<=0)){var s=t.segments;s.length<=i||(this._segmentPointer=t.clearOldSegment(e,this._segmentPointer))}}}},{key:"checkSegmentTrackChange",value:function(i,t){var e=this.findSegmentIndexByTime(i),s=this.getSegmentByIndex(e);if(s&&!(!s.hasAudio&&!s.hasVideo)){if(t!==2&&s.hasAudio&&s.hasVideo)return s;if(!(s.end-i>.3)){var a=this.getSegmentByIndex(e+1);if(a&&!(!a.hasAudio&&!a.hasVideo)&&(a.hasAudio!==s.hasAudio||a.hasVideo!==s.hasVideo))return a}}}},{key:"feedbackLiveEdge",value:function(i,t){var e,s=this.currentSegments;if(s){var a=((e=this.lastSegment)===null||e===void 0?void 0:e.sn)===i.sn;if(a){this.liveEdge=t;return}this.updateSegmentsRanges(i.sn+1,t)}}}]),n}(),eT=function(){function n(r){var i=this;_t(this,n),D(this,"error",null),D(this,"_emitOnLoaded",function(l,u){var c=l.data,f=l.response,h=l.options,d=h||{},p=d.firstByteTime,v=d.startTime,g=d.endTime,_=d.contentLength,b=g-v;i._bandwidthService.addRecord(_||c.byteLength,b),i.hls.emit(Ee.SPEED,{time:b,byteLength:_,url:u}),i.hls.emit(Ee.LOAD_COMPLETE,{url:u,elapsed:b||0}),i.hls.emit(Ee.TTFB,{url:u,responseUrl:f.url,elapsed:p-v}),i.hls.emit(Ee.LOAD_RESPONSE_HEADERS,{headers:f.headers,url:u})}),D(this,"_onLoaderRetry",function(l,u){i.hls.emit(Ee.LOAD_RETRY,{error:ct.network(l),retryTime:u})}),this.hls=r,this._bandwidthService=new Ww,this._mapCache={},this._keyCache={};var t=this.hls.config,e=t.retryCount,s=t.retryDelay,a=t.loadTimeout,o=t.fetchOptions;this._segmentLoader=new Cr(Qe(Qe({},o),{},{responseType:"arraybuffer",retry:e,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry})),this._audioSegmentLoader=new Cr(Qe(Qe({},o),{},{responseType:"arraybuffer",retry:e,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry})),this._keyLoader=new Cr(Qe(Qe({},o),{},{responseType:"arraybuffer",retry:e,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry}))}return bt(n,[{key:"speedInfo",value:function(){return{speed:this._bandwidthService.getLatestSpeed(),avgSpeed:this._bandwidthService.getAvgSpeed()}}},{key:"load",value:function(i,t,e){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,a=[];return i&&(a[0]=this.loadVideoSegment(i,e)),t&&(a[1]=this.loadAudioSegment(t,s)),Promise.all(a)}},{key:"loadVideoSegment",value:function(i,t){return this._loadSegment(this._segmentLoader,i,t)}},{key:"loadAudioSegment",value:function(i,t){return this._loadSegment(this._audioSegmentLoader,i,t)}},{key:"_loadSegment",value:function(){var r=Ke(de().mark(function t(e,s,a){var o=this,l,u,c,f,h,d,p,v,g,_,b,y,m,S,I;return de().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return p=[],this.hls.emit(Ee.LOAD_START,{url:s.url}),p[0]=e.load(s.url),a&&s.initSegment&&(g=s.initSegment.url,u=this._mapCache[g],u||(this.hls.emit(Ee.LOAD_START,{url:g}),p[1]=e.load(g).then(function(G){if(G){var H=Object.keys(o._mapCache);H>30&&(o._mapCache={}),u=o._mapCache[g]=G.data,o._emitOnLoaded(G,g)}})),_=(v=s.initSegment.key)===null||v===void 0?void 0:v.url,_&&(d=s.initSegment.key.iv,h=this._keyCache[_],h||(this.hls.emit(Ee.LOAD_START,{url:_}),p[2]=this._keyLoader.load(_).then(function(G){G&&(h=o._keyCache[_]=G.data,o._emitOnLoaded(G,_))})))),b=(l=s.key)===null||l===void 0?void 0:l.url,b&&s.key.isSegmentEncrypted()&&(f=s.key.iv,c=this._keyCache[b],c||(this.hls.emit(Ee.LOAD_START,{url:b}),p[3]=this._keyLoader.load(b).then(function(G){G&&(c=o._keyCache[b]=G.data,o._emitOnLoaded(G,b))}))),N.next=8,Promise.all(p);case 8:if(y=N.sent,m=ai(y,1),S=m[0],S){N.next=13;break}return N.abrupt("return");case 13:return I=S.data,this._emitOnLoaded(S,s.url),N.abrupt("return",{data:I,map:u,key:c,mapKey:h,keyIv:f,mapKeyIv:d});case 16:case"end":return N.stop()}},t,this)}));function i(t,e,s){return r.apply(this,arguments)}return i}()},{key:"reset",value:function(){this.error=null,this._mapCache={},this._keyCache={},this._bandwidthService.reset()}},{key:"cancel",value:function(){var r=Ke(de().mark(function t(){return de().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Promise.all([this._keyLoader.cancel(),this._segmentLoader.cancel(),this._audioSegmentLoader.cancel()]);case 2:case"end":return s.stop()}},t,this)}));function i(){return r.apply(this,arguments)}return i}()}]),n}(),Mt=new Kn("hls"),Dr=function(n){Po(i,n);var r=xo(i);function i(t){var e;return _t(this,i),e=r.call(this),D(Oe(e),"version",i.version),D(Oe(e),"media",null),D(Oe(e),"config",null),D(Oe(e),"_manifestLoader",null),D(Oe(e),"_segmentLoader",null),D(Oe(e),"_playlist",null),D(Oe(e),"_bufferService",null),D(Oe(e),"_gapService",null),D(Oe(e),"_seiService",null),D(Oe(e),"_stats",null),D(Oe(e),"_prevSegSn",null),D(Oe(e),"_prevSegCc",null),D(Oe(e),"_tickTimer",null),D(Oe(e),"_tickInterval",500),D(Oe(e),"_segmentProcessing",!1),D(Oe(e),"_reloadOnPlay",!1),D(Oe(e),"_switchUrlOpts",null),D(Oe(e),"_isProcessQuotaExceeded",!1),D(Oe(e),"_loadSegment",Ke(de().mark(function s(){var a,o,l,u,c,f,h,d,p;return de().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(e._segmentProcessing||!e.media)){g.next=2;break}return g.abrupt("return");case 2:if(a=e._playlist,o=a.nextSegment,l=a.lastSegment,u=Oe(e),c=u.config,f=.016,h=Math.min(Math.max(l?.duration-f/2||0,f),.1),o){g.next=8;break}return g.abrupt("return");case 8:if(e.isLive){g.next=18;break}if(d=e.bufferInfo(),e.media.paused&&!e.media.currentTime&&(d=e.bufferInfo(d.nextStart||.5)),p=Math.abs(d.end-e.media.duration)<h,!(d.remaining>=c.preloadTime||p)){g.next=15;break}return e._tryEos(),g.abrupt("return");case 15:if(!(c.preferMMSStreaming&&!e._bufferService.msStreaming)){g.next=17;break}return g.abrupt("return");case 17:!e._urlSwitching&&e._prevSegSn!==o.sn-1&&d.end&&Math.abs(o.start-d.end)>1&&e._playlist.setNextSegmentByIndex(e._playlist.findSegmentIndexByTime(d.end+.1));case 18:return g.abrupt("return",e._loadSegmentDirect());case 19:case"end":return g.stop()}},s)}))),D(Oe(e),"_onLoadeddata",function(){e.isLive&&!e.config.mseLowLatency&&e.media.duration!==1/0&&e._bufferService.updateDuration(1/0).catch(function(s){})}),D(Oe(e),"_onPlay",Ke(de().mark(function s(){return de().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(e.media.seeking&&e.media.currentTime===0)){o.next=3;break}return Mt.debug("replay currentTime 0, return"),o.abrupt("return");case 3:if(clearTimeout(e._disconnectTimer),!e._reloadOnPlay){o.next=9;break}e._reloadOnPlay=!1,e.replay(!0),o.next=12;break;case 9:return o.next=11,e._loadSegment();case 11:e._startTick();case 12:case"end":return o.stop()}},s)}))),D(Oe(e),"_onPause",function(){if(e.isLive){if(!e._reloadOnPlay){var s=e.config.disconnectTime;if(s==null&&(s=e._playlist.dvrWindow),!Number.isFinite(s))return;clearTimeout(e._disconnectTimer),e._disconnectTimer=setTimeout(function(){e._reloadOnPlay=!0,e._clear()},s||0)}}else e._stopTick()}),D(Oe(e),"_onSeeking",Ke(de().mark(function s(){var a,o,l,u,c,f,h;return de().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(e.media){p.next=2;break}return p.abrupt("return");case 2:if(e._onCheckQuotaExceeded(),a=e.media.currentTime,o=e._playlist.seekRange,!o){p.next=10;break}if(l=lv(a,o[0],e.isLive?o[1]:e.media.duration),!(l>=0&&Math.abs(a-l)>=.1)){p.next=10;break}return e.media.currentTime=l,p.abrupt("return");case 10:if(u=e._playlist.currentSegment,c=en.info(en.get(e.media),a,.1),!u){p.next=17;break}if(!(c.end&&Math.abs(c.end-u.end)<.2)){p.next=15;break}return p.abrupt("return");case 15:if(!(e.isLive&&c.end)){p.next=17;break}return p.abrupt("return");case 17:if(f=e._playlist.findSegmentIndexByTime(a),h=e._playlist.getSegmentByIndex(f),!(f==null||!h||e._segmentProcessing&&h===e._playlist.nextSegment)){p.next=21;break}return p.abrupt("return");case 21:return Mt.debug("seek to",a,h),e._playlist.setNextSegmentByIndex(f),e._stopTick(),p.next=26,e._segmentLoader.cancel();case 26:if(e._segmentProcessing=!1,!(!c.end||e.isLive)){p.next=30;break}return p.next=30,e._loadSegmentDirect(!0);case 30:e._startTick();case 31:case"end":return p.stop()}},s)}))),D(Oe(e),"_onTimeupdate",function(){if(e.media){var s=e.config;if(s.isLive&&s.maxLatency&&s.targetLatency){var a=e._playlist.liveEdge;if(!a)return;var o=a-e.media.currentTime;o>=s.maxLatency&&(Mt.debug("latency jump, currentTime:".concat(e.media.currentTime,", liveEdge:").concat(a,",  latency=").concat(o)),e.media.currentTime=a-s.targetLatency)}if(s.seiInTime){var l;(l=e._seiService)===null||l===void 0||l.throw(e.media.currentTime)}s.allowedStreamTrackChange&&!s.softDecode&&e.media.readyState&&e._checkStreamTrackChange(e.media.currentTime)}}),D(Oe(e),"_tick",function(){if(e.media){e._startTick();var s=e.media,a=e._segmentLoader.error;if(e._onCheckQuotaExceeded(),e._isProcessQuotaExceeded&&(e._bufferService.isFull()||(e._isProcessQuotaExceeded=!1,e._segmentProcessing=!1)),a){var o=.5;(!s.readyState||e.bufferInfo(o).remaining<1)&&(a.fatal=!0,e._emitError(ct.network(a)));return}s.readyState&&(Hw(s)?(e._loadSegment(),e._gapService&&e._gapService.do(s,e.config.maxJumpDistance,e.isLive)):s.readyState<2&&e._gapService&&e._gapService.do(s,e.config.maxJumpDistance,s.currentTime?e.isLive:!0)),e.isLive||e._tryEos()}}),e.config=t=BC(t),e.media=e.config.media,e._manifestLoader=new ZC(Oe(e)),e._segmentLoader=new eT(Oe(e)),e._playlist=new $C(Oe(e)),e._bufferService=new LC(Oe(e)),t.seiInTime&&(e._seiService=new zw(Oe(e))),t.softDecode||(e._gapService=new Gw),e._stats=new Xw(Oe(e),9e4),e.media.addEventListener("loadeddata",e._onLoadeddata),e.media.addEventListener("play",e._onPlay),e.media.addEventListener("pause",e._onPause),e.media.addEventListener("seeking",e._onSeeking),e.media.addEventListener("timeupdate",e._onTimeupdate),e}return bt(i,[{key:"isLive",get:function(){return this._playlist.isLive}},{key:"streams",get:function(){return this._playlist.streams}},{key:"currentStream",get:function(){return this._playlist.currentStream}},{key:"hasSubtitle",get:function(){return this._playlist.hasSubtitle}},{key:"totalDuration",get:function(){return this._playlist.totalDuration}},{key:"baseDts",get:function(){var e;return(e=this._bufferService)===null||e===void 0?void 0:e.baseDts}},{key:"abrSwitchPoint",get:function(){var e=this._urlSwitching?this._playlist.currentSegment:this._playlist.nextSegment;return e?e.start+e.duration/2:null}},{key:"speedInfo",value:function(){return this._segmentLoader.speedInfo()}},{key:"bufferInfo",value:function(){var e,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.1;return en.info(en.get(this.media),(e=this.media)===null||e===void 0?void 0:e.currentTime,s)}},{key:"getStats",value:function(){return this._stats.getStats()}},{key:"playbackQuality",value:function(){return Vw(this.media)}},{key:"load",value:function(){var t=Ke(de().mark(function s(){var a,o,l,u=arguments;return de().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return a=u.length>0&&u[0]!==void 0?u[0]:"",o=u.length>1&&u[1]!==void 0?u[1]:{},l=typeof o=="boolean"?o:!!(o!=null&&o.reuseMse),_s(o)==="object"&&o!==null&&o!==void 0&&o.clearSwitchStatus&&(this._urlSwitching=!1,this._switchUrlOpts=null,this.config.startTime=void 0),a&&(this.config.url=a),a=this.config.url,f.next=8,this._reset(l);case 8:return f.next=10,this._loadData(a);case 10:this._startTick();case 11:case"end":return f.stop()}},s,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_loadData",value:function(){var t=Ke(de().mark(function s(a){var o,l,u,c,f,h,d,p,v,g,_,b,y;return de().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:try{a&&(a=a.trim())}catch{}if(a){S.next=3;break}throw this._emitError(new ct(Ne.OTHER,Ne.SUB_TYPES.OPTION,null,null,"m3u8 url is missing"));case 3:return S.next=5,this._loadM3U8(a);case 5:if(o=S.sent,l=this._playlist.currentStream,!this._urlSwitching){S.next=23;break}if(!this.isLive){S.next=14;break}u=this._playlist.setNextSegmentBySN(this._prevSegSn),Mt.log("segment nb=".concat(this._prevSegSn," index of ").concat(u," in the new playlist")),u===-1&&(this._prevSegCc=null,this._prevSegSn=null),S.next=23;break;case 14:if(l.bitrate===0&&(c=this._switchUrlOpts)!==null&&c!==void 0&&c.bitrate&&(l.bitrate=(d=this._switchUrlOpts)===null||d===void 0?void 0:d.bitrate),p=typeof((f=this._switchUrlOpts)===null||f===void 0?void 0:f.startTime)=="number"?(h=this._switchUrlOpts)===null||h===void 0?void 0:h.startTime:this._getSeamlessSwitchPoint(),this.config.startTime=p,v=this._playlist.findSegmentIndexByTime(p),g=this._playlist.getSegmentByIndex(v+1),!g){S.next=23;break}return _=g.start,S.next=23,this._bufferService.removeBuffer(_);case 23:if(o){S.next=25;break}return S.abrupt("return");case 25:if(!this.isLive){S.next=36;break}if(this._bufferService.setLiveSeekableRange(0,4294967295),Mt.log("totalDuration first time got:",this._playlist.totalDuration),Mt.log("nb segments got:",this._playlist.nbSegments),this.config.targetLatency<this._playlist.totalDuration&&(this.config.targetLatency=this._playlist.totalDuration,this.config.maxLatency=1.5*this.config.targetLatency),o.isMaster||this._pollM3U8(a),!(this._playlist.nbSegments<this.config.minSegmentsStartPlay)){S.next=33;break}return S.abrupt("return");case 33:return S.next=35,this._loadSegment();case 35:return S.abrupt("return");case 36:return S.next=38,this._bufferService.updateDuration(l.totalDuration);case 38:return b=this.config.startTime,b&&((y=this._switchUrlOpts)!==null&&y!==void 0&&y.seamless||(this.media.currentTime=b),this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(b)||0)),S.next=42,this._loadSegment();case 42:case"end":return S.stop()}},s,this)}));function e(s){return t.apply(this,arguments)}return e}()},{key:"replay",value:function(){var t=Ke(de().mark(function s(a){return de().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.config.startTime=0,this._urlSwitching=!1,this._switchUrlOpts=null,l.next=5,this.load();case 5:return this._reloadOnPlay=!1,l.abrupt("return",this.media.play(!a));case 7:case"end":return l.stop()}},s,this)}));function e(s){return t.apply(this,arguments)}return e}()},{key:"switchURL",value:function(){var t=Ke(de().mark(function s(a){var o,l,u,c,f,h,d,p=arguments;return de().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:o=p.length>1&&p[1]!==void 0?p[1]:{},l={seamless:!1,startTime:0,bitrate:0},g.t0=_s(o),g.next=g.t0==="number"?5:g.t0==="boolean"?7:g.t0==="object"?9:11;break;case 5:return o={startTime:o},g.abrupt("break",12);case 7:return o={seamless:o},g.abrupt("break",12);case 9:for(u in o)(o[u]===void 0||o[u]===null)&&delete o[u];return g.abrupt("break",12);case 11:throw"unsupported switchURL args: ".concat(o);case 12:if(o=Object.assign({},l,o),c=o,f=c.seamless,h=c.startTime,this.config.url=a,this.config.startTime=h,this._switchUrlOpts=o,f){g.next=38;break}if(g.prev=18,!this.config.softDecode){g.next=23;break}g.t1=this.load(a),g.next=26;break;case 23:return g.next=25,this.load(a);case 25:g.t1=g.sent;case 26:d=g.t1,g.next=33;break;case 29:throw g.prev=29,g.t2=g.catch(18),this.emit(Ge.SWITCH_URL_FAILED,g.t2),g.t2;case 33:return this._reloadOnPlay=!1,d&&this.emit(Ge.SWITCH_URL_SUCCESS,{url:a}),g.abrupt("return",this.media.play(!0));case 38:return this._urlSwitching=!0,this.isLive||(this._prevSegSn=null,this._prevSegCc=null),this._playlist.reset(),this._bufferService.seamlessSwitch(),g.next=44,this._clear();case 44:return g.next=46,this._loadData(a);case 46:this._startTick();case 47:this._switchUrlOpts=null;case 48:case"end":return g.stop()}},s,this,[[18,29]])}));function e(s){return t.apply(this,arguments)}return e}()},{key:"switchStream",value:function(){var t=Ke(de().mark(function s(a){var o,l,u,c,f,h=arguments;return de().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(o=h.length>1&&h[1]!==void 0?h[1]:!0,l=this.currentStream,u=this.streams,!(!l||l.id===a||!u||u.length<2)){p.next=5;break}return p.abrupt("return");case 5:if(c=u.find(function(v){return v.id===a}),c){p.next=8;break}return p.abrupt("return");case 8:return p.prev=8,p.next=11,this._clear();case 11:if(!o){p.next=14;break}return p.next=14,this._bufferService.clearAllBuffer();case 14:p.next=19;break;case 16:throw p.prev=16,p.t0=p.catch(8),this._emitError(ct.create(p.t0));case 19:if(l.currentAudioStream&&c.audioStreams.length>2&&(f=l.currentAudioStream.id,c.currentAudioStream=c.audioStreams.find(function(v){return v.id===f})||c.currentAudioStream),this._playlist.currentStream=c,p.prev=21,!(this.isLive||!c.segments.length)){p.next=25;break}return p.next=25,this._refreshM3U8();case 25:return this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(this.media.currentTime)||0),this._prevSegCc=null,p.next=29,this._loadSegmentDirect();case 29:p.next=35;break;case 31:throw p.prev=31,p.t1=p.catch(21),this._playlist.currentStream=l,p.t1;case 35:return this._startTick(),p.abrupt("return",c);case 37:case"end":return p.stop()}},s,this,[[8,16],[21,31]])}));function e(s){return t.apply(this,arguments)}return e}()},{key:"switchAudioStream",value:function(){var t=Ke(de().mark(function s(a){var o,l,u,c,f=arguments;return de().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(o=f.length>1&&f[1]!==void 0?f[1]:!0,l=this.currentStream,l){d.next=4;break}return d.abrupt("return");case 4:if(u=l.currentAudioStream,!(!u||u.id===a||l.audioStreams.length<2)){d.next=7;break}return d.abrupt("return");case 7:if(c=l.audioStreams.find(function(p){return p.id===a}),c){d.next=10;break}return d.abrupt("return");case 10:return d.prev=10,d.next=13,this._clear();case 13:if(!o){d.next=16;break}return d.next=16,this._bufferService.clearAllBuffer();case 16:d.next=21;break;case 18:throw d.prev=18,d.t0=d.catch(10),this._emitError(ct.create(d.t0));case 21:if(l.currentAudioStream=c,d.prev=22,!(this.isLive||!c.segments.length)){d.next=26;break}return d.next=26,this._refreshM3U8();case 26:return this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(this.media.currentTime)||0),this._prevSegCc=null,d.next=30,this._loadSegmentDirect();case 30:d.next=36;break;case 32:throw d.prev=32,d.t1=d.catch(22),l.currentAudioStream=u,d.t1;case 36:return this._startTick(),d.abrupt("return",c);case 38:case"end":return d.stop()}},s,this,[[10,18],[22,32]])}));function e(s){return t.apply(this,arguments)}return e}()},{key:"switchSubtitleStream",value:function(){var t=Ke(de().mark(function s(a){return de().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this._playlist.switchSubtitle(a),l.next=3,this._manifestLoader.stopPoll();case 3:return l.next=5,this._refreshM3U8();case 5:case"end":return l.stop()}},s,this)}));function e(s){return t.apply(this,arguments)}return e}()},{key:"detachMedia",value:function(){var t=Ke(de().mark(function s(){return de().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this._bufferService){o.next=3;break}return o.next=3,this._bufferService.detachMedia();case 3:case"end":return o.stop()}},s,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"destroy",value:function(){var t=Ke(de().mark(function s(){var a;return de().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.media){l.next=2;break}return l.abrupt("return");case 2:return this.removeAllListeners(),this._playlist.reset(),this._segmentLoader.reset(),(a=this._seiService)===null||a===void 0||a.reset(),this.media.removeEventListener("loadeddata",this._onLoadeddata),this.media.removeEventListener("play",this._onPlay),this.media.removeEventListener("pause",this._onPause),this.media.removeEventListener("seeking",this._onSeeking),this.media.removeEventListener("timeupdate",this._onTimeupdate),l.next=13,Promise.all([this._clear(),this._bufferService.destroy()]);case 13:this.media=null;case 14:case"end":return l.stop()}},s,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_loadM3U8",value:function(){var t=Ke(de().mark(function s(a){var o,l,u,c,f,h,d;return de().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(v.prev=0,c=(l=this.config.manifestList)===null||l===void 0||(u=l.filter(function(g){return g.url===a})[0])===null||u===void 0?void 0:u.manifest,!c){v.next=6;break}v.t0=this._manifestLoader.parseText(c,a),v.next=9;break;case 6:return v.next=8,this._manifestLoader.load(a);case 8:v.t0=v.sent;case 9:f=v.t0,h=ai(f,1),o=h[0],v.next=17;break;case 14:throw v.prev=14,v.t1=v.catch(0),this._emitError(ct.create(v.t1));case 17:if(o){v.next=19;break}return v.abrupt("return");case 19:if(this._playlist.upsertPlaylist(o),!o.isMaster){v.next=24;break}return(d=this._playlist.currentStream.subtitleStreams)!==null&&d!==void 0&&d.length&&this.emit(Ge.SUBTITLE_PLAYLIST,{list:this._playlist.currentStream.subtitleStreams}),v.next=24,this._refreshM3U8();case 24:return this.emit(Ge.STREAM_PARSED),v.abrupt("return",o);case 26:case"end":return v.stop()}},s,this,[[0,14]])}));function e(s){return t.apply(this,arguments)}return e}()},{key:"_refreshM3U8",value:function(){var e,s,a=this,o=this._playlist.currentStream;if(!o||!o.url)throw this._emitError(ct.create(null,null,new Error("m3u8 url is not defined")));var l=o.url,u=(e=o.currentAudioStream)===null||e===void 0?void 0:e.url,c=(s=o.currentSubtitleStream)===null||s===void 0?void 0:s.url;return this._manifestLoader.load(l,u,c).then(function(f){var h=ai(f,3),d=h[0],p=h[1],v=h[2];d&&(a._playlist.upsertPlaylist(d,p,v),a.isLive&&a._pollM3U8(l,u,c))}).catch(function(f){throw a._emitError(ct.create(f))})}},{key:"_pollM3U8",value:function(e,s,a){var o=this,l=this._playlist.isEmpty,u;if(this._playlist.lowLatency)u=(this._playlist.currentStream.partTargetDuration||0)*1e3;else{var c;u=(((c=this._playlist.lastSegment)===null||c===void 0?void 0:c.duration)||0)*1e3}this._manifestLoader.poll(e,s,a,function(f,h,d){o._playlist.upsertPlaylist(f,h,d),o._playlist.clearOldSegment();var p=f&&l&&!o._playlist.isEmpty;(p||!o._playlist.hadSegmentLoaded&&o._playlist.nbSegments>=o.config.minSegmentsStartPlay)&&o._loadSegment(),l&&(l=o._playlist.isEmpty)},function(f){o._emitError(ct.create(f))},u)}},{key:"_loadSegmentDirect",value:function(){var t=Ke(de().mark(function s(a){var o,l,u,c,f,h;return de().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(o=this._playlist.nextSegment,o){p.next=3;break}return p.abrupt("return");case 3:return l=!1,u=null,p.prev=5,this._segmentProcessing=!0,Mt.log("load segment, sn:".concat(o.sn,", [").concat(o.start,", ").concat(o.end,"], partIndex:").concat(o.partIndex)),p.next=10,this._reqAndBufferSegment(o,this._playlist.getAudioSegment(o));case 10:l=p.sent,p.next=16;break;case 13:p.prev=13,p.t0=p.catch(5),u=p.t0;case 16:return p.prev=16,this._segmentProcessing=!1,p.finish(16);case 19:if(!u){p.next=26;break}if(!this._bufferService.isFull()){p.next=25;break}return Mt.log("load segment, sn:".concat(o.sn,", partIndex:").concat(o.partIndex)),this._segmentProcessing=!0,this._isProcessQuotaExceeded=!0,p.abrupt("return",!1);case 25:return p.abrupt("return",this._emitError(ct.create(u)));case 26:return l&&(f=this.bufferInfo().end,this.isLive&&!this.media.seeking&&f&&Math.abs(o.end-f)>1&&(Mt.warn("segment: ".concat(o.sn," expected end=").concat(o.end,", real end=").concat(f)),this._playlist.feedbackLiveEdge(o,f)),h=((c=this._playlist.currentStream)===null||c===void 0?void 0:c.url)===o.parentUrl,this._urlSwitching&&!h&&(Mt.warn("pre playlist segment appended!"),this._bufferService.seamlessSwitch()),this.isLive&&this._urlSwitching&&h&&(this._urlSwitching=!1,this.emit(Ge.SWITCH_URL_SUCCESS,{url:this.config.url})),this._playlist.moveSegmentPointer(),o.isLast?this._end():a||this._loadSegment()),p.abrupt("return",l);case 28:case"end":return p.stop()}},s,this,[[5,13,16,19]])}));function e(s){return t.apply(this,arguments)}return e}()},{key:"_reqAndBufferSegment",value:function(){var t=Ke(de().mark(function s(a,o){var l,u,c,f,h,d,p,v,g,_,b;return de().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return u=a?a.cc:o.cc,c=this._prevSegCc!==u,f=[],m.prev=3,m.next=6,this._segmentLoader.load(a,o,c);case 6:f=m.sent,m.next=14;break;case 9:throw m.prev=9,m.t0=m.catch(3),m.t0.fatal=!1,this._segmentLoader.error=m.t0,m.t0;case 14:if(f[0]){m.next=16;break}return m.abrupt("return");case 16:return m.next=18,(l=this._bufferService).decryptBuffer.apply(l,dw(f));case 18:if(h=m.sent,h){m.next=21;break}return m.abrupt("return");case 21:return d=a?a.sn:o.sn,p=a?a.start:o.start,v=this._playlist.currentStream,this._bufferService.createSource(h[0],h[1],v?.videoCodec,v?.audioCodec),g=Date.now(),_=this._prevSegSn===d-1,this.isLive&&this._urlSwitching&&(b=this.bufferInfo().end,this._playlist.updateSegmentsRanges(d,b),Mt.warn("update the new playlist liveEdge, segment id=".concat(d,", buffer start=").concat(b,", liveEdge=").concat(this._playlist.liveEdge)),p=b),m.next=30,this._bufferService.appendBuffer(a,o,h[0],h[1],c,_,p);case 30:return this.emit(Ge.APPEND_COST,{elapsed:Date.now()-g,url:a.url}),m.next=33,this._bufferService.evictBuffer(this.config.bufferBehind);case 33:return this._prevSegCc=u,this._prevSegSn=d,m.abrupt("return",!0);case 36:case"end":return m.stop()}},s,this,[[3,9]])}));function e(s,a){return t.apply(this,arguments)}return e}()},{key:"_onCheckQuotaExceeded",value:function(){var t=Ke(de().mark(function s(){var a,o,l,u,c,f;return de().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:a=this.media.currentTime,o=this.media.buffered,l=!1,u=0;case 4:if(!(u<o.length)){d.next=11;break}if(!(o.start(0)>=a&&a<o.end(u))){d.next=8;break}return l=!0,d.abrupt("break",11);case 8:u++,d.next=4;break;case 11:if(!this._bufferService.isFull()){d.next=17;break}if(c=l?this.config.bufferBehind:5,f=this.media.currentTime,!(f-c>0)){d.next=17;break}return d.next=17,this._bufferService.removeBuffer(0,f-c);case 17:case"end":return d.stop()}},s,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_checkStreamTrackChange",value:function(e){var s=this._playlist.checkSegmentTrackChange(e,this._bufferService.nbSb);s&&this.switchURL(this.config.url,s.start+.2)}},{key:"_clear",value:function(){var t=Ke(de().mark(function s(){return de().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return clearTimeout(this._disconnectTimer),this._stopTick(),o.next=4,Promise.all([this._segmentLoader.cancel(),this._manifestLoader.stopPoll()]);case 4:this._segmentProcessing=!1;case 5:case"end":return o.stop()}},s,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_reset",value:function(){var t=Ke(de().mark(function s(){var a,o,l=arguments;return de().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=l.length>0&&l[0]!==void 0?l[0]:!1,this._reloadOnPlay=!1,this._prevSegSn=null,this._prevSegCc=null,this._switchUrlOpts=null,this._playlist.reset(),this._segmentLoader.reset(),(a=this._seiService)===null||a===void 0||a.reset(),this._stats.reset(),c.next=11,this._clear();case 11:return c.abrupt("return",this._bufferService.reset(o));case 12:case"end":return c.stop()}},s,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_end",value:function(){this._clear(),this._bufferService.endOfStream(),(this.media.readyState<=2||this.media.buffered.length>1)&&this._startTick()}},{key:"_stopTick",value:function(){this._tickTimer&&clearTimeout(this._tickTimer),this._tickTimer=null}},{key:"_startTick",value:function(){this._stopTick(),this._tickTimer=setTimeout(this._tick,this._tickInterval)}},{key:"_emitError",value:function(e){var s,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(((s=e.originError)===null||s===void 0?void 0:s.fatal)===!1)Mt.warn(e);else{var o,l,u;Mt.table(e),Mt.error(e),Mt.error((o=this.media)===null||o===void 0?void 0:o.error),(l=this.media)!==null&&l!==void 0&&l.readyState&&this.media.pause(),this._stopTick(),this._urlSwitching&&(this._urlSwitching=!1,this.emit(Ge.SWITCH_URL_FAILED,e)),this.emit(Ge.ERROR,e),a&&this._end(),(u=this._seiService)===null||u===void 0||u.reset()}return e}},{key:"_getSeamlessSwitchPoint",value:function(){var e=this.media,s=e.currentTime;if(!e.paused){var a,o=this._playlist.findSegmentIndexByTime(e.currentTime),l=this._playlist.getSegmentByIndex(o),u=(a=this._stats)===null||a===void 0?void 0:a.getStats().downloadSpeed;if(u&&l){var c=l.duration*this._playlist.currentStream.bitrate/u+1;s+=c}else s+=5}return s}},{key:"_tryEos",value:function(){var e,s,a=this.media,o=this._playlist,l=o.nextSegment,u=o.lastSegment,c=(!l||u&&en.isBuffered(a,u.start+u.duration/2))&&a.readyState&&a.duration>0&&((e=this._bufferService)===null||e===void 0?void 0:e.msIsOpened)&&!((s=this._bufferService)!==null&&s!==void 0&&s.msHasOpTasks);if(c){var f=this.bufferInfo();a.paused&&!a.currentTime&&(f=this.bufferInfo(f.nextStart||.5));var h=Math.abs(f.end-a.duration)<.1||!this.isLive&&u&&f.end>=u.start+u.duration;h&&this._bufferService.endOfStream()}}}],[{key:"isSupported",value:function(e){return!e||e==="video"||e==="audio"?Gt.isSupported():typeof WebAssembly<"u"}},{key:"enableLogger",value:function(){Kn.enable(),Ka.enable()}},{key:"disableLogger",value:function(){Kn.disable(),Ka.disable()}}]),i}(Fr);D(Dr,"version","3.0.23");try{localStorage.getItem("xgd")?Dr.enableLogger():Dr.disableLogger()}catch{}var tT=function(){function n(r,i){var t=this;_t(this,n),D(this,"_opts",null),D(this,"_plugin",null),D(this,"_onLowDecode",function(){var e,s,a,o,l=t._opts,u=l.media,c=l.innerDegrade;(e=t._plugin)===null||e===void 0||(s=e.player)===null||s===void 0||s.emit("lowdecode",u.degradeInfo),(a=t._plugin)===null||a===void 0||(o=a.player)===null||o===void 0||o.emit("core_event",Qe(Qe({},u.degradeInfo),{},{eventName:Ge.LOWDECODE})),c===1&&t._degrade(u.src)}),D(this,"_degrade",function(e){var s=t._plugin.player,a=s.video;if(!(a&&a.TAG!=="MVideo")){var o=s.video.degradeVideo;s.video=o,a.degrade(e),e&&(s.config.url=e);var l=s.root.firstChild;l.TAG==="MVideo"&&s.root.replaceChild(o,l);var u=t._plugin.constructor.pluginName.toLowerCase();s.unRegisterPlugin(u),s.once("canplay",function(){s.play()})}}),D(this,"forceDegradeToVideo",function(e){var s=t._opts.innerDegrade;s===1&&t._degrade(e)}),this._opts=r,this._plugin=i,this._init()}return bt(n,[{key:"_init",value:function(){var i=this._opts,t=i.media,e=i.preloadTime,s=i.innerDegrade,a=i.isLive;if(t){if(!a&&t.setPlayMode){t.setPlayMode("VOD");return}s&&t.setAttribute("innerdegrade",s),e&&t.setAttribute("preloadtime",e),this._bindEvents()}}},{key:"_bindEvents",value:function(){var i=this._opts.media;i.addEventListener("lowdecode",this._onLowDecode)}},{key:"destroy",value:function(){var i,t;(i=this._opts)===null||i===void 0||(t=i.media)===null||t===void 0||t.removeEventListener("lowdecode",this._onLowDecode),this._plugin=null}}]),n}(),nT=["currentTime"];function iT(n,r){var i=r.player,t=i.currentTime,e={startTime:t};switch(_s(n)){case"boolean":e.seamless=n;break;case"object":{var s=n.currentTime,a=cu(n,nT);Object.assign(e,a),typeof s=="number"&&(e.startTime=s);break}}return e}var Oo=function(n){Po(i,n);var r=xo(i);function i(){var t;_t(this,i);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),D(Oe(t),"logger",Mt),D(Oe(t),"hls",null),D(Oe(t),"pluginExtension",null),D(Oe(t),"getStats",function(){var o;return(o=t.hls)===null||o===void 0?void 0:o.getStats()}),D(Oe(t),"_onSwitchSubtitle",function(o){var l,u=o.lang;(l=t.hls)===null||l===void 0||l.switchSubtitleStream(u)}),D(Oe(t),"_keepPauseStatus",function(){var o=t.player.paused;o&&t.player.once("canplay",function(){t.player.pause()})}),t}return bt(i,[{key:"core",get:function(){return this.hls}},{key:"version",get:function(){var e;return(e=this.hls)===null||e===void 0?void 0:e.version}},{key:"softDecode",get:function(){var e,s,a=(e=this.player)===null||e===void 0||(s=e.config)===null||s===void 0?void 0:s.mediaType;return!!a&&a!=="video"&&a!=="audio"&&a!=="offscreen-video"}},{key:"beforePlayerInit",value:function(){var e=this,s=this.player.config,a=this.player.media||this.player.video,o=s.hls||{};if(!(!s.url&&!s.__allowHlsEmptyUrl__||!this.softDecode&&!o.preferMMS&&Gt.isMMSOnly())){this.hls&&this.hls.destroy();var l=Object.getOwnPropertyDescriptor(this.player,"switchURL");(!l||l.writable)&&(this.player.switchURL=function(f,h){return new Promise(function(d,p){var v=e.player,g=e.hls;if(g){var _,b,y=iT(h,e);v.config.url=f,g.switchURL(f,y).then(function(){return d(!0)}).catch(p),!y.seamless&&(_=e.player.config)!==null&&_!==void 0&&(b=_.hls)!==null&&b!==void 0&&b.keepStatusAfterSwitch&&e._keepPauseStatus()}else p()})});var u=this.player.switchURL;if(this.player.handleSource=!1,o.innerDegrade=o.innerDegrade||s.innerDegrade,(o.disconnectTime===null||o.disconnectTime===void 0)&&(o.disconnectTime=0),this.hls=new Dr(Qe({softDecode:this.softDecode,isLive:s.isLive,media:a,startTime:s.startTime,url:s.url},o)),this.softDecode||zn.defineGetterOrSetter(this.player,{url:{get:function(){var h,d;return(h=e.hls)===null||h===void 0||(d=h.media)===null||d===void 0?void 0:d.src},configurable:!0}}),this.softDecode&&(this.pluginExtension=new tT(Qe({isLive:s.isLive,media:a},o),this),this.player.forceDegradeToVideo=function(){for(var f,h=arguments.length,d=new Array(h),p=0;p<h;p++)d[p]=arguments[p];return(f=e.pluginExtension)===null||f===void 0?void 0:f.forceDegradeToVideo.apply(f,d)}),s.isLive){var c;(c=this.player)===null||c===void 0||c.useHooks("replay",function(){var f;return(f=e.hls)===null||f===void 0?void 0:f.replay()})}this.on(Hs,u),this.on(Tg,this._onSwitchSubtitle),this.on(ko,this.destroy.bind(this)),this._transError(),this._transCoreEvent(Ee.TTFB),this._transCoreEvent(Ee.LOAD_START),this._transCoreEvent(Ee.LOAD_RESPONSE_HEADERS),this._transCoreEvent(Ee.LOAD_COMPLETE),this._transCoreEvent(Ee.LOAD_RETRY),this._transCoreEvent(Ee.SOURCEBUFFER_CREATED),this._transCoreEvent(Ee.MEDIASOURCE_OPENED),this._transCoreEvent(Ee.APPEND_BUFFER),this._transCoreEvent(Ee.REMOVE_BUFFER),this._transCoreEvent(Ee.BUFFEREOS),this._transCoreEvent(Ee.KEYFRAME),this._transCoreEvent(Ee.METADATA_PARSED),this._transCoreEvent(Ee.DEMUXED_TRACK),this._transCoreEvent(Ee.SEI),this._transCoreEvent(Ee.SEI_IN_TIME),this._transCoreEvent(Ee.SPEED),this._transCoreEvent(Ee.HLS_MANIFEST_LOADED),this._transCoreEvent(Ee.HLS_LEVEL_LOADED),this._transCoreEvent(Ee.STREAM_EXCEPTION),this._transCoreEvent(Ee.SWITCH_URL_SUCCESS),this._transCoreEvent(Ee.SWITCH_URL_FAILED),this._transCoreEvent(Ge.NO_AUDIO_TRACK),this._transCoreEvent(Ge.STREAM_PARSED),this._transCoreEvent(Ge.SUBTITLE_SEGMENTS),this._transCoreEvent(Ge.SUBTITLE_PLAYLIST),this._transCoreEvent(Ge.APPEND_COST),s.url&&this.hls.load(s.url,{reuseMse:!0}).catch(function(f){})}}},{key:"destroy",value:function(){var e;this.hls&&(this.hls.destroy(),this.hls=null),(e=this.pluginExtension)===null||e===void 0||e.destroy(),this.pluginExtension=null}},{key:"_transError",value:function(){var e=this;this.hls.on(Ge.ERROR,function(s){e.player&&e.player.emit(Ur,new ys(e.player,s))})}},{key:"_transCoreEvent",value:function(e){var s=this;this.hls.on(e,function(a){s.player&&(s.player.emit("core_event",Qe(Qe({},a),{},{eventName:e})),e===Ee.SEI_IN_TIME&&s.hls.hasSubtitle&&s._emitSeiPaylodTime(a))})}},{key:"_emitSeiPaylodTime",value:function(e){try{var s=JSON.parse(Array.from(e.data.payload).map(function(a){return String.fromCharCode(a)}).join("").slice(0,-1));if(!s.rtmp_dts)return;this.player.emit("core_event",{eventName:Ge.SEI_PAYLOAD_TIME,time:s.rtmp_dts})}catch{}}}],[{key:"pluginName",get:function(){return"hls"}},{key:"isSupported",value:function(e,s){return Dr.isSupported(e,s)}}]),i}(zn);D(Oo,"Hls",Dr);D(Oo,"EVENT",Ge);const{POSITIONS:rT}=qe;class uv extends qe{static get pluginName(){return"demoPlugin"}static get defaultConfig(){return{position:rT.ROOT_TOP}}icon=null;titleEl=null;onClick;isFullscreen;constructor(r){super(r);const i=document.createElement("img"),t=document.createElement("div");i.className="icon",i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAXNJREFUaEPt2TtKBEEYReFzMZMBd+ASXIGBmhgaGbkDlyGGJgYuQBAjAzP3YOoCRMHcRMTEkoYOOpgHXfU/ZrArmWD6cb6qoXqgxYYPbXg/EyB7BacV+LcrUEqZAXfAEXAl6aJmMlJ+Qn38E7DfR/8CM0nfYxHhgDnxXfOLpL2x8d3xoYAF8a/AoaS3tQZ4xIetgFd8CMAz3h3gHe8KiIh3AyyJP5D0XrPbLDrHfBuNjDdfgeh4U0BGvBkgK94EkBnfDMiObwKsQ3wr4BE4GezP3b9K831+1TOj+jlQSvkCtgc3OJX0sOqG1t+3AG6A80HQJ3As6dk6ctn1WgBbwC1wlomoBnTRpZR0RBNgHRDNgGyECSATYQbIQpgCMhDmgGiECyAS4QaIQrgCIhDuAG9ECMATEQbwQoQCliA+gF1J3YuOUSMcsADxA+xI6j5HjRTAAHHZvyO7lnQ/qrw/OA1QEzvvnAlgNZO115lWoHbmrM77A89a2jFh78iUAAAAAElFTkSuQmCC",t.className="title",t.textContent=this.config.title||"",this.titleEl=t,this.root.appendChild(i),this.root.appendChild(t),this.root.style.display="none"}afterCreate(){this.icon=this.find(".icon"),this.onClick=()=>{this.player.fullscreen&&this.player.exitFullscreen()},this.bind("click",this.onClick),this.isFullscreen=r=>{r?this.root.style.display="flex":this.root.style.display="none"},this.root.style.display="none",this.player.on(Cn,this.isFullscreen)}destroy(){this.onClick&&this.unbind("click",this.onClick),this.isFullscreen&&this.player.off(Cn,this.isFullscreen),this.icon=null,this.titleEl=null}render(){return'<div class="xg-top-box"></div>'}setTitle(r){this.titleEl&&(this.titleEl.textContent=r),this.config.title=r}}const sT={class:"scroll-box"},aT={class:"introduction"},oT={class:"play_info flex align_item-center"},lT={class:"media_info flex_auto overflow-hidden"},uT={class:"van-ellipsis notranslate"},cT={class:"info notranslate"},fT={class:"hot"},hT={key:0,src:Q1,alt:""},dT={class:"type updateStatus van-ellipsis flex_auto"},pT={class:"info"},gT={class:"type notranslate"},vT={class:"introduce overflow-hidden relative"},mT={class:"introduce_info notranslate"},yT={class:"anthology"},AT={class:"flex"},_T={class:"episode-list relative"},bT=["onClick"],ST={class:"van-multi-ellipsis--l2"},ET={class:"detail-info"},wT={class:"detail notranslate"},CT={class:"title"},TT={class:"info"},kT={class:"type"},IT={class:"year_type"},RT={class:"year"},PT={class:"type"},xT={class:"info"},DT={class:"hot"},OT={class:"info"},LT={class:"type"},BT={class:"actor director"},MT={class:"actor"},FT={class:"brief_introduction"},NT="data:image/gif;base64,R0lGODlhDwAMAIABAADA/wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpBMTY2NTNCMUU2MjJFODExQUQ1Q0MxN0NFRURBQzNCNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowNkVDRjNCRTZBMUQxMUVCOTM0Q0JBNkY5NkM1MEI1RiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowNkVDRjNCRDZBMUQxMUVCOTM0Q0JBNkY5NkM1MEI1RiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmI3MTA4ZmVlLWM1MjEtNjk0MC1hMWM1LTUxNDRjODIxZWVjMyIgc3RSZWY6ZG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjBhMDgxNzZiLWQ0MWQtZDQ0ZS1hY2M3LWZmMzA4ZmRlYmViOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAkAAAEALAAAAAAPAAwAAAIdjANwy6jdEoxvSVvP1dls/1yfA5aYOYphp5ocqhQAIfkECQAAAQAsAAAAAA8ADAAAAhuMj4kA6uwUjKuleaa22e7rhaDxVaRoBmV3tgUAIfkECQAAAQAsAAAAAA8ADAAAAh2Mj4kA6uwUjKuF+ezEZmt7eB04lhd5mlzKrmJaAAAh+QQJAAABACwAAAAADwAMAAACG4yPqasAnJyRjNJlX9U58u9NINIFl4ia2lFKBQAh+QQJAAABACwAAAAADwAMAAACG4yPqcsG0J6DTAa7LFaa7uuFSTeNImiWKEKiBQAh+QQJAAABACwAAAAADwAMAAACHIyPqQaw2l6I0z1KF7baZuiFycZw5VmNYoqQaQEAIfkECQAAAQAsAAAAAA8ADAAAAhqMbwDIqA0fZDKuUJvM9HLnXVYSduQJotxWFgAh+QQJAAABACwAAAAADwAMAAACHIyPqQaw2l6I0z1KF7baZuiFycZw5VmNYoqQaQEAIfkECQAAAQAsAAAAAA8ADAAAAhuMj6nLBtCeg0wGuyxWmu7rhUk3jSJolihCogUAIfkECQAAAQAsAAAAAA8ADAAAAhuMj6mrAJyckYzSZV/VOfLvTSDSBZeImtpRSgUAIfkECQAAAQAsAAAAAA8ADAAAAh2Mj4kA6uwUjKuF+ezEZmt7eB04lhd5mlzKrmJaAAAh+QQFAAABACwAAAAADwAMAAACG4yPiQDq7BSMq6V5prbZ7uuFoPFVpGgGZXe2BQA7",UT=Fe({__name:"IntroComp",props:{title:{},detailShow:{type:Boolean},videoData:{}},emits:["update:detailShow","update:title"],setup(n,{emit:r}){let i=0;const t=ne(0),e=Ps(),s=Ri(),a=ne(),o=ne(!1),l={"144P":1,"240P":2,"360P":3,"480P":4,"720P":5,"1080P":6,"1440P":7,"2160P":8,"2K":9,"4K":10},u=n,c=async()=>{o.value=!1},f=async y=>(await Yt.post("/api/video/episode-url/query",{type:"episode",accessKey:y})).data.urls.map(I=>({definition:I.quality.toUpperCase(),url:I.cdnUrl,text:{en:I.quality.toUpperCase()},index:l[I.quality.toUpperCase()]||0})).sort((I,R)=>I.index-R.index),h=r,d=Ce(()=>{const y=e.query.id;return Array.isArray(y)?y[0]:y||u.videoData.userProgress?.currentEpisodeShortId||u.videoData.list?.[0]?.shortId||""}),p=Ce(()=>u.videoData.list?.find(y=>y.shortId===d.value));let v;Tt(async()=>{p.value&&(a.value=await f(p.value.episodeAccessKey));const y={id:"mse",playsinline:!0,poster:u.videoData.seriesInfo.coverUrl,plugins:[Oo,uv],ignores:["volume"],fullscreen:{useCssFullscreen:!!window.TelegramWebviewProxy},demoPlugin:{title:u.videoData.seriesInfo.title+p.value?.episodeTitle||""},"x5-video-player-type":"h5","x5-video-player-fullscreen":"false","x5-video-orientation":"portraint",playbackRate:!1,fluid:!0,switchQuality:!0,definitionActive:"",videoInit:!1,url:a.value[0].url};v=new It(y),v.once("ready",()=>{window.TelegramWebviewProxy&&typeof window.TelegramWebviewProxy.postEvent=="function"&&v?.usePluginHooks("fullscreen","fullscreenChange",m=>{const{player:S}=m;return S.isFullscreen?(window.TelegramWebviewProxy.postEvent("web_app_exit_fullscreen",null),S.exitCssFullscreen()):(window.TelegramWebviewProxy.postEvent("web_app_request_fullscreen",null),S.getCssFullscreen()),!0})}),v.on("pause",m=>{const S=Math.floor(m.currentTime);d.value&&S&&(console.log(S,i,""),g(d.value,S))}),v.on("definitionChange",()=>{}),v.on("timeupdate",m=>{const S=Math.floor(m.currentTime);t.value=S;const I=Math.floor(S/60);i!=I&&S%60==0&&(i=I,console.log(S,i,I,""),d.value&&S&&g(d.value,S))}),v.on("ended",async()=>{const m=p.value?.episodeNumber||0;m<u.videoData.size&&await b(m,u.videoData.list[m])}),v.once("play",()=>{h("update:title",u.videoData.seriesInfo.title+p.value?.episodeTitle||""),v.seek(u.videoData.userProgress.watchProgress)}),v.emit("resourceReady",a.value)});const g=async(y,m)=>{try{return m?await Yt.post("/api/video/progress",{episodeIdentifier:y,stopAtSecond:m}):(await Yt.get("/api/video/progress?episodeIdentifier="+y)).data.stopAtSecond||0}catch(S){console.error(S)}},_=()=>{const y=document.querySelector(".detail"),m=document.querySelector(".episodes");y&&(y.style.display="none"),m&&(m.style.display="block")},b=async(y,m)=>{if(d.value==m.shortId)return;d.value&&t.value&&(console.log(t.value,""),g(d.value,t.value)),s.replace({query:{id:m.shortId}});try{a.value=await f(m.episodeAccessKey);const R=await g(m.shortId);R<v.duration-20?v.seek(R):v.seek(0),v.src=a.value[0].url,v.emit("resourceReady",a.value),v.play(),v.plugins.demoplugin.setTitle(u.videoData.seriesInfo.title+m.episodeTitle),h("update:title",u.videoData.seriesInfo.title+m.episodeTitle)}catch(R){console.error("",R)}const S=document.querySelector(".detail"),I=document.querySelector(".episodes");S&&(S.style.display="block"),I&&(I.style.display="none")};return Wi(()=>{v&&(d.value&&t.value&&(console.log(t.value,""),g(d.value,t.value)),v.destroy())}),(y,m)=>{const S=Ls;return le(),we(Xe,null,[B(iS,{onToggle:b,episodes:y.videoData.list},null,8,["episodes"]),w("div",sT,[B(S,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=I=>o.value=I),onRefresh:c},{default:be(()=>[w("div",aT,[w("div",oT,[w("div",lT,[w("h3",uT,He(y.videoData.seriesInfo.title),1),w("div",cT,[w("div",fT,[m[2]||(m[2]=w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAlNJREFUSEvt1U9IVFEUx/Hvec+oLAuCCIoQIatFuKhcpM2fhZugVSBUUBj9gVoE5sxEEBS2iZk3RZsIWwQVgZK0KAhq0TivP5iJUIsWCbYyiYSoDPoz98RMJmjjzH0juHK275zf575z77wrzPNP5tljAfxv4hoPn0XolWT2bSXbEWikGg9tRRlE+QYckrR/NygaFLyPsnsSUUTaJZW9EgS1BjUe2YeaO9PD1SDOfkllu21RK1ATzZswTj+wskjwVxyzWZLPRm3QsqAmmtdinKdAXYnAW+L5BzW28yTyo0dSA2Oz1ZYE9Xx0CRPGR3V76dXrT35XraEqdxtkTLzskcrAWKgLOGozKqRQdwZDLSL14mVHivXN+oYaCzWADoE4ViBqpmqVpKT900HBm8ABO2xGlTIsab/eGtTWVpfaDx9BVlUE5pvUXS3pzKeZ/UVHqu3RDbi5dxVj+UbHbZRk5pUd2BFpRMzLOYE4TeL1vbADY01bwH0zJ7DKrZOLmfd24LFti1hRPQ7UFEH7EelEtQdYNsuiRsXz11kfmsKex0PXUYr9gfvE86OaCO/BaG9RUOiUlH8uGHgqvB5H82Od/v1UuiXt7y0sKhZ6DLTMCB6FpRvFezQRCCwEdkR2IeYesHiq2eG4JP1rk1NoQ7kx9Uz1C7gtku4bqOjT9hcNh5H8tST5PRnhu9sgVzP5CxiNRXaAeT4Z/hojbXIpO1TqsJW9LQrBieYajHOYnPtALmeG/wXqiehyqnMXcOQJnyceStfgr3In2wosFxLk+QIYZFpWtX8AbCq/Hc3hj6cAAAAASUVORK5CYII=",alt:""},null,-1)),w("span",null,He(y.videoData.seriesInfo.playCount<1e4?y.videoData.seriesInfo.playCount:(y.videoData.seriesInfo.playCount/1e4).toFixed(1)+" "),1)]),m[3]||(m[3]=w("span",{class:"line"},"|",-1)),w("div",{class:"score flex align_item-center noRating",style:Ts({color:y.videoData.seriesInfo.score?"#ff743d":""})},[y.videoData.seriesInfo.score?(le(),we("img",hT)):An("",!0),bi(" "+He(y.videoData.seriesInfo.score?y.videoData.seriesInfo.score:""),1)],4),m[4]||(m[4]=w("span",{class:"line"},"|",-1)),w("div",dT,He(y.videoData.seriesInfo.updateStatus),1)]),w("div",pT,[w("div",gT,He(y.videoData.tags.join("")),1),m[5]||(m[5]=w("span",{class:"line"},"|",-1)),m[6]||(m[6]=w("div",{class:"edit flex align_item-center",style:{position:"relative"}},[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAASdJREFUSEvt1j9OwzAYh+HfV3dg4xLdkXCVtBIDEWLowAgXYWSJhLgCohM34ABdsroNzQIjEgsjLAxlCZ+RB6rSNv6TNBtZ7TyvbMVWCC0/1LKPZWA6nd+4Yt0u7qWUL7Z5s1lxAuj9KJIPZt4yoNR8DHwrIeitCmDmIo7jj6pxgzPrCyI8RdHhLRHxn4DWejwc9gvXSraNG1xrfQ7gebH4vEuSpNxYQd1AFb6TgA1vHHDhjQI+eO2AL14rEIIHB0LxoIAvrtRjAuBoMOhfewd8cQPmeX7K3DmOY3nlFUjTtDManV0C+Fo9oVWnPThgoCzL9gCUv8ffdpXUCoTcTf8B525Zt0gImpQlvzoVywQiPiASva2faRN49V0ivG8EdoWvO63/VfwAysRhKDX0na8AAAAASUVORK5CYII=",alt:"",class:"opacity0_6"}),w("span",null,""),w("span",{class:"no_login_mask"})],-1))])]),m[7]||(m[7]=w("div",{class:"avatar"},[w("div",{class:"my-image"},[w("div",{class:"van-image van-image--round"},[w("img",{class:"van-image__img","data-src":"https://static.yfsp.tv/upload/up/201709190100102.jpg?w=110&h=110&scale=both&mode=crop&format=jpg&anchor=topcenter",src:"https://static.yfsp.tv/upload/up/201709190100102.jpg?w=110&h=110&scale=both&mode=crop&format=jpg&anchor=topcenter",lazy:"loaded",style:{"object-fit":"fill"}})])])],-1))]),w("div",vT,[w("div",mT,[bi(He(y.videoData.seriesInfo.description),1),w("span",{class:"btn inline_flex align_item-center",onClick:m[0]||(m[0]=()=>h("update:detailShow",!0))},m[8]||(m[8]=[w("i",null,"...",-1),bi(""),w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAANhJREFUSEvd1TsOwjAMBmA7C49rwcpBUEmU5CClbSicg3IWFo7CUKMI2CAPRx0ge/5PsR0ZYeKDE+fD/wOolHVCwLVp6hOnnMESKWUPiFQREQkhKg4SBLS223Ece0RELhJtcikSBXzdS5AkoARJBrhIFsBBsgEpzVoIvADQ3INE2Hddvfv2R7KAZzicAWD5Cjy27d6HUzGglF0h0pAT7tGkF3DDk4CS8ChQGh4FtDYDEWxSG/qp0cEeGGMWROCRW2xa2FMkpZw55+6hUQztiaQp4iya953fBx4l45gZ80ZoqgAAAABJRU5ErkJggg==",alt:""},null,-1)]))])]),m[10]||(m[10]=w("ul",{class:"handle-bar is_play"},[w("li",null,[w("div",{style:{position:"relative"}},[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAXBJREFUaEPtWDtOw0AQfQsCiQMgIeyVcgo6jkAoOQYdNZR0HIMSCU5Al2swXqfmAMmiCFkKK8Vv7d11FDHuLM+M32dm/DE48MMcOH4ogX07qA6oA4kK/N8WEnG+T7zV6vRyNjtfJgpM00c7wAgYc3xT1xcfFEFiQDIBa6s/NUTcFwAL4NHa6ikRH03PTqBp3Kv3uDMG73VdzSmCxIDsBETae8C/AGitrapEfDS9AAG5Ao4WmztPMcjZCXjvT5qm/QZwNsUgZyewUV7EfQK4nmKQowl0a7PbOuH5drOKuGcAD7SBIwLCLRemFCHgnLtdr/EWgY+G7IUARRUR0OfwdnoRByLw0RAlEEo0ZIipvBEB6oA6ENEmfSHaQtpC2kK/39z6KtF1gj7IBs6ErlFdowNbhgm2q5x+D7A9PdYIHWLWk+zn7ljlwzzmcPIM5AK6q042AqWBjq0f7cDYG5TOUwKlFWb11QGmUOnr6kBphVn9H+qYZEDH5EQ3AAAAAElFTkSuQmCC",alt:"",class:"opacity0_6"}),w("span",{class:"notranslate"},"17"),w("span",{class:"no_login_mask"})])]),w("li",null,[w("div",{style:{position:"relative"}},[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAVhJREFUaEPtVztOxDAQfSMEEgdAQjiW9hR0HAFExTXoqKGk4xpUFHACOq5hJ96aAyxGQQpCKwVP1uuA4aWLPBn7/UaOoPJHKj8/COCnFaQCVCCTAVook8Dsz/+PAt53safLWvMBenjPpjDRYNhvrEytwJ8FkGJoU4XWCSumAAGMUEsF1okZCzEtRAsp5xwtpCRqKOMU4hSaaJkUYbxKcApNtBSnUCpUWoYmEv9Zru2f/UfGyxwvc0qTThmjzoVzkfigbP1tWcqiRTLgfXcL4OpXAUhNpa/r3odnIJ4AuLbW3GwDSPZVQgsgxrjbtuEVwL7IzmnTHD5VBcD75THw9tIferXaO1osDpaVAQiXQLwDEKw1puTh+97qEGst5Fx3L4ILETw2jTmrDkDbdi5G2DkCvBUFRqfDDAEuCmCOAGcBKO1tbf+NQ6zdoHQdAZRmONWfCqQYKr3+DvttZUAFMgOmAAAAAElFTkSuQmCC",alt:"",class:"opacity0_6"}),w("span",{class:"notranslate"},"3"),w("span",{class:"no_login_mask"})])]),w("li",null,[w("div",{class:"notranslate",style:{position:"relative"}},[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABfVJREFUaEPtmH+IXNUVx7/fO7Oz2UbUYLIz8969S1YT/3CNYixUMVp/gUbiHxVJDUhbzR/+VUpra0gktIjFWNoK6h9SMAoxIIoGVJKskgoGRdMVWhJiMYq77933ZiaSbVI32d1k551y3awdxt3s3t1ZNZILCzvvnXvO+dxzzrv3XOIsHzzL/cc5gG87guci8L2OQBQl9yil6lqXX54v0HlLoSiKAjK3n2Q9n1eXl0qlw/MBMW8A1qY7RWT1aad3GBPeddYAWJs+ICLPkBxzTotIHuC9xgTbWw3R8gjUarVLTp0a+6cIzgO4RSQTkhsBDNbrhcuXLl1SaSVESwFERCVJ5R0RuQ7AwZGREyuXLVsm1lb6AFlB4g2twzu/swBJkmzIMmxxqSNSv84Ys885mySHr8qykx8AbCPVfVqXn28VRMsiEMe1K4Ax53C7UtwShoFLm69GHCd/APB7AEdJWaG1tq2AaAmAiBSSJN0ngisBHhwZOb5y+fLlo40O9vX1tRWL5Q8AXAWg15jw9u8EQLVa7T51qv4wgPXNqdPsYBxXVwD1f7gokfx1GJafcvvEXEC8IyAiuSiqXKuUrAHg/nomHJgsdZqdiyK7ieQfTz//D4m3sgy9ZNZrjEl8YWYEMDg4eMHw8PDtWeacptucLmo0RPKLLJNdo6MnftacOs0OuQVIknQ3wFtEpNG+AHIA4G5SesMw3Evy5HRAUwJYay91Kyyi1gDZKvcFaVL2b5I7AbXz2LEje3t6eqY11jg/TdOuLMNqQO4QwS0AFjYtyhAgb5Pozefzu4vF4qeTwUwJEEXJcyR+0TDpBMm3SdmVy+V2lkqlz6ZbnZm+P3ToUHt7+8IfK4XVInIHALd4jWOrMeF6L4A0TX9Qr2MfIC7HR0i5Umv98UydmotcHMfLSPWWCJYC+BeQXWuMGfYCcMIDA5XLlMrct30hyX3Dw8dvmC7H5+L4xNw4Th4C8DjAY0D9h8aYT6bSO20RW1v5uUj25c5J8m9aBw+0wsmpdFhrbwZUryt2gHcbE7x6JnvTArjJ1ibPiYzXg1JYH4bh1vmAsPaIBkY/FJFOEf61qyt4cDo7MwJorodcjquCIPhwOuU+78d38y8Pgj8SwbvGBDdOHMfnHIHmenDlQcrVWusjPk6eSdba9BkRcel5GMhWznRTm1EEJgw31gPAN7UuryaZzRUiipL7SGwdP1ao27Qu7ZmpTi+Ar9eD+l0Ylv88U2OTycVxfAWg3gfQQXKz1sGjPvq8AcbrQQ4BCAD1tDHlX/oYbJaNouR+Es+S+CQMg0tJio8+bwCnPI7TA26DI/mE1sFvfAw2y8Zxei8g20h8pHV4ma+uWQLYTwFeDOBPxoQbfI02yidJ8tMsw4sAPzMmcDq9xqwArE0SEQQkH9U62OxlsUk4juO7APUKwKoxQdlX16wA4jgZBLDItYjGhI/4Gm2Ut7a6RqT+uogc6+rSF/rqmi2AO1gtILlJ6+AxX6ON8lGU3kbKbgCjxoQLfHV5A7gmxNrUtYEk1W+1Lv+l2Wh/f393Pl+4RwTrSMmyDC90dBS2L1ny9Tshays3iWR/d1+fMCznffeV2QAssDY9fbTlr4wJnnQAtVqtePLk2FoA6wBc4wCbwBz0HoDb2trUjlKpdNy9T9N0Vb0ue93/uRwXBkFwwicK3gADAwOLlMq7GnAGN4qwJiLrRORm92jCOInPRfCSUqxnmdw9vm+MDxJDAHeQuW0iGBIZe2/8uSz2PZ54A5y+dZ60+SZ5XEReI2V7GIa9DXejqlqtXl+vY61I5mA6/7/K/C8g57vfHR3tevHixV6NvTfAwEDtYqXGvupPx69SZI9zulAo7Ojs7Bw6Uwq4c36apjdlGdcC4m6sGy4I2pYb0zll8zKZ3lkAVHpyOdkvgj4A2wuF3IvFYrHmk7cTsu7WulKp3OpgRLKftLXlri+VSgd8dHkDHD16dNHQ0NCSVvfHrh/o7+9X3d3dI/MK4KP8m5D1jsA34ZSPjXMAPqs1H7LnIjAfq+qj86yPwP8AX2Z5T+NEqMwAAAAASUVORK5CYII=",alt:"",class:"opacity0_6"}),w("span",null,"38"),w("span",{class:"no_login_mask"})])]),w("li",null,[w("div",null,[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAapJREFUaEPtl7FOxDAMhu3TVUJdkLqk9C7sPAETG2KHhccB3oYJngPUhdtv6h0LUiUWFqiCgqhUVW3jpFFxUbrGTvz9v902CDN/cOb1QwD4aweDA8GBkQqEFhop4Oh0kgNFsVfUkxDxOY4PLpIkea9zimJ/AwC31D3qOClXxvqMAXozGwAd7wvCOwBlwyGVayeUUp/LZXSdZeKxK74WjHKelQOUDU1tQoFgDfDbkj8z0ecEewATxCwA8jyP0vToRSk4aTvBHkAXL0R6D4BXAPABAHETgjVAs3hEfFOqOgdYXDZnoqq+HnSbUV4ak76FuoqXUm7aM4GIETuAoeL7vthsHKAU3wXBAsCm+DYEKwDExZke2LrnKV9sKVd3prhJhli7IKU8FkJsTQXZrk8CYFuUTTxLgLIsD5v3iSEglgC73etT+1LUB8ESQP9K6EvRep2dmtqJLQC7L7FJyeY66585CkgAaKtkowhFYVOMzXlhiE1quqwHB/7tDLi0w5gc7/eBMcW45HoDcDl8qhzSa3SqYlzOCQAuqvnMCQ74VNNlr+CAi2o+c2bvwDehMmBAus6R2wAAAABJRU5ErkJggg==",alt:"",class:"opacity0_6"}),w("span",null,"")])])],-1)),w("div",yT,[w("div",AT,[w("ul",_T,[(le(!0),we(Xe,null,Ot(y.videoData.list||[],(I,R)=>(le(),we("li",{key:R,class:wi({active:d.value===I.shortId}),onClick:N=>b(R,I)},[w("p",ST,He(I.episodeTitle),1),d.value===I.shortId?(le(),we("img",{key:0,src:NT,alt:""})):An("",!0)],10,bT))),128))]),w("div",{class:"all_episodes flex_none flex align_item-center justify_content-center",onClick:_},m[9]||(m[9]=[w("span",null,"",-1),w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAANhJREFUSEvd1TsOwjAMBmA7C49rwcpBUEmU5CClbSicg3IWFo7CUKMI2CAPRx0ge/5PsR0ZYeKDE+fD/wOolHVCwLVp6hOnnMESKWUPiFQREQkhKg4SBLS223Ece0RELhJtcikSBXzdS5AkoARJBrhIFsBBsgEpzVoIvADQ3INE2Hddvfv2R7KAZzicAWD5Cjy27d6HUzGglF0h0pAT7tGkF3DDk4CS8ChQGh4FtDYDEWxSG/qp0cEeGGMWROCRW2xa2FMkpZw55+6hUQztiaQp4iya953fBx4l45gZ80ZoqgAAAABJRU5ErkJggg==",alt:""},null,-1)]))])])])]),_:1},8,["modelValue"])]),Sn(w("div",ET,[w("div",wT,[w("div",CT,He(y.videoData.seriesInfo.title),1),w("div",TT,[w("div",kT,He(y.videoData.seriesInfo.updateStatus),1)]),w("div",IT,[w("span",RT,He(y.videoData.seriesInfo.postTime?y.videoData.seriesInfo.postTime.slice(0,4):"")+"",1),w("span",PT,He(y.videoData.seriesInfo.channeName),1)]),w("div",xT,[w("div",DT,[m[11]||(m[11]=w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAlNJREFUSEvt1U9IVFEUx/Hvec+oLAuCCIoQIatFuKhcpM2fhZugVSBUUBj9gVoE5sxEEBS2iZk3RZsIWwQVgZK0KAhq0TivP5iJUIsWCbYyiYSoDPoz98RMJmjjzH0juHK275zf575z77wrzPNP5tljAfxv4hoPn0XolWT2bSXbEWikGg9tRRlE+QYckrR/NygaFLyPsnsSUUTaJZW9EgS1BjUe2YeaO9PD1SDOfkllu21RK1ATzZswTj+wskjwVxyzWZLPRm3QsqAmmtdinKdAXYnAW+L5BzW28yTyo0dSA2Oz1ZYE9Xx0CRPGR3V76dXrT35XraEqdxtkTLzskcrAWKgLOGozKqRQdwZDLSL14mVHivXN+oYaCzWADoE4ViBqpmqVpKT900HBm8ABO2xGlTIsab/eGtTWVpfaDx9BVlUE5pvUXS3pzKeZ/UVHqu3RDbi5dxVj+UbHbZRk5pUd2BFpRMzLOYE4TeL1vbADY01bwH0zJ7DKrZOLmfd24LFti1hRPQ7UFEH7EelEtQdYNsuiRsXz11kfmsKex0PXUYr9gfvE86OaCO/BaG9RUOiUlH8uGHgqvB5H82Od/v1UuiXt7y0sKhZ6DLTMCB6FpRvFezQRCCwEdkR2IeYesHiq2eG4JP1rk1NoQ7kx9Uz1C7gtku4bqOjT9hcNh5H8tST5PRnhu9sgVzP5CxiNRXaAeT4Z/hojbXIpO1TqsJW9LQrBieYajHOYnPtALmeG/wXqiehyqnMXcOQJnyceStfgr3In2wosFxLk+QIYZFpWtX8AbCq/Hc3hj6cAAAAASUVORK5CYII=",alt:""},null,-1)),w("span",null,He(y.videoData.seriesInfo.playCount<1e4?y.videoData.seriesInfo.playCount:(y.videoData.seriesInfo.playCount/1e4).toFixed(1)+" "),1)]),m[12]||(m[12]=w("span",{class:"line"},"|",-1))]),w("div",OT,[w("div",LT,He(y.videoData.seriesInfo.contentType),1)]),w("div",BT," "+He(y.videoData.seriesInfo.director),1),w("div",MT," "+He(y.videoData.seriesInfo.actor),1),m[13]||(m[13]=w("div",{class:"title"},"",-1)),w("div",FT,He(y.videoData.seriesInfo.description),1)])],512),[[jn,y.detailShow]])],64)}}}),HT=pt(UT,[["__scopeId","data-v-d2e4ee9f"]]),VT={class:"top"},jT={class:"player-container"},GT={class:"title_box absolute notranslate"},zT={class:"bar justify_content-sb van-hairline--bottom"},KT={class:"left flex align_item-center"},YT={class:"close_detail"},QT={class:"bottom flex_auto"},WT={class:"load-box box1"},XT={class:"load-box box2"},qT=Fe({__name:"VideoPlayer",setup(n){const r=ne(""),i=Ps(),t=Ri(),e=ne({size:0,tags:[],seriesInfo:{starring:"",id:111,channeID:111,mediaUrl:"",coverUrl:"",cidMapper:"",postTime:"",actor:"",director:"",channeName:"",description:"",contentType:"",updateStatus:"",score:"",playCount:0,title:"",fileName:"",mediaId:"",shareCount:0,comments:0,isHot:!1,isVip:!1},userProgress:{currentEpisode:0,currentEpisodeShortId:"",watchProgress:0,watchPercentage:0,totalWatchTime:0,lastWatchTime:"",isCompleted:!1},list:[]});Tt(async()=>{const l=i.params.id;try{const u=await Yt.get(`/api/video/episodes?seriesShortId=${l}&size=500`);e.value=u.data.data}catch(u){console.error("",u)}});const s=ne(!1),a=ne("intro"),o=ne(null);return(l,u)=>{const c=Dp;return le(),we(Xe,null,[w("div",VT,[w("div",jT,[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAXNJREFUaEPt2TtKBEEYReFzMZMBd+ASXIGBmhgaGbkDlyGGJgYuQBAjAzP3YOoCRMHcRMTEkoYOOpgHXfU/ZrArmWD6cb6qoXqgxYYPbXg/EyB7BacV+LcrUEqZAXfAEXAl6aJmMlJ+Qn38E7DfR/8CM0nfYxHhgDnxXfOLpL2x8d3xoYAF8a/AoaS3tQZ4xIetgFd8CMAz3h3gHe8KiIh3AyyJP5D0XrPbLDrHfBuNjDdfgeh4U0BGvBkgK94EkBnfDMiObwKsQ3wr4BE4GezP3b9K831+1TOj+jlQSvkCtgc3OJX0sOqG1t+3AG6A80HQJ3As6dk6ctn1WgBbwC1wlomoBnTRpZR0RBNgHRDNgGyECSATYQbIQpgCMhDmgGiECyAS4QaIQrgCIhDuAG9ECMATEQbwQoQCliA+gF1J3YuOUSMcsADxA+xI6j5HjRTAAHHZvyO7lnQ/qrw/OA1QEzvvnAlgNZO115lWoHbmrM77A89a2jFh78iUAAAAAElFTkSuQmCC",alt:"",class:"left-arrow",onClick:u[0]||(u[0]=(...f)=>At(t).back&&At(t).back(...f))}),w("div",GT,[B(c,{scrollable:!1,text:r.value,background:"transparent",color:"#fff"},null,8,["text"])]),w("div",{id:"mse",ref_key:"playerRef",ref:o},null,512)]),w("div",zT,[w("div",KT,[w("div",{class:wi(["button",{active:a.value==="intro"}]),onClick:u[1]||(u[1]=f=>a.value="intro")},u[6]||(u[6]=[bi(" "),w("i",null,null,-1)]),2),w("div",{class:wi(["button",{active:a.value==="comment"}]),onClick:u[2]||(u[2]=f=>a.value="comment")},u[7]||(u[7]=[bi("  "),w("span",null,"1",-1),w("i",null,null,-1)]),2)]),u[9]||(u[9]=w("div",{class:"right flex_none flex align_item-center"},[w("div",{class:"danmu-control flex_none"})],-1)),Sn(w("div",YT,[u[8]||(u[8]=w("span",null,"",-1)),w("img",{onClick:u[3]||(u[3]=f=>s.value=!s.value),src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAyRJREFUWEftlslPFEEUxr831fYguKAn1Agibmd3Pc0YMUDiv4AhIJOexQgJ8b9gklntIBkP3j0ZRYwkbpjgdnTfl5MrIsxMVz9TMGNEmelujfFCXTrpqlff7331XlcT/vOg/6yPRYBFByo6kMmYZ4mwDbDbDcN4/ifFmk6nG4i08wB9Dod7AwvtUREgmz15jpk6ADy3bRGIRnteeIFIp3MNQGFMJUGEccMI7fcEMDw8vDyfty4AUIHPbLsYjEajriBM01xj27jMrBzEPdsuHoxGo+89AajFCmJmxhohwj5mPNM0BEKh0MtqTiSTybVC6JcBbAVwV9fFwZ6eng+VYhy7IJFIrBDCf0FBAHgqBIKVIJLJ4bVCWGMAthDhzvS0aO3vryyuoBwB1CIFoWk1IwDvBfhpoUDB48fnO5HNZtcx+5T4ZiK6zWy1hsPhj0514wpgIQhmGYhEIq/U3M/iAG4D0pW4awfKWSQSZ1YIMXWRCHsAPGG2grquc7Foq8w3MeNWba3e2tXV9ckp8/K8awfKAaZprpQSI8AcROl9C4CJfP7bob6+Ptfinh2YD0GjAO8qvZsQAq2hUOiz28z/2AEVaJpmo5Q8BtDG0kaPLcsXPHbs6Ot/DpBKpZqIlqgvXDNAN4ngY+bdAB4T2QHDMN54gfBUA6nUqSafT6qCa2bGuJT5Nimlz++vvQhAHccjIjvoBcI1QDab3VDq8w0Abvj9Wlt3d/ekyjYej9freu0oEXZ6hXAFkEwONQsx22pNRHRd10V7Wbxsdzyeq6+pKYwyz0FIqQVise63TsfhCDA0NNRcLKqC4yYA1yYntY4TJ+Yy/3Xkcrn6mZkfEA+lLARjsVhViKoAmUxmIyBU5o0AXWUudkQika/VsspkMqsATbXoDiI8sKzCgWoQFQESCbNF02ZbbT3AV5mlo3gZTEEQaaPMvAPAg9IF9m4h8Gp/RPfVlUqEK3V1Szs6OzunnM7z5/k5CHGJGdvVtRwOh9Tzt1EN4DSAZVNTX44MDAx4Ei+rDA6eWu33y7M+H30xjN7DngC8ZPs3ax274G82dxO7CLDowHc0yEkwMWOySAAAAABJRU5ErkJggg==",alt:""})],512),[[jn,s.value]])])]),w("div",QT,[Sn(w("div",WT,[e.value.seriesInfo.coverUrl?(le(),vt(HT,{key:0,videoData:e.value,detailShow:s.value,"onUpdate:detailShow":u[4]||(u[4]=f=>s.value=f),title:r.value,"onUpdate:title":u[5]||(u[5]=f=>r.value=f)},null,8,["videoData","detailShow","title"])):An("",!0)],512),[[jn,a.value==="intro"]]),Sn(w("div",XT,null,512),[[jn,a.value==="comment"]])])],64)}}}),JT=pt(qT,[["__scopeId","data-v-bd27dcce"]]),ZT={class:"detail h_100_vh"},$T={class:"detail-body flex_direction-column"},ek=Fe({__name:"PlayView",setup(n){return(r,i)=>(le(),we("div",ZT,[w("div",$T,[B(JT)])]))}}),tk=pt(ek,[["__scopeId","data-v-1b3310d5"]]),nk={},ik={class:"coming-soon"};function rk(n,r){return le(),we("div",ik,r[0]||(r[0]=[w("div",{class:"content"},[w("h1",{class:"title"},""),w("p",{class:"subtitle"},""),w("div",{class:"underline"})],-1)]))}const ua=pt(nk,[["render",rk],["__scopeId","data-v-06c76971"]]),sk={class:"tab-bar"},ak=["src"],ok={class:"tab-label"},lk=Fe({__name:"TabComp",setup(n){const r=ne(0),i=[{label:"",name:"homelayout",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAQNJREFUaEPtmEEKwjAQRX9EsIh3cOVddOcpugwtuPIQKjmNp0ukYEFKS+1MqB35Xc9MM+9NSlIH448zvn6wgV8bpAEaUBLgCCkBqtNpQI1QWeB/DXhfJyUcUXoI90lQB4PZgIg/0DXgvT8A6xDC7dRXcrEGyrLcFsXuCsQL4DZDo7XIBqqqOse4egBp31I30wDgnkA6dsfFUAP9m4cNCD8q2dJoIBtKYSEaEILLlkYD2VAKC9GAEFy2NBrIhnK0kPHDXDMqpo/T7aybvtB8TpnZK+XoVnkHLPJK+e3im7hJ/2CmFJ4rlg3MRXroPTRAA0oCHCElQHU6DagRKgvQgBKgOv0FY1yEMQRDGKkAAAAASUVORK5CYII=",iconActive:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA7lJREFUaEPtWMtqFEEUre6eQMw3uNBREEFEEBHf4lt0ogZBTEKeahKiyXI+Q7N1k72Cm6xc+QEqRhEfEY2i4g+IC3H6SnXVrb5VU9Uzl8lEIp1Np3uqquvcc+65tzoSG/wv2uD7FyWAf81gyUDJQIcRKCXUYQA7nl4y0HEIO1zg/2XgwA+ApCFEAkJUUiGSFEQljdQV5FU+B5GkkaiAvMoxeqyZ0/o+mwP53MlazApqcPCh7wBmkxDZIECCUS9VG9DAzL0QFHw2lmzSzPUAHe9fIwBHviEAuUEVacUCbjoH0ANCxJIJ8nvOHDKoQPRYwAlrGuToJRvA4wewVfwRC2cHo35fugQZOPYVwEhEL55LiUqLAHMj6siDsoByQ/ng/fAVBeDJIvT+7BP1OBX1JIVN54b8zAQBnPgCoKJIom82iLlAoutu1nPv6p3mDP4/OBBHjx7CxaQBCwmIKsrv9DATwKnPEgBKRsmDJqydAwgkwAbRvy/RUW5yzQpES3EDai4zJ0eYAM6sppC5ThMI6hrqd7MpdCGPdCzAliRtF7LWIsCPjzIBnP8kkxgtk1ioBkVtk9pg9lxKjVqwLzccM0CpUKAoOfns6BgTwIWPeRLnLORSQe8PWaIrAQPMUyuaGJSAZfQbOTuHx5kAah8A1CZoAWu2vbYijQwQJkJSoYlO8+XgBBPA5ZU0c6H8RariFmmZUu6TmM+F3GdeRkGI/ZNMAAPvU1WJrbaB+r+Sk08qbk403TuVORT1bH2dK/tuMgFcfSddqLnqutps1SaY34me3YR1o+5jYe8tJoBrbxUDyIJV0BwbDEnHaicCtcBUZGwxqGOROXummACuv5EAdAEL2aC7Ke69KyXXfkmgdk8zAQy9xjpQ0CYXFKyijtNfxW25uvLdNcMEMKIBGBZIPhgNW+eFtTkPhPqlnbNMAGOvtAu5Zb/AQbxJ73EqDjuYIztuMwFMvMwBKBsMnweoTQY3RwJR5Fw9abQUp1CjY+QZYvsdJoAby2ijgUT2VVV66mrhOt7zgC5Yy/dVO11JRRWL6bY5JoCpF0RCvsZLS8NqvjSodnzd17zJZ1iwVheh9/cvUa/oA82WeSaAmeeqlTC6bpELRdJpWYnJe9yCtXIXqn2xuLd5nnmknH2mJeQWFk9F9XaTTmFq9zwQKlihz0fBI+XcU+yF7A6U9j5tVeAAc6EuNlSw2AA6/GC2btNZH5HWbVeMF5UAGMHqytCSga6ElbFoyQAjWF0ZWjLQlbAyFi0ZYASrK0P/AlTKx16rrmjvAAAAAElFTkSuQmCC"},{label:"",name:"discovery",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAqJJREFUaEPtmD2sDFEUx8+5g47i7cbuNBJaQiEkoscrSChEssFTbGZmNbQKhkahoLF3Jlv4iviKKBQ8vUioyFNJSLZ5u5Zk43WYe2RiV9bkMXPuHXk7MtPO+Z97fuece+beQSj4gwWPH0qAla5gWYGyAoYZKFvI932xuPhxDwDtRYTdALCJiNbFiUXELwDwngieA+C8ba9/5vu+Mkz6b3LtCsSB9/v9o0rRBQDYkDGorhB4tlar3coLRAug2WxuFsK6CwBbMgaeNFtQKjrS6XTeaup/ydgArVZrfxSp2wCw1nDxJQDRCMP2YxM/LIBR8I8AwDJZdEIbWZY42G7rQ2QGGLXNixwyn2RfUirapdtOmQB+Tprea4OeTyvYgm3Xt+ls7EwAruvOEcG1tChM3iPCiSAIrnN9pAKMsv+BMSq5MYztu7Zd38itQiqA47T2AagnulHxdGI2DNtPOZoMAN5lADrFcapvi1fCUJ7m6FMBXNd7SUQ7OE51bRHxVRDInRx9FoBPRFThONW1RcTPQSCrHH0qgOO4XwFgNcepge23MAzWcPT/P4DresVuocJvYscp+Bgt/Ies8EeJeKR5nndcKWIftDjjUAick1Le4Ghi29QxGhsV/jgdQxT6QjMua6GvlAmIXC71liUag8FgfmamegdR3AuCq/f/yR5IOs3rt8pwOHxXqVQfENEBAPiOaDW4EJk28XJZiTd2r9c7RgTnGbe1LiKcq9frN+Obl+N4DwHo0IR/NoQ2wHhRk1+LrnvyMFEUt+MqXQhjAG7PJu1NIVYcIAb6E4QQuF1K+eZvSZoKgOUghMCLUsozaRWeGoBJCCHwUpbgMx8l0rKQ53vP87amtc3kelNVAZ1ElAA6WctTU1Ygz2zq+CoroJO1PDU/AOliPkDPriFTAAAAAElFTkSuQmCC",iconActive:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABU9JREFUaEPtWFFoHFUUvfe92bQIUvoh8c8SW0i/NCCSWj8MCdWFBpsYTDaJhULFSkARi/hV14LiR4ogCIIfItYm+OFPxSBU2o9EQy0m1UpNN41+pl8aRWi7u+/KnffezJvZ3ezu7ISmsPkJmcwM95x77rnnDcJ9/oP3ef3QBnCvO9juQLsDLTLQllCeSFy7AX0CICsU9AoFeyXBbkEEHuFfQsFqBmARFcw91AMX84iqRdIjjyfuABd+dRVySHBaKOjyCEAoAEkEUiFI/psApH/NXCdcyxCceuBbmMnn0wGSCMDgH9QtSnBOEvRwgUHhpAv3rwXFEwiF4BGB4P9rQEs7AMbzT+HvrXajaQBHVikLBDOCYJdlVwMI2Y4wr8h0wxbPHfJBb0iFuXeewblWQDQFgIsngvNSgdSysOw7xZuCpWGbwfjsW1kpng1+zu9W2QMYfLsFEA0DYNnIEiy6zEel4kjH7wYzr1n3O+LPBv/mwhlQcP+GFNh7si+ZnBoCwAO7vApXhIIey3ylfIzGgyE20jHMa0C2YwzMSos7hEt/L8ATSQa7IQBDBZpABWc31zlGXcdnXhdpmRdWXoEzhV3LAE6++ix+2ew81AXA7P9agAJbpZWD1rCRiDu8RhbaQkM7jTpT2Al+D0vKvGttPQv7mt0TdQGMrFA/ElwIiqhVuM92KA0tF2urrnxct4rejwoHjg/i9810oS6A0RWaxjK86Q9hMJQOuyqufT3A2vNjhZsBrmW/HuKZo4fxZKoAxq7TvFRwsLplxt3FSsvuBcdxXEDuhnbmQShYeOmIeDpVABO/0bpU0BlGAzuYJi7Y+OBreRNAxkKDQTaA/D1hrNYjvJUbwodTBXD0mrojFXZEOuAOcbCFWTYsH816mIHsLMSvhdtb7wl/Nu6OviB2pArg2C90RxJ0BK4TLKjKiBBEimr6N0DDe6pu8rsjIykDOH6V1oWiTjvAeosad3GZVrwHarNckU4jgS+YmVtDL6YsoVeWaF4QHHSdY9M9YJZXzW7YTkSidrDQFp4fTXmIp5ZpGkvGRitYtlnH2bjBQIbaZzDheaGq9nXMADxzeDRlG536mfq9Ei+ycPO68xA9tGjvj8ZpG+acw01MPgFAwIFsLuVFxlHin5+gIBV0hQcX23J3k1YvPu5eFQnWSMkjXDt0A/Zhkye1upuYLe2tyzQhSnBWM2vkEtnKxlHcKGHstOKw4wY5k05ZXh7h5MDEFoQ5BpDPkygegiuiTD2RPB8bxHix1diuuEcHuqWFwhbGaR/ED9RNRVr0+ChpM03sRBbXfk35RBPsRkZgb9/4Fh5o7GZ87xJlBcF5JJLupq12MmtE+0JBWQIO9k8mPxc3NAPuav/gEmVliWZkcKgPowN3oJZlVkYR2JCAuV3/wYXbO+ELqeCrA8fw62ZiBN/bNAB+aPo76u5AOKePmOZ8W/E5Jer3NrD5nQNc8hDGH/wXbt7eCbOiTMOSoIgKx558uTkQiQDYwe48ADlRhtOyTF3BWbnqlwoNhq1SEpyaL+gPWwuf0yyWaVR/ufC7VxQKxx4/0TiIxABsq3lP7PkG+gRBVirolQR7RZl2a0D606LHnxYJ5p5bgYuuz//4GQ0LRbNCQcY5bxelwrH9U42BaBlAs5qN33/5Uxr2iGalAWFstugpHHv0tfog7jkABrT8iQFBkHFCI8/EY3vewOubkbQtAHCB1z/mQaZZYUAIwHcfeR3z9Tq8bQBwoTc/omHBIADfb6T4xDZaj5VW/v/nh7S/nmzc92+rDiQB3gaQhLU0n2l3IE02k7yr3YEkrKX5zP+MUcZeOOHW0wAAAABJRU5ErkJggg=="},{label:"VIP",name:"vip",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABu9JREFUaEPtWX2MVNUVP+fNjsv6tQPRqCtNa6INTZBqMCGNn4kK2KpUwrbWagkSRrMMc+99g6DWj2fpF9th3rv7AOvY0C1psXTbolXaUFT8IoQ/DIofKYlfiQskmuwy4LJlmXnH3N2d5c2dNzNvZ2djSHx/3nvuOb/fOefee859CKf5h6c5fviawFcdwXFHgDHRCQAPTBLwbVLaC8eje1wEOOdXE+GrABAZj5HxyCLS3Y7j/CXsmtAEVq5ceVY+X3iLCC4Nq7xOuT5Emuk4zuEw60MTYExsAICOMEobIPOClPZtYfSEIsBY6maiwg5E9MvnEWEDAJ4MY6iKTDMRKceUpCUiLnGcTHct3TUJxOOrW1taht4BgG/4lSHiGsfJPFbLQJj5ZJL/GhEf0mSPeF70ctft7K2moyYBzkU3ESzWlOwbHByYk81mJ+r9YbXxeDza0nL2HgCaXWoHd0iZmV83ASHEAs+DZzUFJ4giV3V1pd8N492wMolEakYk4r0JAGf61xDBfV1ddraSnooRSKVS5+XzngJ5QalCWt3V5ai7oOGfEKLD89S+KvmOIdIsx3E+CTJYkQDnoocIFpXmPeyOxVqvsyzLazj6UYWMmdsB6Pua3Zcdx74JAEi3G0iAMXEXAOiXyYBhwBW2bX9gWZbR3380QeSdURqd6DbX/d2H1cipy9Dz4HulAOlTKeVWNdbR0XFhNNq8HwDOL5XBhONk9OiUF3OJRKItEomqU2eaBmS5lPbG4ljwyYGvSZm5IchTap26DE+eLPwPAKZrm3WBlJl/ndItFiDCNoASfAOel/+u67olDiqLAGPi3wBwi2Zgp5SZeX5g8Xj8zClTznofEb5Z6iljmeOs+0NQFJJJ85eI9HNN9wtSZsouLcaE2rjLtA39+rRprTf4U7iEAGPmMgDSd3zF87jCKdUXjUa+k06nP/MbTyRWXmIYBUV4im/8eKEQmbl+ffpjnfBotPYBwGXanCmlbRfHxghwzr9FhCr3ztE8tFjKzOZKec2Y+TwA3arNb5HS/ql/jHPxDyIoqTQR8RHHyfyqsm42B8B4AwCafDKDAN6VUsoDamyYABGhEOYuIrheA/+slJk7qm1K5dlIpPAeALT45MgwYL5t2/9VY8mkeSMivajpOTB1aussy7KGqulnTKjb/glNZs+hQ73X9vT0FIYJCCFu8jzYGaBor+fl57que7SGkUcAYI1G/kPDoMt7e3uH2toufgsAZ2oE59q2rZMqM8OY+TMA+pM+YRhwn23b2bEUYkyoUD4cAHRPc3N0Xmdn57FKJFasWNGM2LQfEb6tyfwWAA4CgKuR2ypl5s5qTlFzjJl3E3ndiKj3H3sHB8+Yl82uzWmbWPwGAB7UFSPC7qGhE/M3btz4ReV8Td0M4A2njO9TtdIAAMR8Y8cKheiM9es7D1WP6rDnNwU0T2Pgx/aAXxHn5loiWhVA4vWmpsgt6XRaAQr8OBdbieBH1T1rmFKuGztFgmSTSbEEEZ6uBT6QwEjoRBoAUgEkXm1qivygEolEYlVbJHJSXVTaSTamaf/bb7fOfuUVK1+JpBBiqeeBOsoNTabE88W5KrWQuY6IzABDuwYHB27NZrPHg0BwbppEtE6fIyJ1Ml3rOM7uSuCTSRFHhCfDgq8YgaIBxkwbgHi5QXzJMOg227YH9TnLspr6+3OqLJ6lzf1RSvveKuDvH+nwwnm+ZgROkRBSHeUBJHbmcufe3t1t/V+fSyZT1wAUXvO1oH2el5/huu7nwTnPl6uTSmtZlWhg2vh11OzIRvaE6QJQIoDEjlyu74fd3d1lJKpv5FOznKdWeF5B1gO+Zgr5QVR6lUCE/xQK+Ttc1z0RFnRRjnOTE1FGqzpDeT50CvlAIWNCldP360ARYXss1rqwVlngXze62dVpp2dBzbQZdwr5SXAufk8E8QASzx882Luop6enam0zkpJCPU2unSj4caWQFomn9Fp9WBnCc8ePD7RXe61IJsWDiKBufP0bl+frSaExg6p65Tz1NAAtDQDyz6lTW39sWeWXFWNC1VpB5XNd4OuNwDDmkb44pzqvJQHp9PdYrPUnfhKcm48S0S8a5fkJRaC4WJE4ciS3KeDhC4jgb4cP996lanbOTYuIHm80+AlFQCOhXu/uKY8EPuN53keIqPXBw5J1p81ETqEAJ46kU1/f0c2IVNJGBgqPDDYEfEMiUATZ3t4eaWubrnpn9aZU7WsY+IYSUMpGSfwZACp1Ww0F33ACRRIXXTR9C2JZY9Nw8JNCYPSIbervP7oFgNpHc2lSwE8agVMkcn9Vz4jFBrzG3qhrOlQ5XZfm0R8XsVhsSrUXjXp1F9dNKoGJgguz/msCYbw0mTKnfQS+BHKp+E/H2hQJAAAAAElFTkSuQmCC",iconActive:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABmxJREFUaEPtWG1oVmUYvq9zXjenSChaoU7aHNacGUZ/LD8Snd+micwwQ4zKCDFQog8MBn0i2RcapSEWSbZA57fT5TDNXClkc7pZy2/LIEGHaG7nueKc8+7sfL7vebd3P4TOr+19nnPf13Xf130/93Mgt/mD2xy/ZEyA/xxaQcWXuoI4gM3o+/DsTGxnRIBXfnxEDLWfFL3dCUU8cTD/b3vc5t2/h0G09wLafPQbuSEuidgE+FdVT6LnMREZbBtPBTwdgVTEcAWaGoZ+Y/6MQyI+gcsHVpPyQjhwP6AogPEyAsF23D16RtYI8PLBUipVZWvFF3nSzLvLV1Iq1rZUxJKvRLwPHQtx55j16UikzQCvHLlDbl6vI5nfLvWQ1wJAogBGQQpI8iqI+zFg7PlUJNITuLR/PckF4gcYBdjxli5T6QkCqEL/sZM7TIAX980kUWnXrD9CbWZ9EkpHzLKTfNwSCyTAtgvRFmHg2DVRJCIzwEs1fUXxOCl3OU0nsvskzcSr0fRd1ouqGa0YjoJxZ6Kbb8gKz9d8S6XmhDKP23TSVWBYt3Ultn0Z+2TQuAkAAodJaAZ4ft88Gip4mDi7qShYJeAtN0ZQmyVkUUrNQg4q8LBnD5EPytyU72n6Ygwat9q/J0CA5/b0FwWz6/RxTtjQLonX9IIJ77gN8lz1aCrZL2S4NCHXoWv3In/8Rc97Z6srqTjTC85VFLa169C0BzBofJMnaH5GPL1nJylT0mUfwHWhVoLC8Wc9YM5Ur6VSz4S9T8FyvbD0Lc/+pqrpBLal82euAzgg9/zwKFCuQtXHP/Y+S6rIig+kT9MqUVD6uDeaB3qLceMkSbv425/T0HKGomDcTUfm5w/lSUtzPSkFcQhYJESWYvCkDwIE2FBVwATNWadXqLGILgro0zG4dIc3qrvnkeKpIYg2G0UTN3v2/V71BoXLY4Fv8w/cANQIFE5pTBIyW3y5Jk0j95FqrGPMAZyUs9XfQ1wRp5F3rQT5ZTfcq+q3XeboMTGZ+u9QNHmCl2T1EKqWX0UkN3XAQv0fRlHzKKDMsFbZtHsCW9VeL0AfWs8B5HJJEQJv6kOmvO4BeKq6UNBSRyU5MIwRGDr9uHd99x6KKg0GLFTdyYM0uQYRaPoiFE1a46A0Gne9DeGr9paQ2T3VmA/8C8XhKJ52yg3SaNzxigb0x5CpSzzgG3fOpXBjMPJtcFL7h4Za0btNwuDSq54wGw3b3wXl5XCp+KbLwGwke7XiaZZknCI98lk36V3Yw3Tk/NawpZcgcZKUAXasfNJMMbFYowVQKwkbvFMDnqid2LYCIt4ro2dmCYlOch0Kc1EyrSJVUbJxx0oqLrVnq5hPm31BreTkOOBDCVhBqd/6HkWWeeZ5x587RF5dAXJRNFWM+2Y2h0Fj3Zbh1LSjIpJw5Sn6SuoKHEzwubke8JEEbBLbVpJc6nXkgxXIDISC9/VhM5b5CdA8nU9s+57kqIh25r0AuaZfSzbduwfApyRgLhr1Wz6E4ovRiQ6dGFqR4IMonlXnqYf6yoVUWBe0FSV6eyc0qZXuPULBpyWQlNNHNNSS0M7koPENS9AOYthjY9qmR9ZX9KGR2yDCfl47qe5TFKvb5PWMBB+PgJn6uq0fk8bi9ui5HKe7wAS+Xjj9KET77XYt2dy6NQkPlTkdLEwJaa+Udqcj5HjlKhoM+SoRs5NksM0C39KSFnysDDjxMkkc2/wJyeet39JFPuKKGODh2wdIrbQascBnRMDJxC+bPiX5nAMk7PtW6MzkU4xbScm/oSMj8BkTaCOhjm5aAyRn/ky+LKYgZhWsoWJHvo1/rBoI9PTyck1NK1kL8On2TPi/TqQQvc+rdUgJMwbfoQy010S5JkdKPifVwshvu34OIVdTaFqHwXeKgC2nck1+Ll5H4QJPTcQAbjk3wUM6FPlOSciNj6QmP31jfr17KoNOaU+VutYp8J3OgCOnigpd8lu/oMiTcUjYI7HeafBZI2DJySJhfEmqealIWOC7JbICPqsE7Jqo0OVwy1dUfCKMBKDVSk72wGedgEWipjwh3Yo2kCxz3ycg5lSZk7XIZ62IwyLNmpoEExe+FuEcc5azZJOXm3XwXZIBp7BrahKiX9gokIFdBb5LCVhyMi/1f/fMw9T51+J0p47s6dAo0RFHXfXO/wS6KrJx7f6fgbiR6qp9t30G/gNrFa5P8jNH0QAAAABJRU5ErkJggg=="},{label:"",name:"rank",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAtpJREFUaEPtl7GLE1EQxr/ZiOBVwuVAG220sD38C9RGFPWE6FkI3gnxvU1nIRaHlSKC7e0+A3oBm9OAd8pZ6l8gthbaaHNCNmh1gpgdedksWeNtkvc2URZ2uyT7Zr7ffDO7E0LOL8q5fhQA/9vBwoHCgYwVKFoorYBCSE7+ppQ/lWJNJagWXgCMORtWDlSrtXkdv15ffT+JFpJS3ul0nK1h8dLyGANo8UThGx2Q2TlpkzQpRgj3AcC3mPHdJp4RQCyeCPsjALukMUAsPv5sE88IQAj3NsD3/7ST7ymlVvR31Wp1plQqXQZwjhnzRDQXgXKLCLrdXnU6nWf1en0nGvSo+ol438LQOWXiqhGATiSlvMmMh4BeBLmhlFqKxIhlgO4CODhi/rYBXlFKPUlC2FRfnzcG6EFo0aeDILgCoDQ7O/cI4GtjPjh6t1Gj3W7daDabP//pEA+KFMJdMxcfR6GGUl7XQdvLyoH+EHbb5rFt8ugcX4/bySaONYAeWMcpfRqj50fp2g7DzpF4sEfdPPi7NYCUcokZ3UHMehFh2ff9NZs4WQA2mHHBJulfVSRs+r6/YBNrJEDaUiaE/AzgkE3SXc58Uco/HD1WzbZYawAp3R1m3jcJACL64fveTAGwWzVz30JpLSKlzMcQDwHI92M09y+y6ImR41Wivw/lcJkTorYI8GK73bqkQbKs073zzwFaV2p13fS9MvJFNhgwEh8+BbCHCK+DILiod3qbPzSVSmVvuVx+wYwzAH4BzlVTCCMAIWpngXBDi++D0UulvO5OZPGXchPg84kiaYgFpVa3xnXCCMB13QNhyG8BHOslsKpaf376bva+++A4dMLzvK9TAdBBExBHbSwf0pIfTcXrWEYOxMkjCDo+zGqTrVK3puPwO5PKx1qsAMax1wRgnHhp9xQAaZXJvQNZ2sLk7NRayERElnsLgCzVm8TZwoFJVDFLjMKBLNWbxNnf/8CUQHcikOwAAAAASUVORK5CYII=",iconActive:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABVNJREFUaEPtWF9InWUcfn7v+0m6tBF4URdBN5OiktpsEHQxcWxKm8TZyj9TUwJ3FGQLkkIGedNqNBKSpbtJmm3qICMrRMIdFmMVNbekfyh048WgvNORdDzvL97v/b7vfEc9dr5PTyqccyOe877veZ7n9/ye9/cdwg5/0Q7HjxyBra5grgK5CmxQgZyF0gnYPK1YMkEyIBXQt5eyIlZWDtWkXv2J2QUvFHChbIcRaL3DrIFLxdCV+ODZbUTg2O9cqlX+9DGaTmehtimHAGsCQM9+kbba565xp1CY6DyY/rx03xPYQsf+4FKO86QGZYEqhtYhkUnAvDPJ3RL8lmTMS1DF6YAkAhFIgqdiTUAozFsSFZdCkvDAK93sbM5jqmivyrwSgQhEZvm0TKDHbU79lxhnPn6K3tZqN8c4f3cRImBUC8V7BeNhS/cB6K5QasqCGEMco93ltKTXvzfJ3ULZ6ttJJZn+AnAwawT0l9b9yu0C6BUKwiL0DTxB7fr9tlvcIMBnpaJHkoDYBiY0QB2pdkNjTjJ1vVlOn+h9PRPcbbGxEBBMfb0/UAVcTzf9wvVCofLRJ9EMQPx5G72CETWpo8Fq0Bq8cw84CttEDAlYivqfsdBRXk7LH45zJ4CJIMq7WEIR8Ddn+xT3kUJUe9insiHhEnBA2wQ9u9jW6u84RG2ZNPumpZD/INs2zIPmxvUprhgiaRndnLDsqrjrnCppQglqjB4xdgrzCl0B3bD3F/GMZDieJ+N1R22jtJcuqdXxbKYJYM4qpJIWp7GDkghN4NRtrudlXDaeN/YxFjEed/0vXEImZaD/96qhP9PVITrRdJSuBAUfuon1xlM/8LBg1LhNq5VfkTYOoWQlvLXmDvH1A400vEi1WSHQPO0OZUZld6p87Xs1I4E9dqOmKJ8SmSuA+oCnJBNm6yOiRBP47KqeYpNpVlmffgTJqAL2VOkMZFrhC/vMUPb6d7wgmQvXyPlVoJPRmgTm7TPRu1hzXBTpcz8fUZysKnCoYYME9FTpAVDwpso3bqoFwVRoq7VGzift4l1gKcRMwzt7GYvHHQJfDim2e8T5rKJxgwRSp0pCz35Tga6bakYo2mPAm8ZdlfNOlHrv+4j6QQrGbOQlY6HxK74KMHCgaYME0jXWmRs8LBXXuMDT5nxSZd8t7ajvNTKPVNfK7DRxOgLdN7heJHDZmSLT57wvbVbYJmkhRSdeqPufY7Q7xvl5hBmh2De8rZ3zbp+stpjdA3O7/qaS8hYzoQZ9hb7I9Be9G+MGoXjQvXHT5/zq+Ez2DDVW1W/BKOEq9f7X3CeYo/6kWp1MXtr4bGOGucq6LRjmzl3jCAEv734AjSUL4J/j6JUJjqZ43H0OWNHE7hoL1H/fQ+gomgHdK8CgBK4+30SjWbeQBi8Yw0JxngSNFjyI2pNlFO8f5wZL4azdE+uAtxTmBFOXts2PFznvXoF9VkQy4gSqfa4lGIlAPXD+Gz7Mcf5CKOQZm9gPLCPtlWaOGYhxvlxERCRQLZ1HSvNwg7tWgqYkY2zXEkbdhr1+iTX4Gt89Ec9TdPTpVprItBLBCMS4WCQwKRSXOrdvXCSoNnokmGouuOsDHLGYhyV7gkwrhYqykzSfFQL60PMxLs7/xybxuADVRqvCgXcBfqtJJDQJ+i0o+IyGubWUuBjjYlrCvtaq9KV2p0rXHlXrTJV3PuLDy3HcCqK8iyuQhTItq143NqLMT4vO/PNfU2WQs/1rs0bgqyEz12c6VW47AilTpQIOvLL+VLntCIQFFHRf1iwUFEjY9TkCYZXbrH25CmyWkmHPyVUgrHKbte9fEWMWXg5SnSwAAAAASUVORK5CYII="},{label:"",name:"user",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAcFJREFUaEPtl7EyBEEQhv/eEiEV8wBiSiSUnYBAREAwU0ouksg8wPQkgiMlQCQUKRd7AGIpInWjlr2qo+pK7/Suq2EuvZ6e/+u/e2aWkPiPEtePDDBuB7MD2QFlBXILfS+gtbYDYA3AcgiYKf8nwhOAGwDnzHypLPqX5Y05YIyZB+gYwMIPAntA2Pbe3zcB0giAMWYFoDMA00JRz0BY995fC+NHhqkBqsrf1hA/EFNCLGmdaADA3gnaZlQFe97zosYFFUA5sCHgQiWAsKoZbC1ANwRsKgFOmHkrNocW4CEEzMZuXh2xj8w8F5tDBWCMfQEwGbt5te7Ve56KzfG/Aay1abeQtTb5IVYfo0VBHefc1VhmoNzUmIQvsk+Aj0dcuk+JCiLdx9ygd5N+Tg8PYLIfNLGniHad6ibWbt7E+mgAY3Y3gP4pgAmNECJ6A8IOM3dj8kQBNCV+SHC/KGjPOefqQtQGaEH8QHMoCtp3zh3VgagF0KL4Ic106L07kELUBLBBmlgT5z2LdYkDq3dPBpA4kx0YVSVj8gxIOgi5hf5sC4n8/+WgWvfAL2sTbZcBRGVqMSg70GJxRamzA6IytRj0DmRztjHA9kk9AAAAAElFTkSuQmCC",iconActive:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA9RJREFUaEPtWE9IFFEY/755u90Kz0IQdNjoEAUFBm4iiSZGoOhBSKTateyfZCBE1KECwSCQOkQrHrotgkQUYSJJ28EoIor+LEXHzqI3bd8X82Zm581zdnd2ZsdJ2oVldefNzvf7873v+x7CFn/hFo8f6gCiVrCuQF2BgAzULaQS2PuD2jUOfcghGSNo1AiAFeA3I8gxgplH+/FlQNIdt9dMgb5flOB/IKNxSGqcgBECE58AAgQH8XeMMMc4pCcPYb4WQGoCoOcntSKHWa1ADXqQVrCaBEL/TgARb1yOc+iZaMJXQUEEBiCYX4clxqHBYlxnXxOMmwqY7FvAhCpcgGi60xxMicAAevP0mnFKMo6g6QFbwYogLcYNVWQriXWAuVvNeCSICoEA9H6jdkYwZzHtDBKFAho3Pm1b2RYT6wE7brT4T+xAAPq/UkYjShWZFozbAVueF9cVNYrJTTh1rRXTflUIBODkF/qucUpYieuwiGWhSpYizI8dxT2RABj8TCuM03aDaWnbVJK2bC4Aro624Y5IAJz+RCusYACISUmrByz+N7dUcV3aRovXDcutjnREBGDoo2kh1SZldh/VZowwf+FYRBYa/kAZxinlKFJm8OqW6ZofukqAU8OdESXxpfd630NzjiSWK3G5OmDZC7A93YXzkeSA/tDRt2Yhk/zuWszclAHMpboiLGQ6gLF3lGBrsKQRNah7vaMOSMoY63B5WwyaBjojbiV0EDeXqBXXYLYkCIt9uyNdZgg9g8f/gWbO8u7tN5Rgop2mpLMyG/1Q8TvAXJxBOijz1nMDVWK3xJtYEP1RX6wASUbQaLYMYqDBAsycOeG/73F7Xs0B+N1N/N73/wIYX6Ru5JTVOMRL1QG1wBUnMmevtB5HHGjrx6wfFXwpYAXPOMRdK26ZYuZIaLt2FOIch1oGcbpaEFUDuLtI3ZxTVgSvbI/yPCwH6rYryeqYzR3FCEcOn8L71YCoCoAePBUoqxHEixOWZIcNjZo8yKsjpWvlRmIE1w+mcNwriKoATCxwcp1trdZZDUruUt1spYI31xw4q3mOy/NCnZF785wqDeobuk6lhSjVlcoz875zIQGYnOO6xHZVLdc6y4Er96gkqIm993xIAB68MABU3f8ruaCe1qm2TFwMCcDD56YCjtM35zFJpeC8KLj7ckgAMs9KWKjC4KJuo5WmtV0jIQGYfmpbyBfTMlC3XDKv77wSEoDHTziVaAfsEwhxZOhiq3JFT6oR+u83Xg0JgNfispnrqqoDmxmY12fVAXhlKqx1dQXCYtbr79YV8MpUWOv+Am6T0k+id0YbAAAAAElFTkSuQmCC"}];return(t,e)=>{const s=L_,a=P_;return le(),we("div",sk,[B(a,{route:"",modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=o=>r.value=o)},{default:be(()=>[(le(),we(Xe,null,Ot(i,o=>B(s,{key:o.name,replace:"",to:{name:o.name}},{icon:be(l=>[w("img",{src:l.active?o.iconActive:o.icon,style:{width:"6.4vw",height:"6.4vw"}},null,8,ak)]),default:be(()=>[w("span",ok,He(o.label),1)]),_:2},1032,["to"])),64))]),_:1},8,["modelValue"])])}}}),uk=pt(lk,[["__scopeId","data-v-309aca47"]]),ck=Fe({__name:"MainLayou",setup(n){return(r,i)=>{const t=li("RouterView");return le(),we(Xe,null,[B(t,null,{default:be(({Component:e})=>[(le(),vt(xu,null,[(le(),vt(Lu(e)))],1024))]),_:1}),B(uk)],64)}}}),fk="/logo2.png",hk={class:"login h_100_vh flex flex_direction-column"},dk={class:"flex_auto flex flex_direction-column justify_content-center align_items-center overflow_y-auto"},pk={class:"top"},gk={class:"form telegramBotContainer"},vk=Fe({__name:"LoginTG",setup(n){const r=Ps(),i=Ri(),t=ne(null);async function e(s){console.log(": ",s),console.log(s.id);try{const a=await Yt.post("/api/user/telegram-login",s),o=r.query.redirect;o?i.replace(o):i.replace("/"),localStorage.setItem("Authorization",a.data.token_type+" "+a.data.access_token),localStorage.setItem("refresh_token",a.data.refresh_token)}catch(a){console.error("LoginView error: ",a)}}return Tt(()=>{if(t.value){const s=document.createElement("script");s.async=!0,s.src="https://telegram.org/js/telegram-widget.js?22",s.setAttribute("data-telegram-login","WatermelonDramaBot"),s.setAttribute("data-size","large"),s.setAttribute("data-onauth","onTelegramAuth(user)"),s.setAttribute("data-request-access","write"),t.value.appendChild(s)}window.onTelegramAuth=e}),(s,a)=>(le(),we("div",hk,[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAXNJREFUaEPt2TtKBEEYReFzMZMBd+ASXIGBmhgaGbkDlyGGJgYuQBAjAzP3YOoCRMHcRMTEkoYOOpgHXfU/ZrArmWD6cb6qoXqgxYYPbXg/EyB7BacV+LcrUEqZAXfAEXAl6aJmMlJ+Qn38E7DfR/8CM0nfYxHhgDnxXfOLpL2x8d3xoYAF8a/AoaS3tQZ4xIetgFd8CMAz3h3gHe8KiIh3AyyJP5D0XrPbLDrHfBuNjDdfgeh4U0BGvBkgK94EkBnfDMiObwKsQ3wr4BE4GezP3b9K831+1TOj+jlQSvkCtgc3OJX0sOqG1t+3AG6A80HQJ3As6dk6ctn1WgBbwC1wlomoBnTRpZR0RBNgHRDNgGyECSATYQbIQpgCMhDmgGiECyAS4QaIQrgCIhDuAG9ECMATEQbwQoQCliA+gF1J3YuOUSMcsADxA+xI6j5HjRTAAHHZvyO7lnQ/qrw/OA1QEzvvnAlgNZO115lWoHbmrM77A89a2jFh78iUAAAAAElFTkSuQmCC",alt:"",class:"left-arrow",onClick:a[0]||(a[0]=(...o)=>At(i).back&&At(i).back(...o))}),w("div",dk,[w("div",pk,[a[1]||(a[1]=w("img",{src:fk,alt:"Logo",class:"logo"},null,-1)),w("div",gk,[w("div",{ref_key:"telegramContainer",ref:t,class:"telegramBot"},null,512)])])])]))}}),mk=pt(vk,[["__scopeId","data-v-ae7b3286"]]),yk={class:"channel_navigation flex h_100_vh flex_direction-column"},Ak={class:"nav-bar relative van-hairline--bottom"},_k={class:"flex_auto page_content relative"},bk={class:"load-box"},Sk={class:"scroll-box"},Ek={class:"overflow-hidden"},wk={class:"load-box bottom_load_box"},Ck=Fe({__name:"FilterView",setup(n){const r=ne(1),i=Ri(),t=Ps(),e=Ce({get:()=>({channeid:t.query.channeid,ids:t.query.ids,page:t.query.page?Number(t.query.page):r.value}),set:v=>{v.page!==void 0&&(r.value=v.page)}}),s=ne([]),a=ne(!1),o=ne(!1),l=ne(),u=ne([]),c=ne({list:[]}),f=async()=>{try{a.value=!0;const v=await Yt.get("/api/list/getfiltersdata",{params:e.value});return v?.data?.data?.list?.length?(a.value=!1,v.data.data.list):(o.value=!0,[])}catch(v){return console.error("",v),[]}},h=async()=>{o.value=!1,e.value.page=1;const v=await f();u.value=v,l.value=!1},d=async()=>{o.value=!1,e.value.page=1,i.replace({query:{...t.query,ids:s.value.join(",")}}),e.value.ids=s.value.join(",");const v=await f();u.value=v},p=async()=>{e.value.page++;const v=await f();u.value.push(...v)};return Is(async()=>{if(!i.options.history.state.forward||!u.value.length){o.value=!1,s.value=e.value.ids.split(",").map(g=>Number(g)),e.value.page=1;const v=await f();u.value=v;try{const g=await Yt.get("/api/list/getfilterstags");c.value=g.data.data}catch(g){console.error("",g)}}}),(v,g)=>{const _=mo,b=yo,y=Pp,m=Lp,S=Yu,I=Ls;return le(),we("div",yk,[w("div",Ak,[w("div",{class:"left",onClick:g[0]||(g[0]=R=>At(i).back())},g[3]||(g[3]=[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAXNJREFUaEPt2TtKBEEYReFzMZMBd+ASXIGBmhgaGbkDlyGGJgYuQBAjAzP3YOoCRMHcRMTEkoYOOpgHXfU/ZrArmWD6cb6qoXqgxYYPbXg/EyB7BacV+LcrUEqZAXfAEXAl6aJmMlJ+Qn38E7DfR/8CM0nfYxHhgDnxXfOLpL2x8d3xoYAF8a/AoaS3tQZ4xIetgFd8CMAz3h3gHe8KiIh3AyyJP5D0XrPbLDrHfBuNjDdfgeh4U0BGvBkgK94EkBnfDMiObwKsQ3wr4BE4GezP3b9K831+1TOj+jlQSvkCtgc3OJX0sOqG1t+3AG6A80HQJ3As6dk6ctn1WgBbwC1wlomoBnTRpZR0RBNgHRDNgGyECSATYQbIQpgCMhDmgGiECyAS4QaIQrgCIhDuAG9ECMATEQbwQoQCliA+gF1J3YuOUSMcsADxA+xI6j5HjRTAAHHZvyO7lnQ/qrw/OA1QEzvvnAlgNZO115lWoHbmrM77A89a2jFh78iUAAAAAElFTkSuQmCC",alt:"",class:"left-arrow"},null,-1)])),g[4]||(g[4]=w("div",{class:"center flex_auto"},"  ",-1)),g[5]||(g[5]=w("div",{class:"right"},null,-1))]),w("div",_k,[w("div",bk,[w("div",Sk,[B(I,{modelValue:l.value,"onUpdate:modelValue":g[2]||(g[2]=R=>l.value=R),onRefresh:h},{default:be(()=>[w("div",Ek,[(le(!0),we(Xe,null,Ot(c.value.list,(R,N)=>(le(),we("div",{class:"tabs",key:R.classifyId},[B(b,{active:s.value[N],"onUpdate:active":G=>s.value[N]=G,onChange:d,role:""},{default:be(()=>[(le(!0),we(Xe,null,Ot(R.list,G=>(le(),vt(_,{key:G.classifyId},{title:be(()=>[w("span",null,He(G.classifyName),1)]),_:2},1024))),128))]),_:2},1032,["active","onUpdate:active"])]))),128)),w("div",wk,[B(S,{loading:a.value,"onUpdate:loading":g[1]||(g[1]=R=>a.value=R),"immediate-check":!1,finished:o.value,"finished-text":"",onLoad:p,class:"list",role:""},{default:be(()=>[B(m,{gutter:"10"},{default:be(()=>[(le(!0),we(Xe,null,Ot(u.value,R=>(le(),vt(y,{key:R.id,span:"8"},{default:be(()=>[R.shortId?(le(),vt(Fp,{key:0,MvItem:R},null,8,["MvItem"])):An("",!0)]),_:2},1024))),128))]),_:1})]),_:1},8,["loading","finished"])])])]),_:1},8,["modelValue"])])])])])}}}),Tk=pt(Ck,[["__scopeId","data-v-33f4f52d"]]),kk="/static/img/no_data.png",Ik={class:"serach-page flex_direction-column h_100_vh"},Rk={class:"top van-hairline--bottom"},Pk={class:"nav-bar relative"},xk={class:"center flex_auto"},Dk={class:"search-bar"},Ok={class:"input-box notranslate"},Lk={class:"handler absolute flex align_item-center"},Bk={class:"main flex_auto"},Mk={class:"result"},Fk={class:"load-box"},Nk={key:0,class:"empty"},Uk={class:"main-text"},Hk={class:"scroll-box"},Vk={class:"video"},jk={class:"video-info"},Gk={class:"left"},zk={class:"preview"},Kk={class:"my-image"},Yk={class:"van-image"},Qk=["src"],Wk={class:"video-info"},Xk={class:"info-b"},qk={class:"update flex_auto"},Jk={class:"right flex_direction-column"},Zk={class:"right-t"},$k={class:"van-ellipsis"},e2={class:"date"},t2={class:"star van-ellipsis"},n2={class:"introduce_info"},i2=Fe({__name:"SearchView",setup(n){const r=Ri(),i=ne(""),t=ne(),e=ne(0),s=ne(!1),a=()=>{i.value=""},o=async()=>{if(i.value)try{const f=await Yt.get("/api/list/fuzzysearch",{params:{keyword:i.value}});t.value=f.data.data.list}catch(f){console.error("SearchView.vue searchBtn error",f)}},l=async()=>{},u=async()=>{},c=()=>{console.log(11111)};return(f,h)=>{const d=mo,p=yo,v=li("RouterLink"),g=Ls,_=Os,b=Ds;return le(),we("div",Ik,[w("div",Rk,[w("div",Pk,[w("div",{class:"left",onClick:h[0]||(h[0]=(...y)=>At(r).back&&At(r).back(...y))},h[4]||(h[4]=[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAXNJREFUaEPt2TtKBEEYReFzMZMBd+ASXIGBmhgaGbkDlyGGJgYuQBAjAzP3YOoCRMHcRMTEkoYOOpgHXfU/ZrArmWD6cb6qoXqgxYYPbXg/EyB7BacV+LcrUEqZAXfAEXAl6aJmMlJ+Qn38E7DfR/8CM0nfYxHhgDnxXfOLpL2x8d3xoYAF8a/AoaS3tQZ4xIetgFd8CMAz3h3gHe8KiIh3AyyJP5D0XrPbLDrHfBuNjDdfgeh4U0BGvBkgK94EkBnfDMiObwKsQ3wr4BE4GezP3b9K831+1TOj+jlQSvkCtgc3OJX0sOqG1t+3AG6A80HQJ3As6dk6ctn1WgBbwC1wlomoBnTRpZR0RBNgHRDNgGyECSATYQbIQpgCMhDmgGiECyAS4QaIQrgCIhDuAG9ECMATEQbwQoQCliA+gF1J3YuOUSMcsADxA+xI6j5HjRTAAHHZvyO7lnQ/qrw/OA1QEzvvnAlgNZO115lWoHbmrM77A89a2jFh78iUAAAAAElFTkSuQmCC",alt:"",class:"left-arrow"},null,-1)])),w("div",xk,[w("form",{onSubmit:by(o,["prevent"])},[w("div",Dk,[w("div",Ok,[Sn(w("input",{placeholder:"",type:"text",maxlength:"100",autofocus:"true","onUpdate:modelValue":h[1]||(h[1]=y=>i.value=y)},null,512),[[yy,i.value]]),w("div",Lk,[Sn(w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAwRJREFUaEPtmEuojVEUx39/hDwzEKUMFHlk4jERpcw8Jh5JlBEjE5IRI0YSEyNGiqSLicdMKTLxmOgitwyUIgN53ZBrOeu2z23fr+985/vOd+697Tp7dOqsvb/1W+u/1n6IxIcS958ewERnsJeBXgZqRqAnoWYAzWwqsBRYAiwE5gHTwv+/gS/AR+AdMCDpT83gD0+vnQEzc0c3AqsBhygz3PmXwGNJDtbx6BjAzCYDm4ENgP/uZAwBTxrrPJTkvyuPjgDMbCawF1hc+Yv5E94DNyT9rLpeZQAzmw8cAObmfOw78AZ4C3wCBoPNDGABsAxYDszOmfsVuCrpcxWISgAh8odznP/hMgBeSPpX5ICZTQLWBPnNytg6xKUqmSgNEDR/MEc2A40CviXpV5XImdn0RiHvCp0rnupyulK2JqoAbAE2ZZx8BtxvF/VWYCEbW4F1GZtHkh6UCUgpgNAqj2S6jUf+eqfON50LEPsymfCOdLFMiy0LsANYG0XENe8fGJFNkNhOoF/Sq7zomdlKYBVwO5ZIkJMHKK6J55LutMtCW4Cwwx7PbFJ3Jbl8hkdwfnejFa4AvIhvZiGC827jRfw62Iz0fjNzGW2PHPbN7ly7HbsMgEdsT7Swt8oLsXTMzP93u+YYBZFxvmnjmerLSOlopsX2SeovykIZgKx8nkq6Fy/awsFhiGDXjHwuYASxDVgfrd1WRmUADgGLokWvSfICHjUKINzOZVPofJCiHwb3R7YfJF2um4ETgO+kzXFe0re8RVtAxKa59RFlYA5wLJowKOlsXYBTmfZ5RtLfVosWQBQ6HzIwBTgZrT0k6fR4A3gn8qKOZeM+OIAXpXeg3GFmYwKQvISSL+I6bbTZ57OSarXZjUkb7XQjG9H7RG9kfs9N9ygR2lu6h7kA4C8P6R6nA0S6F5oA4E8n6V4pA4Q/p6R5qY8OXOk+q0QQ6T5sRRDpPi3GR8lkH3ez5+Fkn9eLLhvj8V/bO/F4OFHnGz2AOtHrxtxeBroRxTpr9DJQJ3rdmPsf4S66QDoGjn0AAAAASUVORK5CYII=",alt:"",class:"close",onClick:a},null,512),[[jn,i.value.length]])])]),w("div",{class:"button",onClick:o},"")])],32)]),h[5]||(h[5]=w("div",{class:"right"},null,-1))]),t.value?(le(),vt(p,{key:0,active:e.value,"onUpdate:active":h[2]||(h[2]=y=>e.value=y),onChange:l,role:""},{default:be(()=>[(le(),we(Xe,null,Ot([""],y=>B(d,{key:y,title:y},null,8,["title"])),64))]),_:1},8,["active"])):An("",!0)]),w("div",Bk,[An("",!0),An("",!0),w("div",Mk,[B(b,{loop:!1,duration:200,class:"my-swipe","show-indicators":!1,"lazy-render":!1},{default:be(()=>[(le(),we(Xe,null,Ot([""],y=>B(_,{key:y},{default:be(()=>[w("div",Fk,[t.value?.length==0?(le(),we("div",Nk,[h[6]||(h[6]=w("img",{src:kk,alt:""},null,-1)),w("h4",Uk,'"'+He(i.value)+'"',1)])):An("",!0),w("div",Hk,[B(g,{modelValue:s.value,"onUpdate:modelValue":h[3]||(h[3]=m=>s.value=m),onRefresh:u},{default:be(()=>[w("div",Vk,[(le(!0),we(Xe,null,Ot(t.value,m=>(le(),we("div",{class:"series",key:m.id},[w("div",jk,[w("div",Gk,[w("div",zk,[w("div",Kk,[w("div",Yk,[B(v,{to:{name:"play",params:{id:m.shortId}}},{default:be(()=>[w("img",{class:"van-image__img",src:m.coverUrl,lazy:"loaded",style:{"object-fit":"fill"}},null,8,Qk)]),_:2},1032,["to"])])]),w("div",Wk,[h[7]||(h[7]=w("div",{class:"score"},null,-1)),w("div",Xk,[w("div",qk,He(m.upStatus),1)])])])]),w("div",Jk,[B(v,{to:{name:"play",params:{id:m.shortId}}},{default:be(()=>[w("div",Zk,[w("h3",$k,He(m.title),1),w("div",e2,[w("span",null,He(m.createdAt.split("-")[0]),1),w("i",null,He(m.type),1)]),w("p",t2," "+He(m.author),1),w("div",n2,He(m.description.slice(0,50))+" ... ",1)])]),_:2},1032,["to"]),w("div",{class:"right-b flex align_item-center justify_content-sb"},[h[9]||(h[9]=w("button",{class:"flex_none"},"  ",-1)),w("button",{class:"download_btn flex_none inline_flex align_item-center justify_content-center"},[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAwCAYAAAC4wJK5AAAAAXNSR0IArs4c6QAAA1xJREFUaEPtl1to02AUx/8n3XBlog8qspdtXl5kg8GaJqkdSmHIEObequIFRBDE26si6lQQfBMvICgI4nUggqL4IExkW5M1dQxEfVHHHkQRFWSuziU58rkKY9g1aVM2avKYnPM/5/c/+b7kI1TARRXAgABivkwxmEQwCR8dCF4nH80sSSqYREn2+Zj8f0wilUo1ElX3Amj00TyXUjTC/CsRi8VGZktwNYk5AvnqOIivXSu/KUTsCkKIDAxkVksSpwAsBfB4dPTdpmQyaRcq4PZ5T09PqL5+5QMAG5kxEQpJGxSl9bmbfNcQQiyVGooT2U8B1BDhgqrKB90UcRNjGOZ5ZhwgIkeSaFs02nrHTZ6I8QQhEtLpF1ts27k1lUv7NS1yyW2xfHG6ntkH8MU/DREOq6p81oumZwghruvmEQBnAFiSRJ2KEnnipej02MHBTIfj8EMAVUS4rKryXq9aRUGIIoZhXmXGbgDfQyGOR6PRl16Lp9PpZtumfgCLADwaHY10JZPkeZ0VDWGaZrVl0WOA2wEaASY1TdM+uQXRdX05UK0D3AhQJhyuWt/S0vLDbf70uKIhhIhpmottG33MaBZvWTa7JJFIrPhZqJHe3vc14fAX8e3RhAGSVBNTlKaPhfLyPS8JIgdSb9vQmVEH8F1VlbcSEecryMxkGOZtgDYD9A2YbNM07VWxAEXtTv8qZhiGDISeMaMWwGlNk4/n34nMUwCOEdGE4zgdsVj0WSkAvkFM7VjpLoDuAZAkiXYqSuTGzOYGBzPbHYevi/uSRDsUJXKzVABfIXJb7yEA58QXlwjtmib3/W1S1802ZjwlwgIiOqqqEbFF+3KVvCZmdjHty/vZsjgWj8tv+/vNVVVVlGLmZQCuaJq8x5fucyK+Q4h/oIaGVfeZuROg18zSRiJHbMVriPjJ+PhYZyKRsOY1hGhueHi4NpudFD9vrQCyAMJEGFq4MLyuqalpzE8A39fE9OZM06yzLAzkziEjliXF29paP/gNUFYIIZ47h1xjntxV6GBTCpzva6KUZorNDSCKdc7vvMqfhGFkTjBzt9/OedUjom5VjZzMlzfrJCoCwqtjcxVf+Wtirpz1WjeYhFfHyhUfTKJcznrVDSbh1bFyxQeTKJezXnUrYhK/AeN4F0BRFirsAAAAAElFTkSuQmCC",alt:"",onClick:c}),h[8]||(h[8]=bi(" "))])])])])]))),128))])]),_:1},8,["modelValue"])])])]),_:2},1024)),64))]),_:1})])])])}}}),r2=pt(i2,[["__scopeId","data-v-62df9f7d"]]),s2="/static/img/bg_top.png",a2="/static/img/avatar.png",o2={class:"personal_center overflow_y-auto relative"},l2={class:"body"},u2={class:"info"},c2={class:"login notranslate"},f2={class:"func flex"},h2=Fe({__name:"UserInfoView",setup(n){const r=ne({firstName:"",lastName:""});return Tt(async()=>{try{const i=await Yt.get("/api/user/me");r.value=i.data}catch(i){console.error(i)}}),(i,t)=>{const e=li("RouterLink");return le(),we("div",o2,[t[6]||(t[6]=w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAiRJREFUaEPtWT1vE0EQfXOXE4ge0UVBpOArEjiLb0W6FKmDBDUS/h1U+R0gUYMEdYp0oD1rY5AckhSJEtGh9BHIuRu0jiOK3Nl7vo3sc/banZl9M292Z26WUPOPao4f3oFJM+gZmGoGlOq8AbK3RDTPzEEeWCLsRFGw2mg0Tso40+l0bvd62RYzHufbpYyZfwG8IeWz90W2C1NoAP6dDSii8EUcP/1iI3shkyTf15nTz3Y6QUvKRq4TQxzQRwAWzAZEOGRG7/JmxAD/nJvDayHEqR2Ycymt9a2zM3wA6BHAl3AQIWLGvYHNYynF3VymijZNku3UpI0BH8disQw4V7JJog+ME0SUxfFyWMoBpTQPFPalFA9cgSpjRym9B+C+0ZFS5GbLsBTyDpSJdp6sZ2BGzgDtSbn8sGo6jKOv1PYuwP0LpPQhThLdHVTJT1KKV+MAqKqjlP4I4KWp9nEslkpdo+elnlbCMN0sW6SqAr/QN8UuTcO1KOKvRa2K70ZdRXtcO56BcSPnSs+agXa7/STLguf93vRKP+YgyL41m80fNttYgVGqewf4ewzgpo1RBzJ/gBsLUi79HmXrejhgolDrFBpF4yTXrVJokgBH7e0dGBWhq14vZKD2zVzt2+n/U4ma/tD4sYqD0+unEjMylUA9R4uzMNyt93h9uh44uFX0SjO0mZuOJ6Zgo+h1xlwyvht1UK8qmfAMVAqfA2XPgIMgVjLxD3+xYkDtIHhsAAAAAElFTkSuQmCC",alt:"",class:"fixed scan_icon"},null,-1)),t[7]||(t[7]=w("div",{class:"nav_bar van-hairline--bottom hidden"},[bi("  "),w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAiRJREFUaEPtWT1vE0EQfXOXE4ge0UVBpOArEjiLb0W6FKmDBDUS/h1U+R0gUYMEdYp0oD1rY5AckhSJEtGh9BHIuRu0jiOK3Nl7vo3sc/banZl9M292Z26WUPOPao4f3oFJM+gZmGoGlOq8AbK3RDTPzEEeWCLsRFGw2mg0Tso40+l0bvd62RYzHufbpYyZfwG8IeWz90W2C1NoAP6dDSii8EUcP/1iI3shkyTf15nTz3Y6QUvKRq4TQxzQRwAWzAZEOGRG7/JmxAD/nJvDayHEqR2Ycymt9a2zM3wA6BHAl3AQIWLGvYHNYynF3VymijZNku3UpI0BH8disQw4V7JJog+ME0SUxfFyWMoBpTQPFPalFA9cgSpjRym9B+C+0ZFS5GbLsBTyDpSJdp6sZ2BGzgDtSbn8sGo6jKOv1PYuwP0LpPQhThLdHVTJT1KKV+MAqKqjlP4I4KWp9nEslkpdo+elnlbCMN0sW6SqAr/QN8UuTcO1KOKvRa2K70ZdRXtcO56BcSPnSs+agXa7/STLguf93vRKP+YgyL41m80fNttYgVGqewf4ewzgpo1RBzJ/gBsLUi79HmXrejhgolDrFBpF4yTXrVJokgBH7e0dGBWhq14vZKD2zVzt2+n/U4ma/tD4sYqD0+unEjMylUA9R4uzMNyt93h9uh44uFX0SjO0mZuOJ6Zgo+h1xlwyvht1UK8qmfAMVAqfA2XPgIMgVjLxD3+xYkDtIHhsAAAAAElFTkSuQmCC",alt:"",class:"scan_icon"})],-1)),t[8]||(t[8]=w("img",{src:s2,alt:"",class:"bg_top"},null,-1)),w("div",l2,[w("div",u2,[t[0]||(t[0]=w("div",{class:"avatar_box flex notranslate"},[w("div",{class:"avatar"},[w("a",{href:""}),w("div",{class:"my-image"},[w("div",{class:"van-image van-image--round"},[w("img",{class:"van-image__img",src:a2,lazy:"loaded",style:{"object-fit":"fill"}})])]),w("span",{class:"no_login_mask"})]),w("div",{class:"qiandaoContainer"},[w("span",{class:"sign_in"})])],-1)),w("div",c2,[w("span",null,He(r.value.firstName)+He(r.value.lastName),1)]),t[1]||(t[1]=Gm('<div class="page_inner_padding" data-v-15846cfb><ul class="data_box flex" data-v-15846cfb></ul><div href="/vip" class="no_vip flex justify_content-center align_item-center notranslate" data-v-15846cfb> VIP<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAA2CAYAAABJN/BMAAAAAXNSR0IArs4c6QAACH9JREFUWEetmHlw1dUVxz/nvSwkRBICsogZQUBiiyLGQsEqCUGHlDXsAkqKLEIRodKAmJZAy2IppawGWWXLFBiopVTUQWagFGhDRGorUilLiwgCQaRAFn6nc9+W31vzkvH+9Zvfvefc7z3ne5Z7hSiGglA8sBNoT5DOQBtUmyGSiFKJUAacAUrB8SHN6r8rWRvuRKHatUQiLdSlOfE0ShwLvALaJvJqQL3a5AYO3qLSWigv7LpcE5iwILR4UDaWtQq0dQ1YbZt7UIhHrXIdBz+V4TvXRAISBEIVYUtuIUgBqMNP2HdSz9+IdrRZxiEbudl4jIx/qzIUGD81Wljo4METaxHNi2jCcGA0wBJeJea3sIdb9+aGAuIPYmP/pSAv2+zrVmOUOJy3SL7/AE3TS2n22FlSW3/tmrv2eQoXj7fk8skMblx4CutuQjU3Ao8ib8uoXUEH9IHQt/uPBDYFmV9QUlv9kS4Tt9GozTcRLXT1VAMOFw3j2pmc8KTXsTLqHT+OuEDoxtwmWNZJlIbumPFgE+cd2mYvpsuEozUx3G/+0LInOb3/FVTj/A9lgl1uEJ/6sDy37gtfLLlArOv3G2CqT8BgELlLeq95dB5zLASA/wH/AUz43QIM4WKBRKApkMbhld357IN8NIDcRlliww0MXT9aRFwkEl0xOImEii+B+r7NzFSz7xTzw3m/CwBwF/gHcNarIJSF1L1xK3ZPm8eVz4f4OOJ1vrFwj9mdJe2RE24Qa/oNB93ipywm/gpDiiaSkFph+28y4FERuR6ta/T47haUrj+OVdXY7WabZOunF9Lt1UIRuSW6pu9alNF+ips8tIO+Czfb/hkL/Lk2ALyyuq7fAiydHkT41LQPGLB8uoh8JLq6bwmqGX6Lnhg5g45DTtr+nRARUxtqPXRt7x9wVw4GWSL+ntM8v8XwcK8BcQXVRn7a+8zPo9l3vWY3JNwXiQORkOmqAc2h0hcJvrXOmG94cefzpuiJrupj/G6YXT3ytg4iLqnK8+OkiHxWaxN4BHTb4DjKbpcHuUOkinF/GAScFy3qUx4Uz/0X2C1xQERMqa7TcFlCK9yWsKd7cVQy/p3BwNeib/a2ucND304jZpAxzMuJvSLif5JawNFVhhO4OWEfMbHXGbvTpPAK0ZW9S0E7+i1omr6DAb/2RsduEbFqsa+/5Vf2WoDiHx1mRWLySfK2zDD2EV3eawMwyk8yNu4Kw9dMJMmVJ+psCV2RmQT1T6E0D4qO1Af2MmxFEWAZEKNRXRt00hbti8l9w2TMOnNCl/eai+rMoI7McOPhHgvJnnoIKBddntsIq/yiX4R4a8ejvefx1Etb6hIdurTXAES3myYgKG3jqGDEyjwappm6U+auost6bULVlHL/4XDcoW23X/LstHm1yRO6LGcolqwHTQjJpeT7DjJqzSLP3Dk3iN/2bIeIKSYBpdeV75XYhCIs/ZlM2nU1EkF1ac69qMwCnYhpE70jsA3smjedJ4Z4c8+x6qZmSc4cs5GbQAFSpm0zfYBqMQ7HuziqTnDHVcahXnwTrMrHUMkBfQ6VpLCbGz1JDT9hzNYCzxoTde9VgyjMjCEl8X0sK6sahCe7BPaUgeYIPGmk9V1HvkbnEZ96VHwpIkf9e8zFmSlovX0oj4c0e7TddTifJTc9wosbFtimD4vI5eCWf2lOAyznTqoqs6vNWsNRg7rvUO50VtDv9Um07uq9DN0Qkf0u74cCrSUlsZzcsIhLp8eiVj3fmpruHeHcYHZJe3QzQ361w7bf30TEVVPC38BUEzh9pC+Htwzl8pnu3K1Mrl4esJvvxhXm3lEv6TTjNuUTl2CaIzPKRORAuODxM4waINCFitsplOxqyxeftOPmteZU3rkHS53Ext0iNuE6iclXOVMyCsvyD3GjzSGVZE+aRsfe52zKD4rItahAuHKIagzQHnggbI5YM3oK1y5khrz0tOy4kaELdtpkz5uWzq6rJr5X00E1GXjI9OGuVOwde5d8n4/3mGoYdHEjMeVTXtr8OnFx3ipsWoIPRcTeQNd42Q86vKqaLsx0z8n862gau2Zvx6oyAKuH69rouEO/mVNIf9pcJ7yjREQuBCqN2hIho2h+jx0oA0NGT7uubzJw9ns2uYsi8tdQeuoMQudnj8ASd+MTGJoNGpfycvEc24bG/MYNITu0OoHQWc/cR4z+HTTVtVH1owg4nTcZOm8yDz7uYz9wTET+G47YdQMxJ/tPgLl5u4dXi7FIh2cX0Tff3lO66kM4AHbxSGv8OTen+xiQ1UFEND9Smx9i0qaF0boh8AxRgdDCzJaI82NUG/gJGEvExJfxo8WTad7O/oYR0Q21BuF6y5rdfR+QFRJxp9xfkDPJ/oxQoxtqD2JW1mSUJSEBNG31PhPXrrTNmfcKEw1RvWVGRUwteKYtjqrjqOsRpHoY6biES4wvmkLjtNu2mVIRMY8oUY0aQejgwU7SvzoI0iVYo1hkvVBA1qh/2uaidkPU7tCCTHN7cndDgUmpRbvfM6HIXJ68o1ZuiAqEzsw01bMENN4tYEsI9ZLOM3XjqySl2h9IPxKR81H5IMCrIWV0XEYsjZOOhOw3HY4qcn6cz5MD/20TviQiR2oLwH60IFl9rdtslJ+HVNqqw1bGLdkW4Ib9ImInZ9R4QveYM7Iy4O5hEPfjife52HzXTznFzO0zcPp6BPO3Tm6IyAmd1bkB5fFzUSYATh8hHc5yBuX/hIye9p7gsogcjvrYIRZGDFGd0e17WFqEqvsekt5lNaPf2PNtuSGq6HB5oqysJTvnFnDpXHvyixfgdNoD9biI2BvYOhmk5mTl7rg7eJ6L7Zt8JSJ/qdOuAUI1gvCuV9X7PV23yRnmZc/UhjpFQyDwqEG4g8T1av8IcFVEzn4bVjA6/g/o0emAqRBC3QAAAABJRU5ErkJggg==" alt="" class="number" data-v-15846cfb> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAP5JREFUWEft1LFqAlEQheF/CNhZWQc7sbdOIaktxUIEH81WfaEkL5DKSrCTIwsuiIjOrHMRYbfdC+e7h5lrvPizF+fTAt6rAUkDYGdmu6zZcTcgaQhMgQOwykK4AOebz4CP8833WQgvoAcsge5F9SkIF6AKlVQE4QaUQoQAJRBhQDaiESAT0RiQhXgKkIHIAHSABfB58UYcgbWZ/T16sp8CSKrC50D/KnxjZr+Pwqv/jQEZ4Y0Bd8K3ZvbjuXl9JtxAZni4gezwEKBEuBtQKjwCGAGTq1ULD9yt4XQPoaRv4AuoHpmUcHcDtVzSGPiPrtq9tXQ3ENntyNkW0DZwAhBEgiENNzS7AAAAAElFTkSuQmCC" alt="" class="arrow" data-v-15846cfb></div></div>',1))]),w("ul",f2,[B(e,{to:{name:"history"},style:{position:"relative"}},{default:be(()=>t[2]||(t[2]=[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAACRxJREFUaEPtWQtwlNUV/s6/GyLBbHiD8cHLB1TRjjpTtRUtg4/iYIw2DxLyDvExQxkQEMXHoi0KCGJUqCEEJU+gUkVgqp0KTjs6jqUdq0gVSxISGhJeIU+S7D1f599knYhJdjdZ22Gmdyaz2b33nvt995xz7z3nCM7zJuc5fvyfwLkaLK5LukKdnK7ET1RwlVLGE4hSyAVKtBqggbAqjfJrsfCJgexbMLLwYH8tISQaKGmYPdICMtQgTcGrlQIFoBAo4f2j/b/9m/3d++n7LlDBV0opFrE2Lhn9xrFgyAyIwI6G2BFGw5cSfMRQIrqDJqXOAJ8rcUiBUwppAazBCg4zissVmKrERV6S3xKTsxTZDIQtXzYmvzYQIv0m8PsziSkKrjGUUT4AhBxQkUJjuCt9eOmXELAvEGuOp14JcKZRmWOIG3zaIeSMgk+6x255zZ+MoAm8x5QhLQ3teQokfbtzlL9Q5NmkoaV/DGTXehqzojb1ZlKWGfIen3kRsseBtjR3dOmJ3uQGRWDbqbiocKe1W4mfGnjtuo7AgviospL+Aj933nO1aXd6FOtVMcnrN7YJhll3vzCm4HBPawRM4A+MG97WaL2n5I1ewSL7xOFMemBIUU2owPvkrDyeGdncoRsMkdxlVjVCx7QXLt30zblrBUTgXc6KQHPEn43y+k71StF4lyvzRsnrCDX47vKeqE5/SgXLlSJKlg8a5Lx5xTnOHRCBXU2JJao62wc+1lWaKiJ9OmioiD12NGOREqu7NLGv+pKmGdtlu23B3uaXwLtNCclUFtloFdYHQyOP3fVz2ecJFcBA5Cyqzlyj5EL7yCXlqZcv2/TrgAjsPX3f0GZn+CElRypQoxL+4/sjC+sCWbT7mFeOz/EYwiGWFMwfWZgV7Hz33tudDZMm/skA0xQ46xSZ+lKXP/Spgd1NCatUudg+Lo1I/P2RW7cHu7g9PrduTqsCFxBSsGB08ARsGUtrMye2tuFzBSJI2f7quE3xfZrQrvqkYbQ8RwhcSJG9MZFbp/cHvD3n5eNzzijhUkjBo/0kYMv5VVXmM6pwK0QRJtesj84/2KsGdjclLFTlGnv3RRy33xtZ+mG/CdSlnDDgCFsDAyEw7+Q8F5tbyg0xnJDc347Lny8fNsZOgTid7QA6LHN6ZsSOahvorsb4/Upcr5Av7nNtndpf8Pa8dXUpNYYcS5GCRQPQgC3rkSNZa5VYoJQTOGFFy96WuF+qskQhYQq0EBKjbZ5/mjBnVefjDI/FuratGgiBl2pTKg1wGbwEtgTtxN3Xfrgq+1o1/Mz7CBT+zGtCHzQnxHio25QYZHs5xSozynSv+ViO62IuLP3HQAisqUv5RolJtgaWDJCAjSOnMrtKyUsAefpbH3j/bPxM9eAtQ15gX1jec5+oj3FtGy5+XpX+yL14LOUggcm2DywZOzAN2GvNrci276VkAju+48TvNyXc2U6+rcTgrovr41hX2S3+APrrf7Eu5TOjuJaWFCwNgQayK7KfIPEbhXz5vVNoT2PcdA+tnYYYAsjW2KiyRH8A/fWvrk39q5I32Mfo4yHQQGbF3GSQRQqc7PEYfacxfpqq7KZI6f2ushx/AP31rzqW+rGCN9kmFAoCWYezZqmIvcntvd4Dbzck3mKAex5wlS3zB9Bf/8q61A9VMU0pX3aw/ba+AhR/suz+9MNZswDZqZDeCdgD93Be+Ex5pS0QoX2NWVmXutEosruC+wNWm7lj2fj+xxHpFTlJJIuVONGjBnbUz54eG1W6d6Cnj4/U68wJO1nXVmyUcd4nuYVDUJ2xPLrwSH82J7MyZ6nH8HkKDvRI4K0z8c9SrLFfRE5+yC1u+zoYcNvGOMdXxyIKDJFqCySk0uF0zHCP/n6U5W+x9Iq5W4wiBSLfPUZ9E3fUJ8R5gG0q8kaCa3KWhIiEm24Lx8pfVeJhryaIGuPgHSsvevOAP9Dd+9PKc8qVHM/uF1n3Ae80zR7TZlhjFEJL1iZFlT4azAL+xj5Tk7Hao7QjLTs8PaEW7lodvflv/uZ5Hbg8Z7Ih7YsRVEfnU6KnVlafuJ/E9QSaWj0R0VmjChoDWSDQMU8cTXcr8UxXYqteBfesvXjzR/7mp5XPXaHE4/ZjbshpRPdKoLQ+cRHtWNSWKI6cOUOLN/oTHmz/4zUZizwGq5QQFWkirJh1l+R/0JucuKoFgwd7mg+r/bKF5BZPzJvfKwE736mGlYREKHHw7LDI6x78AbIQi6szHlbIq4awAPxu3aUFcb0RSCvPWaDkWjugsSznNYXj1/ce0NhCik7PzlViXlcydnHmiJIXg93lQMYvrM5MJeQXzRc7UvN62aTsw9lj2kUOKjFMIdtLJub1HVLaCxfUxI1yhId9reRQFWkU6tWZI8qqAgEV6jFp5Q/uUGqs/dyXMJ1aFEhQb4PYfCr5IYIb2Jkm/3v4CMetqVLYHGqAfcnLqJi7yGinPyrwVMnEjYGlVXxCC04l7VRiVtdTYGfNiCtiQ3XB+duIjPLs2YQU2T5CYF/bhPrgElv2AnZSt55hH5Hyo65b9O1mj8xZPPaH1URWZU6aUW5Uwg53yw14c+nE79YN/GbmfDuUfzppnEdlryomdKrS2u8RiVk4cstRf7sYbL+bbueRiurnKHhMVYSCGnHIrW9elvevc2UFTMCe+NrJxEtBp52hnuJN80HqSTx5ZtSkDaEyKTto7zB4XYGb2PncOORwOO8uGLdhYOl1H/Pck8kuUSk0xL2+Whch+xVc0Tq6aqe7n3nTR77JulzDsEQhGUo4TWddbU9bu6SVXpUXmgJHd/WtO54yV8nVhhLVrcR0VCmbVPG+Rrd86pbtdrqp1za/NnsMO3inMUw2kBlKODo1izMK68nN4/JCX2Lqjia3JmNUm5inDZjNzjJq9wpkK4FPDeSQKmppSYsxGEQRl1FOoFhTDHkFKdJZ7fEe02cVshmK5fnnOGtvuxCUD/QmJLcxY1Rzs+YYMlkhU75XSvWVVX0Eu8qvnaC9VcqvSCm2OGjj+gnr/3tl1p4Irfh3+uQOyG0e4U2quFLhLXS7DDFYIa0kGhSoVMrXhHxiFPvWj8//3xa6gz0mQzk+JCYUSkDByjrvCfwHRhzNhFLO7SkAAAAASUVORK5CYII=",alt:""},null,-1),w("p",null,"",-1),w("span",{class:"no_login_mask"},null,-1)])),_:1,__:[2]}),B(e,{to:"",style:{position:"relative"}},{default:be(()=>t[3]||(t[3]=[w("div",{class:"relative notranslate"},[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAACLhJREFUaEPVWWtwlOUVfs6XRASym0ASphcvHW2nOkVtgWmp443RFhJ2l72QIEyligNYRogIdDpWK+Plh7UFBENBbanSKJOQ7CYbYpDriKI4SqkyTq9W66WtkgCbC0uS7zyd7xIINGQ3yWbEndmd2X33Ped53nN9zyf4gr9kOPG3NoRuzQLMUb5o9XDpGTYC7U3hL7OL75BQdGO8Jxz9dDhIDBuBtobwNipLSEIgtZ4Z0cgXhkB7Q3CBUjaCgEUAChjAnNxQ7IVMk8i4BZINkcu6oIeg8JwiQFhWaJauk+Nzyxr/k0kSGSXAlTDaJoX2grjeAi9EEwCqyWLnu9R5ZkaD5y2BtobQchKPW2BBHM/KkfEws9jd1XUYRL7lTRDMzYvENmeKRMYscLIp8q0uk29SeaHtOiLzvf7aZyygbbWhuabyWYcYj2abHD96dv0nmSCREQLcODGn/eJLX6fJCbariGzP9ddO6w0wsTVYT4XfJgHZljcr6jtvCLQ3hh9S5QNu0CayR3D8qKl1H/YG2FZV8iWVCw5TUWBlJoNyh3d27PdDJTFkC3Q0lX5Xze5Xqci2wBjAgtH+6NN9ATteNWMOVCrt2kA51q3GVQU/qv1oKCSGRID7S0e2H+0+SOIKN+vsyA1Ef9gfoMSWYI0SYSghYjTlzYkWfy4EuOem7I7k2CdUucjNOoksdl01KtDwr/4AtT4XGqc5PExlkbXPIOZ7b6uzg30wrwFZgPvmjEkmk8U06VPFNBJjXPAwxFg42lfzVDogWitDpSa1ygloJEnsMIgmmtlN+fNq3ktHRs9/UhI4uSdyhaniU1P9Al5r+7qVJtUV4VTZnbm+2h8MRPHxP8zYQsUsm4P1oU7bYVD+SqCJiu1J1b1fWRjv6E/u/xHgmxNzku2XXE8VK+X5qPi6XYCsD6dAucos4EgIZEdnEsvGRGo/GAiBxPP+Qu029tnx4x6G0zfJKV0kkkJ52aroKthecFfdu2frsAnwQKgg2SklVPGBnEoirweove42ZC6Bd0E0UqUx9+MPXpGFb3UNBPjZ/01s8l9BMYqVmC6K65QcccZB9bIQCCu+mghpEu3cVbDkxYSceCWyicRtUGY5YJ0TPiWE6AC4Gyovdqo2jimOvT8UwP3tZVVp7rFE1y0ES6AopvKi3mRsfOp4gkC6lHhOOvdHvmOa2G+1AI6r2E3YP6xTVrJxdNbRvTJlb3K4QPcn978bfNfkMKsYZAkV3yeZDTouRsqJLGCy7ULJfeFFqqiwA8lh+bPcm6OPfR6gz6XzSEXoSmj3QSjsXkvEmFdQXrfpVBB37I1UkSx1LdAt4NSRN0d3nw8kuPKm7KMF3p1K3uim3k2F5fF5FrZTBPh6sfdEx0irql7u+t2nko2Jo6YMrdRn4gCanwz8msp7nV5L3k7qiMkX31t94gwC1pf23cGJQuNVEiOsYBHIgVHHsm6QsurOTAAZjIzmJ/1loGwhKSASCk4aV97wt3MWsuSuyN3dqutOBws2eKZFfzIY5UPd01oRurKT5gEqPVboAkZZwZK6rb3l9lmJO3aEt6oyciqFAbfnFkefHSqggez/7LcBj3ECb5B0GkXImoIl9Uv7LGRn/8gdpXkdah4keZlb0E4AvDZ3euzQQEAM5b/N62dspan2IYoYr4294KMb+yqa5+yF2l+KTIKpryjhVkZ5z8TJSfm+bUeHAiydvS0VgZ8q+ZibEY+gy5hQsOzMC9I5Y6C3grZtwXJC1vS4koCNo30xn1jhNEyvoxWBKQq8RGW2UDRbpCRvcd32c6lL2Y22N4ZqVRE63V7og55g3UPDgb95bfFFyMp5i+Q4t+N9uKg8/ov+dKUkwD3B/PZ2+SMVX3PvvAe8wdjkYSGwPvAwyfvF6kiBnWObJ0yVlSt7Gvc+VaYkYO1qbQgvpupaywoC7PMEYzcMC4GKwEoQDzrdr3F3YXldRSo9aRFoqw8tVWKV1UQJZbcnFL05leDBrB+pmPFzIR+xiiiJFUXl8V+lkpMWgUR9+D4oH7UJANs9odgZM59UStJdb1kfWKEmf+mkCHmgcEn9I6n2pkWgtS74EAl77gMg7g3FAqkED2a9+Un/PVSstmsu8OjY8vj9qeSkRSARCz0OcrlLoNYbjg3LrL9lnX+RUiocS8uqgvL6ZRkh0FoXXEeVu51ZjmzxhKOzUwkezHrz2sB8gk85F3z8pmhpfFEqOelZIBp8BsSdrgU2eyOxuakED2b9yFr/7SCsK64Va5sK73F6/iHVATuNRoOVVMyxBVF+550ZvTOV4JaNpXkyojMMNTQ/N7tGyqrbUu55wj9HiUq33mwpurchpaXTskBrbaiGZNg6GQPc4JlZ12d7/eGq0pGewpM+0LjVvcde6D4ja4cyZlA2e/Mv2Cll1WZfZJrXBEoJVrkWiBUujYdSkU6LQKI22EiF/ZQFwLq80tiSHsHWdS9xufcWGDKbiiAV3p7e6ew5j/O7/FvI5yG6ecxdDX/qDfDIar/19CZqE6BsL1xWnzJdp0WgtSa0W8kpLrBV3tLY8taq8LVUzgZZ1jPn7D2ScU7eOGwNlai8ynGLM0c2ArxtqGzOAZ8fvbj+k5YnZpSYpm5z9bxctDx+Y2YsUBN6jcrJbnt7mISHikvtS1KvSZ1roY9JvCCdUjlmgXN/aH16+pWdmjULhPW2LyjOBKRn2iemkLtEjb+Y1MXOBQZvFC6Lfy8zBLYGD5G45jTYXmNGZ5aUAFADUyrz3v/2nv4asJanA1ejS2apchbIngGCcxa9LCTAO4XL41dnisCfqfjmad+2h1+dAJtoge4+Vi93DHz49dm6wKQsooy2G+LSnsGaq+fvRSvi38gIgePVwQ+guMQ+a3I/IZXGSany/jjanEpBOuuWx7Ss9k0mDcsqM6n4KsCPilY0XJxqf1pBnKgOvkzFSxSzMr8s/s9UQoeybj1r/iw3cJ1BnVa4ouG+VLLSIpBKyOe5/j/1lcDM89fN5AAAAABJRU5ErkJggg==",alt:""})],-1),w("p",null,"",-1),w("span",{class:"no_login_mask"},null,-1)])),_:1,__:[3]}),B(e,{to:"",style:{position:"relative"}},{default:be(()=>t[4]||(t[4]=[w("div",{class:"relative notranslate"},[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABX1JREFUaEPdmd9PHFUUx8+5k/gPtLHtg/9Cn/FN0aaksVq1i9pCS0GQ5af8ain4IFGwVAT5VRCEUpe26Uy1Wk3TpqX2jf4fJrJj4oN9sabsHHPuvfNjd1luIcFc3JDMzL3LzPnc8z0/7izCLv/gLrcf/n8AVa9kCYAAJBsf+aPOEVCPxPOIAER6ni/kJ5xPnsdjpO/F3yP5iNL3L3x+5tH+vEUv8oACKHxw/BB+mLJTG4Tq8RFnpMkkRLFQifSChGvEd5Q0hYuQv4jLjw6YANZIGgnwGyA9BhAAEEB0RD7jMT1UYHzot+RTEjbGfk0O8j0C/gu00wUQBBpFMFkZAbzEk88JAIAovMyv+yptCPLqV32XKEjxwi6bJbRGyBpB9DIPLQEo910gSrHCjADV5VkZkijQu/LADoDTr/tuEFCKJZR5aIiBU68pDyCit3TfDoCaQywhSnHeuLJiyEI1h7KcHkAgeov37ACoPey7gQZYum8AOHM4SypNord41xKACt8lUB64fM8AUFuRJZRZEr2FO3YA1B3xXQBKUQCweNcAUHdEeYCDeP5nOwDqj/ouBSoLLdwxANS/oSoxA8zdtgOg4U0NAADf/mICOKokxEE8+6MdAI3HVBCzB+ZvGwAa3tISYoBbpQFaT2bLMMDOZA8UtRG60yiq4mGnUNBqkaDRyav7H5eq+um3Y4C5nwwAjcd0ECN6M9+XBmg/sZYiQDdqQHXzow4cRBv3hFELFE7LzktUjl970SsJ8K6SEM/P3jIApN+J68D0zU0AqtdSSOiq1pS48HHTxS1I1Kly8y2LSqI9V+1z/FENKFWOZw6UBGg+HteBmR8MAE3HdR1A9KZdO2KgpTIGuHTTANCciuvA1A07ANo+UL0Q14FpzwDQ8l4cxBPX7QHgXojlNnXDAND6vgZw0BtftgOgvcp3KaeCeOK6AaDthAIQAr2xjB0AHVVxGp24ZgBoP6liAGFzgLPpP8sErefVAbnLLFUDdOIZmt76onSc1pU4ABi/agD4uJo9gIACvNGl0g/rTf+RQiBXZn25A0ps7MNsWpQuAYam9m35VU4nA+gY+DpjAOg4pVsJgd7I4uYAQmwAEHLotxV5aZ8APp/cOkB3LWchSFFAMPadAaCzxidEWZg2BfgvN/vddSqIuSiOLuUvQJE7u84wgJSEN7Kwdb3uBFgPAxCk+L3RV5cNHuiuVTEgBHjD83YAnKvXEiKCkUUDQE+dr7IQgjc8ZwlAg/ZAAPDlgkFCPR/6xKmQs9CFWUsAGjmNgtwTX5w3AJxtUDHAHrAFoDetALiVuDhnADj3kQIQCN7QjB0e6EtzJVYAw9+YABo1gABvO1VzJ7JQX7PyQMAAswaA3kYVA8AAU3Z4oL8lzEIAF2YMAOfTcRYatAWgjQsZV2KAL4wATcoDXAc+m4g9MHT+yZ5n60/LHUeJRB71eXQd6ic5DgC5pK70RS4xKM/Dcf6uvpZDOYAgoA4ieDlggEsGD/Q1Kw9IgHEF8GnX73vRcVaEgIPqval8b8SpFnTboY5yQlkbbfZD4xOb+IDFzD9X8VsKInWU5+rI09FYwfXQ9HMAhHWAAdh4EM6KQDiIjjJM7Rc0hDY8HOcfb9Sr1fxf2SRHaBgfpeHIqyvHJRMbmwQJwRKAgwXdbFEv1NeiC5kDniNyTYDOCrLxAsARuEoCxqRCHC0jvcJFktLfkdO5YhltJKFQMvJfCmQUzg1O5b9+KQLob9FBLOCh48De0Hh0cHX9BadiYGDPk51Ildu9ZzFAaxQDUuNa76u5v52KgUm7jNdKzWf/RAPIAJXBjKvBUzuNNwIIB1fpH3uN3xCgv813WTbCwb/gmdNlo2ySmtnyBnu7wbZT/7frAf4FkN/ZT61gJRsAAAAASUVORK5CYII=",alt:""})],-1),w("p",null,"",-1),w("span",{class:"no_login_mask"},null,-1)])),_:1,__:[4]})]),t[5]||(t[5]=w("ul",{class:"client_fun flex justify_content-sb page_inner_padding"},null,-1))])])}}}),d2=pt(h2,[["__scopeId","data-v-15846cfb"]]),p2="/static/img/not_found.png",g2={},v2={"data-v-6d76e934":"","data-v-0628a4e9":"",class:"not_found text_align-center"};function m2(n,r){return le(),we("div",v2,r[0]||(r[0]=[w("img",{"data-v-6d76e934":"",src:p2,alt:""},null,-1),w("p",{"data-v-6d76e934":""},"",-1),w("button",{"data-v-6d76e934":""},[w("a",{"data-v-6d76e934":"",href:"/",class:"router-link-active"},"")],-1)]))}const y2=pt(g2,[["render",m2],["__scopeId","data-v-c981ed1e"]]),A2={class:"flex h_100_vh flex_direction-column"},_2={class:"tabs flex_none"},b2={class:"flex_auto overflow-hidden page_content"},S2={class:"load-box"},E2={class:"scroll-box"},w2={class:"left flex_none"},C2={class:"my-image"},T2={class:"van-image"},k2=["src"],I2={class:"right flex_auto overflow-hidden"},R2={key:0},P2={key:1},x2=Fe({__name:"HistoryView",setup(n){const r=ne(0),i=ne(!1),t=ne(!1);let e=1;const s=ne([]),a=async(c=1,f=20)=>{try{return(await Yt.get("/api/video/browse-history",{params:{page:c,size:f}})).data.list}catch(h){return console.error(h),[]}},o=c=>{const f=Math.floor(c/3600),h=Math.floor(c%3600/60),d=c%60,p=f>0?String(f).padStart(2,"0")+":":"",v=String(h).padStart(2,"0"),g=String(d).padStart(2,"0");return p+v+":"+g};Tt(async()=>{e=1,s.value=await a()});const l=async()=>{t.value=!1,e=1,console.log(213123),s.value=await a(),console.log(32323),i.value=!1},u=async()=>{e++;const c=await a(e);c.length?s.value.push(...c):t.value=!0,i.value=!1};return(c,f)=>{const h=xp,d=mo,p=yo,v=li("RouterLink"),g=n_,_=Yu,b=Ls,y=Os,m=Ds;return le(),we("div",A2,[B(h,{title:"","left-arrow":"",class:"relative nav-bar",style:{color:"aliceblue"},onClickLeft:At(ws).back},{left:be(()=>f[3]||(f[3]=[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAXNJREFUaEPt2TtKBEEYReFzMZMBd+ASXIGBmhgaGbkDlyGGJgYuQBAjAzP3YOoCRMHcRMTEkoYOOpgHXfU/ZrArmWD6cb6qoXqgxYYPbXg/EyB7BacV+LcrUEqZAXfAEXAl6aJmMlJ+Qn38E7DfR/8CM0nfYxHhgDnxXfOLpL2x8d3xoYAF8a/AoaS3tQZ4xIetgFd8CMAz3h3gHe8KiIh3AyyJP5D0XrPbLDrHfBuNjDdfgeh4U0BGvBkgK94EkBnfDMiObwKsQ3wr4BE4GezP3b9K831+1TOj+jlQSvkCtgc3OJX0sOqG1t+3AG6A80HQJ3As6dk6ctn1WgBbwC1wlomoBnTRpZR0RBNgHRDNgGyECSATYQbIQpgCMhDmgGiECyAS4QaIQrgCIhDuAG9ECMATEQbwQoQCliA+gF1J3YuOUSMcsADxA+xI6j5HjRTAAHHZvyO7lnQ/qrw/OA1QEzvvnAlgNZO115lWoHbmrM77A89a2jFh78iUAAAAAElFTkSuQmCC",alt:"",class:"left-arrow"},null,-1)])),right:be(()=>f[4]||(f[4]=[w("span",{class:"edit"},"",-1)])),_:1},8,["onClickLeft"]),w("div",_2,[B(p,{active:r.value,"onUpdate:active":f[0]||(f[0]=S=>r.value=S),"line-width":"3vw","line-height":"0.8vw",background:"transparent","title-active-color":"#e3e3e5"},{default:be(()=>[(le(),we(Xe,null,Ot([""],S=>B(d,{title:S,key:S},null,8,["title"])),64))]),_:1},8,["active"])]),w("div",b2,[B(m,null,{default:be(()=>[(le(),we(Xe,null,Ot([""],S=>B(y,{key:S},{default:be(()=>[w("div",S2,[w("div",E2,[B(b,{modelValue:i.value,"onUpdate:modelValue":f[2]||(f[2]=I=>i.value=I),onRefresh:l},{default:be(()=>[B(_,{"immediate-check":!1,loading:i.value,"onUpdate:loading":f[1]||(f[1]=I=>i.value=I),finished:t.value,"finished-text":"",onLoad:u,class:"series_list"},{default:be(()=>[(le(!0),we(Xe,null,Ot(s.value,I=>(le(),vt(g,{key:I.seriesShortId,style:{background:"#101012",padding:"0"},border:!1},{default:be(()=>[I.seriesShortId?(le(),vt(v,{key:0,class:"flex",to:{name:"play",params:{id:I.seriesShortId}}},{default:be(()=>[f[5]||(f[5]=w("div",{class:"select flex_none",style:{display:"none"}},[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAX9JREFUaEPtmb1KA0EUhb8JBEQDIsRSLazS7BsIi1aWVrGx9jX0BezzCFrYWgk+Qwq1sFBTmlLSBIwMEpzC2RnmZzeLd8vduXfPd87MLOwoWn6plutHAJpOUBKQBCIdqJ5CD4tjYATsRL4ntHwCnFOqO1sDF8B7g+KXmieUajcUYBFqXdK6UlmNdiUgAEmSkASS2BjRRBKIMC9JqSSQxMaIJpJAhHm20pM+DLfh7Bnmrs/lqiWgxV8PoNuB4SPcfDgcWiUAU/zFK1y+ecSbE6DYgKt9OH2C6bxaTJB43TInwH0Bh1sw/oSjsR0iWHxugH4XNETRs0NEic8NoPtXQUSLrwPABnGw+bvbeC/Yv5ZRzjVgvs9M4mUGe2s/W2WU+LoSWIKYEPpetPi6AczpdDv13Oddn4K6ppCpY70Dsy+XMs/nTQB4SvMbJgB+PuUbJQnk89avsyTg51O+Uf85gdb/Xm/5AUe+WZ2ss5xSJrMysJEkEGhcsjJJIJmVgY2+AQFptjFm78WRAAAAAElFTkSuQmCC",alt:"",style:{display:"none"}}),w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAQ1JREFUaEPtmcENwkAMBG36gEagASrhGUfUgeI8qYQGoBHog0N55EfCaiMRnbR5e2/t2fPn4lb555X3bxpg7QSVgBJYSGD2CkWcj2bvaym2XehDyd3tZbY5ZV5uUwf8GKB9rtX82PAwRGa3owZomrYMQvdyyMwHhZEURcS+FL8P8r7vJkHPJjAOMHcA2R8kQ/w1AISSLFICCAESLiRD/LUDEEqySAkgBEi4kAzx1w5AKMkiJYAQIOFCMsRfOwChJIuUAEKAhAvJEH/tAISSLFICCAESLiRD/LUDEEqySAkgBEi4kAzx1w5AKMkiJVD9425E5c/r1f/gIHfvrzL9pfwr7i9mSkAJLCRQ/RX6AOwKGEBPows1AAAAAElFTkSuQmCC",alt:""})],-1)),w("div",w2,[w("div",C2,[w("div",T2,[w("img",{class:"van-image__img",src:I.seriesCoverUrl,lazy:"loaded",style:{"object-fit":"fill"}},null,8,k2)])])]),w("div",I2,[w("h2",null,He(I.seriesTitle),1),I.lastEpisodeNumber?(le(),we("p",R2," "+He(I.lastEpisodeNumber<10?"0"+I.lastEpisodeNumber:I.lastEpisodeNumber)+" ",1)):(le(),we("p",P2,"")),w("p",null,He(I.lastVisitTime),1),w("p",null," "+He(o(I.durationSeconds)),1)])]),_:2,__:[5]},1032,["to"])):An("",!0)]),_:2},1024))),128))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"])])])]),_:2},1024)),64))]),_:1})])])}}}),D2=pt(x2,[["__scopeId","data-v-b9c5360f"]]),O2={};function L2(n,r){return le(),we("div")}const B2=pt(O2,[["render",L2]]),M2={class:"player-container"},F2={class:"title_box absolute notranslate"},N2="",U2=Fe({__name:"demoPlay",setup(n){const r=Ri(),i=ne(null);let t=null;return Tt(()=>{const e={id:"mse",playsinline:!0,plugins:[Oo,uv],ignores:["volume"],fullscreen:{useCssFullscreen:!!window.TelegramWebviewProxy},"x5-video-player-type":"h5","x5-video-player-fullscreen":"false","x5-video-orientation":"portraint",playbackRate:!1,fluid:!0,switchQuality:!0,definitionActive:"",url:"https://s3.656932.com/hls.v1.0.0.t1/tu6xqOnla9V/SuddWDEuySb/720/chunklist.m3u8"};t=new It(e),console.log(":",t)}),Wi(()=>{t&&t.destroy()}),(e,s)=>{const a=Dp;return le(),we(Xe,null,[w("div",M2,[w("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAXNJREFUaEPt2TtKBEEYReFzMZMBd+ASXIGBmhgaGbkDlyGGJgYuQBAjAzP3YOoCRMHcRMTEkoYOOpgHXfU/ZrArmWD6cb6qoXqgxYYPbXg/EyB7BacV+LcrUEqZAXfAEXAl6aJmMlJ+Qn38E7DfR/8CM0nfYxHhgDnxXfOLpL2x8d3xoYAF8a/AoaS3tQZ4xIetgFd8CMAz3h3gHe8KiIh3AyyJP5D0XrPbLDrHfBuNjDdfgeh4U0BGvBkgK94EkBnfDMiObwKsQ3wr4BE4GezP3b9K831+1TOj+jlQSvkCtgc3OJX0sOqG1t+3AG6A80HQJ3As6dk6ctn1WgBbwC1wlomoBnTRpZR0RBNgHRDNgGyECSATYQbIQpgCMhDmgGiECyAS4QaIQrgCIhDuAG9ECMATEQbwQoQCliA+gF1J3YuOUSMcsADxA+xI6j5HjRTAAHHZvyO7lnQ/qrw/OA1QEzvvnAlgNZO115lWoHbmrM77A89a2jFh78iUAAAAAElFTkSuQmCC",alt:"",class:"left-arrow",onClick:s[0]||(s[0]=o=>At(r).back())}),w("div",F2,[B(a,{scrollable:!1,text:N2,background:"transparent",color:"#fff"})]),w("div",{id:"mse",ref_key:"playerRef",ref:i},null,512)]),s[1]||(s[1]=w("div",{class:"bar justify_content-sb van-hairline--bottom"},[w("div",{class:"left flex align_item-center"})],-1))],64)}}}),H2=pt(U2,[["__scopeId","data-v-37bc2244"]]),ws=L0({history:u0("/"),routes:[{path:"/",component:ck,name:"main",children:[{path:"",component:Y1,name:"homelayout",children:[{path:"",name:"home",component:Jr},{path:"movie",name:"movie",component:Jr},{path:"drama",name:"drama",component:Jr},{path:"variety",name:"variety",component:Jr}]},{path:"/discovery",name:"discovery",component:ua},{path:"vip",name:"vip",component:ua},{path:"rank",name:"rank",component:ua},{path:"user",name:"user",component:d2}]},{path:"/login",name:"login",component:mk},{path:"/play1",name:"play1",component:H2},{path:"/search",name:"search",component:r2,meta:{requiresAuth:!0}},{path:"/play/:id",name:"play",component:tk,meta:{requiresAuth:!0}},{path:"/list/:id",name:"list",component:Tk,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:y2},{path:"/history",name:"history",component:D2},{path:"/favorite",name:"favorite",component:B2},{path:"/message",name:"message",component:ua}]});ws.beforeEach((n,r,i)=>{const t=localStorage.getItem("Authorization");n.meta.requiresAuth&&!t?i({path:"/login",query:{redirect:n.fullPath}}):i()});const fc=wy(Dy);fc.use(Iy());fc.use(ws);fc.mount("#app");
