import{d as M,r as m,l as H,b as d,c as r,f as s,w as a,F as h,e as b,i as C,x as L,h as X,t as p,o as l,N as y,_ as N}from"./index-D9ZnYJCG.js";import{S as O,a as Y,L as F}from"./index-BDQWwW3j.js";import{P as G}from"./index-OVSUO4CT.js";import{C as P}from"./index-iYyPFA3O.js";import{T as K,a as T}from"./index-CACrcmt3.js";import{N as V}from"./index-Ces1UyM9.js";import{s as j}from"./request-CAwET2Ge.js";import"./index-BxLbqEsk.js";import"./use-route-BjLsmAib.js";import"./use-id-BOlkCtYm.js";import"./use-placeholder-BS3Syb8x.js";const z={class:"flex h_100_vh flex_direction-column"},W={class:"tabs flex_none"},q={class:"flex_auto overflow-hidden page_content"},Z={class:"load-box"},$={class:"scroll-box"},ee={class:"left flex_none"},te={class:"my-image"},se={class:"van-image"},ae=["src"],oe={class:"right flex_auto overflow-hidden"},ne={key:0},le={key:1},re=M({__name:"HistoryView",setup(ie){const B=m(0),o=m(!1),g=m(!1),f=m(!1);let u=1;const v=m([]),_=async(i=1,e=20)=>{o.value=!0;try{const n=await j.get("/api/video/browse-history",{params:{page:i,size:e}}),A=n.data.data.list.length??0;g.value=A===0||A<e,v.value.push(...n.data.data.list??[])}catch(n){console.error(n),f.value=!0,u--}o.value=!1},k=i=>{const e=Math.floor(i/3600),n=Math.floor(i%3600/60),A=i%60,E=e>0?String(e).padStart(2,"0")+":":"",S=String(n).padStart(2,"0"),w=String(A).padStart(2,"0");return E+S+":"+w};H(async()=>{u=1,await _()});const R=async()=>{g.value=!1,u=1,v.value=[],await _(),o.value=!1},U=async()=>{u++,await _(u),o.value=!1},Q=()=>{window.history.state?.back?y.back():y.push("/")};return(i,e)=>{const n=V,A=T,E=K,S=X("RouterLink"),w=P,x=F,D=G,I=Y,J=O;return l(),d("div",z,[r(n,{title:"历史记录","left-arrow":"",class:"relative nav-bar",style:{color:"aliceblue"},onClickLeft:Q},{left:a(()=>e[4]||(e[4]=[s("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAXNJREFUaEPt2TtKBEEYReFzMZMBd+ASXIGBmhgaGbkDlyGGJgYuQBAjAzP3YOoCRMHcRMTEkoYOOpgHXfU/ZrArmWD6cb6qoXqgxYYPbXg/EyB7BacV+LcrUEqZAXfAEXAl6aJmMlJ+Qn38E7DfR/8CM0nfYxHhgDnxXfOLpL2x8d3xoYAF8a/AoaS3tQZ4xIetgFd8CMAz3h3gHe8KiIh3AyyJP5D0XrPbLDrHfBuNjDdfgeh4U0BGvBkgK94EkBnfDMiObwKsQ3wr4BE4GezP3b9K831+1TOj+jlQSvkCtgc3OJX0sOqG1t+3AG6A80HQJ3As6dk6ctn1WgBbwC1wlomoBnTRpZR0RBNgHRDNgGyECSATYQbIQpgCMhDmgGiECyAS4QaIQrgCIhDuAG9ECMATEQbwQoQCliA+gF1J3YuOUSMcsADxA+xI6j5HjRTAAHHZvyO7lnQ/qrw/OA1QEzvvnAlgNZO115lWoHbmrM77A89a2jFh78iUAAAAAElFTkSuQmCC",alt:"",class:"left-arrow"},null,-1)])),right:a(()=>e[5]||(e[5]=[])),_:1}),s("div",W,[r(E,{active:B.value,"onUpdate:active":e[0]||(e[0]=c=>B.value=c),"line-width":"3vw","line-height":"0.8vw",background:"transparent","title-active-color":"#e3e3e5"},{default:a(()=>[(l(),d(h,null,b(["剧集"],c=>r(A,{title:c,key:c},null,8,["title"])),64))]),_:1},8,["active"])]),s("div",q,[r(J,null,{default:a(()=>[(l(),d(h,null,b(["剧集"],c=>r(I,{key:c},{default:a(()=>[s("div",Z,[s("div",$,[r(D,{modelValue:o.value,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value=t),onRefresh:R,"success-text":"刷新成功"},{default:a(()=>[r(x,{"immediate-check":!1,loading:o.value,"onUpdate:loading":e[1]||(e[1]=t=>o.value=t),finished:g.value,"finished-text":"没有更多了",onLoad:U,class:"series_list",error:f.value,"onUpdate:error":e[2]||(e[2]=t=>f.value=t),"error-text":"请求失败，点击重新加载"},{default:a(()=>[(l(!0),d(h,null,b(v.value,t=>(l(),C(w,{key:t.seriesShortId,style:{background:"#101012",padding:"0"},border:!1},{default:a(()=>[t.seriesShortId?(l(),C(S,{key:0,class:"flex",to:{name:"play",params:{id:t.seriesShortId}}},{default:a(()=>[e[6]||(e[6]=s("div",{class:"select flex_none",style:{display:"none"}},[s("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAX9JREFUaEPtmb1KA0EUhb8JBEQDIsRSLazS7BsIi1aWVrGx9jX0BezzCFrYWgk+Qwq1sFBTmlLSBIwMEpzC2RnmZzeLd8vduXfPd87MLOwoWn6plutHAJpOUBKQBCIdqJ5CD4tjYATsRL4ntHwCnFOqO1sDF8B7g+KXmieUajcUYBFqXdK6UlmNdiUgAEmSkASS2BjRRBKIMC9JqSSQxMaIJpJAhHm20pM+DLfh7Bnmrs/lqiWgxV8PoNuB4SPcfDgcWiUAU/zFK1y+ecSbE6DYgKt9OH2C6bxaTJB43TInwH0Bh1sw/oSjsR0iWHxugH4XNETRs0NEic8NoPtXQUSLrwPABnGw+bvbeC/Yv5ZRzjVgvs9M4mUGe2s/W2WU+LoSWIKYEPpetPi6AczpdDv13Oddn4K6ppCpY70Dsy+XMs/nTQB4SvMbJgB+PuUbJQnk89avsyTg51O+Uf85gdb/Xm/5AUe+WZ2ss5xSJrMysJEkEGhcsjJJIJmVgY2+AQFptjFm78WRAAAAAElFTkSuQmCC",alt:"",style:{display:"none"}}),s("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAQ1JREFUaEPtmcENwkAMBG36gEagASrhGUfUgeI8qYQGoBHog0N55EfCaiMRnbR5e2/t2fPn4lb555X3bxpg7QSVgBJYSGD2CkWcj2bvaym2XehDyd3tZbY5ZV5uUwf8GKB9rtX82PAwRGa3owZomrYMQvdyyMwHhZEURcS+FL8P8r7vJkHPJjAOMHcA2R8kQ/w1AISSLFICCAESLiRD/LUDEEqySAkgBEi4kAzx1w5AKMkiJYAQIOFCMsRfOwChJIuUAEKAhAvJEH/tAISSLFICCAESLiRD/LUDEEqySAkgBEi4kAzx1w5AKMkiJVD9425E5c/r1f/gIHfvrzL9pfwr7i9mSkAJLCRQ/RX6AOwKGEBPows1AAAAAElFTkSuQmCC",alt:""})],-1)),s("div",ee,[s("div",te,[s("div",se,[s("img",{class:"van-image__img",src:t.seriesCoverUrl,lazy:"loaded",style:{"object-fit":"fill"}},null,8,ae)])])]),s("div",oe,[s("h2",null,p(t.seriesTitle),1),t.lastEpisodeNumber?(l(),d("p",ne," 观看至"+p(t.lastEpisodeNumber<10?"0"+t.lastEpisodeNumber:t.lastEpisodeNumber)+"集 ",1)):(l(),d("p",le,"未观看")),s("p",null,p(t.lastVisitTime),1),s("p",null," 播放进度"+p(k(t.durationSeconds)),1)])]),_:2,__:[6]},1032,["to"])):L("",!0)]),_:2},1024))),128))]),_:1},8,["loading","finished","error"])]),_:1},8,["modelValue"])])])]),_:2},1024)),64))]),_:1})])])}}}),Se=N(re,[["__scopeId","data-v-e81fe847"]]);export{Se as default};
