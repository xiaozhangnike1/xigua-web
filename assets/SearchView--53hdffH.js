import{d as T,r as l,b as c,f as s,i as H,x as g,O as P,s as I,P as U,v as L,w as n,c as i,p as j,F as B,e as E,h as z,o as r,t as d,_ as M}from"./index-BckS7FqH.js";import{S as V,a as Z,L as J}from"./index-CfKz4khQ.js";import{P as K}from"./index-CP40OF9I.js";import{T as q,a as W}from"./index-qsm0ixf2.js";import{s as $}from"./request-BGbGRkHZ.js";import"./index-Iz19IypR.js";import"./use-touch-pNhPEBER.js";import"./constant-CRwwH2e9.js";import"./use-expose-DZEz3PMt.js";import"./on-popup-reopen-BRGeLQS4.js";import"./index-BIjBMK-m.js";import"./use-id-CevMzFzY.js";import"./use-route-BqM6O8Fl.js";import"./interceptor-BIstgy08.js";const ss="/static/img/no_data.png",ts={class:"serach-page flex_direction-column h_100_vh"},es={class:"top van-hairline--bottom"},as={class:"nav-bar relative"},os={class:"center flex_auto"},ls={class:"search-bar"},ns={class:"input-box notranslate"},is={class:"handler absolute flex align_item-center"},rs={class:"main flex_auto"},cs={key:2,class:"result"},ds={class:"load-box"},us={key:0,class:"empty"},vs={class:"main-text"},As={class:"scroll-box"},_s={class:"video"},ps={class:"video-info"},fs={class:"left"},ms={class:"preview"},gs={class:"my-image"},hs={class:"van-image"},ws=["src"],bs={class:"video-info"},xs={class:"info-b"},ys={class:"update flex_auto"},Rs={class:"right flex_direction-column"},Bs={class:"right-t"},Es={class:"van-ellipsis"},ks={class:"date"},Cs={class:"star van-ellipsis"},Ss={class:"introduce_info"},Os={class:"right-b flex align_item-center justify_content-sb"},Is=T({__name:"SearchView",setup(Ds){const k=j(),a=l(""),v=l(!1),A=l(!1),w=l(!1),b=l(!1);let _=1;const p=l([]),C=l(0),x=l(!1),D=()=>{a.value=""},y=async(O=1,t=20)=>{if(v.value=!0,a.value)try{const u=await $.get("/api/list/fuzzysearch",{params:{keyword:a.value,page:O,size:t}}),R=u.data.data.list.filter(m=>m.title===a.value),f=u.data.data.list.filter(m=>m.title!==a.value),h=[...R,...f];p.value.push(...h),h.length<t&&(A.value=!0)}catch(u){console.error("SearchView.vue searchBtn error",u),b.value=!0,_--}else A.value=!0;w.value=!0,v.value=!1},S=async()=>{p.value=[],_=1,A.value=!1,await y(1)},F=async()=>{},N=async()=>{p.value=[],_=1,A.value=!1,await y(1),x.value=!1},Q=async()=>{_++,await y(_),v.value=!1},X=()=>{window.history.state?.back?k.back():k.push("/")};return(O,t)=>{const u=W,R=q,f=z("RouterLink"),h=J,m=K,Y=Z,G=V;return r(),c("div",ts,[s("div",es,[s("div",as,[s("div",{class:"left",onClick:X},t[5]||(t[5]=[s("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAXNJREFUaEPt2TtKBEEYReFzMZMBd+ASXIGBmhgaGbkDlyGGJgYuQBAjAzP3YOoCRMHcRMTEkoYOOpgHXfU/ZrArmWD6cb6qoXqgxYYPbXg/EyB7BacV+LcrUEqZAXfAEXAl6aJmMlJ+Qn38E7DfR/8CM0nfYxHhgDnxXfOLpL2x8d3xoYAF8a/AoaS3tQZ4xIetgFd8CMAz3h3gHe8KiIh3AyyJP5D0XrPbLDrHfBuNjDdfgeh4U0BGvBkgK94EkBnfDMiObwKsQ3wr4BE4GezP3b9K831+1TOj+jlQSvkCtgc3OJX0sOqG1t+3AG6A80HQJ3As6dk6ctn1WgBbwC1wlomoBnTRpZR0RBNgHRDNgGyECSATYQbIQpgCMhDmgGiECyAS4QaIQrgCIhDuAG9ECMATEQbwQoQCliA+gF1J3YuOUSMcsADxA+xI6j5HjRTAAHHZvyO7lnQ/qrw/OA1QEzvvnAlgNZO115lWoHbmrM77A89a2jFh78iUAAAAAElFTkSuQmCC",alt:"",class:"left-arrow"},null,-1)])),s("div",os,[s("form",{onSubmit:P(S,["prevent"])},[s("div",ls,[s("div",ns,[I(s("input",{placeholder:"",type:"text",maxlength:"100",autofocus:"true","onUpdate:modelValue":t[0]||(t[0]=o=>a.value=o)},null,512),[[U,a.value]]),s("div",is,[I(s("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAwRJREFUaEPtmEuojVEUx39/hDwzEKUMFHlk4jERpcw8Jh5JlBEjE5IRI0YSEyNGiqSLicdMKTLxmOgitwyUIgN53ZBrOeu2z23fr+985/vOd+697Tp7dOqsvb/1W+u/1n6IxIcS958ewERnsJeBXgZqRqAnoWYAzWwqsBRYAiwE5gHTwv+/gS/AR+AdMCDpT83gD0+vnQEzc0c3AqsBhygz3PmXwGNJDtbx6BjAzCYDm4ENgP/uZAwBTxrrPJTkvyuPjgDMbCawF1hc+Yv5E94DNyT9rLpeZQAzmw8cAObmfOw78AZ4C3wCBoPNDGABsAxYDszOmfsVuCrpcxWISgAh8odznP/hMgBeSPpX5ICZTQLWBPnNytg6xKUqmSgNEDR/MEc2A40CviXpV5XImdn0RiHvCp0rnupyulK2JqoAbAE2ZZx8BtxvF/VWYCEbW4F1GZtHkh6UCUgpgNAqj2S6jUf+eqfON50LEPsymfCOdLFMiy0LsANYG0XENe8fGJFNkNhOoF/Sq7zomdlKYBVwO5ZIkJMHKK6J55LutMtCW4Cwwx7PbFJ3Jbl8hkdwfnejFa4AvIhvZiGC827jRfw62Iz0fjNzGW2PHPbN7ly7HbsMgEdsT7Swt8oLsXTMzP93u+YYBZFxvmnjmerLSOlopsX2SeovykIZgKx8nkq6Fy/awsFhiGDXjHwuYASxDVgfrd1WRmUADgGLokWvSfICHjUKINzOZVPofJCiHwb3R7YfJF2um4ETgO+kzXFe0re8RVtAxKa59RFlYA5wLJowKOlsXYBTmfZ5RtLfVosWQBQ6HzIwBTgZrT0k6fR4A3gn8qKOZeM+OIAXpXeg3GFmYwKQvISSL+I6bbTZ57OSarXZjUkb7XQjG9H7RG9kfs9N9ygR2lu6h7kA4C8P6R6nA0S6F5oA4E8n6V4pA4Q/p6R5qY8OXOk+q0QQ6T5sRRDpPi3GR8lkH3ez5+Fkn9eLLhvj8V/bO/F4OFHnGz2AOtHrxtxeBroRxTpr9DJQJ3rdmPsf4S66QDoGjn0AAAAASUVORK5CYII=",alt:"",class:"close",onClick:D},null,512),[[L,a.value.length]])])]),s("div",{class:"button",onClick:S},"搜索")])],32)]),t[6]||(t[6]=s("div",{class:"right"},null,-1))]),w.value?(r(),H(R,{key:0,active:C.value,"onUpdate:active":t[1]||(t[1]=o=>C.value=o),onChange:F,role:""},{default:n(()=>[(r(),c(B,null,E(["视频"],o=>i(u,{key:o,title:o},null,8,["title"])),64))]),_:1},8,["active"])):g("",!0)]),s("div",rs,[g("",!0),g("",!0),w.value?(r(),c("div",cs,[i(G,{loop:!1,duration:200,class:"my-swipe","show-indicators":!1,"lazy-render":!1},{default:n(()=>[(r(),c(B,null,E(["视频"],o=>i(Y,{key:o},{default:n(()=>[s("div",ds,[p.value?.length==0?(r(),c("div",us,[t[7]||(t[7]=s("img",{src:ss,alt:""},null,-1)),s("h4",vs,'未找到包含"'+d(a.value)+'"的视频',1)])):g("",!0),s("div",As,[i(m,{modelValue:x.value,"onUpdate:modelValue":t[4]||(t[4]=e=>x.value=e),onRefresh:N,"success-text":"刷新成功"},{default:n(()=>[i(h,{loading:v.value,"onUpdate:loading":t[2]||(t[2]=e=>v.value=e),finished:A.value,"finished-text":"没有更多了",onLoad:Q,error:b.value,"onUpdate:error":t[3]||(t[3]=e=>b.value=e),"error-text":"请求失败，点击重新加载"},{default:n(()=>[s("div",_s,[(r(!0),c(B,null,E(p.value,e=>(r(),c("div",{class:"series",key:e.id},[s("div",ps,[s("div",fs,[s("div",ms,[s("div",gs,[s("div",hs,[i(f,{to:{name:"play",params:{id:e.shortId}}},{default:n(()=>[s("img",{class:"van-image__img",src:e.coverUrl,lazy:"loaded",style:{"object-fit":"fill"}},null,8,ws)]),_:2},1032,["to"])])]),s("div",bs,[t[8]||(t[8]=s("div",{class:"score"},null,-1)),s("div",xs,[s("div",ys,d(e.upStatus),1)])])])]),s("div",Rs,[i(f,{to:{name:"play",params:{id:e.shortId}}},{default:n(()=>[s("div",Bs,[s("h3",Es,d(e.title),1),s("div",ks,[s("span",null,d(e.createdAt.split("-")[0]),1),s("i",null,d(e.type),1)]),s("p",Cs," 主演："+d(e.author),1),s("div",Ss,d(e.description.slice(0,50))+" ... ",1)])]),_:2},1032,["to"]),s("div",Os,[i(f,{to:{name:"play",params:{id:e.shortId}}},{default:n(()=>t[9]||(t[9]=[s("button",{class:"flex_none"}," 立即播放 ",-1)])),_:2,__:[9]},1032,["to"])])])])]))),128))])]),_:1},8,["loading","finished","error"])]),_:1},8,["modelValue"])])])]),_:2},1024)),64))]),_:1})])):g("",!0)])])}}}),Vs=M(Is,[["__scopeId","data-v-5fec181a"]]);export{Vs as default};
