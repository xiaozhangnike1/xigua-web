import{r as C,S as Le,E as He,G as Oe,d as M,L as de,a as R,H as $,c as g,n as z,l as Ne,k as Ee,U as We,s as De,m as Me,g as Ve,y as Ze,V as Ue,D as Fe,v as je}from"./index-Ha6_R1b4.js";import{K as q,R as ue,S as fe,T as Xe,G as Ge,o as ve,m as H,k as he,n as A,c as V,U as be,V as me,e as ge,g as Ke,h as we,W as J,M as O,O as ye,Q as Ye,w as p,X as K,t as D,u as qe,J as Je,v as oe,j as Q,B as Qe,s as pe,Y as ie,b as et,a as tt,E as re,d as nt,L as at}from"./index-vKgYhTR5.js";import{u as xe}from"./use-id-BZXBEZ28.js";import{u as ee}from"./use-touch-CdP2QCc-.js";import{a as lt,r as ot}from"./use-route-Bi0Ce5lm.js";import{S as it,u as rt,a as st}from"./index-CBGIZuza.js";import{c as ct}from"./interceptor-fgq4YbAq.js";function dt(e,a,i){let l,s=0;const t=e.scrollLeft,r=i===0?1:Math.round(i*1e3/16);let c=t;function h(){ue(l)}function m(){c+=(a-t)/r,e.scrollLeft=c,++s<r&&(l=q(m))}return m(),h}function ut(e,a,i,l){let s,t=fe(e);const r=t<a,c=i===0?1:Math.round(i*1e3/16),h=(a-t)/c;function m(){ue(s)}function y(){t+=h,(r&&t>a||!r&&t<a)&&(t=a),Xe(e,t),r&&t<a||!r&&t>a?s=q(y):l&&(s=q(l))}return y(),m}function ft(){const e=C([]),a=[];return Le(()=>{e.value=[]}),[e,l=>(a[l]||(a[l]=s=>{e.value[l]=s}),a[l])]}function Se(e,a){if(!Ge||!window.IntersectionObserver)return;const i=new IntersectionObserver(t=>{a(t[0].intersectionRatio>0)},{root:document.body}),l=()=>{e.value&&i.observe(e.value)},s=()=>{e.value&&i.unobserve(e.value)};He(s),Oe(s),ve(l)}const[vt,ht]=V("sticky"),bt={zIndex:A,position:he("top"),container:Object,offsetTop:H(0),offsetBottom:H(0)};var mt=M({name:vt,props:bt,emits:["scroll","change"],setup(e,{emit:a,slots:i}){const l=C(),s=be(l),t=de({fixed:!1,width:0,height:0,transform:0}),r=C(!1),c=R(()=>me(e.position==="top"?e.offsetTop:e.offsetBottom)),h=R(()=>{if(r.value)return;const{fixed:f,height:T,width:d}=t;if(f)return{width:`${d}px`,height:`${T}px`}}),m=R(()=>{if(!t.fixed||r.value)return;const f=ge(Ke(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${c.value}px`});return t.transform&&(f.transform=`translate3d(0, ${t.transform}px, 0)`),f}),y=f=>a("scroll",{scrollTop:f,isFixed:t.fixed}),I=()=>{if(!l.value||J(l))return;const{container:f,position:T}=e,d=O(l),S=fe(window);if(t.width=d.width,t.height=d.height,T==="top")if(f){const u=O(f),k=u.bottom-c.value-t.height;t.fixed=c.value>d.top&&u.bottom>0,t.transform=k<0?k:0}else t.fixed=c.value>d.top;else{const{clientHeight:u}=document.documentElement;if(f){const k=O(f),b=u-k.top-c.value-t.height;t.fixed=u-c.value<d.bottom&&u>k.top,t.transform=b<0?-b:0}else t.fixed=u-c.value<d.bottom}y(S)};return $(()=>t.fixed,f=>a("change",f)),we("scroll",I,{target:s,passive:!0}),Se(l,I),$([ye,Ye],()=>{!l.value||J(l)||!t.fixed||(r.value=!0,z(()=>{const f=O(l);t.width=f.width,t.height=f.height,r.value=!1}))}),()=>{var f;return g("div",{ref:l,style:h.value},[g("div",{class:ht({fixed:t.fixed&&!r.value}),style:m.value},[(f=i.default)==null?void 0:f.call(i)])])}}});const gt=p(mt),[wt,se]=V("tabs");var yt=M({name:wt,props:{count:K(Number),inited:Boolean,animated:Boolean,duration:K(A),swipeable:Boolean,lazyRender:Boolean,currentIndex:K(Number)},emits:["change"],setup(e,{emit:a,slots:i}){const l=C(),s=c=>a("change",c),t=()=>{var c;const h=(c=i.default)==null?void 0:c.call(i);return e.animated||e.swipeable?g(it,{ref:l,loop:!1,class:se("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:s},{default:()=>[h]}):h},r=c=>{const h=l.value;h&&h.state.active!==c&&h.swipeTo(c,{immediate:!e.inited})};return $(()=>e.currentIndex,r),Ne(()=>{r(e.currentIndex)}),ee({swipeRef:l}),()=>g("div",{class:se("content",{animated:e.animated||e.swipeable})},[t()])}});const[Te,G]=V("tabs"),xt={type:he("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:H(0),duration:H(.3),animated:Boolean,ellipsis:D,swipeable:Boolean,scrollspy:Boolean,offsetTop:H(0),background:String,lazyRender:D,showHeader:D,lineWidth:A,lineHeight:A,beforeChange:Function,swipeThreshold:H(5),titleActiveColor:String,titleInactiveColor:String},Ce=Symbol(Te);var St=M({name:Te,props:xt,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:a,slots:i}){let l,s,t,r,c;const h=C(),m=C(),y=C(),I=C(),f=xe(),T=be(h),[d,S]=ft(),{children:u,linkChildren:k}=qe(Ce),b=de({inited:!1,position:"",lineStyle:{},currentIndex:-1}),N=R(()=>u.length>+e.swipeThreshold||!e.ellipsis||e.shrink),Z=R(()=>({borderColor:e.color,background:e.background})),E=(n,o)=>{var v;return(v=n.name)!=null?v:o},U=R(()=>{const n=u[b.currentIndex];if(n)return E(n,b.currentIndex)}),L=R(()=>me(e.offsetTop)),te=R(()=>e.sticky?L.value+l:0),W=n=>{const o=m.value,v=d.value;if(!N.value||!o||!v||!v[b.currentIndex])return;const x=v[b.currentIndex].$el,w=x.offsetLeft-(o.offsetWidth-x.offsetWidth)/2;r&&r(),r=dt(o,w,n?0:+e.duration)},P=()=>{const n=b.inited;z(()=>{const o=d.value;if(!o||!o[b.currentIndex]||e.type!=="line"||J(h.value))return;const v=o[b.currentIndex].$el,{lineWidth:x,lineHeight:w}=e,B=v.offsetLeft+v.offsetWidth/2,_={width:oe(x),backgroundColor:e.color,transform:`translateX(${B}px) translateX(-50%)`};if(n&&(_.transitionDuration=`${e.duration}s`),Q(w)){const X=oe(w);_.height=X,_.borderRadius=X}b.lineStyle=_})},Re=n=>{const o=n<b.currentIndex?-1:1;for(;n>=0&&n<u.length;){if(!u[n].disabled)return n;n+=o}},F=(n,o)=>{const v=Re(n);if(!Q(v))return;const x=u[v],w=E(x,v),B=b.currentIndex!==null;b.currentIndex!==v&&(b.currentIndex=v,o||W(),P()),w!==e.active&&(a("update:active",w),B&&a("change",w,x.title)),t&&!e.scrollspy&&pe(Math.ceil(ie(h.value)-L.value))},j=(n,o)=>{const v=u.findIndex((x,w)=>E(x,w)===n);F(v===-1?0:v,o)},ne=(n=!1)=>{if(e.scrollspy){const o=u[b.currentIndex].$el;if(o&&T.value){const v=ie(o,T.value)-te.value;s=!0,c&&c(),c=ut(T.value,v,n?0:+e.duration,()=>{s=!1})}}},Ie=(n,o,v)=>{const{title:x,disabled:w}=u[o],B=E(u[o],o);w||(ct(e.beforeChange,{args:[B],done:()=>{F(o),ne()}}),lt(n)),a("clickTab",{name:B,title:x,event:v,disabled:w})},ke=n=>{t=n.isFixed,a("scroll",n)},Be=n=>{z(()=>{j(n),ne(!0)})},$e=()=>{for(let n=0;n<u.length;n++){const{top:o}=O(u[n].$el);if(o>te.value)return n===0?0:n-1}return u.length-1},Pe=()=>{if(e.scrollspy&&!s){const n=$e();F(n)}},_e=()=>{if(e.type==="line"&&u.length)return g("div",{class:G("line"),style:b.lineStyle},null)},ae=()=>{var n,o,v;const{type:x,border:w,sticky:B}=e,_=[g("div",{ref:B?void 0:y,class:[G("wrap"),{[Qe]:x==="line"&&w}]},[g("div",{ref:m,role:"tablist",class:G("nav",[x,{shrink:e.shrink,complete:N.value}]),style:Z.value,"aria-orientation":"horizontal"},[(n=i["nav-left"])==null?void 0:n.call(i),u.map(X=>X.renderTitle(Ie)),_e(),(o=i["nav-right"])==null?void 0:o.call(i)])]),(v=i["nav-bottom"])==null?void 0:v.call(i)];return B?g("div",{ref:y},[_]):_},le=()=>{P(),z(()=>{var n,o;W(!0),(o=(n=I.value)==null?void 0:n.swipeRef.value)==null||o.resize()})};$(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],P),$(ye,le),$(()=>e.active,n=>{n!==U.value&&j(n)}),$(()=>u.length,()=>{b.inited&&(j(e.active),P(),z(()=>{W(!0)}))});const ze=()=>{j(e.active,!0),z(()=>{b.inited=!0,y.value&&(l=O(y.value).height),W(!0)})},Ae=(n,o)=>a("rendered",n,o);return ee({resize:le,scrollTo:Be}),Ee(P),Je(P),ve(ze),Se(h,P),we("scroll",Pe,{target:T,passive:!0}),k({id:f,props:e,setLine:P,scrollable:N,onRendered:Ae,currentName:U,setTitleRefs:S,scrollIntoView:W}),()=>g("div",{ref:h,class:G([e.type])},[e.showHeader?e.sticky?g(gt,{container:h.value,offsetTop:L.value,onScroll:ke},{default:()=>[ae()]}):ae():null,g(yt,{ref:I,count:u.length,inited:b.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:b.currentIndex,onChange:F},{default:()=>{var n;return[(n=i.default)==null?void 0:n.call(i)]}})])}});const[Tt,ce]=V("tab"),Ct=M({name:Tt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:A,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:D},setup(e,{slots:a}){const i=R(()=>{const s={},{type:t,color:r,disabled:c,isActive:h,activeColor:m,inactiveColor:y}=e;r&&t==="card"&&(s.borderColor=r,c||(h?s.backgroundColor=r:s.color=r));const f=h?m:y;return f&&(s.color=f),s}),l=()=>{const s=g("span",{class:ce("text",{ellipsis:!e.scrollable})},[a.title?a.title():e.title]);return e.dot||Q(e.badge)&&e.badge!==""?g(et,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[s]}):s};return()=>g("div",{id:e.id,role:"tab",class:[ce([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:i.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls,"data-allow-mismatch":"attribute"},[l()])}}),[Rt,Y]=V("tab"),It=ge({},ot,{dot:Boolean,name:A,badge:A,title:String,disabled:Boolean,titleClass:nt,titleStyle:[String,Object],showZeroBadge:D});var kt=M({name:Rt,props:It,setup(e,{slots:a}){const i=xe(),l=C(!1),s=Ve(),{parent:t,index:r}=tt(Ce);if(!t)return;const c=()=>{var d;return(d=e.name)!=null?d:r.value},h=()=>{l.value=!0,t.props.lazyRender&&z(()=>{t.onRendered(c(),e.title)})},m=R(()=>{const d=c()===t.currentName.value;return d&&!l.value&&h(),d}),y=C(""),I=C("");We(()=>{const{titleClass:d,titleStyle:S}=e;y.value=d?Ze(d):"",I.value=S&&typeof S!="string"?Ue(Fe(S)):S});const f=d=>g(Ct,Me({key:i,id:`${t.id}-${r.value}`,ref:t.setTitleRefs(r.value),style:I.value,class:y.value,isActive:m.value,controls:i,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:S=>d(s.proxy,r.value,S)},re(t.props,["type","color","shrink"]),re(e,["dot","badge","title","disabled","showZeroBadge"])),{title:a.title}),T=C(!m.value);return $(m,d=>{d?T.value=!1:at(()=>{T.value=!0})}),$(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),rt(m),ee({id:i,renderTitle:f}),()=>{var d;const S=`${t.id}-${r.value}`,{animated:u,swipeable:k,scrollspy:b,lazyRender:N}=t.props;if(!a.default&&!u)return;const Z=b||m.value;if(u||k)return g(st,{id:i,role:"tabpanel",class:Y("panel-wrapper",{inactive:T.value}),tabindex:m.value?0:-1,"aria-hidden":!m.value,"aria-labelledby":S,"data-allow-mismatch":"attribute"},{default:()=>{var L;return[g("div",{class:Y("panel")},[(L=a.default)==null?void 0:L.call(a)])]}});const U=l.value||b||!N?(d=a.default)==null?void 0:d.call(a):null;return De(g("div",{id:i,role:"tabpanel",class:Y("panel"),tabindex:Z?0:-1,"aria-labelledby":S,"data-allow-mismatch":"attribute"},[U]),[[je,Z]])}}});const Ht=p(kt),Ot=p(St);export{Ot as T,Ht as a};
